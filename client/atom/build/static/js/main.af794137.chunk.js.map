{"version":3,"sources":["images/logo.svg","../../shared/components/LookerHelpers/pblsession.js","../../shared/components/Utils/auth.js","components/SignIn/styles.js","config/SignInContent.js","config/UserPermissionsContent.js","config/TopBarContent.js","components/SignIn/SignIn.js","config/theme.js","components/Home/styles.js","components/Home/LeftDrawer.js","../../shared/components/Accessories/Highlight.js","../../shared/components/NaturalLanguage.js","../../shared/components/VectorThumbnail.js","../../shared/components/PopularAnalysis.js","../../shared/components/Accessories/Loader.js","../../shared/components/Accessories/CodeFlyout.js","../../shared/components/Accessories/UserPermissionsModal.js","../../shared/components/styles.js","../../shared/components/PDFViewer.js","../../shared/components/EmbeddedExplore.js","../../shared/utils/auth.js","../../shared/components/UserMenu.js","../../shared/components/Accessories/NumberToColoredPercent.js","../../shared/components/Filters/AutoComplete.js","../../shared/components/Filters/ToggleTile.js","../../shared/components/Filters/ToggleVisColor.js","../../shared/components/Filters/SwitchTheme.js","../../shared/components/Filters/SelectFont.js","../../shared/components/Filters/CheckboxSvgMapRegion.js","../../shared/components/Filters/helpers.js","../../shared/components/Filters/MapFilter.js","../../shared/components/Filters/RangeSlider.js","../../shared/components/Filters/ToggleApi.js","../../shared/components/TopBar.js","../../shared/components/BottomBar.js","../../shared/components/SparkLine.js","../../shared/components/SplashPage.js","../../shared/components/SignIn.js","config/Demo/SplashPageContent.js","../../shared/components/Welcome.js","../../shared/components/EmbeddedQuery.js","components/Demo/Dashboard/FilterBarChildren.js","components/Demo/Dashboard/FilterBar.js","components/Demo/Dashboard/EmbeddedDashboardContainer.js","components/Demo/styles.js","components/Demo/Dashboard/Dashboard.js","config/Demo/InventoryOverviewContent.js","components/Demo/QueryBuilder/helpers.js","components/Demo/QueryBuilder/QueryBuilder.js","config/Demo/QueryBuilderContent.js","components/Demo/ReportBuilder/helpers.js","components/Demo/ReportBuilder/ReportBuilder.js","config/Demo/ReportBuilderContent.js","components/Material/ModalTable.js","components/Demo/SalesCalendar/SalesCalendar.js","config/Demo/SalesCalendarContent.js","config/Demo/SalesOverviewContent.js","config/Demo/WebAnalyticsContent.js","components/Home/Home.js","App.js","serviceWorker.js","index.js","../../vision/src/contexts/AppContext.js","../../shared/utils/tools.js","contexts/AppContext.js","tools.js","images/logo_text.svg","images sync /^/.//background.*/.jpg$","images/background1.jpg","images/background2.jpg","images/background3.jpg","images/background4.jpg"],"names":["PblSessionEmbed","options","accessToken","this","isAuthenticated","activeToken","setToken","fetchToken","settings","transport","BrowserTransport","AuthToken","fetch","token","access_token","isActive","json","props","getToken","mode","credentials","headers","Authorization","AuthSession","checkForExistingSession","a","method","Accept","sessionResponse","sessionResponseData","session","writeNewSession","newSession","body","JSON","stringify","newSessionResponse","newSessionResponseData","createSdkHelper","lookerBaseUrl","pblsession","DefaultSettings","base_url","Looker40SDK","checkToken","expires_in","Date","now","lookerApiToken","api_user_token","sdk","status","clientSession","lightGrey","grey","makeStyles","theme","root","flexGrow","backgroundColor","palette","background","paper","display","justifyContent","alignItems","minWidth","minHeight","left","top","transform","position","textAlign","height","fontSize","marginBottom","margin","width","SignInContent","permissionLevels","userTimeHorizonMap","initialUser","Object","keys","modalPermissionsMap","TopBarContent","rowLevelAttribute","validIdHelper","require","SignIn","useContext","AppContext","setClientSession","setSdk","packageName","initialHref","setInitialHref","responseGoogle","response","error","userProfile","profileObj","lookerUser","googleClientId","process","classes","useStyles","logoImage","default","backgroundImageInt","Math","floor","random","backgroundImage","className","h100","Grid","container","item","sm","style","backgroundSize","Card","card","cardCopy","src","CardContent","Typography","variant","component","CardActions","actions","clientId","buttonText","onSuccess","onFailure","cookiePolicy","packageNameTheme","createMuiTheme","primary","main","secondary","fill","drawerWidth","appBar","transition","transitions","create","easing","sharp","duration","leavingScreen","zIndex","appBarShift","marginLeft","easeOut","enteringScreen","menuButton","marginRight","spacing","hide","drawer","flexShrink","borderRight","drawerPaper","drawerHeader","padding","mixins","toolbar","content","contentShift","title","tabs","divider","dNone","dBlock","relative","absolute","right0","right","top0","right24","top24","ml12","mr12","mt12","marginTop","highlightLegend","bottom","tree","maxWidth","parentHoverVisibility","visibility","childHoverVisibility","fontSize1em","padding10","mt5","mb5","border","boxShadow","shadows","list","nested","paddingLeft","mlAuto","mrAuto","appBarBottom","hidden","roundedTab","borderRadius","paddingBottom30","paddingBottom","mtAuto","mb10","modalPopover","overflow","modalCard","flexDirection","cursor","index","LeftDrawer","DemoComponentsContentArr","drawerOpen","setDrawerOpen","Drawer","anchor","open","IconButton","onClick","ChevronLeft","aria-label","MenuList","selectedMenuItem","orderedDemoComponentsForMenu","_","orderBy","orderedDemoComponentsForMenuObj","expandedTreeItemsArr","cumulativePusher","map","hasOwnProperty","menuCategory","push","List","aria-labelledby","outerItem","outerIndex","Fragment","ListItem","ListItemText","capitalize","disablePadding","innerIndex","MatchingIconComponent","icon","button","selected","lowerCase","label","Link","to","ListItemIcon","Highlight","children","color","id","appContextMap","highlightShow","ApiHighlight","Chip","size","align","EmbedHighlight","EmbedMethodHighlight","decodeHtml","NaturalLanguage","lookerContentItem","inlineQuery","useState","undefined","apiContent","setApiContent","corsApiCall","isReady","useEffect","isSubscribed","runInlineQuery","then","ok","run_inline_query","result_format","resultFormat","clientLookerResponse","upOrDownArrow","change","inlineQueriesMap","parseInt","toFixed","greenPos","redNeg","VectorThumbnail","vectorItem","svg","setSvg","getThumbnail","content_thumbnail","type","resourceType","resource_id","blob","Blob","url","URL","createObjectURL","cursorPointer","maxHeight60","textCenter","overflowHidden","Divider","mb12","Loader","flexCentered","elevation","mt","CircularProgress","circularProgress","CodeFlyout","codeShow","setCodeShow","positionFixedTopRight","ClickAwayListener","onClickAway","Fade","in","length","padding20","codeFlyoutContainer","CodeSnippet","code","language","dracula","showLineNumbers","getModalStyle","UserPermissionsModal","payWallModal","setPaywallModal","handleSwitchLookerUser","React","modalStyle","Modal","modal","show","onClose","padding30","key","user_attributes","permission_level","Rating","name","value","readOnly","fontStyle","dense","Check","disableSpacing","Button","fullWidth","borderColor","indexOf","redPrimary","red","greenPrimary","green","redLight","greenLight","topBarBottomBarHeight","w100","skeleton","minHeight680","maxHeight200","maxHeight","mt30","mb30","height800","maxHeight100","maxHeight400","minHeight200","fontWeight","opacity","overflowY","overflowX","verticalAlign","typography","pxToRem","fontWeightRegular","clip","validateContent","endSession","endSessionResponse","message","UserMenu","history","useHistory","anchorEl","setAnchorEl","brand","selectedBrand","setSelectedBrand","handleClose","newValue","property","zIndex1500","aria-controls","aria-haspopup","event","currentTarget","Avatar","alt","imageUrl","charAt","toUpperCase","substring","keepMounted","Boolean","MenuItem","autoFocus","menuItemLabel","Autocomplete","getOptionLabel","option","onChange","target","innerText","renderInput","params","TextField","autoCompleteLabel","loadingText","disableautofocus","onKeyDown","stopPropagation","NumberToColoredPercent","val","positive_good","colors","abs_val","up","down","val_formatted","abs","toLocaleString","minimumFractionDigits","AutoComplete","filterItem","action","bgColor","setDynamicSearch","Array","isArray","renderOption","justify","trend","newValueToUse","filterName","alternateName","onInputChange","debounce","apiDrivenSearch","ToggleTile","tileToggleValue","handleTileToggle","ToggleButtonGroup","exclusive","tileLookUp","ToggleButton","ToggleVisColor","visColorToggleValue","handleVisColorToggle","dot","SwitchTheme","lightThemeToggleValue","handleThemeChange","Switch","checked","inputProps","SelectFont","fontThemeSelectValue","FormControl","formControl","InputLabel","Select","labelId","toLowerCase","CheckboxSVGMap","prototype","toggleLocation","location","setState","prevState","selectedLocations","regionFromStateClicked","find","locations","statesWithinRegionClicked","filter","region","allUniqueRegions","i","allUniqueRegionsFromSelectedLocations","j","regionsNotCurrentlySelected","differenceBy","allRegionsNotSelected","statesNotWithinRegionsClicked","attributes","componentDidMount","customUsa","Usa","lifetimeRevenueTierMap","lifetimeRevenueTierIconMap","SentimentDissatisfied","SentimentSatisfied","SentimentVerySatisfied","MapFilter","regionValue","setRegionValue","heading","verticalAlignTop","allUniqueRegionsFromSelectedLocationsCommaSep","join","RangeSlider","sliderValue","setSliderValue","Slider","valueLabelDisplay","onChangeCommitted","min","max","disabled","ToggleApi","lifetimeRevenueTierValue","setLifetimeRevenueTierValue","ageTier","Icon","w33","TopBar","dynamicSearch","retrieveAutocompleteOptions","inputValue","autoComplteInfo","autocomplete","queryToUse","filters","lookerResponseData","apiContentObj","queryResultsForDropdown","formattedLabel","field","toString","filterNamesUrlsMap","ThemeProvider","AppBar","clsx","Toolbar","edge","Menu","pathname","search","encodeURIComponent","Badge","badgeContent","AddAlert","usermenu","BottomBar","setHighlightShow","startIcon","HighlightOutlined","Code","SparkLine","dataObjForSparkline","data","dataArrForDataObj","fields","thisDataItem","y","isNaN","labelText","chipFormat","replace","padding15","lookerCardShadow","xScale","format","precision","yScale","stacked","reverse","axisLeft","orient","tickSize","tickPadding","tickRotation","axisBottom","enablePoints","enableGridX","enableGridY","visColor","animate","bestWorstAnalysis","overflowScroll","givenName","inlineQueries","revenueByWeek","visitsByWeek","bounceRateByWeek","averageTimeByWeek","embeddedQuery","iFrameExists","setIFrame","console","log","fetchData","idToUse","$","html","queryUrl","document","origin","LookerEmbedSDK","createExploreWithUrl","appendTo","getElementById","withClassName","withTheme","build","connect","explore","modifiedBaseUrl","lastIndexOf","init","catch","overflowYScroll","alignContent","maxHeight80Percent","popularAnalysis","vectors","SplashPageContent","HomeIcon","window","innerHeight","setHeight","lookerHost","lookerContent","staticContent","demoComponentType","addEventListener","height100Percent","Box","noContainerScroll","ComponentToRender","gridWidth","FilterBarChildren","customFilterAction","horizontalLayout","FilterBar","setHorizontalLayout","expanded","setExpanded","Accordion","AccordionSummary","expandIcon","ExpandMore","VerticalSplit","e","HorizontalSplit","AccordionDetails","EmbeddedDashboardContainer","dynamicFieldLookUp","Dashboard","dashboardObj","setDashboardObj","dashboardOptions","setDashboardOptions","setTileToggleValue","setVisColorToggleValue","setLightThemeToggleValue","setFontThemeSelectValue","expansionPanelHeight","setExpansionPanelHeight","dynamicVisConfigFilterItem","isThemeableDashboard","darkThemeBackgroundColor","useLocation","paletteToUse","themeToUse","useMemo","dynamicTileFilterItem","filteredLayout","layouts","dashboard_layout_components","row","elements","dashboard_element_id","newDashboardLayout","setOptions","newColorSeries","newDashboardElements","vis_config","series_colors","innerKey","custom_color","map_value_colors","series_cell_visualizations","header_font_color","map_tile_provider","themeName","performLookerApiCalls","dynamicTheme","dashboardId","createDashboardWithId","withNext","withParams","on","dashboard","jsonQuery","desiredFilterName","desiredProperty","useCallback","newFilterValue","updateFilters","run","queryString","parse","InventoryOverivewContent","TableChartOutlinedIcon","descendingComparator","b","getComparator","order","stableSort","array","comparator","stabilizedThis","el","sort","prettifyString","measureCounter","dimensionCounter","initializeFieldChipDataHelper","queryBody","datalabel","fieldType","fieldsChipData","setFieldsChipData","queryModified","setQueryModified","queryShouldRun","setQueryShouldRun","filterType","filtersData","setFilterData","handleFieldChipClick","chip","updatedFieldsChipData","handleSelectChange","updatedFiltersData","handleQuerySubmit","newFields","currentFilters","newQueryObj","datePermissionMap","advanced","basic","premium","ExpansionPanel","ExpansionPanelSummary","Search","ExpansionPanelDetails","measurecounter","orangePrimary","m6","Done","dimensioncounter","bluePrimary","EnhancedTableHead","onSelectAllClick","onRequestSort","numSelected","rowCount","rows","TableHead","TableRow","TableCell","numeric","sortDirection","TableSortLabel","active","direction","visuallyHidden","EnhancedTable","setOrder","setOrderBy","page","setPage","setDense","rowsPerPage","setRowsPerPage","emptyRows","TableContainer","Table","table","TableBody","slice","hover","blueSecondary","orangeSecondary","rendered","colSpan","FormControlLabel","control","TablePagination","rowsPerPageOptions","count","onChangePage","newPage","onChangeRowsPerPage","bottomBarSpacer","QueryBuilderContent","SearchIcon","innerWidth","setWidth","newQuery","apiContentCopy","timer","create_query","lookerCreateQueryResponseData","create_query_task","query_id","lookerCreateTaskResponseData","taskInterval","setInterval","query_task_results","lookerCheckTaskResponseData","clearInterval","gridTitle","TabPanel","other","role","p","TreeSideBar","tabContent","tabContentItemIndex","sharedFolderId","treeCounter","setSelected","expandedArr","TreeView","defaultCollapseIcon","defaultExpandIcon","onNodeToggle","nodeIds","onNodeSelect","TreeItem","nodeId","treecounter","whiteSpaceNoWrap","contentid","folder_id","labelRoot","client_id","faSm","ReportBuilderContent","LibraryBooksOutlinedIcon","setExploreObj","setValue","qid","setQid","handleChange","contentType","contentId","secondaryAction","exploreId","newReportEmbedContainer","iFrameArray","classList","contains","remove","add","indexOfDeletedContent","updatedIFrameArray","splice","empty","delete_look","animateLoad","folder","sharedFolder","me","embedUser","h","looks","look","query","embeddedUserFolder","search_looks","user_id","embedUserLooks","embedUserFolderId","looksToUse","dashboardsToUse","dashboards","objToUse","lookId","lookIsRendered","createLookWithId","setTimeout","dashboardIsRendered","createExploreWithId","Tabs","Tab","a11yProps","tabContentItem","ModalTable","modalContent","aria-describedby","Paper","stickyHeader","round","fromDate","toDate","category","desiredField","handleFromDate","handleToDate","handleCategory","handleDesiredField","FilterList","desiredFields","split","uniqueCategories","utils","DateFnsUtils","disableToolbar","KeyboardButtonProps","minDate","maxDate","incrementDate","dateInput","increment","dateFormatTotime","getTime","toISOString","SalesCalendarContent","DateRangeOutlinedIcon","setFromDate","setToDate","setCategory","setDesiredField","setOpen","setModalContent","handleModalOpen","activeTabValue","handleTabChange","day","originalInlineQueryCopy","total","limit","modalObj","filterData","uniqueDates","Set","filteredAndReducedForAll","uniqueDate","reduce","acc","thisObj","newValueAsDate","addDays","from","emptyColor","yearSpacing","monthBorderColor","dayBorderWidth","dayBorderColor","legends","translateY","itemCount","itemWidth","itemHeight","itemsSpacing","itemDirection","SalesOverviewContent","VisibilityOutlinedIcon","WebAnalyticsContent","ShowChartIcon","Home","democomponent","useParams","didMountRef","useRef","setSelectedMenuItem","currentPermissionLevel","demoComponentsContentArr","demoComponent","requiredPermissionLevel","topBarContent","correspondingComponentContent","ActiveDemoComponent","newLookerUser","permissions","time_horizon","lookerUserResponse","lookerUserResponseData","func","args","checkTokenRsp","res","current","ActiveDemoComponentContent","o","Provider","CssBaseline","App","setIsReady","fetchSession","path","isSignedIn","exact","render","PrivateRoute","Component","rest","href","PublicRoute","demoComponentMap","startCase","urlToUse","initialHrefArr","lastTwoHrefArr","lastOneHrefArr","hostname","match","ReactDOM","navigator","serviceWorker","ready","registration","unregister","createContext","makeid","result","characters","charactersLength","str","frags","getUrlVars","hash","myJson","hashes","txt","createElement","innerHTML","AppContextAtom","AppContextVision","object","schema","errors","Error","forEach","module","exports","webpackContext","req","webpackContextResolve","__webpack_require__","resolve"],"mappings":"mGAAA,OAAe,cAA0B,kC,2mBCoC5BA,EAAb,kDAIE,WAAYC,GAAU,IAAD,8BACnB,cAAMA,IACDC,YAAcD,EAAQC,YAFR,EAJvB,yDAUI,OAAOC,KAAKD,cAVhB,kJAcSC,KAAKC,mBACRD,KAAKE,YAAYC,SAASH,KAAKI,cAfrC,kBAiBWJ,KAAKE,aAjBhB,2GAlCA,kDAKE,WAAYG,EAAUC,GAAY,IAAD,8BAC/B,cAAMD,EAAUC,GAAa,IAAIC,mBAAiBF,KAFpDH,YAAc,IAAIM,YACe,EALnC,yDAEI,OAAOC,MAAM,QAFjB,uDASI,IAAMC,EAAQV,KAAKE,YACnB,SAAMQ,IAASA,EAAMC,eACdD,EAAME,aAXjB,oJAcSZ,KAAKC,kBAdd,gCAe0BD,KAAKI,aAf/B,cAeYM,EAfZ,YAgBMV,KAAKE,YAhBX,SAgBsCQ,EAAMG,OAhB5C,wBAgBuBV,SAhBvB,gDAkBWH,KAAKE,aAlBhB,mLAoBqBY,GApBrB,uFAqBwBd,KAAKe,WArB7B,cAqBUL,EArBV,SAsBiBA,EAAMC,eACjBG,EAAME,KAAO,cACNF,EAAMG,YACbH,EAAMI,QAAN,2BACKJ,EAAMI,SADX,IAEEC,cAAc,UAAD,OAAYnB,KAAKE,YAAYS,iBA3BlD,kBA8BWG,GA9BX,4GAAgCM,gBCCnBC,EAAuB,uCAAG,8BAAAC,EAAA,sEAETb,MAAM,eAAgB,CAChDc,OAAQ,MACRL,QAAS,CACPM,OAAQ,mBACR,eAAgB,sBANiB,cAEjCC,EAFiC,gBASHA,EAAgBZ,OATb,cAS/Ba,EAT+B,yBAU9B,CAAEC,QAASD,EAAoBC,UAVD,2CAAH,qDAavBC,EAAe,uCAAG,WAAOC,GAAP,iBAAAP,EAAA,sEAEEb,MAAM,gBAAiB,CACpDc,OAAQ,OACRL,QAAS,CACPM,OAAQ,mBACR,eAAgB,oBAElBM,KAAMC,KAAKC,UAAL,eAAoBH,MARC,cAEzBI,EAFyB,gBAUQA,EAAmBpB,OAV3B,cAUvBqB,EAVuB,yBAWtB,CAAEP,QAASO,EAAuBP,UAXZ,2CAAH,sDA2BfQ,EAAkB,SAAC,GAAoC,IAAlCpC,EAAiC,EAAjCA,YAAaqC,EAAoB,EAApBA,cAK7C,GAAIrC,GAAeqC,EAAe,CAChC,IAAMC,EAAa,IAAIxC,EAAJ,2BACdyC,6BADc,IAEjBC,SAAUH,EACVrC,iBAIF,OADU,IAAIyC,cAAYH,KAMjBI,EAAU,uCAAG,WAAOC,GAAP,uBAAApB,EAAA,2DAOnBqB,KAAKC,MAASF,GAPK,iCASMjC,MAAM,sBAAuB,CACvDc,OAAQ,MACRL,QAAS,CACPM,OAAQ,mBACR,eAAgB,sBAbE,cASlBC,EATkB,gBAgBYA,EAAgBZ,OAhB5B,cAgBhBa,EAhBgB,OAiBhBU,EAAgBV,EAAoBC,QAAQS,cAAgBV,EAAoBC,QAAQS,cAAgB,GACxGrC,EAAc2B,EAAoBC,QAAQkB,eAAiBnB,EAAoBC,QAAQkB,eAAeC,eAAiB,GACvHC,EAAMZ,EAAgB,CAAEpC,cAAaqC,kBAnBrB,kBAqBf,CAAEY,OAAQ,UAAWD,MAAKE,cAAevB,EAAoBC,UArB9C,iCAyBf,CAAEqB,OAAQ,OAzBK,4CAAH,sD,oCC3DjBE,EAAYC,IAAK,KAGRC,eAAW,SAACC,GAAD,gBACxBC,KAAM,CACJC,SAAU,EACVC,gBAAiBH,EAAMI,QAAQC,WAAWC,QAHpB,qBAKlB,CACJC,QAAS,OACTJ,gBAAiB,uBAPK,6BASV,CACZI,QAAS,OACTC,eAAgB,SAChBC,WAAY,WAZU,qBAclB,CACJC,SAAU,IACVC,UAAW,IACXC,KAAM,MACNC,IAAK,MACLC,UAAU,wBACVC,SAAU,WACVC,UAAW,SACXb,gBAAiBN,IAtBK,qBAwBlB,CACJoB,OAAQ,SAzBc,sBA2BjB,CACLC,SAAU,KA5BY,oBA8BnB,CACHC,aAAc,KA/BQ,wBAiCf,CACPV,WAAY,SACZD,eAAgB,WAnCM,yBAqCd,CACRO,SAAU,WACVF,IAAK,MACLD,KAAM,MACNE,UAAU,wBACVM,OAAQ,IACRC,MAAO,QA3Ce,K,0DCLbC,EACG,UADHA,EAEC,gDCFDC,EAAmB,CAC9B,MAAS,CACP,cACA,YACA,sBACA,wBACA,uBAEF,SAAY,CACV,cACA,YACA,sBACA,wBACA,sBACA,uBACA,gCACA,gBACA,qBAEF,QAAW,CACT,cACA,YACA,sBACA,wBACA,sBACA,uBACA,gCACA,gBACA,oBACA,eACA,sBACA,uBACA,eACA,aACA,wBACA,sBACA,yBACA,UACA,YAISC,EAAqB,CAChC,MAAS,gBACT,SAAY,gBACZ,QAAW,iBAGAC,EAAc,CACzB,iBAAoB,GACpB,WAAc,GACd,UAAa,GACb,eAAkB,MAClB,oBAAsB,EACtB,kBAAqB,GACrB,UAAa,CACX,GAEF,YACEF,EAAiBG,OAAOC,KAAKJ,GAAkB,IACjD,OAAU,CACR,gBAEF,gBAAmB,CACjB,OAAU,QACV,QAAW,MACX,MAAS,eACT,aAAgB,gBAChB,iBAAoBG,OAAOC,KAAKJ,GAAkB,KAIzCK,EAAsB,CACjC,MAAS,CACP,MAAS,sCACT,KAAQ,CACN,iCACA,2BACA,wBAGJ,SAAY,CACV,MAAS,8BACT,KAAQ,CACN,kCACA,iCACA,iCACA,sDACA,+CAGJ,QAAW,CACT,MAAS,gCACT,KAAQ,CACN,qCACA,gDACA,qDACA,6CACA,yBChGOC,EAAgB,CAC3B,SAAY,CAAEN,mBAAkBO,kBDsGD,CAC/B,kBAAqB,eACrB,cAAiB,gBACjB,QAAW,CACT,CACE,MAAS,YAEX,CACE,MAAS,gBAEX,CACE,MAAS,YAEX,CACE,MAAS,UAEX,CACE,MAAS,eE/GPC,EAAkBC,EAAQ,IAA1BD,cAEO,SAASE,EAAOxE,GAAO,MAIgDyE,qBAAWC,KAAzFvC,EAJ8B,EAI9BA,cAAewC,EAJe,EAIfA,iBAAuBC,GAJR,EAIG3C,IAJH,EAIQ2C,QACpCC,GAL4B,EAIgBC,YAJhB,EAI6BC,eACzC5C,EAAhB0C,aAEFG,EAAc,uCAAG,WAAOC,GAAP,qBAAAzE,EAAA,0DACjByE,EAASC,MADQ,uDAGIpE,EAAgB,2BAAKqB,GAAN,IAAqBgD,YAAaF,EAASG,WAAYC,WAAYrB,KAHtF,OAGfjD,EAHe,OAKbO,EAAgBP,EAAWF,QAAQS,cAAgBP,EAAWF,QAAQS,cAAgB,GACtFrC,EAAc8B,EAAWF,QAAQkB,eAAiBhB,EAAWF,QAAQkB,eAAeC,eAAiB,GACrGC,EAAMZ,EAAgB,CAAEC,gBAAerC,gBAE7C0F,EAAiB5D,EAAWF,SAC5B+D,EAAO3C,GAVY,4CAAH,sDAadqD,EAAc,UAAMC,gDAAN,+BAEdC,EAAUC,IACVC,EAAYb,EAAcN,EAAQ,KAA8BoB,QAAU,GAE1EC,EAAqBC,KAAKC,MAAsB,EAAhBD,KAAKE,UAAgB,EACrDC,EAAkBnB,EAAcN,OAAQ,sBAA0BqB,EAA3B,SAAqDD,QAAU,GAG5G,OACE,qBAAKM,UAAS,UAAKT,EAAQhD,KAAb,0BAAmCgD,EAAQU,MAAzD,SACE,cAACC,EAAA,EAAD,CAAMC,WAAS,EAEbH,UAAS,UAAKT,EAAQU,MAFxB,SAGE,cAACC,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAIL,UAAW,yBAC5BM,MAAO,CACLP,gBAAgB,OAAD,OAASA,EAAT,KACfQ,eAAgB,SAHpB,SAME,cAACC,EAAA,EAAD,CAAMR,UAAWT,EAAQkB,KAAzB,SACE,sBAAKT,UAAWT,EAAQmB,SAAxB,UACE,qBACEC,IAAKlB,IAEP,eAACmB,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAYC,QAAQ,KAAKC,UAAU,KAAnC,SACGnD,IAEH,cAACiD,EAAA,EAAD,CAAYC,QAAQ,QAAQC,UAAU,IAAtC,SACGnD,OAGL,cAACoD,EAAA,EAAD,CAAahB,UAAS,UAAKT,EAAQ0B,SAAnC,SACE,cAAC,cAAD,CACEC,SAAU7B,EACV8B,WAAW,QACXC,UAAWrC,EACXsC,UAAWtC,EACXuC,aAAc,iCA3BnBjD,EAAc,mB,sIC1CdkD,GAAmBC,aAAe,CAC7C9E,QAAS,CACP+E,QAAS,CACPC,KAAMtF,IAAK,MAEbuF,UAAW,CACTD,KAAMtF,IAAK,MAEbwF,KAAM,CACJF,KAAM,cCTNG,GAAc,IACPrC,GAAYnD,aAAW,SAAAC,GAAK,MAAK,CAC5CC,KAAM,CACJM,QAAS,OACTJ,gBAAiB,sBAEnBqF,OAAQ,CACNC,WAAYzF,EAAM0F,YAAYC,OAAO,CAAC,SAAU,SAAU,CACxDC,OAAQ5F,EAAM0F,YAAYE,OAAOC,MACjCC,SAAU9F,EAAM0F,YAAYI,SAASC,gBAEvCC,OAAQ,KACR7F,gBAAiB8E,GAAiB7E,QAAQkF,KAAKF,MAEjDa,YAAa,CACX5E,MAAM,eAAD,OAAiBkE,GAAjB,OACLW,WAAYX,GACZE,WAAYzF,EAAM0F,YAAYC,OAAO,CAAC,SAAU,SAAU,CACxDC,OAAQ5F,EAAM0F,YAAYE,OAAOO,QACjCL,SAAU9F,EAAM0F,YAAYI,SAASM,kBAGzCC,WAAY,CACVC,YAAatG,EAAMuG,QAAQ,IAE7BC,KAAM,CACJjG,QAAS,QAEXkG,OAAQ,CACNpF,MAAOkE,GACPmB,WAAY,EACZC,YAAa,OACbxG,gBAAiB,eAEnByG,YAAa,CACXvF,MAAOkE,GACPoB,YAAa,OACbxG,gBAAiB,eAEnB0G,aAAa,yBACXtG,QAAS,OACTE,WAAY,SACZqG,QAAS9G,EAAMuG,QAAQ,EAAG,IAEvBvG,EAAM+G,OAAOC,SALN,IAMVxG,eAAgB,aAIlByG,QAAS,CACP/G,SAAU,EACV4G,QAAS9G,EAAMuG,QAAQ,GACvBd,WAAYzF,EAAM0F,YAAYC,OAAO,SAAU,CAC7CC,OAAQ5F,EAAM0F,YAAYE,OAAOC,MACjCC,SAAU9F,EAAM0F,YAAYI,SAASC,gBAEvCG,YAAY,KAEdgB,aAAc,CACZzB,WAAYzF,EAAM0F,YAAYC,OAAO,SAAU,CAC7CC,OAAQ5F,EAAM0F,YAAYE,OAAOO,QACjCL,SAAU9F,EAAM0F,YAAYI,SAASM,iBAEvCF,WAAY,GAEdiB,MAAO,CACLjH,SAAU,GAEZkH,KAAM,CACJT,YAAY,aAAD,OAAe3G,EAAMI,QAAQiH,UAE1CC,MAAO,CACL/G,QAAS,QAEXgH,OAAQ,CACNhH,QAAS,SAEXiH,SAAU,CACRzG,SAAU,YAEZ0G,SAAU,CACR1G,SAAU,YAEZ2G,OAAQ,CACNC,MAAO,GAETC,KAAM,CACJ/G,IAAK,GAEPgH,QAAS,CACPF,MAAO,IAETG,MAAO,CACLjH,IAAK,IAEPkH,KAAM,CACJ7B,WAAY,IAEd8B,KAAM,CACJ1B,YAAa,IAEf2B,KAAM,CACJC,UAAW,IAEbC,gBAAiB,CACfpH,SAAU,QACVqH,OAAQpI,EAAMuG,QAAQ,GACtB3F,KAAMZ,EAAMuG,QAAQ,GACpBP,OAAQ,MAEVqC,KAAM,CACJpH,OAAQ,IACRf,SAAU,EACVoI,SAAU,KAEZC,sBAAuB,CACrB,gCAAiC,CAC/BC,WAAY,YAIhBC,qBAAsB,CACpBD,WAAY,UAEdE,YAAa,CACXxH,SAAU,OAEZyH,UAAW,CACT7B,QAAS,IAEX8B,IAAK,CACHV,UAAW,GAEbW,IAAK,CACH1H,aAAc,GAEhBb,MAAO,CACLH,gBAAiBH,EAAMI,QAAQC,WAAWC,MAC1CwI,OAAQ,iBACRC,UAAW/I,EAAMgJ,QAAQ,GACzBlC,QAAS9G,EAAMuG,QAAQ,EAAG,EAAG,IAE/B0C,KAAM,CACJ5H,MAAO,OACPiH,SAAU,IACVnI,gBAAiB,eAGnB+I,OAAQ,CACNC,YAAanJ,EAAMuG,QAAQ,IAE7B6C,OAAQ,CACNlD,WAAY,QAEdmD,OAAQ,CACN/C,YAAa,QAEfgD,aAAc,CACZzI,IAAK,OACLuH,OAAQ,GAGVmB,OAAQ,CACNf,WAAY,UAEdgB,WAAY,CACVC,aAAc,mBAEhBC,gBAAiB,CACfC,cAAe,IAEjBC,OAAQ,CACN1B,UAAW,QAEb2B,KAAM,CACJ1I,aAAc,IAEhB2I,aAAc,CACZ/I,SAAU,WACVM,MAAO,IACPJ,OAAQ,IACR8I,SAAU,SACV5J,gBAAiBH,EAAMI,QAAQC,WAAWC,MAC1CwG,QAAS9G,EAAMuG,QAAQ,EAAG,EAAG,IAE/ByD,UAAW,CACTzJ,QAAS,OACT0J,cAAe,SACfzJ,eAAgB,gBAChBuJ,SAAU,SACVG,OAAQ,UACR,UAAW,CACTpJ,UAAW,cACX2E,WAAY,qBAGd,CAAE0E,MAAO,IC/LLpI,GAAkBC,EAAQ,IAA1BD,cAEO,SAASqI,GAAT,GAAmD,IAA7BC,EAA4B,EAA5BA,yBAG7BpH,EAAUC,KAH+C,EAIxBhB,qBAAWC,KAA1CmI,EAJuD,EAIvDA,WAAYC,EAJ2C,EAI3CA,cAEpB,OACE,eAACC,GAAA,EAAD,CACE9G,UAAWT,EAAQwD,OACnBjC,QAAQ,aACRiG,OAAO,OACPC,KAAMJ,EACNrH,QAAS,CACP3C,MAAO2C,EAAQ2D,aANnB,UASE,qBAAKlD,UAAWT,EAAQ4D,aAAxB,SACE,cAAC8D,GAAA,EAAD,CACEC,QAAS,kBAAML,GAAc,IAD/B,SAEE,cAACM,GAAA,EAAD,CACEC,aAAW,qBAKjB,cAACC,GAAD,CACE9H,QAASA,EACToH,yBAA0BA,OAMlC,SAASU,GAAT,GAA0D,IAAtC9H,EAAqC,EAArCA,QAASoH,EAA4B,EAA5BA,yBAA4B,EAEXnI,qBAAWC,KAA/CvC,EAF+C,EAE/CA,cAAeoL,EAFgC,EAEhCA,iBACf1I,EAAgB1C,EAAhB0C,YAEJ2I,EAA+B3I,EAAc4I,IAAEC,QAAQd,EAA0B,CAAC,gBAAiB,CAAC,QAAU,GAC9Ge,EAAkC,GAClCC,EAAuB,GACvBC,EAAmB,EAWvB,OAVAL,EAA6BM,KAAI,SAACzH,EAAMqG,GAClCiB,EAAgCI,eAAe1H,EAAK2H,cACtDL,EAAgCtH,EAAK2H,cAArC,sBAAyDL,EAAgCtH,EAAK2H,eAA9F,CAA6G3H,KAE7GsH,EAAgCtH,EAAK2H,cAAgB,CAAC3H,GACtDwH,GAAoB,EACpBD,EAAqBK,KAAK,IAAMvB,EAAQmB,QAIpC,cAACK,GAAA,EAAD,CACNlH,UAAU,MACVmH,kBAAgB,wBAChBlI,UAAWT,EAAQgG,KAHb,SAKL3G,EAAcZ,OAAOC,KAAKyJ,GAAiCG,KAAI,SAACM,EAAWC,GAC1E,OACE,eAAE,IAAMC,SAAR,WAEE,cAACC,GAAA,EAAD,UAGE,cAACC,GAAA,EAAD,CAAc9G,QAAuB,SAAd0G,EAAuB,GAAKX,IAAEgB,WAAWL,MAHlE,UACU9J,GAAc8J,EAAY,kBAAoBC,KAIxD,cAAEH,GAAA,EAAF,CAAOlH,UAAU,MAAM0H,gBAAc,EAArC,SAEGf,EAAgCS,GAAWN,KAAI,SAACzH,EAAMsI,GACrD,IAAMC,EAAwBvI,EAAKwI,KACnC,OACE,eAACN,GAAA,EAAD,CACEO,QAAM,EACN7I,UAAS,UAAKT,EAAQiG,OAAb,YAAuBjG,EAAQuG,YAExCgD,SAAUzK,GAAcmJ,IAAEuB,UAAU3I,EAAK4I,UAAY1B,EACrDvG,UAAWkI,IACXC,GAAI7K,GAAcmJ,IAAEuB,UAAU3I,EAAK4I,QANrC,UAQE,cAACG,GAAA,EAAD,UACGR,EAAwB,cAACA,EAAD,IAA4B,+BAEvD,cAACJ,GAAA,EAAD,CAAc9G,QAAS+F,IAAEgB,WAAWpI,EAAK4I,WAX3C,UAGU3K,GAAc8J,EAAY,kBAAoBO,SAR9D,UACUrK,GAAc8J,EAAY,cAAgBC,OARtD,UACU/J,GAAc8J,EAAY,aAAeC,QA6BlD,K,6CCvFT,SAASgB,GAAT,GAA+F,IAA1EC,EAAyE,EAAzEA,SAAUC,EAA+D,EAA/DA,MAAO/L,EAAwD,EAAxDA,OAAQI,EAAgD,EAAhDA,MAAOD,EAAyC,EAAzCA,OAAQ6L,EAAiC,EAAjCA,GAAI9M,EAA6B,EAA7BA,gBAE3D6D,GAFwF,qFAEhF,IAqBZ,OAnBEA,EAHwB9B,qBAAWgL,iBAAa,MAA1CC,cAGD,2BACAnJ,GADA,IAEH8E,OAAO,aAAD,OAAekE,GACrB7M,gBAAgB,GAAD,OAAKA,GACpBsJ,aAAa,MACb1I,SAAU,aAGJ,CACN+H,OAAO,wBACP3I,gBAAgB,eAIhBc,IAAU+C,EAAK,OAAa/C,GAC5BI,IAAS2C,EAAK,MAAY3C,GAC1BD,IAAU4C,EAAK,OAAa5C,GAI9B,qBAAK6L,GAAIA,EAAIjJ,MAAOA,EAApB,SAGG+I,IAKA,SAASK,GAAT,GAAqC,IAAV3P,EAAS,oBACjC0P,EAAkBjL,qBAAWgL,iBAAa,MAA1CC,cACAlK,EAAYxF,EAAZwF,QACA8J,EAAatP,EAAbsP,SAER,OAAO,eAACD,GAAD,2BAAerP,GAAf,IAAsBuP,MA5CN,UA4CwB7M,gBA3Cb,0BA2C3B,UAEL,cAACkN,GAAA,EAAD,CAAMC,KAAK,QACTZ,MAAO,MACPhJ,UAAWyJ,EAAgB,OAAH,UAAelK,EAAQsG,QAC/ChJ,QAAQ,SACRgN,MAAM,QACNvJ,MAAO,CAAE7D,gBAAiB,UAAW6M,MAAO,OAAQnM,IAAK,QAAS8G,MAAO,OAAQ5G,SAAU,cAE5FgM,MAKE,SAASS,GAAT,GAAuC,IAAV/P,EAAS,oBACnC0P,EAAkBjL,qBAAWgL,iBAAa,MAA1CC,cAEAlK,EAAYxF,EAAZwF,QACA8J,EAAatP,EAAbsP,SAER,OAAO,eAACD,GAAD,2BAAerP,GAAf,IAAsBuP,MA9DJ,UA8DwB7M,gBA7Db,0BA6D7B,UAEL,cAACkN,GAAA,EAAD,CAAMC,KAAK,QACTZ,MAAO,QACPhJ,UAAWyJ,EAAgB,OAAH,UAAelK,EAAQsG,QAC/ChJ,QAAQ,SACRgN,MAAM,QACNvJ,MAAO,CACL7D,gBAAiB,UACjB6M,MAAO,OACPnM,IAAK,QACL8G,MAAO,OACP5G,SAAU,cAGbgM,MAKE,SAASU,GAAT,GAA6C,IAAVhQ,EAAS,oBACzC0P,EAAkBjL,qBAAWgL,iBAAa,MAA1CC,cACAlK,EAAYxF,EAAZwF,QACA8J,EAAatP,EAAbsP,SAER,OAAO,eAACD,GAAD,2BAAerP,GAAf,IAAsBuP,MArFG,UAqFwB7M,gBApFb,0BAoFpC,UAEL,cAACkN,GAAA,EAAD,CAAMC,KAAK,QACTZ,MAAO,eACPhJ,UAAWyJ,EAAgB,OAAH,UAAelK,EAAQsG,QAC/ChJ,QAAQ,SACRgN,MAAM,QACNvJ,MAAO,CACL7D,gBAAiB,UACjB6M,MAAO,OACPnM,IAAK,QACL8G,MAAO,OACP5G,SAAU,cAGbgM,M,OC1GgD/K,EAAQ,IAAtC0L,I,GAAf3L,c,GAAe2L,YAAYR,G,GAAAA,cAG5B,SAASS,GAAT,GAA8E,IAAnDC,EAAkD,EAAlDA,kBAAmBC,EAA+B,EAA/BA,YAAa1D,EAAkB,EAAlBA,MAAOlH,EAAW,EAAXA,QAAW,EAE9C6K,wBAASC,GAFqC,mBAE3EC,EAF2E,KAE/DC,EAF+D,OAI7B/L,qBAAWgL,GAAa,MAArEtN,EAJ0E,EAI1EA,cAAeF,EAJ2D,EAI3DA,IAAKwO,EAJsD,EAItDA,YAAaC,EAJyC,EAIzCA,QACpBrL,GAAelD,EAA5BgD,YAA4BhD,EAAfkD,YAErBsL,qBAAU,WACR,GAAID,EAAS,CACX,IAAIE,GAAe,EAMnB,OALAH,EAAYI,GAAgBC,MAAK,SAAA7L,GAC3B2L,GACFJ,EAAcvL,MAGX,kBAAM2L,GAAe,MAE7B,CAACvL,EAAYqL,IAEhB,IAAMG,EAAc,uCAAG,4BAAArQ,EAAA,sEACYyB,EAAI8O,GAAG9O,EAAI+O,iBAAiB,CAAEC,cAAed,EAAkBe,cAAgB,OAAQlQ,KAAMoP,KADzG,cACjBe,EADiB,yBAEdA,EAAqB,IAFP,2CAAH,qDAKdC,EAAgBb,EAAaA,EAAWc,OAAS,EAApB,kBAA8C,GAEjF,OACE,cAAClL,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAf,SACGiK,EACC,cAAC,IAAMjC,SAAP,UACE,eAACqB,GAAD,CAAcnK,QAASA,EAAvB,UACE,eAACsB,EAAA,EAAD,CAAYC,QAAQ,YAAYjE,QAAQ,SAAxC,kBACQqN,EAAkBmB,iBAAiB5E,GAD3C,cAC6D,4BAAI6D,EAAW,uBAD5E,QAC2GA,EAAWc,OAAS,EAAI,MAAQ,WAE3I,cAACzB,GAAA,EAAD,CAAMC,KAAK,QACTZ,MAAK,UAAKgB,GAAWmB,GAAhB,YAAkCG,SAA6B,IAApBhB,EAAWc,QAAcG,QAAQ,GAA5E,MACLvL,UAAWsK,EAAWc,OAAS,EAAI7L,EAAQiM,SAAWjM,EAAQkM,OAC9D5O,QAAQ,WAEV,cAACgE,EAAA,EAAD,CAAYC,QAAQ,YAAYjE,QAAQ,SAAxC,0CAKF,qBAAKyD,MAAO,CAAE/C,OAAQ,Y,eC3CzB,SAASmO,GAAT,GAA4E,EAAjDxB,kBAAkD,IAA/B3K,EAA8B,EAA9BA,QAASoM,EAAqB,EAArBA,WAAYlF,EAAS,EAATA,MAAS,EAG3D2D,wBAASC,GAHkD,mBAG1EuB,EAH0E,KAGrEC,EAHqE,OAI5BrN,qBAAWgL,iBAAa,MAArEtN,EAJyE,EAIzEA,cAAeF,EAJ0D,EAI1DA,IAAKwO,EAJqD,EAIrDA,YAAaC,EAJwC,EAIxCA,QACpBrL,GAAelD,EAA5BgD,YAA4BhD,EAAfkD,YAErBsL,qBAAU,WACR,IAAIC,GAAe,EASnB,OARIF,GACFD,EAAYsB,GAAcjB,MAAK,SAAA7L,GAEzB2L,GACFkB,EAAO7M,MAIN,kBAAM2L,GAAe,KAC3B,CAACvL,EAAYqL,IAEhB,IAAMqB,EAAY,uCAAG,gCAAAvR,EAAA,sEACcyB,EAAI8O,GAAG9O,EAAI+P,kBAAkB,CAAEC,KAAML,EAAWM,aAAcC,YAAaP,EAAWpC,MADpG,cACf2B,EADe,OAEbiB,EAAO,IAAIC,KAAK,CAAClB,GAAuB,CAAEc,KAAM,kBAClDK,EAAMC,IAAIC,gBAAgBJ,GAHX,kBAIZE,GAJY,2CAAH,qDAOlB,OACE,cAACnM,EAAA,EAAD,CAAMC,WAAS,EACbH,UAAS,UAAKT,EAAQiN,eACtB3J,QAAS,EACT9B,UAAWkI,IACXC,GAAIyC,EAAWU,IAJjB,SAMGT,EACC,qCACE,cAAC1L,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,IACf,cAACH,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,cAACqJ,GAAD,CAAcnK,QAASA,EAAvB,SACE,qBACES,UAAS,WAAMT,EAAQkN,YAAd,YAA6BlN,EAAQmN,WAArC,YAAmDnN,EAAQiN,cAA3D,YAA4EjN,EAAQoN,gBAD/F,SAGE,qBACEhM,IAAKiL,EACLtL,MAAO,CAAE3C,MAAO,gBAMxB,cAACuC,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,cAACQ,EAAA,EAAD,CAAYC,QAAQ,YAApB,SAAmC6K,EAAW3C,UAE/CvC,EAAQ,EACP,cAACvG,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAf,SACE,cAACuM,GAAA,EAAD,CAAS5M,UAAS,UAAKT,EAAQoE,QAAb,YAAwBpE,EAAQsN,KAAhC,YAAwCtN,EAAQgF,UAC1D,MAGd,K,IC9DAlG,GAAkBC,EAAQ,IAA1BD,c,6CCAD,SAASyO,GAAT,GAA4C,IAA1BvN,EAAyB,EAAzBA,QAAShC,EAAgB,EAAhBA,OAChC,OADgD,EAARuF,KAE/B,GACL,cAAC5C,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAIC,MAAO,CAAE/C,UAA5B,SAEE,cAACiD,EAAA,EAAD,CAAMR,UAAS,UAAKT,EAAQkB,KAAb,YAAqBlB,EAAQwN,cAC1CC,UAAW,EACXC,GAAI,EACJ3M,MAAO,CAAE/C,OAAO,GAAD,OAAKA,EAAL,OAHjB,SAKE,cAAC2P,GAAA,EAAD,CAAkBlN,UAAWT,EAAQ4N,uB,qECPlCC,GAAa,SAACrT,GAAU,MAEDyE,qBAAWgL,iBAAa,MAAlD6D,EAF2B,EAE3BA,SAAUC,EAFiB,EAEjBA,YACV/N,EAAgCxF,EAAhCwF,QAASH,EAAuBrF,EAAvBqF,WAAY7B,EAAWxD,EAAXwD,OAE7B,OAEE8P,EACE,cAACnN,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EACbL,UAAS,UAAKT,EAAQgO,uBADxB,SAEE,cAACC,GAAA,EAAD,CAAmBC,YAAa,kBAAMH,KAAtC,SACE,cAACI,GAAA,EAAD,CAAMC,IAAI,EAAV,SAEI3P,OAAOC,KAAKmB,GAAYwO,OACtB,eAAC1N,EAAA,EAAD,CAAMC,WAAS,EAAC0C,QAAS,EACvB7C,UAAS,UAAKT,EAAQsO,UAAb,YAA0BtO,EAAQuO,qBAC3CxN,MAAO,CAAE/C,UAFX,UAIE,cAAC2C,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAf,SACE,cAACQ,EAAA,EAAD,CAAYC,QAAQ,KAAKd,UAAS,WAAMT,EAAQoG,QAAUrF,MAAO,CAAEgJ,MAAO,SAA1E,kCAIF,cAACpJ,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EACbC,MAAO,CAAEhD,UAAW,SADtB,SAGE,cAAC,KAAD,CAAWgD,MAAO,CAAEgJ,MAAO,QAAS9C,OAAQ,WAAaU,QAAS,kBAAMoG,SAE1E,cAACpN,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAf,SACE,cAAC0N,GAAD,CAAaC,KAAM5O,SAEb,SAKlB,IAKR,SAAS2O,GAAYhU,GAAQ,IACnBiU,EAASjU,EAATiU,KACR,OACE,cAAC,KAAD,CAAmBC,SAAS,OAAO3N,MAAO4N,KAASC,iBAAiB,EAApE,SACmB,kBAATH,EAAoBhT,KAAKC,UAAU+S,GAAM,EAAM,GAAKA,I,oEC5ClE,SAASI,KAIP,MAAO,CACLjR,IAAI,GAAD,OAJO,GAIP,KACHD,KAAK,GAAD,OAJO,GAIP,KACJE,UAAU,cAAD,OALE,GAKF,eANC,GAMD,OAIN,IAAMiR,GAAuB,SAAC,GAA0B,IAAxB9K,EAAuB,EAAvBA,QAAShE,EAAc,EAAdA,QAAc,EAGqBf,qBAAWgL,iBAAa,MAAjGtN,EAHoD,EAGpDA,cAAeoS,EAHqC,EAGrCA,aAAcC,EAHuB,EAGvBA,gBAAiBC,EAHM,EAGNA,uBAHM,EAIvCC,IAAMrE,SAASgE,IAA7BM,EAJqD,oBAKpD7Q,EAA0C0F,EAA1C1F,iBAAkBK,EAAwBqF,EAAxBrF,oBAE1B,OACE,cAAEyQ,GAAA,EAAF,CACE3O,UAAS,UAAKT,EAAQqP,MAAb,KACT5H,KAAMsH,EAAaO,OAAQ,EAC3BC,QAAS,kBAAMP,EAAgB,KAHjC,SAKE,cAACb,GAAA,EAAD,CAAMC,GAAIW,EAAaO,OAAQ,EAA/B,SACE,qBACEvO,MAAOoO,EACP1O,UAAS,UAAKT,EAAQ6G,aAAb,YAA6B7G,EAAQwP,WAFhD,SAIE,cAAC7O,EAAA,EAAD,CAAMC,WAAS,EACb0C,QAAS,EADX,SAEG7E,OAAOC,KAAKJ,GAAkBgK,KAAI,SAACmH,EAAKvI,GACvC,OACE,cAACvG,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAKrC,OAAOC,KAAKJ,GAAkB+P,OAAlD,SAGE,eAACpN,EAAA,EAAD,CAAMR,UAAS,UAAKT,EAAQ+G,UAAb,YAA0B/G,EAAQyP,IAC/ChC,UAAW,EACX1M,MAAO0O,IAAQ9S,EAAckD,WAAW6P,gBAAgBC,iBAAmB,CACzEzS,gBAAiB,UACjB6M,MAAO,UACP/L,OAAQ,KACN,CACAA,OAAQ,KAEZ2J,QAAS,WACPsH,EAAuBQ,EAAK,cAC5BT,EAAgB,KAXpB,UAaE,eAAC3N,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAYC,QAAQ,KAApB,SACG0G,KAAEgB,WAAWwG,KAEhB,cAACnO,EAAA,EAAD,UACE,cAACsO,GAAA,EAAD,CACEC,KAAK,YACLC,MAAO,EAAIrR,OAAOC,KAAKJ,GAAkB+P,OAASnH,EAAQ,EAC1D6I,UAAQ,MACZ,cAACzO,EAAA,EAAD,CAAYC,QAAQ,YAAYR,MAAO,CAAEiP,UAAW,UAApD,SACGrR,EAAoB8Q,GAAKvL,QAG5B,cAACmJ,GAAA,EAAD,CAAS5M,UAAS,UAAKT,EAAQoE,QAAb,OAElB,cAACsE,GAAA,EAAD,UAEI/J,EAAoB8Q,GAAKzJ,KAAKsC,KAAI,SAACzH,EAAMqG,GAAP,OAChC,eAAC6B,GAAA,EAAD,CAAUkH,OAAO,EAAjB,UAGE,cAACrG,GAAA,EAAD,UAEE,cAACsG,GAAA,EAAD,CAAOjS,SAAS,YAElB,cAAC+K,GAAA,EAAD,CAAc9G,QAASrB,MAPzB,qCACqC4O,EADrC,YAC4CvI,YAYpD,cAACzF,EAAA,EAAD,CAAa0O,gBAAgB,EAA7B,SACE,cAACC,GAAA,EAAD,CACErG,MAAM,UACNxI,QAAQ,WACR8O,WAAS,EACT1I,QAAS,WACPsH,EAAuBQ,EAAK,cAC5BT,EAAgB,KAElBjO,MAAO0O,IAAQ9S,EAAckD,WAAW6P,gBAAgBC,iBAAmB,CAAE5F,MAAO,UAAWuG,YAAa,WAAc,GAR5H,SASGb,IAAQ9S,EAAckD,WAAW6P,gBAAgBC,iBAAmB,SACnElR,OAAOC,KAAKC,GAAqB4R,QAAQ5T,EAAckD,WAAW6P,gBAAgBC,kBAAoBlR,OAAOC,KAAKC,GAAqB4R,QAAQd,GAC7I,UACA,iBA3DL3Q,yBAAc,8BAAD,OAA+B2Q,iB,mCCxC7De,GAAaC,KAAI,KACjBC,GAAeC,KAAM,KACrBC,GAAWH,KAAI,KACfI,GAAaF,KAAM,KAEZG,GAAwB,IAGxB7Q,GAAYnD,aAAW,SAACC,GAAD,gBAClCC,KAAM,CACJC,SAAU,EACV6J,SAAU,SACVN,aAAc,GAEhBgH,aAAc,CACZlQ,QAAS,OACTC,eAAgB,SAChBC,WAAY,UAEd8I,OAAQ,CACNf,WAAY,SACZzH,SAAU,WACViF,QAAS,GAEXoB,KAAM,CACJjH,gBAAiB,QACjB6M,MAAO,WAET1F,MAAO,CACL/G,QAAS,QAEXgH,OAAQ,CACNhH,QAAS,SAEX8H,KAAM,CACJpH,OAAQ,IACRf,SAAU,EACVoI,SAAU,KAEZgE,KAAM,CACJhG,YAAa,GACbpF,SAAU,OACV6I,SAAU,WAEZ9B,KAAM,CACJC,UAAW,IAEb8L,KAAM,CACJ3S,MAAO,QAET+H,OAAQ,CACNlD,WAAY,QAEdmD,OAAQ,CACN/C,YAAa,QAEf2N,SAAU,CACRvT,SAAU,IACVC,UAAW,KAEbwD,KAAM,CACJzD,SAAU,KAEZ+R,UAAW,CACT3L,QAAS,IAEXoN,aAAc,CACZvT,UAAW,KAEbwT,aAAc,CACZC,UAAW,IACXnT,OAAQ,IACR8I,SAAU,UAEZsK,KAAM,CACJnM,UAAW,IAEboM,KAAM,CACJnT,aAAc,IAEhBiP,WAAY,CACVpP,UAAW,UAEbkP,cAAe,CACbhG,OAAQ,WAEVpB,OAAQ,CACNA,OAAQ,mBAEVyL,UAAW,CACTtT,OAAQ,KAEVuT,aAAc,CACZJ,UAAW,IACXnT,OAAQ,KAEVwT,aAAc,CACZL,UAAW,IACXnT,OAAQ,KAEVyT,aAAc,CACZ/T,UAAW,IACXoJ,SAAU,UAEZoF,OAAQ,CACNhP,gBAAiB0T,GACjB7G,MAAOyG,GACPkB,WAAY,KAEdzF,SAAU,CACR/O,gBAAiB2T,GACjB9G,MAAO2G,GACPgB,WAAY,MAxGoB,0BA0GvB,CACT7N,QAAS,KA3GuB,qBA6G5B,CACJ3F,aAAc,KA9GkB,+BAgHlB,CACd4I,SAAU,WAjHsB,+BAmHlB,CACdA,SAAU,WApHsB,gCAsHjB,CACfA,SAAU,YAvHsB,6BAyHpB,CACZqK,UAAW,IACXnT,OAAQ,MA3HwB,6BA6HpB,CACZN,UAAW,IACXoJ,SAAU,WA/HsB,+BAiIlB,CACd5J,gBAAiB,oCACjBa,UAAW,oBACX4T,QAAQ,iBACRD,WAAY,MArIoB,oCAwIb,CACnBzT,SAAU,oBAzIsB,mCA4Id,CAClBA,SAAU,oBA7IsB,iCA+IhB,CAChBH,SAAU,aAhJsB,0BAkJvB,CACT+F,QAAS,KAnJuB,4BAqJrB,CACXsN,UAAW,GACXnT,OAAQ,KAvJwB,gCAyJjB,CACf4T,UAAW,SACXC,UAAW,WA3JqB,yCAAC,aA8JjCvU,QAAS,OACTE,WAAY,SACZqG,QAAS9G,EAAMuG,QAAQ,EAAG,IAEvBvG,EAAM+G,OAAOC,SAlKgB,IAmKhCxG,eAAgB,cAnKgB,0BAqKvB,CACTsG,QAAS,KAtKuB,sCAwKX,CACrB/F,SAAU,QACVF,IAAK,GACL8G,MAAO,GACPS,OAAQ,EACRpC,OAAQ,MA7KwB,oCA+Kb,CACnB7F,gBAAiB,kBACjB4J,SAAU,SACVN,aAAc,gBAlLkB,iCAoLhB,CAChBxI,OAAQ,SArLwB,kCAuLf,CACjBI,MAAO,OACPD,OAAQ,IAzLwB,iCA2LhB,CAChB0H,OAAQ,OACRW,aAAc,MACdV,UAAW,sEA9LqB,4BAgMrB,CACXqL,UAAW,GACXnT,OAAQ,KAlMwB,6BAoMpB,CACZmT,UAAW,IACXnT,OAAQ,MAtMwB,mCAwMd,CAClBmT,UAAW,MACXnT,OAAQ,QA1MwB,qBA4M5B,CACJC,SAAU,UA7MsB,qBA+M5B,CACJoF,YAAa,KAhNmB,qBAkN5B,CACJJ,WAAY,KAnNoB,oBAqN7B,CACHjF,OAAQ,OACRI,MAAO,OACPoI,aAAc,MACdlJ,QAAS,iBAzNuB,8BA2NnB,CAAEkJ,aAAc,IA3NG,oBA4N7B,CACHpI,MAAO,QA7NyB,iCA+NhB,CAChB0T,cAAe,QAhOiB,0BAkOvB,CACTjO,QAAS,KAnOuB,wBAqOzB,CACP5F,SAAUlB,EAAMgV,WAAWC,QAAQ,IACnCN,WAAY3U,EAAMgV,WAAWE,oBAvOG,+BAyOlB,CACdpM,OAAQ,EACRqM,KAAM,gBACNlU,OAAQ,EACRG,QAAS,EACT2I,SAAU,SACVjD,QAAS,EACT/F,SAAU,WACVF,IAAK,GACLQ,MAAO,IAlPyB,4BAoPrB,CACXD,OAAQpB,EAAMuG,QAAQ,GACtB7F,SAAU,MAtPsB,4BAwPrB,CACXP,gBAAiB,0BAzPe,8BA2PnB,CACbA,gBAAiB,2BA5Pe,8BA8PnB,CACbA,gBAAiB,0BA/Pe,gCAiQjB,CACfA,gBAAiB,2BAlQe,iCAoQhB,CAChBY,SAAU,WACVF,KAAM,GACN8G,OAAQ,GACRS,OAAQ,EACRpC,OAAQ,MAzQwB,4CAAC,aA4QjCzF,QAAS,OACTE,WAAY,SACZqG,QAAS9G,EAAMuG,QAAQ,EAAG,IAEvBvG,EAAM+G,OAAOC,SAhRgB,IAiRhCxG,eAAgB,cAjRgB,6BAmRpB,CACZ4T,UAAW,IACXrK,SAAU,WArRsB,oBAuR7B,CACH3I,OAAQ,KAxRwB,mBA0R9B,CACFA,OAAQ,IA3RwB,sBA6R3B,CACLC,MAAOrB,EAAMuG,QAAQ,GACrBtF,OAAQjB,EAAMuG,QAAQ,KA/RU,K,GCLsBvE,EAAQ,I,OAA1DD,c,GAAemL,c,GAAekI,gBCCoBpT,EAAQ,K,OAA1DD,c,GAAemL,c,GAAekI,gB,qHCwBzBC,GAAU,uCAAG,4BAAApX,EAAA,sEAEOb,MAAM,cAAe,CAClDc,OAAQ,OACRL,QAAS,CACPM,OAAQ,mBACR,eAAgB,sBANI,cAEpBmX,EAFoB,gBASaA,EAAmB9X,OAThC,uCAUjB,CAAE+X,QAASD,IAVM,2CAAH,qDCrBVE,GAAW,SAAC,GAA0B,IAAxBvS,EAAuB,EAAvBA,QAASgE,EAAc,EAAdA,QAI9BwO,EAAUC,cAJkC,EAKmCxT,qBAAWgL,iBAAa,MAArG+E,EAL0C,EAK1CA,gBAAiBrS,EALyB,EAKzBA,cAAewC,EALU,EAKVA,iBAAkB8P,EALR,EAKQA,uBALR,EAMhBpE,mBAAS,MANO,mBAMzC6H,EANyC,KAM/BC,EAN+B,OAON9H,mBAASlO,EAAckD,WAAW6P,gBAAgBkD,OAAS,IAPrD,mBAOzCC,EAPyC,KAO1BC,EAP0B,KAQxCxU,EAAwC0F,EAAxC1F,iBAAkBO,EAAsBmF,EAAtBnF,kBAQpBkU,EAAc,SAACC,EAAUC,GAC7BN,EAAY,MACI,MAAZK,GACF7T,EAAiB,IACjBqT,EAAQ/J,KAAK,KACb2J,MACsB,UAAbY,EACThE,EAAgB,CACd,MAAQ,EACR,iBAAoB,YAEO,kBAAbgE,GAChB/D,EAAuB+D,EAAUC,IAOrC,OAJA9H,qBAAU,WACR2H,EAAiBnW,EAAckD,WAAW6P,gBAAgBkD,OAAS,MAClE,CAACjW,EAAckD,aAGhB,sBAAKY,UAAS,UAAKT,EAAQkT,YAA3B,UACE,eAACxL,GAAA,EAAD,CACEG,aAAW,0BACXsL,gBAAc,cACdC,gBAAc,OACdzL,QA7Bc,SAAC0L,GACnBV,EAAYU,EAAMC,gBA6BdvJ,MAAM,UALR,UAOE,cAACwJ,GAAA,EAAD,CAAQC,IAAK7W,EAAcgD,YAAYkQ,KAAMzO,IAAKzE,EAAcgD,YAAY8T,SAAUhT,UAAWT,EAAQ+E,OAEzG,cAACzD,EAAA,EAAD,UACwE,kBAA9D3E,EAAckD,WAAW6P,gBAAgBC,iBAC/ChT,EAAckD,WAAW6P,gBAAgBC,iBAAiB+D,OAAO,GAAGC,cAAgBhX,EAAckD,WAAW6P,gBAAgBC,iBAAiBiE,UAAU,GAAK,QAGnK,eAAC,KAAD,CACE5J,GAAG,cACH0I,SAAUA,EACVmB,aAAW,EACXpM,KAAMqM,QAAQpB,GACdnD,QAASwD,EALX,UAOE,cAACgB,GAAA,EAAD,CAAUC,WAAW,EAArB,+BAECvV,OAAOC,KAAKJ,GAAkBgK,KAAI,SAAAmH,GACjC,OAAQ,cAACsE,GAAA,EAAD,CAENC,WAAW,EACXrM,QAAS,kBAAMoL,EAAYtD,EAAK,eAH1B,SAG0CxH,KAAEgB,WAAWwG,IAFxD3Q,yBAAc,kCAAD,OAAmC2Q,QAKzD,cAACpC,GAAA,EAAD,CAAS5M,UAAWT,EAAQoE,UAC5B,cAAC2P,GAAA,EAAD,CAAUpM,QAAS,kBAAMoL,EAAY,OAArC,sBACA,cAAC1F,GAAA,EAAD,CAAS5M,UAAWT,EAAQoE,UAC5B,cAAC2P,GAAA,EAAD,CAAUpM,QAAS,kBAAMoL,EAAY,UAArC,qCACCtU,OAAOC,KAAKG,GAAmBwP,OAAS,gCACvC,cAAChB,GAAA,EAAD,CAAS5M,UAAWT,EAAQoE,UAC5B,eAAC2P,GAAA,EAAD,WAAWlV,EAAkBoV,cAA7B,KAA8CpB,KAC9C,cAACkB,GAAA,EAAD,UACE,cAACG,GAAA,EAAD,CACElK,GAAG,qBACHxQ,QAASqF,EAAkBrF,SAAW,GACtC2a,eAAgB,SAACC,GAAD,OAAYA,EAAO3K,OACnC1I,MAAO,CAAE3C,MAAO,KAChBiW,SAAU,SAAChB,GAAD,OAAWN,EAAaM,EAAMiB,OAAOC,WAAa,GAAK,UACjEC,YAAa,SAACC,GAAD,OAAY,cAACC,GAAA,EAAD,2BAAeD,GAAf,IACvBhL,MAAO5K,EAAkB8V,kBACzBpT,QAAQ,eAEVqT,YAAY,aACZC,iBAAiB,OACjBC,UAAW,SAACzB,GAAD,OAAWA,EAAM0B,0BAEZ,UChGvB,SAASC,GAAT,GAAkE,IAAhCC,EAA+B,EAA/BA,IAAKC,EAA0B,EAA1BA,cACtCC,GADgE,EAAXC,QAC5C,CACbC,GAAKH,EAAiB,QAAU,MAChCI,KAAOJ,EAAiB,MAAQ,UAE5BnL,EAASkL,EAAM,EAAKE,EAAOG,KAAQL,EAAM,EAAKE,EAAOE,GAAK,QAC1DE,EAAgBlV,KAAKmV,IAAIP,GAAKQ,eAAe,KAAM,CAAE1U,MAAO,UAAW2U,sBAAuB,IAC9FrM,EAAQ4L,EAAM,EAAK,SAAOA,EAAM,EAAK,SAAM,SAEjD,OAAQ,mCACN,sBACElL,MAAOA,EADT,mBAGMV,EAHN,YAGckM,O,ICLVzW,GAAkBC,EAAQ,IAA1BD,cAEK6W,GAAe,SAAC,GAA4E,IAA1EC,EAAyE,EAAzEA,WAAY7K,EAA6D,EAA7DA,WAAY/K,EAAiD,EAAjDA,QAAS6V,EAAwC,EAAxCA,OAAQC,EAAgC,EAAhCA,QAASC,EAAuB,EAAvBA,iBAK/E,OACEH,EACE,eAACzL,GAAD,CAEEnK,QAASA,EAFX,UAGE,cAACsB,EAAA,EAAD,UACGsU,EAAWnM,MAAQmM,EAAWnM,MAAQ,KAEzC,cAACyK,GAAA,EAAD,CACElK,GAAE,8BAAyB4L,EAAWnM,OACtCjQ,QAASwc,MAAMC,QAAQlL,GACrBA,EACA,GACFmL,aAAc,SAAC9B,GAAD,OACZ,eAACzT,EAAA,EAAD,CAAMC,WAAS,EAACuV,QAAQ,gBAAxB,UACE,cAACxV,EAAA,EAAD,CAAME,MAAI,EAAV,SACGuT,EAAO3K,QAET2K,EAAOgC,OAAS,cAACzV,EAAA,EAAD,CAAME,MAAI,EAAV,SACf,cAACmU,GAAD,CACEC,IAAKb,EAAOgC,MACZlB,eAAe,EACfE,QAAS/U,KAAKmV,IAAIpB,EAAOgC,eAKjCjC,eAAgB,SAACC,GAAD,OAAYA,EAAO3K,OACnC4K,SAAU,SAAChB,EAAOL,GAChB,IAAIqD,EAAgB,GAChBrD,GAAYA,EAASlD,MAAOuG,EAAgBrD,EAASlD,MAChDkD,GAAYA,EAASvJ,QAAO4M,EAAgBrD,EAASvJ,OAC9DoM,EACED,EAAWU,WACXD,IAEJ7B,YAAa,SAACC,GAAD,OAAY,cAACC,GAAA,EAAD,2BAAeD,GAAf,IACvBhL,MAAOmM,EAAWW,cAAgBX,EAAWW,cAAgBX,EAAWU,WACxE/U,QAAQ,eAEVqT,YAAY,aACZ7T,MAAO,CACL7D,gBAAiB4Y,GAAW,IAE9BU,cAAevO,KAAEwO,UAAS,SAACpD,GACrBuC,EAAWc,iBAAmBrD,EAAMiB,OAAOxE,OAAOiG,EAAiB1C,EAAMiB,OAAOxE,SACnF,SA3CAhR,GAAc,aAAD,OAAc8W,EAAWnM,SA8C3B,I,sBC7DhB3K,GAAkBC,EAAQ,IAA1BD,cAGK6X,GAAa,SAAC,GAAgE,IAA9D3W,EAA6D,EAA7DA,QAAS4W,EAAoD,EAApDA,gBAAiBC,EAAmC,EAAnCA,iBAAkBjB,EAAiB,EAAjBA,WACvE,OAEE,eAACpL,GAAD,CAAsBxK,QAASA,EAA/B,UACE,cAACsB,EAAA,EAAD,UAEGsU,EAAWnM,QAEd,cAACqN,GAAA,EAAD,CACEhH,MAAO8G,EACPG,WAAS,EACT1C,SAAUwC,EACVhP,aAAW,iBAJb,SAMGpJ,OAAOC,KAAKkX,EAAWoB,YAAY1O,KAAI,SAAAmH,GACtC,OACE,cAACwH,GAAA,EAAD,CAEEnH,MAAOL,EACP5H,aAAW,eAHb,SAIG4H,GAHI3Q,GAAc,yBAAD,OAA0B2Q,cCpBlD3Q,GAAkBC,EAAQ,IAA1BD,cAGKoY,GAAiB,SAAC,GAAwE,IAAtElX,EAAqE,EAArEA,QAASmX,EAA4D,EAA5DA,oBAAqBC,EAAuC,EAAvCA,qBAAsBxB,EAAiB,EAAjBA,WACnF,OAEE,eAACpL,GAAD,CAAsBxK,QAASA,EAA/B,UACE,cAACsB,EAAA,EAAD,UACEsU,EAAWnM,QACb,cAACqN,GAAA,EAAD,CACEhH,MAAOqH,EACPJ,WAAS,EACT1C,SAAU+C,EACVvP,aAAW,iBAJb,SAMGpJ,OAAOC,KAAKkX,EAAWT,QAAQ7M,KAAI,SAAAmH,GAClC,OACE,cAACwH,GAAA,EAAD,CAEEnH,MAAOL,EAAK5H,aAAW,eAFzB,SAGE,sBAAMpH,UAAS,UAAKT,EAAQqX,KAAOtW,MAAO,CACxC7D,gBAAkB0Y,EAAWT,OAAO1F,GAAKmG,EAAWT,OAAO1F,GAAKpB,OAAS,IACpEoB,MAJF3Q,GAAc,8BAAD,OAA+B2Q,c,WClBlD6H,GAAc,SAAC,GAA2D,IAAzDtX,EAAwD,EAAxDA,QAASuX,EAA+C,EAA/CA,sBAAuBC,EAAwB,EAAxBA,kBAC5D,OACE,eAACjN,GAAD,CAAgBvK,QAASA,EAAzB,UACE,cAACsB,EAAA,EAAD,UACEiW,EAAwB,aAAe,cAEzC,cAACE,GAAA,EAAD,CACEC,SAAUH,EACVlD,SAAU,kBAAMmD,EAAkB,MAAOD,IACzCxN,MAAM,UACN8F,KAAK,qBACL8H,WAAY,CAAE,aAAc,0B,iCCb5B7Y,GAAkBC,EAAQ,IAA1BD,cAGK8Y,GAAa,SAAC,GAAsE,IAApE5X,EAAmE,EAAnEA,QAAS6X,EAA0D,EAA1DA,qBAAsBL,EAAoC,EAApCA,kBAAmB5B,EAAiB,EAAjBA,WAC7E,OACE,cAACrL,GAAD,CAAgBvK,QAASA,EAAzB,SACE,eAAC8X,GAAA,EAAD,CAAarX,UAAWT,EAAQ+X,YAAhC,UACE,cAACC,GAAA,EAAD,CAAYhO,GAAG,2BAAf,SACE4L,EAAWnM,QACb,cAACwO,GAAA,EAAD,CACEC,QAAQ,2BACRlO,GAAG,qBACH8F,MAAO+H,EACPxD,SAAU,SAAChB,GACTmE,EAAkB,KAAMnE,EAAMiB,OAAOxE,QALzC,SAQG8F,EAAWpc,QAAQ8O,KAAI,SAAAzH,GACtB,OAAO,eAAEkT,GAAA,EAAF,CAELjE,MAAOjP,EAAKsX,cAFP,cAEyBtX,IADzB/B,GAAc,gBAAD,OAAiB+B,gB,kBCjBjDuX,kBAAeC,UAAUC,eAAiB,SAAwBjF,GAAQ,IAAD,OACjEkF,EAAWlF,EAAMiB,OAIvB5a,KAAK8e,UAAS,SAAAC,GAcZ,IAXA,IAAIC,EAAiB,YAAOD,EAAUC,mBAKlCC,EAAyB1Q,KAAE2Q,KAAK,EAAKpe,MAAM8N,IAAIuQ,UAAW,CAAE7O,GAAIuO,EAASvO,KAEzE8O,EAA4B7Q,KAAE8Q,OAAO,EAAKve,MAAM8N,IAAIuQ,UAAW,CAAEG,OAAQL,EAAuBK,SAGhGC,EAAmB,GACdC,EAAI,EAAGA,EAAI,EAAK1e,MAAM8N,IAAIuQ,UAAUxK,OAAQ6K,KACkB,GAAjED,EAAiB1I,QAAQ,EAAK/V,MAAM8N,IAAIuQ,UAAUK,GAAGF,SACvDC,EAAiBxQ,KAAK,EAAKjO,MAAM8N,IAAIuQ,UAAUK,GAAGF,QAKtD,IADA,IAAIG,EAAwC,GACnCC,EAAI,EAAGA,EAAIV,EAAkBrK,OAAQ+K,KACuC,GAA/ED,EAAsC5I,QAAQmI,EAAkBU,GAAGJ,SACrEG,EAAsC1Q,KAAKiQ,EAAkBU,GAAGJ,QAIpE,IAUO,EAVHK,EAA8BpR,KAAEqR,aAAaL,EAAkBE,GAC/DI,EAAqB,sBAAOF,GAAP,CAAoCV,EAAuBK,SAEhFQ,EAAgCvR,KAAE8Q,OAAO,EAAKve,MAAM8N,IAAIuQ,WAAW,SAACN,GACtE,OAA0D,GAAnDgB,EAAsBhJ,QAAQgI,EAASS,WAGE,SAA9CT,EAASkB,WAAW,gBAAgB3J,MAEtC4I,EAAoBc,GAGpB,EAAAd,GAAkBjQ,KAAlB,oBAA0BqQ,IAS5B,OALI,EAAKte,MAAM6Z,UACb,EAAK7Z,MAAM6Z,SAASqE,GAIf,CAAEA,yBAIbN,kBAAeC,UAAUqB,kBAAoB,WAE3ChgB,KAAK8e,SAAS,CAAEE,kBAAmBhf,KAAKc,MAAM8N,IAAIuQ,a,+CC3DvCc,GAAS,2BACjBC,MADiB,IAEpBnQ,MAAO,mBACPoP,UAAWe,KAAIf,UAAUvQ,KAAI,SAAAiQ,GAE3B,OAAQA,EAAS1I,MAEf,IAAK,cACL,IAAK,QACL,IAAK,gBACL,IAAK,gBACL,IAAK,eACL,IAAK,UACL,IAAK,aACL,IAAK,WACL,IAAK,eACL,IAAK,WACH,OAAO,2BAAK0I,GAAZ,IAAsBS,OAAQ,cAEhC,IAAK,WACL,IAAK,UACL,IAAK,WACL,IAAK,OACL,IAAK,YACL,IAAK,OACL,IAAK,SACL,IAAK,YACL,IAAK,WACL,IAAK,WACL,IAAK,eACL,IAAK,eACH,OAAO,2BAAKT,GAAZ,IAAsBS,OAAQ,YAEhC,IAAK,UACL,IAAK,UACL,IAAK,WACL,IAAK,iBACL,IAAK,iBACL,IAAK,WACL,IAAK,uBACL,IAAK,iBACL,IAAK,gBACL,IAAK,UACL,IAAK,WACL,IAAK,cACL,IAAK,YACL,IAAK,WACL,IAAK,YACL,IAAK,WACL,IAAK,QACH,OAAO,2BAAKT,GAAZ,IAAsBS,OAAQ,UAEhC,IAAK,UACL,IAAK,WACL,IAAK,QACL,IAAK,UACL,IAAK,SACL,IAAK,aACL,IAAK,OACL,IAAK,UACH,OAAO,2BAAKT,GAAZ,IAAsBS,OAAQ,aAEhC,IAAK,SACL,IAAK,aACL,IAAK,SACL,IAAK,SACL,IAAK,aACH,OAAO,2BAAKT,GAAZ,IAAsBS,OAAQ,kBAMzBa,GAAyB,CACpC,UAAW,MACX,aAAc,SACd,eAAgB,QAELC,GAA6B,CACxC,UAAWC,KACX,aAAcC,KACd,eAAgBC,MCjFVnb,GAAkBC,EAAQ,IAA1BD,cAGD,SAASob,GAAT,GAAqD,IAAhCla,EAA+B,EAA/BA,QAAS6V,EAAsB,EAAtBA,OAAQD,EAAc,EAAdA,WAAc,EAEnB/K,mBAAS,gDAFU,mBAElDsP,EAFkD,KAErCC,EAFqC,KAIzD,OACE,eAAC5P,GAAD,CAAsBxK,QAASA,EAA/B,UAEE,eAACsB,EAAA,EAAD,CAAYb,UAAS,UAAKT,EAAQqa,QAAb,YAAwBra,EAAQ8E,KAAhC,aAAyC9E,EAAQsa,kBAAtE,UAEG1E,EAAWnM,MAFd,KAEsB,4BAAI0Q,GAA4B,kBAGtD,cAAC,kBAAD,CAAgB7R,IAAKqR,GACnBtF,SAAU,SAACwE,GAGT,IADA,IAAIM,EAAwC,GACnCC,EAAI,EAAGA,EAAIP,EAAUxK,OAAQ+K,KACuC,GAAvED,EAAsC5I,QAAQsI,EAAUO,GAAGJ,SAC7DG,EAAsC1Q,KAAKoQ,EAAUO,GAAGJ,QAG5D,IAAIuB,EAAgDpB,EAAsCqB,KAAK,KAC/FJ,EAAeG,GACf1E,EACED,EAAWU,WACV6D,GAA6B,SAnB/Brb,GAAc,aAAD,OAAc8W,EAAWnM,S,eCXzC3K,GAAkBC,EAAQ,IAA1BD,cAGK2b,GAAc,SAAC,GAAiD,IAA/C1P,EAA8C,EAA9CA,WAAY/K,EAAkC,EAAlCA,QAAS6V,EAAyB,EAAzBA,OAAQD,EAAiB,EAAjBA,WAAiB,EAEpC/K,mBAAS,IAF2B,mBAEnE6P,EAFmE,KAEtDC,EAFsD,KAI1E,OACE,eAACnQ,GAAD,CAAsBxK,QAASA,EAA/B,UAEE,eAACsB,EAAA,EAAD,CAAYb,UAAS,UAAKT,EAAQqa,QAAb,YAAwBra,EAAQ8E,KAAhC,aAAyC9E,EAAQsa,kBAAtE,UACG1E,EAAWnM,MADd,OAGA,cAACmR,GAAA,EAAD,CACE9K,MAAO4K,EAAYrM,OAASqM,EAAc1E,MAAMC,QAAQlL,GAAc,CAACA,EAAW,GAAGtB,MAAOsB,EAAWA,EAAWsD,OAAS,GAAG5E,OAAS,GACvI4K,SAAU,SAAChB,EAAOL,GAChB2H,EAAe3H,IAEjB6H,kBAAkB,OAClBlS,kBAAgB,eAChBmS,kBAAmB,SAACzH,EAAOL,GACzB6C,EACED,EAAWU,WACVtD,EAAD,WAAiBA,EAAjB,KAA+B,OAEnC+H,IAAK/E,MAAMC,QAAQlL,IAAeA,EAAWsD,OAAStD,EAAW,GAAGtB,MAAQ,EAC5EuR,IAAKhF,MAAMC,QAAQlL,IAAeA,EAAWsD,OAAStD,EAAWA,EAAWsD,OAAS,GAAG5E,MAAQ,EAChGwR,UAAUjF,MAAMC,QAAQlL,KAAeA,EAAWsD,WAlB/CvP,GAAc,aAAD,OAAc8W,EAAWnM,UCNzC3K,GAAkBC,EAAQ,IAA1BD,cAEKoc,GAAY,SAAC,GAAiD,IAA/CnQ,EAA8C,EAA9CA,WAAY/K,EAAkC,EAAlCA,QAAS6V,EAAyB,EAAzBA,OAAQD,EAAiB,EAAjBA,WAAiB,EAER/K,mBAAS,QAFD,mBAEjEsQ,EAFiE,KAEvCC,EAFuC,KAGxE,OACE,eAAC5Q,GAAD,CAAsBxK,QAASA,EAA/B,UAEE,eAACsB,EAAA,EAAD,CAAYb,UAAS,UAAKT,EAAQqa,QAAb,YAAwBra,EAAQ8E,KAAhC,aAAyC9E,EAAQsa,kBAAtE,UAEG1E,EAAWnM,MAFd,OAIA,cAACqN,GAAA,EAAD,CACEhH,MAAOqL,EACPpE,WAAS,EACT1C,SAAU,SAAChB,EAAOL,GAChBoI,EAA4BpI,GAC5B6C,EACED,EAAWU,WACVtD,GAAuB,KAE5BnL,aAAW,UACXpH,UAAWT,EAAQ+Q,KAVrB,SAWGiF,MAAMC,QAAQlL,GAAcA,EAAWzC,KAAI,SAAC+S,EAASnU,GACpD,GAAsB,cAAlBmU,EAAQ5R,MAAuB,CACjC,IAAM6R,EAAOxB,GAA2BuB,EAAQ5R,OAChD,OACE,eAACwN,GAAA,EAAD,CAEEnH,MAAOuL,EAAQ5R,MACf5B,aAAYwT,EAAQ5R,MACpBhJ,UAAWT,EAAQub,IAJrB,UAKE,cAACD,EAAD,CAAM7a,UAAWT,EAAQ+E,OACxBkD,KAAEgB,WAAW4Q,GAAuBwB,EAAQ5R,SAAW4R,EAAQ5R,QAL3D3K,GAAc,2BAAD,OAA4B8W,EAAWnM,MAAvC,YAAgDvC,SASrE,OA9BFpI,GAAc,aAAD,OAAc8W,EAAWnM,UCFpC+R,GAAS,SAAC,GAAiC,IAA/BxX,EAA8B,EAA9BA,QAASjH,EAAqB,EAArBA,MAAOiD,EAAc,EAAdA,QAKnCwS,EAAUC,cALuC,EASrBxT,qBAAWgL,iBAAa,MAFhDtN,EAP6C,EAO7CA,cACN0K,GARmD,EAO9BlI,iBAP8B,EAQnDkI,YAAYC,EARuC,EAQvCA,cACZ7K,EATmD,EASnDA,IAAKwO,EAT8C,EAS9CA,YAAaC,EATiC,EASjCA,QACCrL,GAAelD,EAA5BgD,YAA4BhD,EAAfkD,YAEbR,EAAgB1C,EAAhB0C,YAZ6C,EAajBwL,wBAASC,GAbQ,mBAa9CC,EAb8C,KAalCC,EAbkC,OAcXH,wBAASC,GAdE,mBAc9C2Q,EAd8C,KAc/B1F,EAd+B,KAgBrD5K,qBAAU,WAGR,GAAID,GAAWlH,GAAWA,EAAQuE,eAAe,gBAAiB,CAChE,IAAI6C,GAAe,EAMnB,OALAH,EAAYyQ,EAA6B,CAACD,IAAgBnQ,MAAK,SAAA7L,GACzD2L,GACFJ,EAAcvL,MAGX,kBAAM2L,GAAe,MAE7B,CAACvL,EAAYqL,EAASuQ,IAEzB,IAAMC,EAA2B,uCAAG,WAAOC,GAAP,2BAAA3gB,EAAA,6DAK9B4gB,EAAkB5X,EAAQ6X,aAC1BC,EAAaF,EAAgBhR,YAC7B+Q,IACFG,EAAWC,QAAQ,kBAAnB,WAA2CJ,EAA3C,MARgC,SAUHlf,EAAI8O,GAAG9O,EAAI+O,iBAAiB,CAAEC,cAAemQ,EAAgBlQ,cAAgB,OAAQlQ,KAAMsgB,KAVxF,OAalC,IAHIE,EAV8B,OAW9BC,EAAgB,GAChBC,EAA0B,GAZI,WAazBhD,GACP,IAAIiD,EAAiBP,EAAgBO,eAAe7T,KAAI,SAAA8T,GAAK,OAAIJ,EAAmB9C,GAAGkD,MAAQ5B,KAAK,MAChG1K,EAAQ8L,EAAgB9L,MAAMxH,KAAI,SAAAwH,GAAK,OAAIkM,EAAmB9C,GAAGpJ,MAAQuM,WAC7EH,EAAwBzT,KAAK,CAC3B,MAASqH,EACT,MAASqM,EACT,MAAUH,EAAmB9C,GAAnB,MAAkC8C,EAAmB9C,GAAnB,WAAiCpO,KANxEoO,EAAI,EAAGA,EAAI8C,EAAmB3N,OAAQ6K,IAAM,EAA5CA,GAbyB,OAsBlC+C,EAAa,aAAmBC,EAtBE,kBAuB3BD,GAvB2B,4CAAH,sDA0B3BK,EAAqB,CACzB,YAAa,cAGf,OACE,cAACC,EAAA,EAAD,CAAexf,MAAOA,EAAtB,SACE,cAACyf,GAAA,EAAD,CACE1e,SAAS,QACT2C,UAAWgc,aAAKzc,EAAQuC,QAF1B,SAIE,eAACma,GAAA,EAAD,WACE,cAAChV,GAAA,EAAD,CACEqC,MAAM,UACNlC,aAAW,cACXF,QAAS,kBAAML,GAAeD,IAC9BsV,KAAK,QAJP,SAMGtV,EAAa,cAACO,GAAA,EAAD,IAAkB,cAACgV,GAAA,EAAD,MAGjCvd,EACC,cAACkU,GAAA,EAAD,CAAQC,IAAI,OACVpS,IAAKrC,EAAQ,MAAmEoB,QAChFY,MAAO,CAAEsB,KAAM,QAASrE,OAAQ,QAChCuD,QAAQ,WACL,GAENyC,EAAQyF,MAAQ,cAACnI,EAAA,EAAD,CAAYb,UAAWT,EAAQ8E,KAAMvD,QAAQ,KAA7C,SAAmDyC,EAAQyF,QAAsB,GAEjGsB,GAAcA,EAAW8Q,aACxB,cAAClb,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGL,UAAS,UAAKT,EAAQmG,OAAb,YAAuBnG,EAAQ+E,MAA1D,SACE,cAAC,GAAD,CACE6Q,WAAY5R,EAAQ6X,aACpB9Q,WAAYA,EAAW8Q,aACvBhG,OAAQ,SAACS,EAAYtD,GACfsD,GAActD,GAChBR,EAAQ/J,KAAK,CACXoU,SAAUP,EAAmBhG,GAC7BwG,OAAO,GAAD,OAAMC,mBAAmBzG,GAAzB,YAAwCtD,MAIpDhT,QAASA,EACT8V,QAAS,QACTC,iBAAkBA,MACR,GAEhB,cAACiH,GAAA,EAAD,CAAOC,aAAc,EAAGlT,MAAM,QAAQtJ,UAAWsK,GAAcA,EAAW8Q,aAAzB,UAA2C7b,EAAQ+E,MAAnD,UAA+D/E,EAAQmG,OAAvE,YAAiFnG,EAAQ+E,MAA1I,SACE,cAACmY,GAAA,EAAD,MAEF,cAAC,GAAD,CAAUld,QAASA,EAASgE,QAASA,EAAQmZ,mB,sBC/G1CC,GAAY,SAAC,GAAiB,IAAfpd,EAAc,EAAdA,QAAc,EAIZf,qBAAWgL,iBAAa,MAD5CC,EAHgC,EAGhCA,cAAemT,EAHiB,EAGjBA,iBACrBvP,EAJsC,EAItCA,SAAUC,EAJ4B,EAI5BA,YAEZ,OACE,cAACyO,GAAA,EAAD,CAAQ1e,SAAS,QAAQiM,MAAM,cAActJ,UAAWT,EAAQqG,aAAhE,SACE,eAACqW,GAAA,EAAD,CAASnb,QAAQ,QAAjB,UACE,cAAC6O,GAAA,EAAD,CACE3P,UAAS,UAAKT,EAAQmG,OAAb,YAAuBnG,EAAQ+E,MACxCzH,QAAQ,SACRggB,UAAW,cAACC,GAAA,EAAD,IACX5V,QAAS,WACHmG,GAAUC,GAAaD,GAC3BuP,GAAkBnT,IANtB,oBAUA,cAACkG,GAAA,EAAD,CACE9S,QAAQ,SACRggB,UAAW,cAACE,GAAA,EAAD,IACX7V,QAAS,WACHuC,GAAemT,GAAkBnT,GACrC6D,GAAaD,IALjB,wB,UCnBD,SAAS2P,GAAT,GAAoD,IAA/B9S,EAA8B,EAA9BA,kBAAmB3K,EAAW,EAAXA,QAAW,EAEpB6K,wBAASC,GAFW,mBAEjDC,EAFiD,KAErCC,EAFqC,OAGH/L,qBAAWgL,iBAAa,MAArEtN,EAHgD,EAGhDA,cAAeF,EAHiC,EAGjCA,IAAKwO,EAH4B,EAG5BA,YAAaC,EAHe,EAGfA,QACpBrL,GAAelD,EAA5BgD,YAA4BhD,EAAfkD,YAEjB6d,EAAsB,GAE1BvS,qBAAU,WACR,GAAID,EAAS,CACX,IAAIE,GAAe,EAMnB,OALAH,EAAYI,GAAgBC,MAAK,SAAA7L,GAC3B2L,GACFJ,EAAcvL,MAGX,kBAAM2L,GAAe,MAE7B,CAACvL,EAAYqL,IAEhB,IAAMG,EAAc,uCAAG,gCAAArQ,EAAA,6DAGf4P,EAAgBD,EAAhBC,YAHe,SAIUnO,EAAI8O,GAAG9O,EAAI+O,iBAAiB,CAAEC,cAAed,EAAkBe,cAAgB,OAAQlQ,KAAMoP,KAJvG,cAIjBoR,EAJiB,OAKrB0B,EAAoB1T,GAAKlL,yBAAc,kBAAD,OAAmB6L,EAAkBX,KAC3E0T,EAAoBC,KAAO,GAEvBC,EAAoB,GACxB5B,EAAmB1T,KAAI,SAAAzH,GACrB,GAAIA,EAAK8J,EAAkBC,YAAYiT,OAAO,IAE5C,CACA,IAAIC,EAAe,CACjB,EAAKjd,EAAK8J,EAAkBC,YAAYiT,OAAO,IAAIxB,WACnD,EAAKxb,EAAK8J,EAAkBC,YAAYiT,OAAO,KAAO,EACtD,OAAUhd,EAAKgL,QAEbiS,GAAmC,SAAnBA,EAAaC,GAAcH,EAAkBnV,KAAKqV,OAG1EJ,EAAoBC,KAApB,UAA+BC,GArBV,kBAuBd,CAACF,IAvBa,4CAAH,qDA0Bd9R,EAAgBb,GAAcA,EAAWsD,OAAS2P,OAAsC,IAA/BjT,EAAW,GAAG4S,KAAK,GAAG9R,QAAcG,QAAQ,IAAM,GAAKD,UAAyC,IAA/BhB,EAAW,GAAG4S,KAAK,GAAG9R,QAAcG,QAAQ,KAAO,EAA7D,kBAAuF,GAKvMiS,EAAalT,EAAmD,YAAjCJ,EAAkBuT,WAAlB,YAC9BnT,EAAW,GAAG4S,MAAQ5S,EAAW,GAAG4S,KAAK,GAAK5S,EAAW,GAAG4S,KAAK,GAAGI,EAAE/R,QAAQ,GAAK,IAAImS,QAAQ,oBAAqB,QACxF,YAAjCxT,EAAkBuT,WAA2BnS,SAAShB,EAAW,GAAG4S,MAAQ5S,EAAW,GAAG4S,KAAK,GAAK5S,EAAW,GAAG4S,KAAK,GAAGI,EAAE/R,QAAQ,GAAK,IAAuC,YAAjCrB,EAAkBuT,WAAlB,UAC/C,KAAzFnT,EAAW,GAAG4S,MAAQ5S,EAAW,GAAG4S,KAAK,GAAK5S,EAAW,GAAG4S,KAAK,GAAGI,EAAE/R,QAAQ,GAAK,IADqD,MAG3I,GAL0B,GAMhC,OACE,cAAC/K,EAAA,EAAD,CAAMR,UAAS,UAAKT,EAAQoe,UAAb,kBACbpe,EAAQoN,eADK,kBAEbpN,EAAQqe,iBAFK,UAAf,SAKE,qBACEtd,MAAO,CACL/C,OAAQ2M,EAAkB3M,QAF9B,SAKG+M,EACC,cAAC,IAAMjC,SAAP,UACE,eAACqB,GAAD,CAAcnM,OAAQ,IAAKgC,QAASA,EAApC,UACE,eAACW,EAAA,EAAD,CAAMC,WAAS,EAACH,UAAS,UAAKT,EAAQmN,WAAb,KAAzB,UACE,cAACxM,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAf,SACE,cAACQ,EAAA,EAAD,CAAYC,QAAQ,QAAQ+I,MAAM,OAAOP,MAAM,YAA/C,SACGY,EAAkBlB,UAGvB,cAAC9I,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,cAACQ,EAAA,EAAD,CAAYC,QAAQ,YAAY+I,MAAM,OAAtC,SACE,4BAAI2T,QAGR,cAACtd,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,cAACsJ,GAAA,EAAD,CAAMC,KAAK,QACTZ,MAAK,UAAKgB,sBAAWmB,GAAhB,YAAkCG,SAAwC,IAA/BhB,EAAW,GAAG4S,KAAK,GAAG9R,QAAcG,QAAQ,GAAvF,MACLvL,UAAWud,OAAsC,IAA/BjT,EAAW,GAAG4S,KAAK,GAAG9R,QAAcG,QAAQ,IAAM,GAAKD,UAAyC,IAA/BhB,EAAW,GAAG4S,KAAK,GAAG9R,QAAcG,QAAQ,KAAO,EAAIhM,EAAQiM,SAAWjM,EAAQkM,OACrK5O,QAAQ,SACRgN,MAAM,eAIZ,cAAC,KAAD,CACEqT,KAAM5S,EACN5M,OAAQ,CAAEP,IAAK,GAAI8G,MAAO,GAAIS,OAAQ,GAAIxH,KAAM,IAChD2gB,OAAQ,CACN7R,KAAM,OACN8R,OAAQ,WACRC,UAAW,OAEbC,OAAQ,CAAEhS,KAAM,SAAUsO,IAAK,OAAQC,IAAK,OAAQ0D,SAAS,EAAMC,SAAS,GAC5EC,SAAU,CACRC,OAAQ,OACRC,SAAU,EACVC,YAAa,EACbC,aAAc,EACdT,OAAQ,kBAAM,OAEhBU,WAAY,CACVJ,OAAQ,SACRC,SAAU,EACVC,YAAa,EACbC,aAAc,EACdT,OAAQ,kBAAM,OAEhBW,cAAc,EACdC,aAAa,EACbC,aAAa,EACbphB,OAAQ,IACRmX,OAAQxK,EAAkB0U,SAC1BC,SAAS,SAKf,cAAC3e,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAIL,UAAS,UAAKT,EAAQwN,aAAb,KAA8BzM,MAAO,CAAE/C,OAAQ2M,EAAkB3M,QAA7F,SACE,cAAC2P,GAAA,EAAD,CAAkBlN,UAAWT,EAAQ4N,iBACnC7M,MAAO,CAAEgJ,MAAM,GAAD,OAAKY,EAAkB0U,SAAvB,cC9HrB,I,GCEmDtgB,EAAQ,ICF5DwgB,I,GDEEzgB,c,GAAemL,c,GAAekI,gBCFZ,CACxB,GAAM,KACN,UAAa,GACb,OAAU,IACV,KAAQ,UACR,cAAiB,CACf,CACE,MAAS,eACT,KAAQ,cACR,OAAU,CACR,+BACA,2BACA,qBAEF,OAAU,CACR,4BAEF,YAAe,CACb,4BAEF,QAAW,CACT,2BAA4B,2BAE9B,kBAAqB,KACrB,MAAS,CACP,sCACA,8BAEF,MAAS,IACT,eAAkB,kUAEpB,CACE,MAAS,eACT,KAAQ,cACR,OAAU,CACR,+BACA,2BACA,qBAEF,OAAU,CACR,4BAEF,YAAe,CACb,4BAEF,QAAW,CACT,2BAA4B,2BAE9B,kBAAqB,KACrB,MAAS,CACP,iCACA,8BAEF,MAAS,IACT,eAAkB,mUAGtB,iBAAoB,CAClB,OACA,SAEF,aAAgB,OAChB,UC/DK,YAAkD,IAA/BxH,EAA8B,EAA9BA,kBAAmB3K,EAAW,EAAXA,QAGnCL,EADkBV,qBAAWgL,iBAAa,MAA1CtN,cACAgD,YAER,OACE,sBACEc,UAAS,UAAKT,EAAQwf,eAAb,YAA+Bxf,EAAQoe,WAChDrd,MAAO,CAAEoQ,UAAWxG,EAAkB3M,QAFxC,UAIE,eAACsD,EAAA,EAAD,CAAYC,QAAQ,KAApB,2BAAwC5B,EAAY8f,UAApD,OACA,uBACA,mCACG9U,EAAkB+U,cAAcpX,KAAI,SAACsC,EAAa1D,GAAd,OACnC,cAACwD,GAAD,eAEM,CAAEC,oBAAmBC,cAAa1D,QAAOlH,YAF/C,UACUlB,yBAAc,8BAAgCoI,gBDoD5DyY,GAAgB,CACpB,GAAM,KACN,UAAa,EACb,KAAQ,aACR,OAAU,IACV,YAAe,CACb,MAAS,eACT,KAAQ,cACR,OAAU,CACR,2BACA,kCAEF,YAAe,CACb,4BAEF,QAAW,CACT,2BAA4B,6BAE9B,MAAS,CACP,iCAEF,MAAS,MACT,eAAkB,oTAEpB,aAAgB,OAChB,MAAS,kBACT,SAAY,UACZ,WAAc,UACd,UAAalC,IAGTmC,GACN,CACE,GAAM,KACN,UAAa,EACb,KAAQ,aACR,OAAU,IACV,YAAe,CACb,MAAS,eACT,KAAQ,aACR,OAAU,CACR,oBACA,yBAEF,YAAe,CACb,qBAEF,QAAW,CACT,oBAAqB,6BAEvB,MAAS,CACP,0BAEF,MAAS,MACT,eAAkB,0QAEpB,aAAgB,OAChB,MAAS,iBACT,SAAY,UACZ,WAAc,UACd,UAAanC,IAGToC,GACN,CACE,GAAM,KACN,UAAa,EACb,KAAQ,aACR,OAAU,IACV,YAAe,CACb,MAAS,eACT,KAAQ,aACR,OAAU,CACR,oBACA,sBAEF,YAAe,CACb,qBAEF,QAAW,CACT,oBAAqB,6BAEvB,kBAAqB,KACrB,MAAS,CACP,0BAEF,MAAS,MACT,eAAkB,iQAEpB,aAAgB,OAChB,MAAS,sBACT,SAAY,UACZ,WAAc,UACd,UAAapC,IAGTqC,GACN,CACE,GAAM,KACN,UAAa,EACb,KAAQ,aACR,OAAU,IACV,YAAe,CACb,MAAS,eACT,KAAQ,aACR,OAAU,CACR,oBACA,6BAEF,OAAU,KACV,YAAe,CACb,qBAEF,QAAW,CACT,oBAAqB,6BAEvB,kBAAqB,KACrB,MAAS,CACP,0BAEF,MAAS,MACT,eAAkB,sRAEpB,aAAgB,OAChB,MAAS,+BACT,SAAY,UACZ,WAAc,UACd,UAAarC,IAGTsC,GACN,CACE,UAAa,EACb,OAAU,IACV,KAAQ,gBACR,GAAM,KACN,SAAY,27CACZ,MAAS,qBACT,UEzMK,YAA4D,IAAnCpV,EAAkC,EAAlCA,kBAAmB3K,EAAe,EAAfA,QAAe,KAANgK,GAIxBa,mBAAS,IAJqB,mBAIzDmV,EAJyD,KAI3CC,EAJ2C,OAK7BhhB,qBAAWgL,iBAAa,MAAnDtN,EALwD,EAKxDA,cAAeuO,EALyC,EAKzCA,QACfrL,EAAelD,EAAfkD,WAGRsL,qBAAU,WACR+U,QAAQC,IAAI,mBACZD,QAAQC,IAAI,CAAEtgB,eACdqgB,QAAQC,IAAI,CAAEjV,YACVA,IACFgV,QAAQC,IAAI,mBACZC,OAED,CAACvgB,EAAYqL,IAEhB,IAAMmV,EAAUvhB,yBAAc,kBAAD,OAAmB6L,EAAkB8B,KAArC,YAA6C9B,EAAkBX,KAEtFoW,EAAS,uCAAG,4BAAAplB,EAAA,6DAEhBslB,KAAE,IAAD,OAAKD,IAAWE,KAAK,IACtBN,EAAU,GAENO,EAAWzD,mBAAmB,GAAD,OAAIpS,EAAkB6V,UAAtB,OAAiCC,SAASlI,SAASmI,SALpE,SAMVvmB,MAAM,aAAD,OAAcqmB,IACtBlV,MAAK,SAAA7L,GAAQ,OAAIA,EAASlF,UAC1B+Q,MAAK,SAAAqS,GAEJgD,kBAAeC,qBAAqBjD,EAAK7Q,KACtC+T,SAASJ,SAASK,eAAeT,IACjCU,cAAc,WACdA,cAAc,cACdA,cAAcpW,EAAkBX,IAChCgX,UAAU,gBACVC,QACAC,UACA5V,MAAK,SAAC6V,GACLlB,EAAU,GACV,IAAImB,EAAkBzkB,EAAcb,cAAc8X,UAAU,EAAGjX,EAAcb,cAAculB,YAAY,MACvGnB,QAAQC,IAAI,CAAEiB,oBACdT,kBAAeW,KAAKF,MAErBG,OAAM,SAAC7hB,UAGT4L,MAAK,WACN2U,EAAU,MA5BE,2CAAH,qDAgCf,OACE,eAAChf,EAAA,EAAD,CAAMR,UAAS,UAAKT,EAAQoe,UAAb,YAA0Bpe,EAAQoN,eAAlC,YAAoDpN,EAAQqe,kBAA3E,UAEE,cAAC9Q,GAAD,CACEhK,KAAMyc,EACNhgB,QAASA,EACThC,OAAQ2M,IAEV,qBACElK,UAAS,UAAKT,EAAQwhB,iBACtBzgB,MAAO,CAAE/C,OAAQ2M,EAAkB3M,QAFrC,SAIE,eAAC2C,EAAA,EAAD,CAAMC,WAAS,EACb0C,QAAS,EADX,UAEE,cAAC3C,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAf,SACE,cAACQ,EAAA,EAAD,CAAYC,QAAQ,KAAK+I,MAAM,SAASP,MAAM,YAA9C,SACGY,EAAkBzG,UAIvB,cAACvD,EAAA,EAAD,CAAMC,WAAS,EACb0C,QAAS,EACT9F,WAAW,SACXikB,aAAa,SACbtL,QAAQ,SAJV,SAME,cAACxV,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAf,SACE,cAACyJ,GAAD,CACEvK,QAASA,EADX,SAEE,qBACES,UAAS,8EACRT,EAAQoN,eADA,YACkBpN,EAAQ0hB,oBACnC1X,GAAIqW,GACCA,mBFsHjBsB,GAAkB,CACtB,UAAa,EACb,OAAU,IACV,KAAQ,mBACR,QAAW,CACT,CACE,GAAM,IACN,KAAQ,YACR,aAAgB,YAChB,aAAgB,mBAChB,MAAS,YACT,UAAa,IACb,IAAO,gBAGT,CACE,GAAM,IACN,KAAQ,YACR,aAAgB,YAChB,aAAgB,mBAChB,MAAS,QACT,UAAa,IACb,IAAO,qBAGT,CACE,GAAM,IACN,KAAQ,YACR,aAAgB,YAChB,aAAgB,mBAChB,MAAS,YACT,UAAa,IACb,IAAO,kBAIX,MAAS,mBACT,UzBpPK,YAA0D,IAA/BhX,EAA8B,EAA9BA,kBAAmB3K,EAAW,EAAXA,QAAW,EAC1B6K,mBAAS,IADiB,mBAG9D,OAH8D,UAK5D,cAAC5J,EAAA,EAAD,CAAMR,UAAS,UAAKT,EAAQoe,UAAb,YAA0Bpe,EAAQoN,eAAlC,YAAoDpN,EAAQqe,kBAA3E,SACE,qBACE5d,UAAS,UAAKT,EAAQwhB,iBACtBzgB,MAAO,CAAE/C,OAAQ2M,EAAkB3M,QAFrC,SAIE,eAAC2C,EAAA,EAAD,CAAMC,WAAS,EACb0C,QAAS,EADX,UAEE,cAAC3C,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAf,SACE,cAACQ,EAAA,EAAD,CAAYC,QAAQ,KAAK+I,MAAM,SAASP,MAAM,YAA9C,kCAGDY,EAAkBiX,QAAQtZ,KAAI,SAAC8D,EAAYlF,GAC1C,OACE,cAACiF,GAAD,eAEM,CAAExB,oBAAmByB,aAAYpM,UAASkH,UAFhD,UACUpI,GAAc,8BAAgCoI,iByBoOzD2a,GAAoB,CAC/B,KAAQ,cACR,MAAS,OACT,YAAe,0OACf,aAAgB,OAChB,KAAQC,KACR,UF7PwB,SAACtnB,GAAW,IAAD,EAEZqQ,mBAAS,GAAzBmV,EAF4B,sBAGPnV,mBAAUkX,OAAOC,YAAclR,IAHxB,mBAG5B9S,EAH4B,KAGpBikB,EAHoB,OAImBhjB,qBAAWgL,iBAAa,MAAtEtN,cAAiBkD,EAJU,EAIVA,WAAYqiB,EAJF,EAIEA,WACZC,EAA6C3nB,EAA9D4nB,cAAiBD,cAAkC1V,EAAWjS,EAA5B4nB,cAAiB3V,KACrDzM,EAAUC,KACVoiB,EAAoB5V,GAAQ,cAOlC,OALAtB,qBAAU,WACR4W,OAAOO,iBAAiB,UAAU,kBAAML,EAAWF,OAAOC,YAAclR,SACvE,CAACqR,IAIF,qBAAK1hB,UAAS,UAAKT,EAAQhD,MACzB+D,MAAO,CAAE/C,UADX,SAEE,cAACiD,EAAA,EAAD,CAAMwM,UAAW,EAAGhN,UAAS,UAAKT,EAAQoe,UAAb,YAA0Bpe,EAAQuiB,iBAAlC,YAAsDviB,EAAQwf,gBAA3F,SACE,cAAC7e,EAAA,EAAD,CAAMC,WAAS,EAAf,SAEE,sBAAKH,UAAWT,EAAQhD,KAAxB,UACE,cAACuQ,GAAD,CAAQhK,KAAMyc,EAAchgB,QAASA,EAAShC,OAAQA,IAEtD,cAACwkB,GAAA,EAAD,CAAK/hB,UAAWuf,EAAY,aAAWhgB,EAAQsG,QAA/C,SACE,eAAC3F,EAAA,EAAD,CAAMC,WAAS,EACb0C,QAAS,EAET7C,UAAS,UAAKT,EAAQyiB,mBAHxB,UAKE,cAAC,GAAD,2BAAgBjoB,GAAhB,IACEwF,QAASA,EACTH,WAAYA,EACZ7B,OAAQA,EnB9Be,MmBgCxBmkB,EAAc7Z,KAAI,SAACqC,EAAmBxB,GACrC,IAAMuZ,EAAoB/X,EAAkBnJ,UAC5C,OACE,cAACb,EAAA,EAAD,CAEEE,MAAI,EACJC,GAAIiL,SAASpB,EAAkBgY,WAHjC,SAKGD,EAAoB,cAACA,EAAD,eAAuB,CAAE/X,oBAAmB3K,UAASqiB,oBAAmBH,gBAAmB,IALlH,UACUpjB,yBAAcujB,EAAoB,kBAAoBlZ,UAdtE,UAEUrK,yBAAcujB,EAAoB,0BAP3CvjB,yBAAc2N,SE2O3B,cAAiB,CACf8S,GACAI,GACAC,GACAC,GACAC,GACAC,GACA4B,IAEF,wBAA2B,G,kEGzQrB7iB,GAAkBC,EAAQ,IAA1BD,cAEO,SAAS8jB,GAAT,GAEX,IAFwC5iB,EAEzC,EAFyCA,QAAS+K,EAElD,EAFkDA,WAAY8X,EAE9D,EAF8DA,mBAAoBjM,EAElF,EAFkFA,gBAAiBC,EAEnG,EAFmGA,iBAAkBM,EAErH,EAFqHA,oBACtHC,EACC,EADDA,qBAAsBG,EACrB,EADqBA,sBAAuBM,EAC5C,EAD4CA,qBAAsBL,EAClE,EADkEA,kBAAmBsL,EACrF,EADqFA,iBAAkBX,EACvG,EADuGA,cAAe1V,EACtH,EADsHA,KAEvH,OACE,cAAC9L,EAAA,EAAD,CACEC,WAAS,EAAC0C,QAAS,EADrB,SAEG6e,EAAc,GAAGpG,QAAQzT,KAAI,SAACsN,EAAY1O,GACzC,MAC2B,iBAAzB0O,EAAWpU,UACT,cAACb,EAAA,EAAD,CACEE,MAAI,EAACC,GAAIgiB,EAAmB,EAAI,GADlC,SAGE,cAAC,GAAD,CACE/X,WAAYA,EAAW6K,EAAWpU,WAClC0F,MAAOA,EACPlH,QAASA,EACT6V,OAAQgN,EACRjN,WAAYA,KANT9W,GAAc,GAAD,OAAI2N,EAAJ,YAAYmJ,EAAWpU,UAAvB,YAAoC0F,KAU7B,iBAAzB0O,EAAWpU,UAEX,cAACb,EAAA,EAAD,CAAME,MAAI,EAACC,GAAIgiB,EAAmB,EAAI,GAAtC,SAEwB,kBAArBlN,EAAWnM,MACV,cAAC,GAAD,CACEzJ,QAASA,EACT4W,gBAAiBA,EACjBC,iBAAkBA,EAClBjB,WAAYA,IAEd,cAAC,GAAD,CACE5V,QAASA,EACTmX,oBAAqBA,EACrBC,qBAAsBA,EACtBxB,WAAYA,KAZX9W,GAAc,GAAD,OAAI2N,EAAJ,YAAYmJ,EAAWnM,SAgBlB,WAAzBmM,EAAWpU,UAET,cAACb,EAAA,EAAD,CAAME,MAAI,EAACC,GAAIgiB,EAAmB,EAAI,GAAtC,SAEE,cAAC,GAAD,CACE9iB,QAASA,EACTuX,sBAAuBA,EACvBC,kBAAmBA,KAJhB1Y,GAAc,GAAD,OAAI2N,EAAJ,uBAQK,WAAzBmJ,EAAWpU,UAAyB,cAACb,EAAA,EAAD,CAAME,MAAI,EAACC,GAAIgiB,EAAmB,EAAI,GAAtC,SAElC,cAAC,GAAD,CACE9iB,QAASA,EACT6X,qBAAsBA,EACtBL,kBAAmBA,EACnB5B,WAAYA,KALT9W,GAAc,GAAD,OAAI2N,EAAJ,uBAQO,cAAzBmJ,EAAWpU,UAET,cAACb,EAAA,EAAD,CAAME,MAAI,EAACC,GAAIgiB,EAAmB,EAAI,GAAtC,SAEE,cAAC5I,GAAD,CACEla,QAASA,EACT6V,OAAQgN,EACRjN,WAAYA,KAJT9W,GAAc,GAAD,OAAI2N,EAAJ,YAAYmJ,EAAWpU,UAAvB,YAAoC0F,KAO7B,gBAAzB0O,EAAWpU,UACX,cAACb,EAAA,EAAD,CAAME,MAAI,EAACC,GAAIgiB,EAAmB,EAAI,GAAtC,SAEE,cAAC,GAAD,CACE/X,WAAYA,EAAW6K,EAAWpU,WAClCxB,QAASA,EACT6V,OAAQgN,EACRjN,WAAYA,KALT9W,GAAc,GAAD,OAAI2N,EAAJ,YAAYmJ,EAAWpU,UAAvB,YAAoC0F,KAQ7B,oBAAzB0O,EAAWpU,UACX,cAACb,EAAA,EAAD,CAAME,MAAI,EAACC,GAAIgiB,EAAmB,EAAI,GAAtC,SAEE,cAAC,GAAD,CACE/X,WAAYA,EAAW6K,EAAWpU,WAClCxB,QAASA,EACT6V,OAAQgN,EACRjN,WAAYA,KALT9W,GAAc,GAAD,OAAI2N,EAAJ,YAAYmJ,EAAWpU,UAAvB,YAAoC0F,KASxD,Q,IC3FhBpI,GAAkBC,EAAQ,IAA1BD,cAEO,SAASikB,GAAUvoB,GAAQ,IACf2nB,EAIrB3nB,EAJI4nB,cAAiBD,cAAkC1V,EAIvDjS,EAJsC4nB,cAAiB3V,KAAQzM,EAI/DxF,EAJ+DwF,QACjE+K,EAGEvQ,EAHFuQ,WAAY8X,EAGVroB,EAHUqoB,mBAAoBjM,EAG9Bpc,EAH8Boc,gBAAiBC,EAG/Crc,EAH+Cqc,iBAAkBM,EAGjE3c,EAHiE2c,oBACnEC,EAEE5c,EAFF4c,qBAAsBG,EAEpB/c,EAFoB+c,sBAAuBM,EAE3Crd,EAF2Cqd,qBAAsBL,EAEjEhd,EAFiEgd,kBACnEsL,EACEtoB,EADFsoB,iBAAkBE,EAChBxoB,EADgBwoB,oBAAqB3b,EACrC7M,EADqC6M,WAAYC,EACjD9M,EADiD8M,cAJd,EAQPuD,oBAAS,GARF,mBAQhCoY,EARgC,KAQtBC,EARsB,KAevC,OALA/X,qBAAU,WACH8X,GAAUC,GAAY,KAC1B,CAACJ,IAIF,cAACniB,EAAA,EAAD,CAAME,MAAI,EACRC,GAAIgiB,EAAmB,GAAKzb,EAAa,EAAI,OAD/C,SAGG0D,EACC,eAACoY,GAAA,EAAD,CACE9O,SAAUyO,EAAmB,kBAAMI,GAAaD,IAAY,aAC5DA,SAAUA,EACVxiB,UAAS,UAAKT,EAAQ+Q,KAAb,2BACTtD,UAAW,EAJb,UAME,cAAC2V,GAAA,EAAD,CACEC,WAAYP,EAAmB,cAACQ,GAAA,EAAD,IAAiB,GAChDnQ,gBAAc,kBACdnJ,GAAG,iBAHL,SAKG8Y,EACC,cAACS,GAAA,EAAD,CACE5b,QAAS,SAAC6b,GACRR,GAAqBF,IAEvBjb,aAAW,kBAGb,mCACGR,EACC,qCACE,cAACO,GAAA,EAAD,CACED,QAAS,kBAAML,GAAeD,IAC9BQ,aAAW,eAEb,cAAC4b,GAAA,EAAD,CACE9b,QAAS,SAAC6b,GACRN,GAAY,GACZF,GAAqBF,IAEvBjb,aAAW,uBAEf,cAAC+U,GAAA,EAAD,CACEjV,QAAS,kBAAML,GAAeD,IAC9BQ,aAAW,kBAKrB,cAAC2a,GAAA,EAAD,CAAKllB,QAAS+J,EAAa,QAAU,OAArC,SACE,cAACqc,GAAA,EAAD,UACE,cAACd,GAAD,2BAAuBpoB,GAAvB,IACEwF,QAASA,EACT+K,WAAYA,EACZ8X,mBAAoBA,EACpBjM,gBAAiBA,EACjBC,iBAAkBA,EAClBM,oBAAqBA,EACrBC,qBAAsBA,EACtBG,sBAAuBA,EACvBM,qBAAsBA,EACtBL,kBAAmBA,EACnBsL,iBAAkBA,EAClBE,oBAAqBA,EACrBb,cAAeA,EACf1V,KAAMA,YAOd,IAjEG3N,GAAc,GAAD,OAAI2N,EAAJ,sBAAsB0V,EAAc,GAAGnY,M,ICtBvDlL,GAAkBC,EAAQ,IAA1BD,cAEO,SAAS6kB,GAAT,GAA8E,IAAxC3jB,EAAuC,EAAvCA,QAASmiB,EAA8B,EAA9BA,cAAe1V,EAAe,EAAfA,KAAMrO,EAAS,EAATA,MACjF,OACE,cAACuC,EAAA,EAAD,CAAME,MAAI,EACRC,GAAI1C,EADN,SAGE,cAACokB,GAAA,EAAD,CAAK/hB,UAAS,UAAKT,EAAQ+Q,KAAb,YAAqB/Q,EAAQ0F,WAAagI,GAAIyU,EAAc,GAAGpJ,QAAUoJ,EAAc,GAAGyB,mBAAqB,EAAI,EAAjI,SACE,cAACrZ,GAAD,CAAgBvK,QAASA,EAAzB,SACE,qBACES,UAAS,yBAAoB3B,GAAc2N,IAC3CzC,GAAIlL,GAAc,kBAAD,OAAmB2N,EAAnB,YAA2B0V,EAAc,GAAGnY,MACxDlL,GAAc,kBAAD,OAAmB2N,EAAnB,YAA2B0V,EAAc,GAAGnY,YCb1E,IAAMwG,GAAaC,KAAI,KACjBC,GAAeC,KAAM,KACrBC,GAAWH,KAAI,KACfI,GAAaF,KAAM,KAEZG,GAAwB,IAGxB7Q,GAAYnD,aAAW,SAACC,GAAD,gBAClCC,KAAM,CACJC,SAAU,EACV6J,SAAU,SACVN,aAAc,GAEhBgH,aAAc,CACZlQ,QAAS,OACTC,eAAgB,SAChBC,WAAY,UAEd8I,OAAQ,CACNf,WAAY,SACZzH,SAAU,WACViF,QAAS,GAEXoB,KAAM,CACJjH,gBAAiB,QACjB6M,MAAO,WAET1F,MAAO,CACL/G,QAAS,QAEXgH,OAAQ,CACNhH,QAAS,SAEX8H,KAAM,CACJpH,OAAQ,IACRf,SAAU,EACVoI,SAAU,KAEZgE,KAAM,CACJhG,YAAa,GACbpF,SAAU,OACV6I,SAAU,WAEZ9B,KAAM,CACJC,UAAW,IAEb8L,KAAM,CACJ3S,MAAO,QAET+H,OAAQ,CACNlD,WAAY,QAEdmD,OAAQ,CACN/C,YAAa,QAEf2N,SAAU,CACRvT,SAAU,IACVC,UAAW,KAEbwD,KAAM,CACJzD,SAAU,KAEZ+R,UAAW,CACT3L,QAAS,IAEXoN,aAAc,CACZvT,UAAW,KAEbwT,aAAc,CACZC,UAAW,IACXnT,OAAQ,IACR8I,SAAU,UAEZsK,KAAM,CACJnM,UAAW,IAEboM,KAAM,CACJnT,aAAc,IAEhBiP,WAAY,CACVpP,UAAW,UAEbkP,cAAe,CACbhG,OAAQ,WAEVpB,OAAQ,CACNA,OAAQ,mBAEVyL,UAAW,CACTtT,OAAQ,KAEVuT,aAAc,CACZJ,UAAW,IACXnT,OAAQ,KAEVwT,aAAc,CACZL,UAAW,IACXnT,OAAQ,KAEVyT,aAAc,CACZ/T,UAAW,IACXoJ,SAAU,UAEZoF,OAAQ,CACNhP,gBAAiB0T,GACjB7G,MAAOyG,GACPkB,WAAY,KAEdzF,SAAU,CACR/O,gBAAiB2T,GACjB9G,MAAO2G,GACPgB,WAAY,MAxGoB,0BA0GvB,CACT7N,QAAS,KA3GuB,qBA6G5B,CACJ3F,aAAc,KA9GkB,+BAgHlB,CACd4I,SAAU,WAjHsB,+BAmHlB,CACdA,SAAU,WApHsB,gCAsHjB,CACfA,SAAU,YAvHsB,6BAyHpB,CACZqK,UAAW,IACXnT,OAAQ,MA3HwB,6BA6HpB,CACZN,UAAW,IACXoJ,SAAU,WA/HsB,+BAiIlB,CACd5J,gBAAiB,oCACjBa,UAAW,oBACX4T,QAAQ,iBACRD,WAAY,MArIoB,oCAwIb,CACnBzT,SAAU,oBAzIsB,mCA4Id,CAClBA,SAAU,oBA7IsB,iCA+IhB,CAChBH,SAAU,aAhJsB,0BAkJvB,CACT+F,QAAS,KAnJuB,4BAqJrB,CACXsN,UAAW,GACXnT,OAAQ,KAvJwB,gCAyJjB,CACf4T,UAAW,SACXC,UAAW,WA3JqB,yCAAC,aA8JjCvU,QAAS,OACTE,WAAY,SACZqG,QAAS9G,EAAMuG,QAAQ,EAAG,IAEvBvG,EAAM+G,OAAOC,SAlKgB,IAmKhCxG,eAAgB,cAnKgB,0BAqKvB,CACTsG,QAAS,KAtKuB,sCAwKX,CACrB/F,SAAU,QACVF,IAAK,GACL8G,MAAO,GACPS,OAAQ,EACRpC,OAAQ,MA7KwB,oCA+Kb,CACnB7F,gBAAiB,kBACjB4J,SAAU,SACVN,aAAc,gBAlLkB,iCAoLhB,CAChBxI,OAAQ,SArLwB,kCAuLf,CACjBI,MAAO,OACPD,OAAQ,IAzLwB,iCA2LhB,CAChB0H,OAAQ,OACRW,aAAc,MACdV,UAAW,sEA9LqB,4BAgMrB,CACXqL,UAAW,GACXnT,OAAQ,KAlMwB,6BAoMpB,CACZmT,UAAW,IACXnT,OAAQ,MAtMwB,mCAwMd,CAClBmT,UAAW,MACXnT,OAAQ,QA1MwB,qBA4M5B,CACJC,SAAU,UA7MsB,qBA+M5B,CACJoF,YAAa,KAhNmB,qBAkN5B,CACJJ,WAAY,KAnNoB,oBAqN7B,CACHjF,OAAQ,OACRI,MAAO,OACPoI,aAAc,MACdlJ,QAAS,iBAzNuB,8BA2NnB,CAAEkJ,aAAc,IA3NG,oBA4N7B,CACHpI,MAAO,QA7NyB,iCA+NhB,CAChB0T,cAAe,QAhOiB,0BAkOvB,CACTjO,QAAS,KAnOuB,wBAqOzB,CACP5F,SAAUlB,EAAMgV,WAAWC,QAAQ,IACnCN,WAAY3U,EAAMgV,WAAWE,oBAvOG,+BAyOlB,CACdpM,OAAQ,EACRqM,KAAM,gBACNlU,OAAQ,EACRG,QAAS,EACT2I,SAAU,SACVjD,QAAS,EACT/F,SAAU,WACVF,IAAK,GACLQ,MAAO,IAlPyB,4BAoPrB,CACXD,OAAQpB,EAAMuG,QAAQ,GACtB7F,SAAU,MAtPsB,4BAwPrB,CACXP,gBAAiB,0BAzPe,8BA2PnB,CACbA,gBAAiB,2BA5Pe,8BA8PnB,CACbA,gBAAiB,0BA/Pe,gCAiQjB,CACfA,gBAAiB,2BAlQe,iCAoQhB,CAChBY,SAAU,WACVF,KAAM,GACN8G,OAAQ,GACRS,OAAQ,EACRpC,OAAQ,MAzQwB,4CAAC,aA4QjCzF,QAAS,OACTE,WAAY,SACZqG,QAAS9G,EAAMuG,QAAQ,EAAG,IAEvBvG,EAAM+G,OAAOC,SAhRgB,IAiRhCxG,eAAgB,cAjRgB,6BAmRpB,CACZ4T,UAAW,IACXrK,SAAU,WArRsB,oBAuR7B,CACH3I,OAAQ,KAxRwB,mBA0R9B,CACFA,OAAQ,IA3RwB,K,qBCG5BW,GAAkBC,EAAQ,IAA1BD,cAEO,SAAS+kB,GAAUrpB,GAAO,MAEsEyE,qBAAWC,KAAhHvC,EAF+B,EAE/BA,cAAgCkD,EAFD,EAEhBlD,cAAiBkD,WAAcpD,EAFf,EAEeA,IAAKwO,EAFpB,EAEoBA,YAAalO,EAFjC,EAEiCA,MAAOmO,EAFxC,EAEwCA,QAASnD,EAFjD,EAEiDA,iBAC/Doa,EAA6C3nB,EAA9D4nB,cAAiBD,cACnBE,EADgE7nB,EAA5B4nB,cAAiB3V,MACzB,cAJK,EAML5B,mBAAS,GANJ,mBAMhCmV,EANgC,KAMlBC,EANkB,OAOHpV,wBAASC,GAPN,mBAOhCC,EAPgC,KAOpBC,EAPoB,OAQCH,mBAAS,IARV,mBAQhCiZ,EARgC,KAQlBC,EARkB,OASSlZ,mBAAS,IATlB,mBAShCmZ,EATgC,KASdC,EATc,OAUXpZ,mBAAUkX,OAAOC,YAAclR,IAVpB,mBAUhC9S,EAVgC,KAUxBikB,EAVwB,OAWOpX,mBAAS,IAXhB,mBAWhC+L,EAXgC,KAWfsN,EAXe,OAYerZ,mBAAS,WAZxB,mBAYhCsM,EAZgC,KAYXgN,GAZW,QAamBtZ,oBAAS,GAb5B,qBAahC0M,GAbgC,MAaT6M,GAbS,SAciBvZ,mBAAS,SAd1B,qBAchCgN,GAdgC,MAcVwM,GAdU,SAeiBxZ,mBAAS,GAf1B,qBAehCyZ,GAfgC,MAeVC,GAfU,SAgBS1Z,oBAAS,GAhBlB,qBAgBhCiY,GAhBgC,MAgBdE,GAhBc,SAiBHnY,oBAAS,GAjBN,qBAiBhCxD,GAjBgC,MAiBpBC,GAjBoB,MAmBnCkd,GAA6Bvc,IAAE2Q,KAAKuJ,EAAc,GAAGpG,QAAS,CAAEtS,MAAO,uBACrEgb,MAAuBD,KAA8B/lB,OAAOC,KAAK8lB,IAA4BnW,QAC7FqW,GAA2B3nB,EAAMI,QAAQkF,KAAKF,KAE9CnC,GAAUC,KACVsY,GAAWoM,cAKbC,IAAgBrN,IAAyBkN,GAC3C,CACEtnB,QAAS,CACPsP,KAAM,OACNrP,WAAY,CAAEC,MAAOqnB,GAA0BvkB,QAASukB,MAI5D,CAAEvnB,QAAQ,eAAMJ,EAAMI,UAElB0nB,GAAa3V,IAAM4V,SACvB,kBACE7iB,aACE2iB,MAEJ,CAACrN,GAAuB4K,IAGpBtL,GAAmB,SAACxD,EAAOL,GAC/B,IAAI+R,EAAwB9c,IAAE2Q,KAAKuJ,EAAc,GAAGpG,QAAS,CAAEtS,MAAO,kBAEtE,GAAIsb,EAAuB,CACzBb,EAAmBlR,GACnB,IAAMgS,EAAiB/c,IAAE8Q,OAAOiL,EAAiBiB,QAAQ,GAAGC,6BAA6B,SAACC,GACxF,OAAQJ,EAAsB/N,WAAWhE,GAAUzC,QAAQyT,EAAiBoB,SAASD,EAAIE,sBAAsBnhB,QAAU,KAGrHohB,EAAkB,2BACnBtB,EAAiBiB,QAAQ,IADN,IAEtBC,4BAA6BF,IAE/BlB,EAAayB,WAAW,CAAE,QAAW,CAACD,OAKpClO,GAAuB,SAAC/D,EAAOL,GACnC,IAAIwR,EAA6Bvc,IAAE2Q,KAAKuJ,EAAc,GAAGpG,QAAS,CAAEtS,MAAO,uBAC3E,GAAI+a,EAA4B,CAC9B,IAAIgB,EAAiBhB,EAA2BrP,OAAOnC,GACnDyS,EAAoB,eAAQzB,EAAiBoB,UAEjD3mB,OAAOC,KAAK+mB,GAAsBnd,KAAI,SAAAmH,GAChCgW,EAAqBhW,GAAKiW,WAAWC,eACvClnB,OAAOC,KAAK+mB,EAAqBhW,GAAKiW,WAAWC,eAAerd,KAAI,SAACsd,EAAU1e,GAC7Eue,EAAqBhW,GAAKiW,WAAWC,cAAcC,GAAYJ,EAAete,IAAUse,EAAe,MAGvGC,EAAqBhW,GAAKiW,WAAWG,eACvCJ,EAAqBhW,GAAKiW,WAAWG,aAAeL,EAAeA,EAAenX,OAAS,IAEzFoX,EAAqBhW,GAAKiW,WAAWI,kBACvCL,EAAqBhW,GAAKiW,WAAWI,iBAAiBxd,KAAI,SAACzH,EAAMqG,GAC/Due,EAAqBhW,GAAKiW,WAAWI,iBAAiB5e,GAASse,EAAete,IAAUse,EAAe,MAIvGC,EAAqBhW,GAAKiW,WAAWK,4BACvCtnB,OAAOC,KAAK+mB,EAAqBhW,GAAKiW,WAAWK,4BAA4Bzd,KAAI,SAACsd,EAAU1e,GACtFue,EAAqBhW,GAAKiW,WAAWK,2BAA2BH,GAAUrd,eAAe,aAC3Fkd,EAAqBhW,GAAKiW,WAAWK,2BAA2BH,GAAhE,uBAA4FpB,EAA2BuB,2BAA2B/S,QAIpJyS,EAAqBhW,GAAKiW,WAAWM,oBACvCP,EAAqBhW,GAAKiW,WAAWM,kBAAoBR,EAAeA,EAAenX,OAAS,IAE9FoW,IACEgB,EAAqBhW,GAAKiW,WAAWO,oBACvCR,EAAqBhW,GAAKiW,WAAWO,kBAAoB1O,GAAwB,QAAU,WAKjG4M,GAAuBnR,GACvB8Q,EAAayB,WAAW,CAAE,SAAW,eAAME,OAiB/Cta,qBAAU,WAIR,GAHA+U,QAAQC,IAAI,mBACZD,QAAQC,IAAI,CAAEtgB,eACdqgB,QAAQC,IAAI,CAAEjV,YACVA,EAAS,CACXgV,QAAQC,IAAI,mBACZ,IAAI+F,EAAY3O,GAAwB,QAAU,OAClD2O,GAAS,WAAQrO,IACjB5M,EAAYkb,GAAuB,CAAC,YAAIhE,GAAgB+D,IACxDlb,OAAcF,GACdkY,IAAoB,GACpB1b,IAAc,MAEf,CAACzH,EAAYqL,EAASnD,IAEzBoD,qBAAU,WACJ1M,OAAOC,KAAKslB,GAAkB3V,QAAU5P,OAAOC,KAAKolB,GAAczV,SAEpEwI,GAAiB,EAAMD,GAAoC,aAC3DQ,GAAqB,EAAMD,GAA4C,cAExE,CAAC6M,IAEJ7Y,qBAAU,WACR4W,OAAOO,iBAAiB,UAAU,kBAAML,EAAWF,OAAOC,YAAclR,OACxEyT,GAAwBzB,IAAmBxC,KAAE,mCAAmC0B,eAAqB,MAGvG7W,qBAAU,WACR8W,EAAWF,OAAOC,YAAclR,IAChCyT,GAAwBzB,IAAmBxC,KAAE,mCAAmC0B,eAAqB,KACpG,CAACc,KAEJ3X,qBAAU,WACRH,OAAcF,KACb,IAEH,IAAMqb,GAAwB,SAAUhE,EAAeiE,GAErDnG,EAAU,GACVK,KAAE,mBAAD,OAAoBxhB,GAAcujB,GAAlC,aAAgE9B,KAAK,IACtE4B,EAAc7Z,IAAd,uCAAkB,WAAMqC,GAAN,mBAAA3P,EAAA,sDAEZqrB,EAAc1b,EAAkBX,GAChC6a,EAAauB,GAAgB3B,GAC/B2B,EACAzb,EAAkB5N,MAChB4N,EAAkB5N,MAClB,eAEJ4jB,iBAAe2F,sBAAsBD,GAClCxF,SAAS/hB,GAAc,mBAAD,OAAoBujB,EAApB,YAAyCgE,KAC/DtF,cAAc,UACdwF,WACAvF,UAAU6D,GACV2B,WAAW,CAAE,eAAkB,SAC/BC,GAAG,oBAAoB,SAACpT,GACvB4Q,EAAoB5Q,EAAMqT,UAAUltB,YAErCynB,QACAC,UACA5V,MAAK,SAACob,GACLzG,EAAU,GACV8D,EAAgB2C,GAChB,IAAItF,EAAkBzkB,EAAcb,cAAc8X,UAAU,EAAGjX,EAAcb,cAAculB,YAAY,MAGvGV,iBAAeW,KAAKF,MACnBG,OAAM,SAAA7hB,GACPwgB,QAAQC,IAAI,CAAEzgB,aAIdiL,EAAkBpC,eAAe,aAK/B0T,EAAgB,GACpBtR,EAAkBoR,QAAQzT,IAA1B,uCAA8B,WAAOsN,EAAY1O,GAAnB,uBAAAlM,EAAA,0DACxB4a,EAAWhL,YADa,wBAEtB+b,EAAY/Q,EAAWhL,aACjBmR,QAAV,2BACK4K,EAAU5K,SADf,kBAEGnG,EAAWgR,kBAAoB/mB,EAAW6P,gBAAgBkD,QALnC,SAOKnW,EAAI8O,GAAG9O,EAAI+O,iBAAiB,CAAEC,cAAemK,EAAWlK,cAAgB,OAAQlQ,KAAMmrB,KAP3F,OAW1B,IAJI3K,EAPsB,OAQtBE,EAA0B,GAC1B2K,EAAkBpoB,OAAOC,KAAKsd,EAAmB,IAAI,GAEhD9C,EAAI,EAAGA,EAAI8C,EAAmB3N,OAAQ6K,IAC7CgD,EAAwBzT,KAAK,CAC3B,MAASuT,EAAmB9C,GAAG2N,GAC/B,MAAU7K,EAAmB9C,GAAnB,MAAkC8C,EAAmB9C,GAAnB,WAAiCpO,IAGjFmR,EAAcrG,EAAWpU,WAAa0a,EAjBZ,QAmB5BlR,EAAciR,GAnBc,4CAA9B,0DAtCc,2CAAlB,wDAgEI4G,GAAqBiE,uBAAY,SAACxQ,EAAYyQ,GAC9CtoB,OAAOC,KAAKolB,GAAczV,SAC5ByV,EAAakD,cAAb,eAA8B1Q,EAAayQ,IAC3CjD,EAAamD,UAajB,OARA9b,qBAAU,WACR,IAAIsJ,EAASyS,KAAYC,MAAM5O,GAASuE,QACXrI,EAAO0N,EAAc,GAAG7L,YAAc,GAEjEuM,GAAmBV,EAAc,GAAG7L,WAAY7B,EAAO0N,EAAc,GAAG7L,eAEzE,CAACuM,GAAoBtK,GAASuE,OAAQqF,IAGvC,qBAAK1hB,UAAS,UAAKT,GAAQhD,KAAb,kBACZ+D,MAAO,CAAE/C,UADX,SAGE,cAACue,EAAA,EAAD,CAAexf,MAAO8nB,GAAtB,SACE,cAAC5jB,EAAA,EAAD,CAAMwM,UAAW,EAAGhN,UAAS,UAAKT,GAAQoe,UAAb,YAA0Bpe,GAAQuiB,kBAA/D,SACE,qBACE9hB,UAAS,UAAKT,GAAQhD,KAAb,YAAqBgD,GAAQuiB,kBADxC,SAGE,eAAC5hB,EAAA,EAAD,CACEC,WAAS,EACT0C,QAAS,EAFX,UAIE,cAACiK,GAAD,CACEhK,KAAMyc,EACNhgB,QAASA,GACThC,OAAQA,EAASsmB,KAElBnC,EAAc,GAAG5Z,eAAe,WAE/B,cAAEwa,GAAF,2BAAgBvoB,GAAhB,IACEwF,QAASA,GACT+K,WAAYA,EACZ8X,mBAAoBA,GACpBjM,gBAAiBA,EACjBC,iBAAkBA,GAClBM,oBAAqBA,EACrBC,qBAAsBA,GACtBG,sBAAuBA,GACvBM,qBAAsBA,GACtBL,kBApKU,SAACnE,EAAOL,GAChC,IAAIkT,EAAY,GACQ,mBAAblT,GACToR,GAAyBpR,GACzBkT,EAAYlT,EAAQ,gBAAY6E,IAAZ,eAA6CA,MAEjEqO,EAAY3O,GAAqB,gBAAYvE,GAAZ,eAAiCA,GAClEqR,GAAwBrR,IAG1B/H,EAAYkb,GAAuB,CAAChE,EAAe+D,KA2JrCpD,iBAAkBA,GAClBE,oBAAqBA,GACrB3b,WAAYA,GACZC,cAAeA,MAGjB,GAGF,cAACqc,GAAD,CACE3jB,QAASA,GACTmiB,cAAeA,EACf1V,KAAM4V,EACNjkB,MAAO+jB,EAAc,GAAG5Z,eAAe,WAAaua,GAAmB,GAAKzb,GAAa,EAAI,GAAK,KAGpG,cAAC,GAAD,2BAAgB7M,GAAhB,IACEwF,QAASA,GACTH,WAAYA,EACZ7B,OAAQA,EAASsmB,GD3SQ,iB,cEyG5B8C,GAA2B,CACtC,KAAQ,gBACR,MAAS,qBACT,UAAa,qBACb,aAAgB,aAChB,K,QAAQC,EACR,UAAaxD,GACb,cAAiB,CACf,CACE,KAAQ,YACR,aAAgB,iBAChB,GAAM,IACN,QAAU,EACV,MAAS,qBACT,QAAW,CA7HS,CACxB,MAAS,sBACT,WAAc,eACd,aAAgB,iBAChB,YAAe,CACb,MAAS,eACT,KAAQ,cACR,OAAU,CACR,sBAEF,eAAkB,uBAEpB,mBAAsB,iBACtB,UAAa,eACb,aAAgB,QAGE,CAClB,MAAS,gBACT,QAAW,CACT,YACA,UAEF,MAAS,kBACT,UAAa,eACb,WAAc,CACZ,UAAa,CACX,oBACA,qBACA,kCACA,oBACA,mBAEF,OAAU,CACR,sBACA,0BACA,sBACA,wBACA,+BAKkB,CACtB,MAAS,qBACT,QAAW,CACT,UACA,UACA,WAEF,MAAS,sBACT,UAAa,eACb,OAAU,CACR,UAAW,CACT,UACA,UACA,UACA,WAEF,UAAW,CACT,UACA,UACA,UACA,WAEF,UAAW,CACT,UACA,UACA,UACA,YAGJ,2BAA8B,CAC5B,UAAW,CACT,WAAc,uCACd,cAAiB,uCACjB,cAAiB,CACf,UACA,YAGJ,UAAW,CACT,WAAc,uCACd,cAAiB,eACjB,cAAiB,CACf,UACA,YAGJ,UAAW,CACT,WAAc,uCACd,cAAiB,uCACjB,cAAiB,CACf,UACA,cAMiB,CACvB,MAAS,sBACT,UAAa,UAGS,CACtB,MAAS,cACT,UAAa,SACb,QAAW,CAAC,QAAS,SAAU,gBAmB/B,wBAA2B,G,0JChGtB,SAASyD,GAAqBtsB,EAAGusB,EAAGrf,GACvC,OAAIlN,EAAEkN,IAAYqf,EAAErf,IAAYqf,EAAErf,GAAS4H,MAAQ9U,EAAEkN,GAAS4H,OAClD,EAER9U,EAAEkN,IAAYqf,EAAErf,IAAYqf,EAAErf,GAAS4H,MAAQ9U,EAAEkN,GAAS4H,MACnD,EAEJ,EAGJ,SAAS0X,GAAcC,EAAOvf,GACjC,MAAiB,SAAVuf,EACD,SAACzsB,EAAGusB,GAAJ,OAAUD,GAAqBtsB,EAAGusB,EAAGrf,IACrC,SAAClN,EAAGusB,GAAJ,OAAWD,GAAqBtsB,EAAGusB,EAAGrf,IAGzC,SAASwf,GAAWC,EAAOC,GAC9B,IAAMC,EAAiBF,EAAMrf,KAAI,SAACwf,EAAI5gB,GAAL,MAAe,CAAC4gB,EAAI5gB,MAMrD,OALA2gB,EAAeE,MAAK,SAAC/sB,EAAGusB,GACpB,IAAME,EAAQG,EAAW5sB,EAAE,GAAIusB,EAAE,IACjC,OAAc,IAAVE,EAAoBA,EACjBzsB,EAAE,GAAKusB,EAAE,MAEbM,EAAevf,KAAI,SAACwf,GAAD,OAAQA,EAAG,M,OCxCC/oB,EAAQ,IAA1CD,G,GAAAA,cAAekpB,G,GAAAA,eA8HvB,SAASjF,GAAUvoB,GAAO,MAI8DyE,qBAAWC,KAAzFvC,EAJgB,EAIhBA,cAAqDsO,GAJrC,EAID+D,gBAJC,EAIgBM,KAJhB,EAIsBxB,SAJtB,EAIgCrR,IAJhC,EAIqCwO,aAAaC,EAJlD,EAIkDA,QACrDrL,GAA2BlD,EAAxCgD,YAAwChD,EAA3BkD,YAEmBsiB,GAFQxlB,EAAfulB,WAG7B1nB,EADI4nB,cACJ5nB,EADmB4nB,cAAiBD,eAAiBniB,EACrDxF,EADqDwF,QAAS6V,EAC9Drb,EAD8Dqb,OAK9DoS,EAAiB,EACjBC,EAAmB,EAGjBC,EAAgC,WAUpC,OATwBhG,EAAc,GAAGiG,UAAUvK,OAAOvV,KAAI,SAACzH,EAAMqG,GACnE,MAAO,CACLuI,IAAK,gBAAkBvI,EACvBuC,MAAOue,GAAennB,EAAK+S,UAAU/S,EAAKwgB,YAAY,KAAO,EAAGxgB,EAAKwN,SACrEga,UAAWxnB,EACX0I,SAAmB,gBAAT1I,GAAmC,kBAATA,GAAqC,iCAATA,EAChEynB,UAAWnG,EAAc,GAAGmG,UAAUznB,QAvBpB,EA6BQgK,oBAAS,GA7BjB,mBA6BjBoY,EA7BiB,KA6BPC,EA7BO,OA8BoBrY,mBAASsX,EAAc,GAAGiG,UAAYD,IAAkC,IA9B5F,mBA8BjBI,EA9BiB,KA8BDC,EA9BC,OA+BkB3d,oBAAS,GA/B3B,mBA+BjB4d,EA/BiB,KA+BFC,EA/BE,OAgCoB7d,oBAAS,GAhC7B,mBAgCjB8d,EAhCiB,KAgCDC,EAhCC,OAiCa/d,mBAASsX,EAAc,GAAGiG,UAAY3pB,OAAOC,KAAKyjB,EAAc,GAAGiG,UAAUrM,SAASzT,KAAI,SAACmH,EAAKvI,GACnI,MAAO,CACLuI,IAAK,SAAWvI,EAChBuC,MAAOgG,EACPK,MAAOqS,EAAc,GAAGiG,UAAUrM,QAAQtM,GAC1ChD,KAAM0V,EAAc,GAAG0G,WAAWpZ,OAEjC,IAxCmB,mBAiCjBqZ,EAjCiB,KAiCJC,EAjCI,KA8ClBC,EAAuB,SAACC,EAAM/hB,GAClC,IAAIgiB,EAAqB,YAAOX,GAChCW,EAAsBhiB,GAAOqC,UAAqD,IAA1C2f,EAAsBhiB,GAAOqC,SACrEif,EAAkBU,GAClBR,GAAiB,IAGbS,EAAqB,SAACjiB,EAAO8L,GACjC,IAAIoW,EAAkB,YAAON,GAC7BM,EAAmBliB,GAAO4I,MAAQkD,EAClC+V,EAAcK,GACdV,GAAiB,IAGbW,EAAoB,SAAChW,GACzB,GAAIoV,GAAiBE,EAAgB,CACnC,IAAIW,EAAYf,EAAexP,QAAO,SAAAkQ,GAAI,OAAIA,EAAK1f,YAAUjB,KAAI,SAAAzH,GAAI,OAAIA,EAAKwnB,aAC1EkB,EAAiB,GACrBT,EAAYxgB,KAAI,SAACzH,EAAMqG,GACrBqiB,EAAe1oB,EAAK4I,OAAS5I,EAAKiP,SAEpC,IAAI0Z,EAAW,eAAQrH,EAAc,GAAGiG,WACxCoB,EAAY3L,OAASyL,EACrBE,EAAYzN,QAAUwN,EAEtBte,EAAY4K,EAAQ,CAAC2T,EAAarH,EAAc,GAAGzW,eAEnDgd,GAAiB,GACjBE,GAAkB,KAMtBzd,qBAAU,WAER,GAAID,EAAS,CACX,IAAIke,EAAkB,YAAON,GAC7BM,EAAmB,GAAGtZ,MAAQvR,EAAmBsB,EAAW6P,gBAAgBC,mBAAqB,WACjGoZ,EAAcK,GACdZ,EAAkBL,KAElBS,GAAkB,MAGnB,CAAC/oB,EAAYqL,IAEhBC,qBAAU,WAEJwd,IACFU,IACAX,GAAiB,GACjBE,GAAkB,MAEnB,CAACD,IAGJ,IAAMc,EAAoB,CACxB,MAAS,CAAC,SAAU,UAAW,WAAY,kBAK7C,OAHAA,EAAkBC,SAAlB,sBAAiCD,EAAkBE,OAAnD,CAA0D,kBAC1DF,EAAkBG,QAAlB,sBAAgCH,EAAkBC,UAAlD,CAA4D,kBAG1D,eAACG,GAAA,EAAD,CAAgB5G,SAAUA,EAAU5O,SApET,SAAChB,EAAOL,GACnCkQ,GAAYD,IAmEwDxV,UAAW,EAA/E,UACE,eAACqc,GAAA,EAAD,CACEzG,WAAY,cAACC,GAAA,EAAD,IACZnQ,gBAAc,kBACdnJ,GAAG,iBAHL,UAKE,cAAC+f,GAAA,EAAD,IAAU,cAACzoB,EAAA,EAAD,CAAYb,UAAS,UAAKT,EAAQqa,QAAb,YAAwBra,EAAQ8E,MAArD,6BAGZ,cAACklB,GAAA,EAAD,UACE,eAACrpB,EAAA,EAAD,CAAMC,WAAS,EAAC0C,QAAS,EAAzB,UACE,cAAC3C,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAf,SACE,eAACQ,EAAA,EAAD,CAAYC,QAAQ,YAApB,4BAELgnB,EAAela,OACNka,EAAejgB,KAAI,SAACzH,EAAMqG,GACxB,MACqB,YAAnBrG,EAAKynB,UACH,cAACle,GAAA,EAAD,CAGE6f,eAAgBhC,GAAkB,EAClCxnB,UAAWI,EAAK0I,SAAL,UAAmBvJ,EAAQkqB,cAA3B,YAA4ClqB,EAAQmqB,IAApD,UAA8DnqB,EAAQmqB,IACjF1gB,MAAOue,GAAennB,EAAK4I,MAAMmK,UAAU/S,EAAK4I,MAAM4X,YAAY,KAAO,EAAGxgB,EAAK4I,MAAM4E,SACvFga,UAAWxnB,EAAK4I,MAChB9B,QAAS,kBAAMqhB,EAAqBnoB,EAAMqG,IAC1CmC,KAAMxI,EAAK0I,SAAW,cAAC6gB,GAAA,EAAD,CAAM3pB,UAAWT,EAAQsE,SAAa,cAAC8lB,GAAA,EAAD,CAAM3pB,UAAWT,EAAQqE,SAPhFxD,EAAK4I,OAQP,MAEN,GACN,4BAGL,cAAC9I,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAf,SACE,eAACQ,EAAA,EAAD,CAAYC,QAAQ,YAApB,sBAEegnB,EAAela,OAC1Bka,EAAejgB,KAAI,SAACzH,EAAMqG,GACxB,MACqB,cAAnBrG,EAAKynB,UACH,cAACle,GAAA,EAAD,CAEEigB,iBAAkBnC,GAAoB,EACtCznB,UAAWI,EAAK0I,SAAL,UAAmBvJ,EAAQsqB,YAA3B,YAA0CtqB,EAAQmqB,IAAlD,UAA4DnqB,EAAQmqB,IAC/E1gB,MAAOue,GAAennB,EAAK4I,MAAMmK,UAAU/S,EAAK4I,MAAM4X,YAAY,KAAO,EAAGxgB,EAAK4I,MAAM4E,SACvFga,UAAWxnB,EAAK4I,MAChB9B,QAAS,kBAAMqhB,EAAqBnoB,EAAMqG,IAC1CmC,KAAMxI,EAAK0I,SAAW,cAAC6gB,GAAA,EAAD,CAAM3pB,UAAWT,EAAQsE,SAAa,cAAC8lB,GAAA,EAAD,CAAM3pB,UAAWT,EAAQqE,SANhFxD,EAAK4I,OAOP,MAEN,GACN,4BAIL,eAAC9I,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACE,cAACQ,EAAA,EAAD,CAAYC,QAAQ,YAApB,wBAGCunB,EAAYza,OAASya,EAAYxgB,KAAI,SAACzH,EAAMqG,GAC3C,OACE,cAAC4Q,GAAA,EAAD,CAAarX,UAAWI,EAAKiP,MAAMzB,OAASrO,EAAQ+X,YAAc/X,EAAQsG,OAA1E,SAEkB,UAAdzF,EAAK4L,KACH,qCACE,eAACuL,GAAA,EAAD,CAAYhO,GAAIlL,GAAc,GAAD,OAAI+B,EAAK4I,MAAT,gBAA7B,UAA4Due,GAAennB,EAAK4I,MAAMmK,UAAU/S,EAAK4I,MAAM4X,YAAY,KAAO,EAAGxgB,EAAK4I,MAAM4E,SAA5I,OACA,eAAC4J,GAAA,EAAD,CACEC,QAASpZ,GAAc,GAAD,OAAI+B,EAAK4I,MAAT,gBACtBO,GAAIlL,GAAc,GAAD,OAAI+B,EAAK4I,MAAT,iBACjBqG,MAAOjP,EAAKiP,MACZuE,SAAU,SAAChB,GAAD,OAAW8V,EAAmBjiB,EAAOmM,EAAMiB,OAAOxE,QAJ9D,UAME,cAACiE,GAAA,EAAD,CAAUjE,MAAM,MAAhB,iBACA,cAACiE,GAAA,EAAD,CAAUjE,MAAM,KAAhB,gBACA,cAACiE,GAAA,EAAD,CAAUjE,MAAM,MAAhB,uBAGY,SAAdjP,EAAK4L,KACL,qCACE,eAACuL,GAAA,EAAD,CAAYhO,GAAIlL,GAAc,GAAD,OAAI+B,EAAK4I,MAAT,gBAA7B,UAA4Due,GAAennB,EAAK4I,MAAMmK,UAAU/S,EAAK4I,MAAM4X,YAAY,KAAO,EAAGxgB,EAAK4I,MAAM4E,SAA5I,OAEA,cAAC4J,GAAA,EAAD,CACEC,QAASpZ,GAAc,GAAD,OAAI+B,EAAK4I,MAAT,gBACtBO,GAAIlL,GAAc,GAAD,OAAI+B,EAAK4I,MAAT,iBACjBqG,MAAOjP,EAAKiP,OAAS,WACrBuE,SAAU,SAAChB,GAAD,OAAW8V,EAAmBjiB,EAAOmM,EAAMiB,OAAOxE,QAJ9D,SAMGjQ,EAAW6P,gBAAgBC,iBAAmB8Z,EAAkB5pB,EAAW6P,gBAAgBC,kBAAkBrH,KAAI,SAAAzH,GAAI,OACpH,cAACkT,GAAA,EAAD,CAAoCjE,MAAOjP,EAA3C,SAAkDoH,IAAEgB,WAAWpI,IAAhD/B,GAAc+B,OAC1B,QAGP,IA/B6E/B,GAAc,GAAD,OAAI+B,EAAK4I,MAAT,oBAmCnG,MAEP,eAAC9I,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACE,uBACA,cAACsP,GAAA,EAAD,CACErG,MAAM,UACNxI,QAAQ,YACR8I,KAAK,QACL1C,QAAS0hB,EACTpO,UAAUwN,EALZ,kCAaZ,SAAS8B,GAAkB/vB,GAAQ,IACzBwF,EAA0FxF,EAA1FwF,QAA2BynB,GAA+DjtB,EAAjFgwB,iBAAiFhwB,EAA/DitB,OAAOvf,EAAwD1N,EAAxD0N,QAAgCuiB,GAAwBjwB,EAA/CkwB,YAA+ClwB,EAAlCmwB,SAAkCnwB,EAAxBiwB,eAAeG,EAASpwB,EAATowB,KAKzF,OACE,cAACC,GAAA,EAAD,UACE,cAACC,GAAA,EAAD,UACGrsB,OAAOC,KAAKksB,EAAK,IAAItiB,KAAI,SAACmH,EAAKvI,GAAN,OACxB,cAAC6jB,GAAA,EAAD,CAEE/gB,GAAIlL,GAAc2Q,EAAM,wBAA0BvI,GAClDoD,MAAOmF,EAAIub,QAAU,QAAU,OAC/BnnB,QAAS4L,EAAIvG,eAAiB,OAAS,UACvC+hB,cAAe/iB,IAAYuH,GAAMgY,EALnC,SAOE,eAACyD,GAAA,EAAD,CACEC,OAAQjjB,IAAYuH,EACpB2b,UAAWljB,IAAYuH,EAAMgY,EAAQ,MACrC9f,SAlBesL,EAkBYxD,EAlBC,SAAC4D,GACvCoX,EAAcpX,EAAOJ,KAcb,UAKG+U,GAAevY,EAAImE,UAAUnE,EAAI4R,YAAY,KAAO,EAAG5R,EAAIpB,SAC3DnG,IAAYuH,EACX,sBAAMhP,UAAWT,EAAQqrB,eAAzB,SACa,SAAV5D,EAAmB,oBAAsB,qBAE1C,SAhBD3oB,GAAc2Q,EAAM,wBAA0BvI,IATnC,IAAC+L,SA4C7B,SAASqY,GAAc9wB,GAAQ,IACrBowB,EAAwCpwB,EAAxCowB,KAAM5qB,EAAkCxF,EAAlCwF,QAASmiB,EAAyB3nB,EAAzB2nB,cAAe/jB,EAAU5D,EAAV4D,MADV,EAEF8Q,IAAMrE,SAAS,OAFb,mBAErB4c,EAFqB,KAEd8D,EAFc,OAGErc,IAAMrE,SAASpM,OAAOC,KAAKksB,EAAK,IAAI,IAHtC,mBAGrB1iB,EAHqB,KAGZsjB,EAHY,OAIJtc,IAAMrE,SAAS,GAJX,mBAIrB4gB,EAJqB,KAIfC,EAJe,OAKFxc,IAAMrE,UAAS,GALb,mBAKrBoF,EALqB,KAKd0b,EALc,OAMUzc,IAAMrE,SAAS,IANzB,mBAMrB+gB,EANqB,KAMRC,EANQ,KA2BtBC,EAAYF,EAAcvrB,KAAK0a,IAAI6Q,EAAahB,EAAKvc,OAASod,EAAOG,GAC3E,OACE,sBAAKnrB,UAAS,UAAKT,EAAQhD,KAAb,YAAqBgD,EAAQ0F,WAA3C,UACE,cAACyE,GAAD,CAAcnK,QAASA,EAAvB,SACE,cAAC+rB,GAAA,EAAD,CACEhrB,MAAO,CAAEsE,SAAUjH,GADrB,SAGE,eAAC4tB,GAAA,EAAD,CACEvrB,UAAWT,EAAQisB,MACnBtjB,kBAAgB,aAChB0B,KAAM4F,EAAQ,QAAU,SACxBpI,aAAW,iBAJb,UAME,cAAC0iB,GAAD,2BACM/vB,GADN,IAEEwF,QAASA,EACTynB,MAAOA,EACPvf,QAASA,EACTuiB,cArCc,SAACpX,EAAOJ,GAEhCsY,EADcrjB,IAAY+K,GAAsB,QAAVwU,EACrB,OAAS,OAC1B+D,EAAWvY,IAmCD0X,SAAUC,EAAKvc,UAEjB,eAAC6d,GAAA,EAAD,WACGxE,GAAWkD,EAAMpD,GAAcC,EAAOvf,IACpCikB,MAAMV,EAAOG,EAAaH,EAAOG,EAAcA,GAC/CtjB,KAAI,SAAC6c,EAAKje,GACT,OACE,cAAC4jB,GAAA,EAAD,CACEsB,OAAK,EAELpiB,GAAIlL,GAAc,YAAcoI,GAHlC,SAIGzI,OAAOC,KAAKymB,GAAK7c,KAAI,SAACmH,EAAKvI,GAAN,OACpB,cAAC6jB,GAAA,EAAD,CAEE/gB,GAAIlL,GAAc2Q,EAAM,wBAA0BvI,GAClDzG,UAA+C,cAApC0hB,EAAc,GAAGmG,UAAU7Y,GAAuBzP,EAAQqsB,cAAgBrsB,EAAQssB,gBAC7FhiB,MAAM,QAJR,SAKG6a,EAAI1V,GAAK8c,SAAWpH,EAAI1V,GAAK8c,SAAWpH,EAAI1V,GAAKK,OAJ7ChR,GAAc2Q,EAAM,wBAA0BvI,QAJlDpI,GAAc,YAAcoI,OAcxC4kB,EAAY,GACX,cAAChB,GAAA,EAAD,CAAU/pB,MAAO,CAAE/C,QAASiS,EAAQ,GAAK,IAAM6b,GAA/C,SACE,cAACf,GAAA,EAAD,CAAWyB,QAAS,gBAOhC,eAAC7rB,EAAA,EAAD,CAAMC,WAAS,EAAf,UACE,cAACD,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,cAAC2rB,GAAA,EAAD,CACEC,QAAS,cAACjV,GAAA,EAAD,CAAQC,QAASzH,EAAOoE,SA1DjB,SAAChB,GACzBsY,EAAStY,EAAMiB,OAAOoD,YA0DdjO,MAAM,cAEV,cAAC9I,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,cAAC6rB,GAAA,EAAD,CACEC,mBAAoB,CAAC,EAAG,GAAI,GAAI,IAChCprB,UAAU,MACVqrB,MAAOjC,EAAKvc,OACZud,YAAaA,EACbH,KAAMA,EACNqB,aA7Ee,SAACzZ,EAAO0Z,GAC/BrB,EAAQqB,IA6EAC,oBA1EsB,SAAC3Z,GAC/BwY,EAAe9f,SAASsH,EAAMiB,OAAOxE,MAAO,KAC5C4b,EAAQ,WA2EN,qBAAKjrB,UAAWT,EAAQitB,qB,cCxfjBC,GAAsB,CACjC,KAAQ,gBACR,MAAS,gBACT,aAAgB,aAChB,YAAe,6EACf,K,QAAQC,EACR,UDUa,SAAsB3yB,GAAO,MAGkByE,qBAAWC,KAA/DvC,EAHkC,EAGlCA,cAA+BF,GAHG,EAGnB6S,KAHmB,EAGbxB,SAHa,EAGHrR,KAAKwO,EAHF,EAGEA,YACvBpL,GAA2BlD,EAAxCgD,YAAwChD,EAA3BkD,YAJqB,GAIMlD,EAAfulB,WAGGrX,mBAAS,KAPH,mBAOnCE,EAPmC,KAOvBC,EAPuB,OAQdH,mBAAUkX,OAAOC,YAAclR,IARjB,mBAQnC9S,EARmC,KAQ3BikB,EAR2B,OAShBpX,mBAAUkX,OAAOqL,WAHtB,KANqB,mBASnChvB,EATmC,KAS5BivB,EAT4B,OAUcxiB,mBAAS,GAVvB,mBAUnCyZ,EAVmC,KAUbC,EAVa,KAWpCvkB,EAAUC,KACwBkiB,GAA8C3nB,EAA9E4nB,cAA8E5nB,EAA/D4nB,cAAiBD,eAAkC1V,EAAYjS,EAA7B4nB,cAAiB3V,KAG1EtB,qBAAU,WACR4W,OAAOO,iBAAiB,UAAU,WAChCL,EAAWF,OAAOC,YAAclR,IAChCuc,EAAUtL,OAAOqL,WAZA,KAajB7I,EAAwBjE,KAAE,mCAAmC0B,eAAiB,SAMlF,IAAMmE,EAAqB,uCAAG,WAAOmH,EAAU5hB,GAAjB,uBAAA1Q,EAAA,6DACxBuyB,EADwB,eACFxiB,IACXrO,OAAS,UACxBsO,EAAcuiB,GAEVC,EAAQnxB,KAAKC,MALW,SAOcG,EAAI8O,GAAG9O,EAAIgxB,aAAaH,IAPtC,cAOxBI,EAPwB,gBAQajxB,EAAI8O,GAAG9O,EAAIkxB,kBAAkB,CACpEnyB,KAAM,CACJoyB,SAAUF,EAA8B1jB,GACxCyB,cAAeC,GAAgB,kBAXP,OAQxBmiB,EARwB,OAexBC,EAAeC,YAAW,sBAAC,4BAAA/yB,EAAA,sEACWyB,EAAI8O,GAAG9O,EAAIuxB,mBAAmBH,EAA6B7jB,GAAI,CACrG/O,OAAQ,MACRL,QAAS,CACPM,OAAQ,mBACR,eAAgB,uBALS,OASc,cARvC+yB,EADyB,QASGvxB,SAC9BwxB,cAAcJ,GACd9iB,EAAcijB,IAKXT,EAAS,IAAcnxB,KAAKC,QAC/B4xB,gBACAljB,EAAc,KAlBa,2CAoB5B,KAnCyB,4CAAH,wDAsC3B,OACE,qBAAKvK,UAAS,UAAKT,EAAQhD,KAAb,kBACZ+D,MAAO,CAAE/C,UADX,SAEE,cAACiD,EAAA,EAAD,CAAMwM,UAAW,EAAGhN,UAAS,UAAKT,EAAQoe,UAAb,YAA0Bpe,EAAQuiB,iBAAlC,YAAsDviB,EAAQwhB,iBAA3F,SACE,cAAC7gB,EAAA,EAAD,CAAMC,WAAS,EAAf,SAEE,sBAAKH,UAAS,UAAKT,EAAQhD,MAA3B,UAEE,cAACuQ,GAAD,CACEhK,KAAMwH,GAAoC,YAAtBA,EAAWrO,OAC/BsD,QAASA,EACThC,OAAQA,EAASsmB,IAGnB,cAAC,GAAD,2BAAe9pB,GAAf,IACEwF,QAASA,EACT6V,OAAQsQ,EACRlb,YAAaA,KAEdF,EAAW4S,MAAQ5S,EAAW4S,KAAKtP,OAClC,cAACmU,GAAA,EAAD,UACE,eAAC7hB,EAAA,EAAD,CAAMC,WAAS,EACb0C,QAAS,EACT7C,UAAS,UAAKT,EAAQyiB,mBAFxB,UAIE,cAAC,GAAD,2BAAgBjoB,GAAhB,IACEwF,QAASA,EACTH,WAAYA,EACZ7B,OAAQA,EAASsmB,EJrGI,MIuGvB,cAACjX,GAAA,EAAD,CAAS5M,UAAWT,EAAQoE,UAC5B,cAACzD,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAf,SACE,cAAC0hB,GAAA,EAAD,CAAK/hB,UAAS,UAAKT,EAAQ+Q,MAAQrD,GAAI,EAAvC,SACE,cAAE4d,GAAF,2BACM9wB,GADN,IAEEwF,QAASA,EACT4qB,KAAM7f,EAAW4S,KACjBwE,cAAeA,EACf/jB,MAAOA,cAOjB,cAACuC,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAf,SACE,eAACQ,EAAA,EAAD,CAAYC,QAAQ,KAAKC,UAAU,KAAKf,UAAS,UAAKT,EAAQmuB,UAAb,YAA0BnuB,EAAQmN,YAAnF,8CACmC,gCA1CpCrO,GAAc2N,SC7E3B,cAAiB,CACf,CACE,KAAQ,cACR,GAAM,cACN,MAAS,sBACT,UAAa,CACX,MAAS,eACT,KAAQ,cACR,OAAU,CACR,4BACA,2BACA,2BACA,aACA,cACA,gBACA,yBACA,oBACA,iBACA,+BACA,gCAEF,QAAW,CACT,cAAe,GACf,aAAc,GACd,gBAAiB,GACjB,2BAA4B,YAE9B,MAAS,KAEX,aAAgB,cAChB,UAAa,CACX,4BAA6B,YAC7B,2BAA4B,YAC5B,2BAA4B,YAC5B,aAAc,YACd,cAAe,YACf,gBAAiB,YACjB,yBAA0B,YAC1B,oBAAqB,YACrB,iBAAkB,YAClB,+BAAgC,UAChC,+BAAgC,WAElC,WAAc,CACZ,cAAe,SACf,aAAc,SACd,gBAAiB,SACjB,2BAA4B,UAIlC,wBAA2B,G,iGCzDtB,SAAS2hB,GAAS5zB,GAAQ,IACrBsP,EAAqCtP,EAArCsP,SAAUgG,EAA2BtV,EAA3BsV,MAAO5I,EAAoB1M,EAApB0M,MAAUmnB,EADP,YACiB7zB,EADjB,8BAG5B,OACI,cAAC8G,EAAA,EAAD,yBACIE,UAAU,MACV8sB,KAAK,WACLhoB,OAAQwJ,IAAU5I,EAClB8C,GAAE,0BAAqB9C,GACvByB,kBAAA,qBAA+BzB,IAC3BmnB,GANR,aAQI,cAAC7L,GAAA,EAAD,CAAK+L,EAAG,EAAR,SAAYzkB,O,ICFhBhL,GAAkBC,EAAQ,IAA1BD,cAmaR,SAAS0vB,GAAYh0B,GAAQ,IAAD,EAGmDyE,qBAAWC,KAAhFvC,EAHkB,EAGlBA,cAAeqS,EAHG,EAGHA,gBACFnP,GAJK,EAGcyP,KAHd,EAGoBxB,SAHpB,EAG8BrR,IAH9B,EAGmCwO,YACbtO,EAAxCgD,YAAwChD,EAA3BkD,YAEmBsiB,GAFQxlB,EAAfulB,WAI7B1nB,EAFI4nB,cAEJ5nB,EAFmB4nB,cAAiBD,eAAiBniB,EAErDxF,EAFqDwF,QAASqiB,EAE9D7nB,EAF8D6nB,kBAAmBoM,EAEjFj0B,EAFiFi0B,WAAYC,EAE7Fl0B,EAF6Fk0B,oBAAqB7Y,EAElHrb,EAFkHqb,OAAQ9K,EAE1HvQ,EAF0HuQ,WAGxH4jB,EAA2C,WAA1BxM,EAAc,GAAG1V,KAAoB0V,EAAc,GAAGnY,GAAK,GAC9E4kB,EAAc,EAVQ,EAWM/jB,mBAAS,GAXf,mBAWnBtB,EAXmB,KAWTslB,EAXS,KAYpBC,EAAcrwB,OAAOC,KAAKqM,GAAYsD,OAAS,CAAC,IAAK,IAAM,EAAItD,EAAWtM,OAAOC,KAAKqM,GAAY,IAAIsD,SAAW,GAZ7F,EAaMxD,mBAASikB,GAbf,mBAanB7L,EAbmB,KAaTC,EAbS,KAuC1B,OAfA/X,qBAAU,WACR+X,EAAY4L,GACK,IAAbvlB,GAAgBslB,EAAY,KAU/B,CAAC9jB,IAIF,cAACgkB,GAAA,EAAD,CACEtuB,UAAWT,EAAQoF,KACnB4pB,oBAAqB,cAAC,KAAD,IACrBC,kBAAmB,cAAC,KAAD,IACnBhM,SAAUA,EACViM,aA9BiB,SAAC7b,EAAO8b,GAC3BjM,EAAYiM,IA8BVC,aA3BiB,SAAC/b,EAAO8b,GAC3BN,EAAYM,IAoBZ,SASGpkB,EAAatM,OAAOC,KAAKqM,GAAYzC,KAAI,SAACmH,EAAK5G,GAAN,OACxC,cAAC,IAAMC,SAAP,UAEE,cAACumB,GAAA,EAAD,CAEEC,OAAQ,IAAMV,GAAe,GAE7BnlB,MAAOxB,IAAEgB,WAAWwG,GACpBpG,KAAM,cAAC,KAAD,CAAM5I,UAAS,uBAAkBT,EAAQqJ,QAC/C4R,UAAUlQ,EAAW0E,GAAKpB,OAN5B,SASItD,EAAW0E,GAAKpB,OACdtD,EAAW0E,GAAKnH,KAAI,SAACzH,EAAMqG,GAAP,OAClB,cAACmoB,GAAA,EAAD,CAEEC,OAAQ,IAAMV,GAAe,GAC7BW,YAAaX,EACbrlB,SAAUA,IAAaqlB,EACvBnuB,UAAW8I,IAAaqlB,EAAb,qCAAyD5uB,EAAQwvB,kBAAjE,wBAAuGxvB,EAAQwvB,kBAC1HC,UAAW5uB,EAAKmJ,GAChBP,MAAO5I,EAAK6uB,YAAcf,GAChB,UAARlf,EACA,qBACEzF,GAAE,UAAKlL,GAAcujB,EAAoB,gCAAkCuM,IAE3EnuB,UAAS,UAAKT,EAAQ2vB,UAAb,YAA0B3vB,EAAQsF,uBAH7C,SAME,eAAC3E,EAAA,EAAD,CAAMC,WAAS,EAAf,UACE,cAACD,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGL,UAAS,UAAKT,EAAQoN,gBAAxC,SACGvM,EAAKqD,QACR,cAACvD,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,cAACsP,GAAA,EAAD,CACEpG,GAAE,UAAKlL,GAAcujB,EAAoB,yBAA2BuM,IAEpEvkB,KAAK,QACL5J,UAAS,UAAKT,EAAQ8E,KAAb,YAAqB9E,EAAQwF,sBACtCmC,QAAS,SAAC0L,GAC4C,YAAhDxT,EAAW6P,gBAAgBC,kBAC7BkG,EACEpG,EAAImE,UAAU,EAAGnE,EAAIpB,OAAS,GAC9BxN,EAAKmJ,GACL,UACAnJ,EAAK+uB,UACLnB,EAAWC,EAAsB,GAAG1kB,GACpClL,GAAc,kBAAD,OAAmBujB,EAAnB,YAAwCoM,EAAWC,EAAsB,GAAG1kB,MAE3FqJ,EAAM0B,mBAIN/F,EAAgB,CACd,MAAQ,EACR,iBAAoB,aAK1BjF,MAAM,UA1BR,SA4BmD,YAAhDlK,EAAW6P,gBAAgBC,iBAAiC,UAAY,oCAAM,cAAC,KAAD,CAAMlP,UAAS,qBAAgBT,EAAQ6vB,KAAxB,YAAgC7vB,EAAQ+E,QAA7D,cA5B3E,UAEUjG,GAAcujB,EAAoB,yBAA2BuM,WAZ7E,UAEU9vB,GAAcujB,EAAoB,gCAAkCuM,KA2CpE,UAARnf,EACA,qBACEzF,GAAE,UAAKlL,GAAcujB,EAAoB,gCAAkCuM,IAE3EnuB,UAAS,UAAKT,EAAQ2vB,UAAb,YAA0B3vB,EAAQsF,uBAH7C,SAIE,eAAC3E,EAAA,EAAD,CAAMC,WAAS,EAAf,UACE,cAACD,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAGL,UAAS,UAAKT,EAAQoN,gBAAxC,SAEGvM,EAAKqD,QAER,eAACvD,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,UACE,cAACsP,GAAA,EAAD,CACEpG,GAAE,UAAKlL,GAAcujB,EAAoB,4BAA8BuM,IAEvEvkB,KAAK,QACL5J,UAAS,UAAKT,EAAQ8E,KAAb,YAAqB9E,EAAQwF,sBACtCmC,QAAS,SAAC0L,GAC4C,YAAhDxT,EAAW6P,gBAAgBC,kBAE7BkG,EACEpG,EAAImE,UAAU,EAAGnE,EAAIpB,OAAS,GAC9BxN,EAAKmJ,GACL,OACAnJ,EAAK+uB,UACLnB,EAAWC,EAAsB,GAAG1kB,GACpClL,GAAc,kBAAD,OAAmBujB,EAAnB,YAAwCoM,EAAWC,EAAsB,GAAG1kB,MAE3FqJ,EAAM0B,mBAIN/F,EAAgB,CACd,MAAQ,EACR,iBAAoB,aAK1BjF,MAAM,UA3BR,2BAEUjL,GAAcujB,EAAoB,4BAA8BuM,KA6B1E,cAACxe,GAAA,EAAD,CACEpG,GAAE,UAAKlL,GAAcujB,EAAoB,8BAAgCuM,IAEzEvkB,KAAK,QACL5J,UAAS,UAAKT,EAAQ8E,KAAb,YAAqB9E,EAAQwF,sBACtCmC,QAAS,SAAC0L,GAC4C,YAAhDxT,EAAW6P,gBAAgBC,kBAE7BkG,EACEpG,EAAImE,UAAU,EAAGnE,EAAIpB,OAAS,GAC9BxN,EAAKmJ,GACL,SACAnJ,EAAK+uB,UACLnB,EAAWC,EAAsB,GAAG1kB,GACpClL,GAAc,kBAAD,OAAmBujB,EAAnB,YAAwCoM,EAAWC,EAAsB,GAAG1kB,MAE3FqJ,EAAM0B,mBAIN/F,EAAgB,CACd,MAAQ,EACR,iBAAoB,aAK1BjF,MAAM,YA3BR,6BAEUjL,GAAcujB,EAAoB,8BAAgCuM,YA3ClF,UAEU9vB,GAAcujB,EAAoB,gCAAkCuM,KA0E5E,cAACjuB,EAAA,EAAD,CAAMC,WAAS,EAAf,SAAgB,cAACD,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAf,SAAoBD,EAAKqD,UAE/CyD,QAAS,WAEPkO,EACEpG,EAAImE,UAAU,EAAGnE,EAAIpB,OAAS,GAAIxN,EAAKmJ,MAxI7C,UACUlL,GAAcujB,EAAoB,kBAAoBuM,QA4IlE,IAxJN,UACU9vB,GAAcujB,EAAoB,kBAAoBxZ,MAHlE,UACU/J,GAAcujB,EAAoB,kBAAoBxZ,QA8J7D,K,cC9nBEinB,GAAuB,CAClC,KAAQ,iBACR,MAAS,gBACT,aAAgB,aAChB,YAAe,iHACf,K,QAAQC,EACR,UDOa,SAAuBv1B,GAAQ,IAAD,EAG2CyE,qBAAWC,KAAzFvC,EAHmC,EAGnCA,cAAeqS,EAHoB,EAGpBA,gBAAiCvS,GAHb,EAGH6S,KAHG,EAGGxB,SAHH,EAGarR,KAAKwO,EAHlB,EAGkBA,YAAaC,EAH/B,EAG+BA,QACrDrL,GAA2BlD,EAAxCgD,YAAwChD,EAA3BkD,YAJsB,GAIKlD,EAAfulB,WAECrX,mBAAS,IANA,mBAMpCmV,EANoC,KAMtBC,EANsB,OAOPpV,mBAAS,IAPF,mBAOpCE,EAPoC,KAOxBC,EAPwB,OAQPH,mBAAS,IARF,mBAQxBmlB,GARwB,aASfnlB,mBAAUkX,OAAOC,YAAclR,IAThB,mBASpC9S,EAToC,KAS5BikB,EAT4B,OAUapX,mBAAS,GAVtB,mBAUpCyZ,EAVoC,KAUdC,EAVc,KAYrCvkB,EAAUC,KAZ2B,EAajB4K,mBAAS,GAbQ,mBAapCiF,EAboC,KAa7BmgB,EAb6B,OAcrBplB,mBAAS,MAdY,mBAcpCqlB,EAdoC,KAc/BC,EAd+B,KAeHhO,GAA6C3nB,EAA7E4nB,cAA6E5nB,EAA9D4nB,cAAiBD,eAAkC1V,EAAWjS,EAA5B4nB,cAAiB3V,KAEpE4V,EAAoB5V,EACpBgiB,EAAU,YAAOtM,GAEjBiO,EAAe,SAAC/c,EAAOL,GACX,GAAZA,GAAiE,YAAhDnT,EAAW6P,gBAAgBC,iBAE9CX,EAAgB,CACd,MAAQ,EACR,iBAAoB,YAGtBihB,EAASjd,IAIb7H,qBAAU,WACJD,GACFD,EAAYkb,GAAuB,CAAChE,GAAgBrS,MAErD,CAACjQ,EAAYiQ,EAAO5E,EAAS4E,IAEhC3E,qBAAU,WACR4W,OAAOO,iBAAiB,UAAU,kBAAML,EAAWF,OAAOC,YAAclR,OACxEyT,EAAwBjE,KAAE,mCAAmC0B,eAAiB,MAIhF,IAAMnM,EAAM,uCAAG,WAAOwa,EAAaC,EAAWC,EAAiBL,EAAKM,EAAWC,GAAhE,yBAAAz1B,EAAA,sDAKb,IAHI01B,EAAcpQ,KAAE,oCAEA,EACXpH,EAAI,EAAGA,EAAIwX,EAAYriB,OAAQ6K,IAClCwX,EAAYxX,GAAGyX,UAAUC,SAASP,IAAgBK,EAAYxX,GAAGyX,UAAUC,SAASN,IACtFI,EAAYxX,GAAGyX,UAAUE,OAAO,SAChB3X,GAEhBwX,EAAYxX,GAAGyX,UAAUG,IAAI,SAVpB,GAcW,SAApBP,GAAkD,YAApBA,EAdrB,gBAgBXJ,EAAOD,GACPE,EAAa,EAAQ,GAjBV,0BAkBkB,WAApBG,EAlBE,iBAqBX,IAASrX,EAAI,EAAGA,EAAIwX,EAAYriB,OAAQ6K,IAClCwX,EAAYxX,GAAGyX,UAAUC,SAASN,KACpCS,EAAwB7X,GAK5B,KAFI8X,EAAqBN,EAAYvE,SAClB8E,OAAOF,EAAuB,GACxC7X,EAAI,EAAGA,EAAI8X,EAAmB3iB,OAAQ6K,IACnC,IAANA,GACF8X,EAAmB9X,GAAGyX,UAAUE,OAAO,SACvB3X,GAEhB8X,EAAmB9X,GAAGyX,UAAUG,IAAI,SAjC7B,OAqCXxQ,KAAE,oCAAoC4Q,QACtC5Q,KAAE,oCAAoCC,KAAKyQ,GAtChC,UAwCgBv0B,EAAI8O,GAAG9O,EAAI00B,YAAYb,IAxCvC,eAyCXrlB,EAAYkb,GAAuB,CAAChE,EAAe,IAzCxC,4CAAH,gEA6CNgE,GAAwB,SAAUhE,EAAeiP,GACjDA,IACFhB,EAAa,EAAW,GACxBnQ,EAAU,GACVjV,EAAc,KAGhBmX,EAAc7Z,IAAd,uCAAkB,WAAM6Z,GAAN,+CAAAnnB,EAAA,yDACF,IAAV8U,GACqB,WAAvBqS,EAAc1V,KAFA,iCAIahQ,EAAI8O,GAAG9O,EAAI40B,OAAOlP,EAAcnY,KAJ7C,cAIRsnB,EAJQ,gBAKU70B,EAAI8O,GAAG9O,EAAI80B,MALrB,OAKRC,EALQ,OAOLC,EAAI,EAPC,YAOEA,EAAIH,EAAaI,MAAMrjB,QAPzB,kCAQK5R,EAAI8O,GAAG9O,EAAIk1B,KAAKL,EAAaI,MAAMD,GAAGznB,KAR3C,QAQR2nB,EARQ,OASRhwB,EAAWgwB,EAAKC,MAAMhC,UAC1B0B,EAAaI,MAAMD,GAAG7B,UAAYjuB,EAVtB,QAOiC8vB,IAPjC,0BAaVI,EAAqB,GAC2B,YAAhDhyB,EAAW6P,gBAAgBC,iBAdjB,kCAeelT,EAAI8O,GAAG9O,EAAIq1B,aAAa,CAAEC,QAASP,EAAUxnB,MAf5D,aAeRgoB,EAfQ,UAgBUA,EAAe3jB,OAhBzB,wBAiBN4jB,EAAoBD,EAAe,GAAGtC,WAAa,KAjB7C,UAkBiBjzB,EAAI8O,GAAG9O,EAAI40B,OAAOY,IAlBnC,QAkBVJ,EAlBU,OAmBD3Y,EAAI,EAnBH,aAmBMA,EAAI2Y,EAAmBH,MAAMrjB,QAnBnC,kCAoBS5R,EAAI8O,GAAG9O,EAAIk1B,KAAKE,EAAmBH,MAAMxY,GAAGlP,KApBrD,QAoBJ2nB,EApBI,OAqBJhwB,EAAWgwB,EAAKC,MAAMhC,UAC1BiC,EAAmBH,MAAMxY,GAAG0W,UAAYjuB,EAtBhC,QAmB2CuX,IAnB3C,wBA2BV8C,EAAqB,CACvBsV,eACAO,sBAKEK,EAlCU,YAkCOlW,EAAmBsV,aAAaI,OACD,YAAhD7xB,EAAW6P,gBAAgBC,kBAC7BlR,OAAOC,KAAKsd,EAAmB6V,oBAAoBxjB,SACnD6jB,EAAU,sBACLA,GADK,YACUlW,EAAmB6V,mBAAmBH,SAIxDS,EA1CU,YA0CYnW,EAAmBsV,aAAac,YACtDC,EAAW,CACbX,MAAOQ,EACPE,WAAYD,GAGVzB,EAAcpQ,KAAE,mBAAD,OAAoBxhB,GAAcujB,GAAlC,cACfgQ,EAASX,MAAMrjB,QACjBgkB,EAASX,MAAMppB,KAAI,SAACzH,EAAMqG,GAIxB,IAFA,IAAIorB,EAASzxB,EAAKmJ,GACduoB,GAAiB,EACZrZ,EAAI,EAAGA,EAAIwX,EAAYriB,OAAQ6K,IAClCwX,EAAYxX,GAAGyX,UAAUC,SAAS,SAAWF,EAAYxX,GAAGyX,UAAUC,SAAS0B,KACjFC,GAAiB,GAIhBA,GACH5R,iBAAe6R,iBAAiBF,GAC7BzR,SAAS/hB,GAAc,mBAAD,OAAoBujB,EAApB,YAAyCF,EAAcnY,MAC7E+W,cAAc,UACdA,cAAc,QACdA,cAAc/E,EAAmBsV,aAAaI,MAAMnhB,QAAQ1P,IAAS,EAAI,SAAW,YACpFkgB,cAAc7Z,EAAQ,EAAI,QAAU,QACpC6Z,cAAcuR,GACdrR,QACAC,UACA5V,MAAK,SAACqmB,GACL,IAAIvQ,EAAkBzkB,EAAcb,cAAc8X,UAAU,EAAGjX,EAAcb,cAAculB,YAAY,MACvGV,iBAAeW,KAAKF,MAErBG,OAAM,SAAC7hB,GACNwgB,QAAQxgB,MAAM,mBAAoBA,MAIpCwH,IAAUmrB,EAASX,MAAMrjB,OAAS,GACpCokB,YAAW,kBAAMxS,EAAU,KAAI,QAKjCoS,EAASD,WAAW/jB,QACtBgkB,EAASD,WAAW9pB,KAAI,SAACzH,EAAMqG,GAG7B,IAFA,IAAImf,EAAcxlB,EAAKmJ,GACnB0oB,GAAsB,EACjBxZ,EAAI,EAAGA,EAAIwX,EAAYriB,OAAQ6K,IAClCwX,EAAYxX,GAAGyX,UAAUC,SAAS,cAAgBF,EAAYxX,GAAGyX,UAAUC,SAASvK,KACtFqM,GAAsB,GAGrBA,GACH/R,iBAAe2F,sBAAsBD,GAClCxF,SAAS/hB,GAAc,mBAAD,OAAoBujB,EAApB,YAAyCF,EAAcnY,MAC7E+W,cAAc,UACdA,cAAc,aACdA,cAAc/E,EAAmBsV,aAAac,WAAW7hB,QAAQ1P,IAAS,EAAI,SAAW,YACzFkgB,cAAc,SACdA,cAAcsF,GACdpF,QACAC,UACA5V,MAAK,SAACob,GACL+L,YAAW,cAER,KACH,IAAIrR,EAAkBzkB,EAAcb,cAAc8X,UAAU,EAAGjX,EAAcb,cAAculB,YAAY,MACvGV,iBAAeW,KAAKF,MAGrBG,OAAM,SAAC7hB,GACNwgB,QAAQxgB,MAAM,mBAAoBA,MAKpCwH,IAAUmrB,EAASD,WAAW/jB,OAAS,GACzCokB,YAAW,kBAAMxS,EAAU,KAAI,QAIrCjV,EAAcqnB,GA3HA,wBA4HkB,YAAvBlQ,EAAc1V,MACyB,YAAhD5M,EAAW6P,gBAAgBC,kBACjB,IAAVG,IAEI0gB,EAAYrO,EAAcnY,GAE9BsW,KAAExhB,GAAc,mBAAD,OAAoBujB,EAApB,YAAyCF,EAAcnY,MAAOuW,KAAK,IAE9E2P,EAEFvP,iBAAegS,oBAAoBnC,GAChC3P,SAAS/hB,GAAc,mBAAD,OAAoBujB,EAApB,YAAyCF,EAAcnY,MAC7E+W,cAAc,iBACdyF,WAAW,CACV0J,IAAKA,IAENzJ,GAAG,yBAAyB,SAACpT,OAE7B4N,QACAC,UACA5V,MAAK,SAAC6V,GACLjB,QAAQC,IAAI,UAAWgB,GAEvBlB,EAAU,GACV+P,EAAc7O,GAGd,IAAIC,EAAkBzkB,EAAcb,cAAc8X,UAAU,EAAGjX,EAAcb,cAAculB,YAAY,MACvGV,iBAAeW,KAAKF,GAEpB+O,EAAO,SAER5O,OAAM,SAAC7hB,GACNwgB,QAAQxgB,MAAM,mBAAoBA,MAItCihB,iBAAegS,oBAAoBnC,GAChC3P,SAAS/hB,GAAc,mBAAD,OAAoBujB,EAApB,YAAyCF,EAAcnY,MAC7E+W,cAAc,iBACd0F,GAAG,yBAAyB,SAACpT,OAE7B4N,QACAC,UACA5V,MAAK,SAAC6V,GAGLlB,EAAU,GACV+P,EAAc7O,GAEd,IAAIC,EAAkBzkB,EAAcb,cAAc8X,UAAU,EAAGjX,EAAcb,cAAculB,YAAY,MACvGV,iBAAeW,KAAKF,MAIrBG,OAAM,SAAC7hB,GACNwgB,QAAQxgB,MAAM,mBAAoBA,OApL1B,4CAAlB,wDA4LF,OACE,qBAAKe,UAAS,UAAKT,EAAQhD,KAAb,kBACZ+D,MAAO,CAAE/C,UADX,SAEE,cAACiD,EAAA,EAAD,CAAMwM,UAAW,EAAGhN,UAAS,UAAKT,EAAQoe,UAAb,YAA0Bpe,EAAQuiB,iBAAlC,YAAsDviB,EAAQwhB,iBAA3F,SACE,cAAC7gB,EAAA,EAAD,CAAMC,WAAS,EAAf,SAEE,sBAAKH,UAAWT,EAAQhD,KAAxB,UACE,cAACuQ,GAAD,CACEhK,KAAMyc,EACNhgB,QAASA,EACThC,OAAQA,EAASsmB,IAGnB,eAAC9B,GAAA,EAAD,CAAK/hB,UAAWuf,EAAY,aAAWhgB,EAAQsG,QAA/C,UACE,cAACkW,GAAA,EAAD,CAAQ1e,SAAS,SAAS2P,UAAW,EAArC,SACE,cAACmlB,GAAA,EAAD,CACEnyB,UAAWT,EAAQmE,KACnB2L,MAAOA,EACPuE,SAAU+b,EACVvoB,aAAW,sBAJb,SAKG4mB,EAAWnmB,KAAI,SAACzH,EAAMqG,GAAP,OACd,cAAC2rB,GAAA,EAAD,aAEEppB,MAAgB,GAATvC,EACL,gCAEkD,WAA/CrH,EAAW6P,gBAAgBC,iBAC1B,cAAC,KAAD,CAAMlP,UAAS,qBAAgBT,EAAQ6vB,KAAxB,YAAgC7vB,EAAQ+E,QAAa,cAAC,KAAD,CAAMtE,UAAS,qBAAgBT,EAAQ6vB,KAAxB,YAAgC7vB,EAAQ+E,QAC5HlE,EAAK4I,SAER5I,EAAK4I,MACPhJ,UAAqB,IAAVqP,GAAyB,IAAV5I,EAAf,UAAgClH,EAAQsG,QAAoB,GAATY,EAAA,UAAgBlH,EAAQmG,QAAxB,GAC9DpF,MAAiB,IAAVmG,EAAc,CACnBhK,gBAAiB,UACjBsJ,aAAc,MACduD,MAAO,OACP4H,QAAS,OACP,IDvTnB,SAAmBzK,GACtB,MAAO,CACH8C,GAAG,cAAD,OAAgB9C,GAClB,gBAAgB,mBAAhB,OAAoCA,ICqTlB4rB,CAAU5rB,IAjBhB,UACUpI,GAAcujB,EAAoB,QAAUnb,YAoB5D,cAACsb,GAAA,EAAD,CAAK/hB,UAAU,oBAAf,SACE,eAACE,EAAA,EAAD,CAAMC,WAAS,EACb0C,QAAS,EACT7C,UAAS,UAAKT,EAAQyiB,mBAFxB,UAIE,cAAC,GAAD,2BAAgBjoB,GAAhB,IACEwF,QAASA,EACTH,WAAYA,EACZ7B,OAAQA,EAASsmB,EPtVI,MOwVtBmK,EAAWnmB,KAAI,SAACyqB,EAAgBrE,GAAjB,OACd,cAAC,GAAD,CAEE5e,MAAOA,EACP5I,MAAOwnB,EACP3tB,MAAO,CAAE3C,MAAO,QAJlB,SAME,cAACuC,EAAA,EAAD,CAAMC,WAAS,EAAf,SAE4B,IAAxB8tB,EAEE,eAAC,IAAM5lB,SAAP,WAEE,cAACnI,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,cAACqJ,GAAD,CAAcnM,OAAQ,IAAKgC,QAASA,EAApC,SACE,cAACwuB,GAAD,4BACExf,kBACAhP,UACAqiB,oBACAoM,aACAC,sBACA7Y,SACA9K,cACGvQ,SAKT,cAACmG,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,cAACyJ,GAAD,CAAgBvK,QAASA,EAAzB,SACE,qBACES,UAAS,yBAAoB3B,GAAcujB,IAC3CrY,GAAIlL,GAAc,kBAAD,OAAmBujB,EAAnB,YAAwC0Q,EAAe/oB,MACnElL,GAAc,kBAAD,OAAmBujB,EAAnB,YAAwC0Q,EAAe/oB,YAtBjF,UACUlL,GAAcujB,EAAoB,kBAAoBqM,KA4BhE,cAAC/tB,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAf,SAiBE,cAACyJ,GAAD,CAAgBvK,QAASA,EAAzB,SACE,qBACES,UAAU,iBACVuJ,GAAIlL,GAAc,kBAAD,OAAmBujB,EAAnB,YAAwC0Q,EAAe/oB,MACnElL,GAAc,kBAAD,OAAmBujB,EAAnB,YAAwC0Q,EAAe/oB,aA5DvF,UACUlL,GAAcujB,EAAoB,aAAeqM,oBAjDhE5vB,GAAc2N,SCvS3B,cAAiB,CACf,CACE,KAAQ,SACR,GAAM,KACN,MAAS,iBAEX,CACE,KAAQ,UACR,GAAM,4BACN,MAAS,sBAGb,wBAA2B,G,wBCVa1N,EAAQ,IAA1CD,G,GAAAA,cAAekpB,G,GAAAA,eAEjB/nB,GAAYnD,aAAW,SAACC,GAAD,MAAY,CACvCM,MAAO,CACLS,SAAU,WACVM,MAAO,IACP+S,UAAW,IACXrK,SAAU,SACV5J,gBAAiBH,EAAMI,QAAQC,WAAWC,MAC1CwI,OAAQ,iBACRC,UAAW/I,EAAMgJ,QAAQ,GACzBlC,QAAS9G,EAAMuG,QAAQ,EAAG,EAAG,IAE/B2oB,MAAO,CACL9a,UAAW,KAEbjQ,KAAM,CACJzD,SAAU,IACVC,UAAW,QACXoI,UAAW,QAEb0H,aAAc,CACZlQ,QAAS,OACTC,eAAgB,SAChBC,WAAY,cAOhB,SAASqR,KAIP,MAAO,CACLjR,IAAI,GAAD,OAJO,GAIP,KACHD,KAAK,GAAD,OAJO,GAIP,KACJE,UAAU,cAAD,OALE,GAKF,eANC,GAMD,OAIE,SAASm1B,GAAWx4B,GAIjC,IAAMwF,EAAUC,KACRwH,EAAgCjN,EAAhCiN,KAAM8H,EAA0B/U,EAA1B+U,QAAS0jB,EAAiBz4B,EAAjBy4B,aALiB,EAMnB/jB,IAAMrE,SAASgE,IAA7BM,EANiC,oBASxC,OACE,cAACC,GAAA,EAAD,CACE3H,KAAMA,EACN8H,QAASA,EACT5G,kBAAgB,qBAChBuqB,mBAAiB,2BAJnB,SAOE,sBAAKnyB,MAAOoO,EAAY1O,UAAWT,EAAQ3C,MAA3C,UACE,oBAAI2M,GAAG,qBAAP,SAA6BipB,EAAa/uB,QACzC+uB,EAAaz3B,KACZ,cAACuwB,GAAA,EAAD,CAAgBvqB,UAAW2xB,KAAO1yB,UAAWT,EAAQisB,MAArD,SACE,eAACD,GAAA,EAAD,CAAOoH,cAAY,EAAC3yB,UAAWT,EAAQisB,MAAO5hB,KAAK,QAAQxC,aAAW,gBAAtE,UACE,cAACgjB,GAAA,EAAD,UACE,cAACC,GAAA,EAAD,UACGrsB,OAAOC,KAAKu0B,EAAaz3B,KAAK,IAAI8M,KAAI,SAACmH,EAAKvI,GAAN,OACrC,cAAC6jB,GAAA,EAAD,CAAWzgB,MAAM,QAEfN,GAAIlL,GAAc2Q,EAAM,wBAA0BvI,GAFpD,SAGG8gB,GAAevY,EAAImE,UAAUnE,EAAI4R,YAAY,KAAO,EAAG5R,EAAIpB,UAFvDvP,GAAc2Q,EAAM,wBAA0BvI,WAQ3D,cAACglB,GAAA,EAAD,UACG+G,EAAaz3B,KAAK8M,KAAI,SAACzH,EAAMqG,GAAP,OAErB,cAAC4jB,GAAA,EAAD,CAEE9gB,GAAIlL,GAAc,YAAcoI,GAFlC,SAIIzI,OAAOC,KAAKmC,GAAMyH,KAAI,SAAAmH,GAAG,OACvB,cAACsb,GAAA,EAAD,CAAWzgB,MAAM,QAEfN,GAAIlL,GAAc2Q,EAAM,wBAA0BvI,GAFpD,SAII+rB,EAAaz3B,KAAK0L,GAAOuI,GACvBwjB,EAAaz3B,KAAK0L,GAAOuI,GAAK8c,SAC5B0G,EAAaz3B,KAAK0L,GAAOuI,GAAK8c,SAC9B0G,EAAaz3B,KAAK0L,GAAOuI,GAAKK,MAC5BmjB,EAAaz3B,KAAK0L,GAAOuI,GAAKK,MACW,kBAAlCmjB,EAAaz3B,KAAK0L,GAAOuI,GAC7BpP,KAAKgzB,MAAsC,IAAhCJ,EAAaz3B,KAAK0L,GAAOuI,IAAc,IAEnDwjB,EAAaz3B,KAAK0L,GAAOuI,GAE/B,IAbC3Q,GAAc2Q,EAAM,wBAA0BvI,QALpDpI,GAAc,YAAcoI,cA8B3C,cAACjG,EAAA,EAAD,CAAMR,UAAS,UAAKT,EAAQkB,KAAb,YAAqBlB,EAAQwN,cAA5C,SACE,cAACG,GAAA,EAAD,CAAkBlN,UAAWT,EAAQ4N,0B,gEC/GzC9O,GAAkBC,EAAQ,IAA1BD,cAuQR,SAASikB,GAAUvoB,GAE4GA,EADrH4nB,cADiB,IACeD,EACqF3nB,EADtG4nB,cAAiBD,cAAkC1V,EACmDjS,EADpE4nB,cAAiB3V,KAAQzM,EAC2CxF,EAD3CwF,QAChF+K,EAA2HvQ,EAA3HuQ,WAAYuoB,EAA+G94B,EAA/G84B,SAAUC,EAAqG/4B,EAArG+4B,OAAQC,EAA6Fh5B,EAA7Fg5B,SAAUC,EAAmFj5B,EAAnFi5B,aAAcC,EAAqEl5B,EAArEk5B,eAAgBC,EAAqDn5B,EAArDm5B,aAAcC,EAAuCp5B,EAAvCo5B,eAAgBC,EAAuBr5B,EAAvBq5B,mBAF9E,EAIQhpB,oBAAS,GAJjB,mBAIjBoY,EAJiB,KAIPC,EAJO,KAcxB,OACE,eAACC,GAAA,EAAD,CAAWF,SAAUA,EAAU5O,SATJ,SAAChB,EAAOL,GACnCkQ,GAAYD,IAQmDxiB,UAAWT,EAAQ+Q,KAAMtD,UAAW,EAAnG,UACE,eAAC2V,GAAA,EAAD,CACEC,WAAY,cAACC,GAAA,EAAD,IACZnQ,gBAAc,kBACdnJ,GAAG,iBAHL,UAKE,cAAC8pB,GAAA,EAAD,IAAc,cAACxyB,EAAA,EAAD,CAAYb,UAAS,UAAKT,EAAQqa,QAAb,YAAwBra,EAAQ8E,MAArD,wBAGhB,cAAC4e,GAAA,EAAD,UACE,cAAC/iB,EAAA,EAAD,CAAMC,WAAS,EAAC0C,QAAS,EAAzB,SACGyH,EACC,qCACE,cAACpK,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SAEE,cAACqJ,GAAD,CAAcnK,QAASA,EAAvB,SACE,eAAC8X,GAAA,EAAD,CAAarX,UAAWT,EAAQ+X,YAAhC,UACE,cAACC,GAAA,EAAD,CACEhO,GAAE,UAAKlL,GAAc2N,EAAO,uCAD9B,oBAIA,cAACwL,GAAA,EAAD,CACEC,QAAO,UAAKpZ,GAAc2N,EAAO,uCACjCzC,GAAE,UAAKlL,GAAc2N,EAAO,kCAC5BqD,MAAO2jB,EACPpf,SAAU,SAAChB,GAAD,OAAWwgB,EAAmBxgB,EAAMiB,OAAOxE,QAJvD,SAMGqS,EAAc,GAAG4R,cAAczrB,KAAI,SAACzH,EAAMqG,GAAP,OAElC,cAAC6M,GAAA,EAAD,CACE/J,GAAIlL,GAAc,GAAD,OAAI+B,EAAJ,YAAYqG,IAE7B4I,MAAOjP,EAHT,SAIEA,EAAK+S,UAAU/S,EAAKwgB,YAAY,KAAO,EAAGxgB,EAAKwN,QAAQ2lB,MAAM,KAAK1rB,KAAI,SAAAzH,GAAI,OAAIA,EAAK6S,OAAO,GAAGC,cAAgB9S,EAAK+S,UAAU,MAAI4G,KAAK,MAFhI1b,GAAc,GAAD,OAAI+B,EAAJ,YAAYqG,iBAQ1C,cAACvG,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,cAACqJ,GAAD,CAAcnK,QAASA,EAAvB,SACE,eAAC8X,GAAA,EAAD,CAAarX,UAAWT,EAAQ+X,YAAhC,UACE,cAACC,GAAA,EAAD,CACEhO,GAAE,UAAKlL,GAAc2N,EAAO,oCAD9B,sBAIA,cAACwL,GAAA,EAAD,CACEC,QAAO,UAAKpZ,GAAc2N,EAAO,oCACjCzC,GAAE,UAAKlL,GAAc2N,EAAO,+BAC5BqD,MAAO0jB,EACPnf,SAAU,SAAChB,GAAD,OAAWugB,EAAevgB,EAAMiB,OAAOxE,QAJnD,SAMG/E,EAAWkpB,iBAAiB3rB,KAAI,SAACzH,EAAMqG,GAAP,OAE/B,cAAC6M,GAAA,EAAD,CACE/J,GAAIlL,GAAc,GAAD,OAAI+B,EAAJ,YAAYqG,IAE7B4I,MAAOjP,EAHT,SAGgBA,GADT/B,GAAc,GAAD,OAAI+B,EAAJ,YAAYqG,iBAQ1C,cAACvG,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SAEE,cAACqJ,GAAD,CAAcnK,QAASA,EAAvB,SACE,cAAC,KAAD,CAAyBk0B,MAAOC,KAAhC,SACE,cAAC,KAAD,CACEC,gBAAc,EACd7yB,QAAQ,SACRgd,OAAO,aACPpgB,OAAO,SACP6L,GAAG,WACHP,MAAM,YACNqG,MAAOwjB,EACPjf,SAAUqf,EACVW,oBAAqB,CACnB,aAAc,eAEhBC,QAASvpB,EAAWA,EAAWsD,OAAS,GAAGtD,EAAWH,YAAYiT,OAAO,IACzE0W,QAASxpB,EAAW,GAAGA,EAAWH,YAAYiT,OAAO,YAK7D,cAACld,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,EAAf,SACE,cAACqJ,GAAD,CAAcnK,QAASA,EAAvB,SACE,cAAC,KAAD,CAAyBk0B,MAAOC,KAAhC,SACE,cAAC,KAAD,CACEC,gBAAc,EACd7yB,QAAQ,SACRgd,OAAO,aACPpgB,OAAO,SACP6L,GAAG,SACHP,MAAM,UACNqG,MAAOyjB,EACPlf,SAAUsf,EACVU,oBAAqB,CACnB,aAAc,eAEhBC,QAAShB,EACTiB,QAAShB,aAMjB,UAOd,SAASiB,GAAcC,EAAWC,GAChC,IAAIC,EAAmB,IAAIt4B,KAAKo4B,GAEhC,OADoB,IAAIp4B,KAAKs4B,EAAiBC,UAAyB,MAAZF,GACtCG,cAAcb,MAAM,KAAK,G,cCrZnCc,GAAuB,CAClC,KAAQ,aACR,MAAS,iBACT,aAAgB,QAChB,YAAe,YACf,K,QAAQC,EACR,UDKa,SAAuBv6B,GAAO,MAE2CyE,qBAAWC,KAAzFvC,EAFmC,EAEnCA,cAAeqS,EAFoB,EAEpBA,gBAAiCvS,GAFb,EAEH6S,KAFG,EAEGxB,SAFH,EAEarR,KAAKwO,EAFlB,EAEkBA,YAAaC,EAF/B,EAE+BA,QACrDrL,GAA2BlD,EAAxCgD,YAAwChD,EAA3BkD,YAHsB,GAGKlD,EAAfulB,WACPrX,mBAAS,IAJQ,gCAKXA,mBAAS,KALE,mBAKpCyoB,EALoC,KAK1B0B,EAL0B,OAMfnqB,mBAAS,IANM,mBAMpC0oB,EANoC,KAM5B0B,EAN4B,OAOXpqB,mBAAS,OAPE,mBAOpC2oB,EAPoC,KAO1B0B,EAP0B,OAQHrqB,mBAAS,IARN,mBAQpC4oB,EARoC,KAQtB0B,EARsB,OASPtqB,wBAASC,GATF,mBASpCC,EAToC,KASxBC,EATwB,OAUnBkE,IAAMrE,UAAS,GAVI,mBAUpCpD,EAVoC,KAU9B2tB,EAV8B,OAWHvqB,mBAAS,IAXN,mBAWpCooB,EAXoC,KAWtBoC,EAXsB,OAYfxqB,mBAAUkX,OAAOC,YAAclR,IAZhB,mBAYpC9S,EAZoC,KAY5BikB,GAZ4B,QAaapX,mBAAS,GAbtB,qBAapCyZ,GAboC,MAadC,GAbc,MAerCvkB,GAAUC,KACSkiB,GAA8E3nB,EAA/F4nB,cAAiBD,cAAkC1V,GAA4CjS,EAA7D4nB,cAAiB3V,KAGrD6oB,IAHiG96B,EAApC+6B,eAAoC/6B,EAApBg7B,gBAG9D,uCAAG,qCAAAx6B,EAAA,6DAASy6B,EAAT,EAASA,KAC3BC,EAA0Bj6B,KAAK0rB,MAAM1rB,KAAKC,UAAUymB,GAAc,GAAGvX,eACjDmR,QAAxB,2BACK2Z,EAAwB3Z,SAD7B,uBAEG2Z,EAAwB7X,OAAO,GAAK4X,GAFvC,cAGGC,EAAwB7X,OAAO,GAAkB,QAAb2V,EAAqB,GAAKA,GAHjE,IAKAkC,EAAwBC,OAAQ,EAChCD,EAAwBE,MAAQ,KAEhCR,GAAQ,GAVc,SAWS34B,EAAI8O,GAAG9O,EAAI+O,iBAAiB,CAAEC,cAAe0W,GAAc1W,eAAiB,OAAQjQ,KAAMk6B,KAXnG,OAWlB1Z,EAXkB,OAYlB6Z,EAAW,CACb,MAAQ,mBAAR,OAA4BJ,GAC5B,KAAQzZ,GAEVqZ,EAAgBQ,GAhBM,4CAAH,uDA+CjBC,GAAa,GACjB,GAAI/qB,IASF+qB,IAPAA,GAAa7tB,IAAE8Q,OAAOhO,GAAY,SAACoa,GACjC,OAAQA,EAAIpa,EAAWH,YAAYiT,OAAO,KAAOyV,GAC5CnO,EAAIpa,EAAWH,YAAYiT,OAAO,IAAM0V,IAC1B,QAAbC,GAA4BrO,EAAIpa,EAAWH,YAAYiT,OAAO,MAAQ2V,OAItDlrB,KAAI,SAAAzH,GAC1B,MAAO,CACL,IAAOA,EAAKkK,EAAWH,YAAYiT,OAAO,IAC1C,SAAYhd,EAAKkK,EAAWH,YAAYiT,OAAO,IAC/C,MAAShd,EAAK4yB,OAOD,QAAbD,GAAoB,CAEtB,IAAMuC,GAAW,YAAO,IAAIC,IAAIF,GAAWxtB,KAAI,SAAAzH,GAAI,OAAIA,EAAK40B,SACxDQ,GAA2B,GAE/BF,GAAYztB,KAAI,SAAA4tB,GAEd,IAAIpmB,EAAQ7H,IAAE8Q,OAAO+c,IAAY,SAAA3Q,GAC/B,OAAOA,EAAIsQ,MAAQS,KAClBC,QAAO,SAACC,EAAD,UAAoBA,EAApB,EAAQtmB,QAAyB,GACvCumB,EAAU,CACZZ,IAAKS,EACLpmB,MAAOA,EACP0jB,SAAU,OAEZyC,GAAyBxtB,KAAK4tB,MAGhCP,GAAaG,GAIjB9qB,qBAAU,WACJD,IACFD,EAAYkb,GAAuB,CAAChE,KACpCgT,EAAgBhT,GAAc,GAAG4R,cAAc,OAEhD,CAACl0B,EAAYqL,IAEhBC,qBAAU,WACR4W,OAAOO,iBAAiB,UAAU,kBAAML,GAAWF,OAAOC,YAAclR,OACxEyT,GAAwBjE,KAAE,mCAAmC0B,eAAiB,MAIhF,IAAMmE,GAAwB,SAAUhE,GAEtCnX,OAAcF,GACdqX,EAAc7Z,IAAd,uCAAkB,WAAM6Z,GAAN,qBAAAnnB,EAAA,6DACV4P,EAAgBuX,EAAhBvX,aACMmR,QAAZ,eACGoG,EAAcyE,kBAAoB/mB,EAAW6P,gBAAgBkD,OAHhD,SAKenW,EAAI8O,GAAG9O,EAAI+O,iBAAiB,CAAEC,cAAe0W,EAAc1W,eAAiB,OAAQjQ,KAAMoP,KALzG,OAYhB,IAJAoR,GAHIA,EALY,QAQwBjD,QAAO,SAAAlY,GAC7C,OAAOA,EAAK+J,EAAYiT,OAAO,OAE7BoW,EAAmB,CAAC,OACf/a,EAAI,EAAGA,EAAI8C,EAAmB3N,OAAQ6K,KACmC,IAA5E+a,EAAiB1jB,QAAQyL,EAAmB9C,GAAGtO,EAAYiT,OAAO,MACpEoW,EAAiBxrB,KAAKuT,EAAmB9C,GAAGtO,EAAYiT,OAAO,KAGnE7B,EAAmBpR,YAAcA,EACjCoR,EAAmBiY,iBAAmBA,EACtCe,EAAYhZ,EAAmBA,EAAmB3N,OAAS,GAAG2N,EAAmBpR,YAAYiT,OAAO,KACpGoX,EAAUT,GAAcxY,EAAmB,GAAGA,EAAmBpR,YAAYiT,OAAO,IAAK,IACzF7S,EAAcgR,GArBE,4CAAlB,wDA4BF,OACE,qBAAKvb,UAAS,UAAKT,GAAQhD,KAAb,kBACZ+D,MAAO,CAAE/C,UADX,SAEE,eAACiD,EAAA,EAAD,CAAMwM,UAAW,EAAGhN,UAAS,UAAKT,GAAQoe,UAAb,YAA0Bpe,GAAQuiB,iBAAlC,YAAsDviB,GAAQwf,gBAA3F,UACE,cAAC7e,EAAA,EAAD,CAAMC,WAAS,EAAf,SAEE,sBAAKH,UAAS,UAAKT,GAAQhD,KAAb,KAAd,UACE,cAACuQ,GAAD,CACEhK,KAAMwH,GAAcA,EAAWsD,OAC/BrO,QAASA,GACThC,OAAQA,EAASsmB,KAGnB,cAAC,GAAD,2BAAe9pB,GAAf,IACEwF,QAASA,GACT+K,WAAYA,EACZuoB,SAAUA,EACVC,OAAQA,EACRC,SAAUA,EACVC,aAAcA,EACdC,eAlIW,SAAA1gB,GAErB,GADgB3W,KAAK8qB,MAAMnU,GACX,EAAG,CACjB,IAAIsjB,EAAiB/X,aAAOgY,aAAQ,IAAIl6B,KAAK2W,GAAW,GAAI,cAC5DgiB,EAAYsB,KA+HJ3C,aA5HS,SAAA3gB,GAEnB,GADgB3W,KAAK8qB,MAAMnU,GACX,EAAG,CACjB,IAAIsjB,EAAiB/X,aAAOgY,aAAQ,IAAIl6B,KAAK2W,GAAW,GAAI,cAC5DiiB,EAAUqB,KAyHF1C,eArHW,SAAA5gB,GACrBkiB,EAAYliB,IAqHF6gB,mBAlHe,SAAA7gB,GACzBmiB,EAAgBniB,OAqHPjI,GAAcA,EAAWsD,OACxB,cAACmU,GAAA,EAAD,UACE,eAAC7hB,EAAA,EAAD,CAAMC,WAAS,EACb0C,QAAS,EACT7C,UAAS,UAAKT,GAAQyiB,mBAFxB,UAIE,cAAC,GAAD,2BAAgBjoB,GAAhB,IACEwF,QAASA,GACTH,WAAYA,EACZ7B,OAAQA,EAASsmB,GVnMI,MUsMvB,cAACjX,GAAA,EAAD,CAAS5M,UAAWT,GAAQoE,UAC5B,cAACzD,EAAA,EAAD,CAAME,MAAI,EAACC,GAAI,GAAf,SAEE,cAAC0hB,GAAA,EAAD,CAAK/hB,UAAS,UAAKT,GAAQ+Q,KAAb,YAAqB/Q,GAAQ0F,WAAagI,GAAI,EAA5D,SAEE,cAACvD,GAAD,CAAcnM,OAAQ,IAAKgC,QAASA,GAApC,SACE,cAAC,KAAD,CACE2d,KAAMmY,GACNxrB,MAAM,MACNksB,KAAMhC,GAAclB,EAAU,GAC9B3pB,GAAI6qB,GAAcjB,EAAQ,GAC1BkD,WAAW,UACXthB,OAAQse,IAAiBtR,GAAc,GAAG4R,cAAc,GArDzD,CAAC,UAAW,UAAW,UAAW,WADpC,CAAC,UAAW,UAAW,UAAW,WAuD/B2C,YAAa,GACbC,iBAAiB,UACjBC,eAAgB,EAChBC,eAAe,UACf14B,OAAQ,CAAEgH,OAAQ,GAAIxH,KAAM,IAC5Bm5B,QAAS,CACP,CACEtvB,OAAQ,eACR4jB,UAAW,MACX2L,WAAY,GACZC,UAAW,EACXC,UAAW,GACXC,WAAY,GACZC,aAAc,GACdC,cAAe,kBAGnBzvB,QAAS,SAAC8tB,EAAKpiB,GACRoiB,EAAI3lB,QACkD,UAAhDjQ,EAAW6P,gBAAgBC,iBACpCX,EAAgB,CACd,MAAQ,EACR,iBAAoB,uBAGtB/D,EAAYqqB,GAAiB,CAACG,IAC9BpiB,EAAM0B,kCAStB,OAlFCjW,GAAc2N,KAuFnBhF,EACE,cAACurB,GAAD,2BACMx4B,GADN,IAEEiN,KAAMA,EACN8H,QAnNa,WACvB8lB,EAAgB,IAChBD,GAAQ,IAkNEp1B,QAASA,GACTizB,aAAcA,KAGd,SClQZ,cAAiB,CACf,CACE,KAAQ,aACR,aAAgB,iBAChB,MAAS,iBACT,YAAe,CACb,MAAS,eACT,KAAQ,cACR,OAAU,CACR,2BACA,oBACA,0BACA,gCAEF,eAAkB,sBAClB,MAAS,MAEX,kBAAqB,iBACrB,cAAiB,CACf,0BACA,gCAEF,aAAgB,SAGpB,wBAA2B,G,UCgDhBoE,GAAuB,CAClC,KAAQ,gBACR,MAAS,iBACT,aAAgB,QAChB,YAAe,8BACf,K,QAAQC,EACR,UAAazT,GACb,cAAiB,CACf,CACE,KAAQ,YACR,aAAgB,iBAChB,GAAM,IACN,MAAS,iBACT,QAAU,EACV,QAAW,CA9Fa,CAC5B,MAAS,0BACT,WAAc,WACd,aAAgB,iBAChB,YAAe,CACb,MAAS,eACT,KAAQ,cACR,OAAU,CACR,cACA,cACA,qBAEF,QAAW,CACT,2BAA4B,0BAC5B,oBAAqB,MAEvB,MAAS,CACP,qBAEF,MAAS,IACT,eAAkB,yvBAClB,MAAS,gBAEX,mBAAsB,iBACtB,UAAa,eACb,aAAgB,QAGG,CACnB,MAAS,gBACT,WAAc,eACd,aAAgB,iBAChB,YACA,CACE,MAAS,eACT,KAAQ,cACR,OAAU,CACR,sBAEF,MAAS,OAEX,mBAAsB,qBACtB,UAAa,YACb,aAAgB,QAGA,CAChB,MAAS,mBACT,WAAc,MACd,aAAgB,iBAChB,YAAe,CACb,MAAS,eACT,KAAQ,cACR,OAAU,CACR,aAEF,MAAS,OAEX,mBAAsB,YACtB,UAAa,cACb,aAAgB,QAGQ,CACxB,MAAS,wBACT,WAAc,wBACd,aAAgB,iBAChB,YAAe,CACb,MAAS,eACT,KAAQ,cACR,OAAU,CACR,0CAEF,MAAS,OAEX,mBAAsB,8BACtB,UAAa,kBACb,aAAgB,WAmBhB,wBAA2B,G,UCjGhB0T,GAAsB,CACjC,KAAQ,mBACR,MAAS,gBACT,aAAgB,YAChB,K,QAAQC,EACR,YAAe,mCACf,UAAa3T,GACb,cAAiB,CACf,CACE,KAAQ,YACR,aAAgB,iBAChB,GAAM,IACN,MAAS,gBACT,QAAU,EACV,MAAS,yBAGb,wBAA2B,GCFrB/kB,GAAkBC,EAAQ,IAA1BD,cAEO,SAAS24B,GAAKj9B,GAAO,MAE8ByE,qBAAWC,KAArEC,EAF4B,EAE5BA,iBAAkBxC,EAFU,EAEVA,cAAeF,EAFL,EAEKA,IAAK2C,EAFV,EAEUA,OAAQ8L,EAFlB,EAEkBA,QAC9CwsB,EAAkBC,cAAlBD,cACFllB,EAAUC,cACRzS,EAAUC,KACV23B,EAAcC,kBAAO,GANO,EAOEhtB,mBAASkX,OAAOqL,WAAa,KAP/B,mBAO3B/lB,EAP2B,KAOfC,EAPe,OAQQuD,oBAAS,GARjB,mBAQ3BX,EAR2B,KAQZmT,EARY,OASFxS,oBAAS,GATP,mBAS3BiD,EAT2B,KASjBC,EATiB,OAUMlD,mBAAS,IAVf,mBAU3BkE,EAV2B,KAUbC,EAVa,OAWcnE,mBAAS6sB,GAXvB,mBAW3B3vB,EAX2B,KAWT+vB,EAXS,OAakEn7B,EAA5FkD,WAAiC8P,GAbP,aAa8B,CAAED,gBAAiB,YAbjD,GAaZA,gBAAmBC,iBACnCooB,EAAyBt5B,OAAOC,KAAKJ,GAAkBiS,QAAQZ,GAC/DqoB,GAA2B/vB,IAAE8Q,OAAO3R,GAA0B,SAAA6wB,GAAa,OAAIA,EAAcC,yBAA2BH,KAC1HI,GAAa,eAAQv5B,GACrBu5B,GAActc,cAAgBkc,EAAyBI,GAActc,aAAauc,8BAA8BF,gCAC3GC,GAActc,aAGvB,IAgEIwc,GAhEEppB,GAAsB,uCAAG,WAAO+D,EAAUC,GAAjB,mBAAAjY,EAAA,6DAEzBs9B,EAFyB,eAEJ37B,EAAckD,YACtB,UAAboT,EACFqlB,EAAc5oB,gBAAgBkD,MAAQI,EAChB,eAAbC,IACTqlB,EAAcC,YAAcj6B,EAAiB0U,GAC7CslB,EAAc5oB,gBAAgBC,iBAAmBqD,EACjDslB,EAAc5oB,gBAAgB8oB,aAAej6B,EAAmByU,IARrC,SAWI7Y,MAAM,oBAAqB,CAC1Dc,OAAQ,OACRL,QAAS,CACPM,OAAQ,mBACR,eAAgB,oBAElBM,KAAMC,KAAKC,UAAU48B,KAjBM,cAWvBG,EAXuB,gBAoBMA,EAAmBl+B,OApBzB,OAoBzBm+B,EApByB,OAqB7Bv5B,EAAiBu5B,EAAuBr9B,SArBX,2CAAH,wDAyBtB4P,GAAW,uCAAG,WAAO0tB,GAAP,+BAAA39B,EAAA,6DAAa49B,EAAb,+BAAoB,GAApB,SAGQz8B,EAAWQ,EAAcJ,eAAeH,YAHhD,cAGdy8B,EAHc,QAIAp8B,KAChB2C,EAAOy5B,EAAcp8B,KAEnBo8B,EAAcl8B,eAChBwC,EAAiB05B,EAAcl8B,eAE7Bm8B,EAAMH,EAAI,WAAJ,cAAQC,IAVA,kBAWXE,GAXW,2CAAH,sDAejB3tB,qBAAU,WAER,IAAIiW,EAAkBzkB,EAAcb,cAAc8X,UAAU,EAAGjX,EAAcb,cAAculB,YAAY,MACvGV,iBAAeW,KAAKF,EAAiB,SAErCW,OAAOO,iBAAiB,UAAU,WAChChb,EAAcya,OAAOqL,WAAa,UAGnC,IAEHjiB,qBAAU,WACJysB,EAAYmB,UAETnB,EAAYmB,SAAU,MAI/B5tB,qBAAU,WACJjB,GAAemT,GAAkBnT,GACjC4D,GAAUC,GAAaD,GAC3BgqB,EAAoBJ,KACnB,CAACA,IAGJ,IAAMsB,GAA6B/wB,IAAE2Q,KAAKof,IAA0B,SAACiB,GACnE,OAAOlxB,IAAqBjJ,GAAcmJ,IAAEuB,UAAUyvB,EAAExvB,WAK1D,OAHKuvB,GACAX,GAAsBW,GAA2Bx3B,UADrBgR,EAAQ/J,KAAK3J,GAAcmJ,IAAEuB,UAAUwuB,GAAyB,GAAGvuB,SAIlG,qBAAKhJ,UAAWT,EAAQhD,KAAxB,SAEE,cAACkC,EAAA,EAAWg6B,SAAZ,CAAqBppB,MAAO,CAC1BnT,gBAAewC,mBACf4P,eAAcC,kBACdC,0BACA5H,aAAYC,gBACZS,mBACAmC,gBAAemT,mBACfvP,WAAUC,cACVtR,MACAwO,eACAlO,MAAOiF,GACPkJ,WAXF,SAaE,eAACqR,EAAA,EAAD,CAAexf,MAAOiF,GAAtB,UACE,cAACm3B,EAAA,EAAD,IACA,cAAC,GAAD,CACEn1B,QAASm0B,GACTp7B,MAAOiF,GACPhC,QAASA,IAEX,cAAC,GAAD,CAAsBgE,QAAS,CAAE1F,mBAAkBK,uBAAuBqB,QAASA,IACnF,cAACmH,GAAD,CAAYC,yBAA0B4wB,KACtC,uBACEv3B,UAAWgc,aAAKzc,EAAQgE,QAAT,eACZhE,EAAQiE,aAAeoD,IAF5B,UAME,qBAAK5G,UAAWT,EAAQ4D,eACvBy0B,GAAsB,cAACA,GAAD,CAAqBjW,cAAe4W,KAAiC,MAG9F,cAAC,GAAD,CAAWh5B,QAASA,W,aCxDfo5B,OA9Ef,SAAa5+B,GAAO,MAGwBqQ,mBAAS,IAHjC,mBAGXlO,EAHW,KAGIwC,EAHJ,OAII0L,qBAJJ,mBAIXpO,EAJW,KAIN2C,EAJM,OAKoByL,qBALpB,mBAKXvL,EALW,KAKEC,EALF,OAMYsL,oBAAS,GANrB,mBAMXK,EANW,KAMFmuB,EANE,KAyClB,OAhCAluB,qBAAU,WAAM,4CACd,kCAAAnQ,EAAA,sEAEgCD,IAFhC,QAEQI,EAFR,QAGsBE,UAEZS,EAAgBX,EAAgBW,cAAgBX,EAAgBW,mBAAgBgP,EAChFrR,EAAc0B,EAAgBoB,eAAiBpB,EAAgBoB,eAAeC,oBAAiBsO,EAEjGhP,GAAiBrC,IACbgD,EAAMZ,EAAgB,CAAEpC,cAAaqC,kBAC3CsD,EAAO3C,IAGT0C,EAAiBhE,EAAgBE,UAbrC,4CADc,uBAAC,WAAD,wBAiBdi+B,KACC,IAEHnuB,qBAAU,WACR,GAAIxO,GAAiBF,EAAK48B,GAAW,QAChC,GAAI18B,EAAcgD,YAAa,CAClC,IAAM7D,EAAgBa,EAAcb,cAAgBa,EAAcb,cAAgB,GAC5ErC,EAAckD,EAAcJ,eAAiBI,EAAcJ,eAAeC,eAAiB,GAC3FC,EAAMZ,EAAgB,CAAEpC,cAAaqC,kBAC3CsD,EAAO3C,MAER,CAACE,EAAeF,IAEnByjB,QAAQC,IAAI,CAAExjB,kBAGZ,cAAE,IAAF,UACE,cAACuC,EAAA,EAAWg6B,SAAZ,CAAqBppB,MAAO,CAC1BnT,gBAAewC,mBACf1C,MAAK2C,SACLE,cAAaC,iBACb2L,WAJF,SAME,eAAC,IAAD,WACE,cAAC,GAAD,CACEquB,KAAK,6BAELC,aAAY78B,EAAcgD,YAC1B6B,UAAWi2B,GACXl4B,eAAgBA,EAChBD,YAAaA,IAGf,cAAC,GAAD,CACEi6B,KAAK,IACLE,OAAK,EACLD,aAAY78B,EAAcgD,YAC1B6B,UAAWxC,EACXM,YAAaA,IAGf,cAAC,IAAD,CAAOo6B,OAAQ,kBAAM,cAAC,IAAD,CAAU/vB,GAAG,iBAatCgwB,GAAe,SAAC,GAIL,IAHJC,EAGG,EAHdp4B,UACAg4B,EAEc,EAFdA,WACAj6B,EACc,EADdA,eACGs6B,EAAW,2DAKd,OAHKL,EACAj6B,IADYA,EAAewiB,OAAOxJ,SAASuhB,MAK9C,cAAC,IAAD,yBAAOL,OAAK,GACNI,GADN,IACYH,OAAQ,SAACl/B,GAAD,OACfg/B,EACC,cAACI,EAAD,eAAep/B,IACb,cAAC,IAAD,CACAmP,GAAG,WAOTowB,GAAc,SAAC,GAIJ,IAJiBH,EAIlB,EAJOp4B,UACrBg4B,EAGc,EAHdA,WAEAl6B,EACc,EADdA,YACGu6B,EAAW,wDAERG,EAAmB,GACzBv7B,OAAOC,KAAK0I,GAA0BkB,KAAI,SAAAmH,GACxCuqB,EAAiBl7B,yBAAcmJ,IAAEuB,UAAUpC,EAAyBqI,GAAKhG,SACvE3K,yBAAcmJ,IAAEgyB,UAAU7yB,EAAyBqI,GAAKhD,UAG5D,IAAIytB,EAAW,kBACf,GAAI56B,EAAa,CACf,IAAI66B,EAAiB76B,EAAY00B,MAAM,KACnCoG,EAAiBD,EAAehO,OAAO,GACvCkO,EAAiBF,EAAehO,OAAO,GAEvC6N,EAAiBzxB,eAAe8xB,KAAiBH,EAAWE,EAAe5f,KAAK,MAGtF,OAGE,aAFA,CAEC,IAAD,yBAAOif,OAAK,GACNI,GADN,IACYH,OAAQ,SAACl/B,GAAD,OACfg/B,EACC,cAAC,IAAD,CACE7vB,GAAIuwB,IAEJ,cAACN,EAAD,eAAep/B,SCtIPsZ,QACW,cAA7BiO,OAAOxJ,SAAS+hB,UAEe,UAA7BvY,OAAOxJ,SAAS+hB,UAEhBvY,OAAOxJ,SAAS+hB,SAASC,MACvB,2DCZNC,IAASd,OAAO,cAAC,GAAD,IAASjZ,SAASK,eAAe,SD6H3C,kBAAmB2Z,WACrBA,UAAUC,cAAcC,MAAMrvB,MAAK,SAAAsvB,GACjCA,EAAaC,iB,kXEjIJ37B,E,OAFIgQ,EAAM4rB,cAAc,MCE1BC,EAAS,SAAC1sB,GAIrB,IAHA,IAAI2sB,EAAS,GACTC,EAAa,iEACbC,EAAmBD,EAAW5sB,OACzB6K,EAAI,EAAGA,EAAI7K,EAAQ6K,IAC1B8hB,GAAUC,EAAWvnB,OAAOrT,KAAKC,MAAMD,KAAKE,SAAW26B,IAEzD,OAAOF,GAIIl8B,EAAgB,SAACq8B,GAI5B,OAAOA,EAAIhd,QAAQ,mBAAoB,KAG5B6J,EAAiB,SAACmT,GAC7B,IAAIjiB,EAAGkiB,EAAQD,EAAInH,MAAM,KACzB,IAAK9a,EAAI,EAAGA,EAAIkiB,EAAM/sB,OAAQ6K,IAC5BkiB,EAAMliB,GAAKkiB,EAAMliB,GAAGxF,OAAO,GAAGC,cAAgBynB,EAAMliB,GAAGiT,MAAM,GAE/D,OAAOiP,EAAM5gB,KAAK,MAGP6gB,EAAa,SAACvuB,GAIzB,IAHA,IAAIwuB,EACAC,EAAS,GACTC,EAAS1uB,EAAIqf,MAAMrf,EAAIyD,QAAQ,KAAO,GAAGyjB,MAAM,KAC1C9a,EAAI,EAAGA,EAAIsiB,EAAOntB,OAAQ6K,IAEjCqiB,GADAD,EAAOE,EAAOtiB,GAAG8a,MAAM,MACX,IAAMsH,EAAK,GAIzB,OAAOC,GAEI9wB,EAAa,SAAC8V,GACzB,IAAIkb,EAAMhb,SAASib,cAAc,YAEjC,OADAD,EAAIE,UAAYpb,EACTkb,EAAI3rB,OAGA7F,EAAgB,CAC3B,KAAQ2xB,IACR,OAAUC,GAGC1pB,EAAkB,SAAC2pB,EAAQC,GACtC,IAAIC,EAASv9B,OAAOC,KAAKq9B,GAAQhjB,QAAO,SAAUtJ,GAChD,OAAQssB,EAAOtsB,GAAKqsB,EAAOrsB,OAC1BnH,KAAI,SAAUmH,GACf,OAAO,IAAIwsB,MAAMxsB,EAAM,mBAGrBusB,EAAO3tB,OAAS,EAClB2tB,EAAOE,SAAQ,SAAUx8B,GACvBwgB,QAAQC,IAAIzgB,EAAM4S,YAGpB4N,QAAQC,IAAI,mB,sDCjEhB,WAEMjhB,EAFN,OAEmBgQ,EAAM4rB,cAAc,MAExB57B,O,+OCJfi9B,EAAOC,QAAU,CACfrB,OAAQ,SAAC1sB,GAIP,IAHA,IAAI2sB,EAAS,GACTC,EAAa,iEACbC,EAAmBD,EAAW5sB,OACzB6K,EAAI,EAAGA,EAAI7K,EAAQ6K,IAC1B8hB,GAAUC,EAAWvnB,OAAOrT,KAAKC,MAAMD,KAAKE,SAAW26B,IAEzD,OAAOF,GAITl8B,cAAe,SAACq8B,GAId,OAAOA,EAAIhd,QAAQ,mBAAoB,KAGzC6J,eAAgB,SAACmT,GACf,IAAIjiB,EAAGkiB,EAAQD,EAAInH,MAAM,KACzB,IAAK9a,EAAI,EAAGA,EAAIkiB,EAAM/sB,OAAQ6K,IAC5BkiB,EAAMliB,GAAKkiB,EAAMliB,GAAGxF,OAAO,GAAGC,cAAgBynB,EAAMliB,GAAGiT,MAAM,GAE/D,OAAOiP,EAAM5gB,KAAK,MAGpB6gB,WAAY,SAACvuB,GAIX,IAHA,IAAIwuB,EACAC,EAAS,GACTC,EAAS1uB,EAAIqf,MAAMrf,EAAIyD,QAAQ,KAAO,GAAGyjB,MAAM,KAC1C9a,EAAI,EAAGA,EAAIsiB,EAAOntB,OAAQ6K,IAEjCqiB,GADAD,EAAOE,EAAOtiB,GAAG8a,MAAM,MACX,IAAMsH,EAAK,GAIzB,OAAOC,GAET9wB,WAAY,SAAC8V,GACX,IAAIkb,EAAMhb,SAASib,cAAc,YAEjC,OADAD,EAAIE,UAAYpb,EACTkb,EAAI3rB,S,6FC1Cf,OAAe,cAA0B,uC,oBCAzC,IAAIxH,EAAM,CACT,oBAAqB,IACrB,oBAAqB,IACrB,oBAAqB,IACrB,oBAAqB,KAItB,SAAS+zB,EAAeC,GACvB,IAAItyB,EAAKuyB,EAAsBD,GAC/B,OAAOE,EAAoBxyB,GAE5B,SAASuyB,EAAsBD,GAC9B,IAAIE,EAAoBvD,EAAE3wB,EAAKg0B,GAAM,CACpC,IAAI9Y,EAAI,IAAIyY,MAAM,uBAAyBK,EAAM,KAEjD,MADA9Y,EAAE/U,KAAO,mBACH+U,EAEP,OAAOlb,EAAIg0B,GAEZD,EAAe39B,KAAO,WACrB,OAAOD,OAAOC,KAAK4J,IAEpB+zB,EAAeI,QAAUF,EACzBJ,EAAOC,QAAUC,EACjBA,EAAeryB,GAAK,K,iCCzBpB,OAAe,cAA0B,yC,iCCAzC,OAAe,cAA0B,yC,iCCAzC,OAAe,cAA0B,yC,iCCAzC,OAAe,cAA0B,0C","file":"static/js/main.af794137.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.c18adbdf.svg\";","import { AuthToken, AuthSession, BrowserTransport } from \"@looker/sdk\";\n\nexport class PblSession extends AuthSession {\n  fetchToken() {\n    return fetch(\"\");\n  }\n  activeToken = new AuthToken();\n  constructor(settings, transport) {\n    super(settings, transport || new BrowserTransport(settings));\n  }\n  isAuthenticated() {\n    const token = this.activeToken;\n    if (!(token && token.access_token)) return false;\n    return token.isActive();\n  }\n  async getToken() {\n    if (!this.isAuthenticated()) {\n      const token = await this.fetchToken();\n      this.activeToken.setToken(await token.json());\n    }\n    return this.activeToken;\n  }\n  async authenticate(props) {\n    const token = await this.getToken();\n    if (token && token.access_token) {\n      props.mode = \"cors\";\n      delete props.credentials;\n      props.headers = {\n        ...props.headers,\n        Authorization: `Bearer ${this.activeToken.access_token}`\n      };\n    }\n    return props;\n  }\n}\n\nexport class PblSessionEmbed extends PblSession {\n\n  accessToken;\n\n  constructor(options) {\n    super(options);\n    this.accessToken = options.accessToken;\n  }\n\n  fetchToken() {\n    return this.accessToken;\n  }\n\n  async getToken() {\n    if (!this.isAuthenticated()) {\n      this.activeToken.setToken(this.fetchToken());\n    }\n    return this.activeToken;\n  }\n}","import { Looker40SDK, DefaultSettings } from \"@looker/sdk\";\nimport { PblSessionEmbed } from '../LookerHelpers/pblsession'\n\nexport const checkForExistingSession = async () => {\n  // console.log('checkForExistingSession')\n  let sessionResponse = await fetch('/readsession', {\n    method: 'GET',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json'\n    }\n  })\n  const sessionResponseData = await sessionResponse.json();\n  return { session: sessionResponseData.session };\n}\n\nexport const writeNewSession = async (newSession) => {\n  // console.log('writeNewSession')\n  let newSessionResponse = await fetch('/writesession', {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ ...newSession })\n  })\n  const newSessionResponseData = await newSessionResponse.json();\n  return { session: newSessionResponseData.session };\n}\n\nexport const endSession = async () => {\n  // console.log('endSession')\n  let endSessionResponse = await fetch('/endsession', {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json'\n    }\n  })\n  const endSessionResponseData = await endSessionResponse.json();\n  return { message: endSessionResponse };\n}\n\nexport const createSdkHelper = ({ accessToken, lookerBaseUrl }) => {\n  // console.log('createSdkHelper')\n  // console.log({ accessToken })\n  // console.log({ lookerBaseUrl })\n\n  if (accessToken && lookerBaseUrl) { //added 11/22\n    const pblsession = new PblSessionEmbed({\n      ...DefaultSettings(),\n      base_url: lookerBaseUrl,\n      accessToken\n    });\n\n    let sdk = new Looker40SDK(pblsession);\n    return sdk;\n  }\n\n}\n\nexport const checkToken = async (expires_in) => {\n  // console.log('checkToken2');\n  // console.log({ expires_in });\n  // console.log('Date.now()', Date.now());\n  // let dateeee = new Date(expires_in);\n  // console.log({ dateeee })\n\n  if ((Date.now()) > expires_in) {\n    // console.log('inside iff')\n    let sessionResponse = await fetch('/refreshlookertoken', {\n      method: 'GET',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      }\n    })\n    const sessionResponseData = await sessionResponse.json();\n    const lookerBaseUrl = sessionResponseData.session.lookerBaseUrl ? sessionResponseData.session.lookerBaseUrl : '';\n    const accessToken = sessionResponseData.session.lookerApiToken ? sessionResponseData.session.lookerApiToken.api_user_token : '';\n    const sdk = createSdkHelper({ accessToken, lookerBaseUrl })\n\n    return { status: \"updated\", sdk, clientSession: sessionResponseData.session }\n\n  } else {\n    // console.log(\"inside ellse\")\n    return { status: \"ok\" }\n  }\n}\n\n","import { makeStyles } from '@material-ui/core/styles';\nimport { grey, orange } from '@material-ui/core/colors';\nconst lightGrey = grey[200];\n\n\nexport default makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    backgroundColor: theme.palette.background.paper,\n  },\n  root: {\n    display: 'flex',\n    backgroundColor: 'rgb(229, 229, 229)'\n  },\n  flexCentered: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  card: {\n    minWidth: 350,\n    minHeight: 500,\n    left: '75%',\n    top: '50%',\n    transform: `translate(-75%, -50%)`,\n    position: 'absolute',\n    textAlign: 'center',\n    backgroundColor: lightGrey\n  },\n  h100: {\n    height: '100%'\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  },\n  actions: {\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  cardCopy: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: `translate(-50%, -50%)`,\n    margin: '0',\n    width: '80%',\n  }\n}));\n","export const SignInContent = {\n  \"cardHeader\": \"Welcome\",\n  \"cardBody\": \"Please sign in to access your merchant portal\"\n}","export const permissionLevels = {\n  \"basic\": [\n    \"access_data\",\n    \"see_looks\",\n    \"see_user_dashboards\",\n    \"see_lookml_dashboards\",\n    \"download_with_limit\"\n  ],\n  \"advanced\": [\n    \"access_data\",\n    \"see_looks\",\n    \"see_user_dashboards\",\n    \"see_lookml_dashboards\",\n    \"download_with_limit\",\n    \"schedule_look_emails\",\n    \"schedule_external_look_emails\",\n    \"create_alerts\",\n    \"see_drill_overlay\"\n  ],\n  \"premium\": [\n    \"access_data\",\n    \"see_looks\",\n    \"see_user_dashboards\",\n    \"see_lookml_dashboards\",\n    \"download_with_limit\",\n    \"schedule_look_emails\",\n    \"schedule_external_look_emails\",\n    \"create_alerts\",\n    \"see_drill_overlay\",\n    \"save_content\",\n    \"embed_browse_spaces\",\n    \"schedule_look_emails\",\n    \"send_to_sftp\",\n    \"send_to_s3\",\n    \"send_outgoing_webhook\",\n    \"send_to_integration\",\n    \"download_without_limit\",\n    \"explore\",\n    \"see_sql\"\n  ]\n}\n\nexport const userTimeHorizonMap = {\n  \"basic\": \"last 182 days\",\n  \"advanced\": \"last 365 days\",\n  \"premium\": \"last 730 days\"\n}\n\nexport const initialUser = {\n  \"external_user_id\": \"\",\n  \"first_name\": \"\",\n  \"last_name\": \"\",\n  \"session_length\": 86400,\n  \"force_logout_login\": true,\n  \"external_group_id\": \"\",\n  \"group_ids\": [\n    4\n  ],\n  \"permissions\":\n    permissionLevels[Object.keys(permissionLevels)[0]],\n  \"models\": [\n    \"atom_fashion\"\n  ],\n  \"user_attributes\": {\n    \"locale\": \"en_US\",\n    \"country\": \"USA\",\n    \"brand\": \"Calvin Klein\",\n    \"time_horizon\": \"last 182 days\",\n    \"permission_level\": Object.keys(permissionLevels)[0]\n  }\n}\n\nexport const modalPermissionsMap = {\n  'basic': {\n    \"title\": \"Drive your business with clear KPIs\",\n    \"list\": [\n      '6 months of order data history',\n      'Atom Merchant Dashboards',\n      'Download PDFs, CSVs'\n    ]\n  },\n  'advanced': {\n    \"title\": \"Deeper insights, operations\",\n    \"list\": [\n      'Full year of order data history',\n      'Drill to row level information',\n      'Download row level information',\n      'Schedule dashboards for delivery (to you or others)',\n      'Set alerts and key threshold notifications'\n    ]\n  },\n  'premium': {\n    \"title\": \"Drive your business with Atom\",\n    \"list\": [\n      '2 Full years of order data history',\n      'Analyze your own data and save custom reports',\n      'View premium level, productivity enhancing reports',\n      'Share your reports with colleagues in Atom',\n      'Text message alerts',\n      // 'Notify active shoppers on Atom',\n      // 'Apply Atom’s advanced AI insights to stay ahead of trends'\n    ]\n  }\n}\n\nexport const rowLevelAttribute = {\n  \"autoCompleteLabel\": \"Change brand\",\n  \"menuItemLabel\": \"Current brand\",\n  \"options\": [\n    {\n      \"label\": \"Columbia\"\n    },\n    {\n      \"label\": \"Calvin Klein\"\n    },\n    {\n      \"label\": \"Carhartt\"\n    },\n    {\n      \"label\": \"Levi's\"\n    },\n    {\n      \"label\": \"Dockers\"\n    }\n  ]\n}","\nimport { permissionLevels, rowLevelAttribute } from \"./UserPermissionsContent\";\nexport const TopBarContent = {\n  \"usermenu\": { permissionLevels, rowLevelAttribute }\n}","import _ from 'lodash'\nimport React, { useContext, useEffect } from 'react';\nimport { GoogleLogin } from 'react-google-login';\nimport AppContext from '../../contexts/AppContext';\nimport useStyles from './styles.js';\nimport '../Home.css';\nimport { Grid, Card, CardActions, CardContent, Typography } from '@material-ui/core'\nimport { SignInContent } from '../../config'\nimport { writeNewSession, createSdkHelper } from '@pbl-demo/components/Utils/auth';\nimport { initialUser } from '../../config';\n\nconst { validIdHelper } = require('../../tools');\n\nexport default function SignIn(props) {\n  // console.log('SignIn');\n  // console.log('props', props)\n\n  let { clientSession, setClientSession, sdk, setSdk, initialHref, setInitialHref } = useContext(AppContext);\n  const { packageName } = clientSession;\n\n  const responseGoogle = async (response) => {\n    if (response.error) {\n    } else {\n      let newSession = await writeNewSession({ ...clientSession, userProfile: response.profileObj, lookerUser: initialUser }) //\n\n      const lookerBaseUrl = newSession.session.lookerBaseUrl ? newSession.session.lookerBaseUrl : '';\n      const accessToken = newSession.session.lookerApiToken ? newSession.session.lookerApiToken.api_user_token : '';\n      const sdk = createSdkHelper({ lookerBaseUrl, accessToken })\n\n      setClientSession(newSession.session);\n      setSdk(sdk)\n    }\n  }\n  const googleClientId = `${process.env.REACT_APP_GOOGLE_CLIENT_ID}.apps.googleusercontent.com`;\n\n  const classes = useStyles();\n  const logoImage = packageName ? require(`../../images/logo_text.svg`).default : \"\";\n\n  const backgroundImageInt = Math.floor(Math.random() * 4) + 1;\n  const backgroundImage = packageName ? require(`../../images/background${backgroundImageInt}.jpg`).default : \"\";\n\n\n  return (\n    <div className={`${classes.root} demoComponent ${classes.h100}`}>\n      <Grid container\n        key={validIdHelper('sign in page')}\n        className={`${classes.h100}`}>\n        <Grid item sm={12} className={'sign-in-background-img'}\n          style={{\n            backgroundImage: `url(${backgroundImage})`,\n            backgroundSize: 'cover'\n          }}\n        >\n          <Card className={classes.card}>\n            <div className={classes.cardCopy}>\n              <img\n                src={logoImage}\n              />\n              <CardContent >\n                <Typography variant=\"h5\" component=\"h2\">\n                  {SignInContent.cardHeader}\n                </Typography>\n                <Typography variant=\"body2\" component=\"p\">\n                  {SignInContent.cardBody}\n                </Typography>\n              </CardContent>\n              <CardActions className={`${classes.actions}`} >\n                <GoogleLogin\n                  clientId={googleClientId}\n                  buttonText=\"Login\"\n                  onSuccess={responseGoogle}\n                  onFailure={responseGoogle}\n                  cookiePolicy={'single_host_origin'}\n                />\n              </CardActions>\n            </div>\n          </Card>\n        </Grid>\n      </Grid>\n    </div >\n  )\n}","import { createMuiTheme } from '@material-ui/core/styles'\nimport { grey } from '@material-ui/core/colors';\n\nexport const packageNameTheme = createMuiTheme({\n  palette: {\n    primary: {\n      main: grey[900],\n    },\n    secondary: {\n      main: grey[400],\n    },\n    fill: {\n      main: \"#343D4E\"\n    },\n  },\n})","import { packageNameTheme } from '../../config/theme.js'\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst drawerWidth = 240;\nexport const useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    backgroundColor: 'rgb(229, 229, 229)'\n  },\n  appBar: {\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    zIndex: 1201,\n    backgroundColor: packageNameTheme.palette.fill.main\n  },\n  appBarShift: {\n    width: `calc(100% - ${drawerWidth}px)`,\n    marginLeft: drawerWidth,\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  hide: {\n    display: 'none',\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n    borderRight: 'none',\n    backgroundColor: 'transparent'\n  },\n  drawerPaper: {\n    width: drawerWidth,\n    borderRight: 'none',\n    backgroundColor: 'transparent'\n  },\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n    // backgroundColor: '#343D4E',\n    // color: '#ffff'\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    marginLeft: -drawerWidth,\n  },\n  contentShift: {\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n    marginLeft: 0,\n  },\n  title: {\n    flexGrow: 1,\n  },\n  tabs: {\n    borderRight: `1px solid ${theme.palette.divider}`,\n  },\n  dNone: {\n    display: 'none'\n  },\n  dBlock: {\n    display: 'block'\n  },\n  relative: {\n    position: 'relative'\n  },\n  absolute: {\n    position: 'absolute'\n  },\n  right0: {\n    right: 0\n  },\n  top0: {\n    top: 0\n  },\n  right24: {\n    right: 24\n  },\n  top24: {\n    top: 24\n  },\n  ml12: {\n    marginLeft: 12\n  },\n  mr12: {\n    marginRight: 12\n  },\n  mt12: {\n    marginTop: 12\n  },\n  highlightLegend: {\n    position: 'fixed',\n    bottom: theme.spacing(2),\n    left: theme.spacing(2),\n    zIndex: 1200\n  },\n  tree: {\n    height: 240,\n    flexGrow: 1,\n    maxWidth: 400\n  },\n  parentHoverVisibility: {\n    '&:hover $childHoverVisibility': {\n      visibility: 'visible'\n    }\n\n  },\n  childHoverVisibility: {\n    visibility: 'hidden'\n  },\n  fontSize1em: {\n    fontSize: '1em'\n  },\n  padding10: {\n    padding: 10\n  },\n  mt5: {\n    marginTop: 5\n  },\n  mb5: {\n    marginBottom: 5\n  },\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n  list: {\n    width: '100%',\n    maxWidth: 360,\n    backgroundColor: 'transparent'\n    // theme.palette.background.paper,\n  },\n  nested: {\n    paddingLeft: theme.spacing(4),\n  },\n  mlAuto: {\n    marginLeft: 'auto'\n  },\n  mrAuto: {\n    marginRight: 'auto'\n  },\n  appBarBottom: {\n    top: 'auto',\n    bottom: 0,\n    // backgroundColor: 'transparent'\n  },\n  hidden: {\n    visibility: 'hidden'\n  },\n  roundedTab: {\n    borderRadius: '0 100px 100px 0'\n  },\n  paddingBottom30: {\n    paddingBottom: 30\n  },\n  mtAuto: {\n    marginTop: 'auto'\n  },\n  mb10: {\n    marginBottom: 10\n  },\n  modalPopover: {\n    position: 'absolute',\n    width: 1000,\n    height: 604,\n    overflow: 'scroll',\n    backgroundColor: theme.palette.background.paper,\n    padding: theme.spacing(2, 4, 3),\n  },\n  modalCard: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'space-between',\n    overflow: 'scroll',\n    cursor: 'pointer',\n    '&:hover': {\n      transform: 'scale(1.05)',\n      transition: 'transform .2s'\n    }\n  },\n}), { index: 1 });\n\n\n","import _ from 'lodash'\nimport React, { useContext } from 'react';\nimport { Link } from \"react-router-dom\";\nimport AppContext from '../../contexts/AppContext';\nimport { Drawer, IconButton, List, ListItem, ListItemIcon, ListItemText } from '@material-ui/core/';\nimport { ChevronLeft } from '@material-ui/icons';\nimport { useStyles } from './styles.js';\n\nconst { validIdHelper } = require('../../tools');\n\nexport default function LeftDrawer({ DemoComponentsContentArr }) {\n  // console.log('LeftDrawer');\n\n  const classes = useStyles();\n  const { drawerOpen, setDrawerOpen, } = useContext(AppContext);\n\n  return (\n    <Drawer\n      className={classes.drawer}\n      variant=\"persistent\"\n      anchor=\"left\"\n      open={drawerOpen}\n      classes={{\n        paper: classes.drawerPaper,\n      }}\n    >\n      <div className={classes.drawerHeader}>\n        <IconButton\n          onClick={() => setDrawerOpen(false)}>\n          <ChevronLeft\n            aria-label=\"close drawer\"\n          />\n        </IconButton>\n      </div>\n\n      <MenuList\n        classes={classes}\n        DemoComponentsContentArr={DemoComponentsContentArr} />\n\n    </Drawer>\n  )\n}\n\nfunction MenuList({ classes, DemoComponentsContentArr }) {\n  // console.log(\"MenuList\")\n  const { clientSession, selectedMenuItem } = useContext(AppContext);\n  const { packageName } = clientSession;\n\n  let orderedDemoComponentsForMenu = packageName ? _.orderBy(DemoComponentsContentArr, ['menuCategory'], ['asc']) : [];\n  let orderedDemoComponentsForMenuObj = {};\n  let expandedTreeItemsArr = [];\n  let cumulativePusher = 0;\n  orderedDemoComponentsForMenu.map((item, index) => {\n    if (orderedDemoComponentsForMenuObj.hasOwnProperty(item.menuCategory)) {\n      orderedDemoComponentsForMenuObj[item.menuCategory] = [...orderedDemoComponentsForMenuObj[item.menuCategory], item]\n    } else {\n      orderedDemoComponentsForMenuObj[item.menuCategory] = [item];\n      cumulativePusher += 1;\n      expandedTreeItemsArr.push(\"\" + (index + cumulativePusher));\n    }\n  });\n\n  return (<List\n    component=\"nav\"\n    aria-labelledby=\"nested-list-subheader\"\n    className={classes.list}\n  >\n    {packageName ? Object.keys(orderedDemoComponentsForMenuObj).map((outerItem, outerIndex) => {\n      return (\n        < React.Fragment\n          key={`${validIdHelper(outerItem + '-menuList-' + outerIndex)}`}>\n          <ListItem\n            key={`${validIdHelper(outerItem + '-outerListItem-' + outerIndex)}`}\n          >\n            <ListItemText primary={outerItem === 'home' ? '' : _.capitalize(outerItem)} />\n          </ListItem>\n          < List component=\"div\" disablePadding\n            key={`${validIdHelper(outerItem + '-innerList-' + outerIndex)}`}>\n            {orderedDemoComponentsForMenuObj[outerItem].map((item, innerIndex) => {\n              const MatchingIconComponent = item.icon\n              return (\n                <ListItem\n                  button\n                  className={`${classes.nested} ${classes.roundedTab}`}\n                  key={`${validIdHelper(outerItem + '-innerListItem-' + innerIndex)}`}\n                  selected={validIdHelper(_.lowerCase(item.label)) === selectedMenuItem}\n                  component={Link}\n                  to={validIdHelper(_.lowerCase(item.label))}\n                >\n                  <ListItemIcon>\n                    {MatchingIconComponent ? <MatchingIconComponent /> : <></>}\n                  </ListItemIcon>\n                  <ListItemText primary={_.capitalize(item.label)} />\n                </ListItem>\n              )\n            })}\n          </List>\n        </React.Fragment>\n      )\n    }) : ''\n    }\n  </List >\n  )\n}\n","import React, { useContext } from 'react';\nimport { Chip } from '@material-ui/core';\nimport { appContextMap } from '../../utils/tools';\n\n// maybe move this to config?\nexport const API_COLOR = '#A142F4'\nexport const API_BACKGROUND_COLOR = 'rgba(161, 66, 244, 0.1)'\nexport const EMBED_COLOR = '#12B5CB'\nexport const EMBED_BACKGROUND_COLOR = 'rgba(18, 181, 203, 0.1)'\nexport const EMBED_METHOD_COLOR = '#297AF4'\nexport const EMBED_METHOD_BACKGROUND_COLOR = 'rgba(41, 122, 244, 0.1)'\n\nfunction Highlight({ children, color, height, width, margin, id, backgroundColor, ...props }) {\n  const { highlightShow } = useContext(appContextMap[process.env.REACT_APP_PACKAGE_NAME]);\n  var style = {};\n  if (highlightShow) {\n    style = {\n      ...style,\n      border: `3px solid ${color}`,\n      backgroundColor: `${backgroundColor}`,\n      borderRadius: `4px`,\n      position: 'relative',\n    }\n  } else {\n    style = {\n      border: `3px solid transparent`,\n      backgroundColor: `transparent`,\n    }\n  }\n\n  if (height) { style['height'] = height }\n  if (width) { style['width'] = width }\n  if (margin) { style['margin'] = margin }\n\n\n  return (\n    <div id={id} style={style}\n    // {...props}\n    >\n      {children}\n    </div>\n  );\n}\n\nexport function ApiHighlight({ ...props }) {\n  const { highlightShow } = useContext(appContextMap[process.env.REACT_APP_PACKAGE_NAME]); //useContext(AppContext)\n  const { classes } = props\n  const { children } = props\n\n  return <Highlight {...props} color={API_COLOR} backgroundColor={API_BACKGROUND_COLOR}>\n\n    <Chip size=\"small\"\n      label={\"API\"}\n      className={highlightShow ? 'test' : `${classes.hidden}`}\n      display=\"inline\"\n      align=\"right\"\n      style={{ backgroundColor: \"#A142F4\", color: '#fff', top: '-10px', right: '10px', position: 'absolute' }}\n    />\n    {children}\n\n  </Highlight>\n}\n\nexport function EmbedHighlight({ ...props }) {\n  const { highlightShow } = useContext(appContextMap[process.env.REACT_APP_PACKAGE_NAME]); //useContext(AppContext)\n\n  const { classes } = props\n  const { children } = props\n\n  return <Highlight {...props} color={EMBED_COLOR} backgroundColor={EMBED_BACKGROUND_COLOR}>\n\n    <Chip size=\"small\"\n      label={\"Embed\"}\n      className={highlightShow ? 'test' : `${classes.hidden}`}\n      display=\"inline\"\n      align=\"right\"\n      style={{\n        backgroundColor: \"#12B5CB\",\n        color: '#fff',\n        top: '-10px',\n        right: '10px',\n        position: 'absolute',\n      }}\n    />\n    {children}\n\n  </Highlight>\n}\n\nexport function EmbedMethodHighlight({ ...props }) {\n  const { highlightShow } = useContext(appContextMap[process.env.REACT_APP_PACKAGE_NAME]); //useContext(AppContext)\n  const { classes } = props\n  const { children } = props\n\n  return <Highlight {...props} color={EMBED_METHOD_COLOR} backgroundColor={EMBED_METHOD_BACKGROUND_COLOR}>\n\n    <Chip size=\"small\"\n      label={\"Embed Method\"}\n      className={highlightShow ? 'test' : `${classes.hidden}`}\n      display=\"inline\"\n      align=\"right\"\n      style={{\n        backgroundColor: \"#297AF4\",\n        color: '#fff',\n        top: '-10px',\n        right: '10px',\n        position: 'absolute'\n      }}\n    />\n    {children}\n\n  </Highlight>\n}\n","import React, { useState, useEffect, useContext } from 'react';\nimport { Typography, Grid, Chip } from '@material-ui/core';\nimport { ApiHighlight } from './Accessories/Highlight';\nconst { validIdHelper, decodeHtml, appContextMap } = require('../utils/tools');\n\n\nexport function NaturalLanguage({ lookerContentItem, inlineQuery, index, classes }) {\n\n  const [apiContent, setApiContent] = useState(undefined);\n  // const { clientSession, sdk, corsApiCall, isReady } = useContext(AppContext);\n  const { clientSession, sdk, corsApiCall, isReady } = useContext(appContextMap[process.env.REACT_APP_PACKAGE_NAME]);\n  const { userProfile, lookerUser } = clientSession;\n\n  useEffect(() => {\n    if (isReady) {\n      let isSubscribed = true\n      corsApiCall(runInlineQuery).then(response => {\n        if (isSubscribed) {\n          setApiContent(response)\n        }\n      })\n      return () => isSubscribed = false\n    }\n  }, [lookerUser, isReady])\n\n  const runInlineQuery = async () => {\n    let clientLookerResponse = await sdk.ok(sdk.run_inline_query({ result_format: lookerContentItem.resultFormat || 'json', body: inlineQuery }));\n    return clientLookerResponse[0];\n  }\n\n  const upOrDownArrow = apiContent ? apiContent.change > 0 ? `&uarr;` : `&darr;` : '';\n\n  return (\n    <Grid item sm={12}>\n      {apiContent ?\n        <React.Fragment >\n          <ApiHighlight classes={classes} >\n            <Typography variant=\"subtitle1\" display=\"inline\">\n              Your {lookerContentItem.inlineQueriesMap[index]} category, <b>{apiContent['products.category']}</b>, is {apiContent.change > 0 ? 'up ' : 'down '}\n            </Typography>\n            <Chip size=\"small\"\n              label={`${decodeHtml(upOrDownArrow)} ${parseInt(apiContent.change * 100).toFixed(0)}% `}\n              className={apiContent.change > 0 ? classes.greenPos : classes.redNeg}\n              display=\"inline\"\n            />\n            <Typography variant=\"subtitle1\" display=\"inline\">\n              &nbsp;over the past week.\n        </Typography>\n          </ApiHighlight>\n        </React.Fragment>\n        : <div style={{ height: '56px' }}></div>\n      }\n    </Grid >\n  );\n}\n\n","import React, { useState, useEffect, useContext } from 'react';\nimport { Link } from \"react-router-dom\";\nimport { Typography, Grid, Divider } from '@material-ui/core';\nimport { ApiHighlight } from './Accessories/Highlight';\nimport { appContextMap } from '../utils/tools';\n\n\nexport function VectorThumbnail({ lookerContentItem, classes, vectorItem, index }) {\n  // console.log('VectorThumbnail')\n\n  const [svg, setSvg] = useState(undefined)\n  const { clientSession, sdk, corsApiCall, isReady } = useContext(appContextMap[process.env.REACT_APP_PACKAGE_NAME])\n  const { userProfile, lookerUser } = clientSession;\n\n  useEffect(() => {\n    let isSubscribed = true\n    if (isReady) {\n      corsApiCall(getThumbnail).then(response => {\n        // console.log({ response })\n        if (isSubscribed) {\n          setSvg(response)\n        }\n      })\n    }\n    return () => isSubscribed = false\n  }, [lookerUser, isReady])\n\n  const getThumbnail = async () => {\n    let clientLookerResponse = await sdk.ok(sdk.content_thumbnail({ type: vectorItem.resourceType, resource_id: vectorItem.id }));\n    const blob = new Blob([clientLookerResponse], { type: 'image/svg+xml' });\n    let url = URL.createObjectURL(blob);\n    return url;\n  }\n\n  return (\n    <Grid container\n      className={`${classes.cursorPointer}`}\n      spacing={3}\n      component={Link}\n      to={vectorItem.url}\n    >\n      {svg ?\n        <>\n          <Grid item sm={1} />\n          <Grid item sm={6}>\n            <ApiHighlight classes={classes}>\n              <div\n                className={` ${classes.maxHeight60} ${classes.textCenter} ${classes.cursorPointer} ${classes.overflowHidden}`}\n              >\n                <img\n                  src={svg}\n                  style={{ width: '100%' }}\n                />\n\n              </div>\n            </ApiHighlight>\n          </Grid>\n          <Grid item sm={4}>\n            <Typography variant=\"subtitle1\"  >{vectorItem.label}</Typography>\n          </Grid>\n          {index < 2 ?\n            <Grid item sm={12}>\n              <Divider className={`${classes.divider} ${classes.mb12} ${classes.mt12}`} />\n            </Grid> : ''}\n        </>\n        :\n        ''\n      }\n    </Grid >\n  );\n}","import React, { useState } from 'react';\nimport { Typography, Card, Grid } from '@material-ui/core';\nimport { VectorThumbnail } from './VectorThumbnail';\n\nconst { validIdHelper } = require('../utils/tools');\n\nexport function PopularAnalysis({ lookerContentItem, classes }) {\n  const [apiContent, setApiContent] = useState([]);\n\n  return (\n\n    <Card className={`${classes.padding15} ${classes.overflowHidden} ${classes.lookerCardShadow}`}>\n      <div\n        className={`${classes.overflowYScroll}`}\n        style={{ height: lookerContentItem.height }}\n      >\n        <Grid container\n          spacing={3}>\n          <Grid item sm={12}>\n            <Typography variant=\"h6\" align=\"center\" color=\"secondary\">\n              Helpful Dashboards\n          </Typography></Grid>\n          {lookerContentItem.vectors.map((vectorItem, index) => {\n            return (\n              <VectorThumbnail\n                key={`${validIdHelper('vectorThumbnail-splashPage-' + index)}`}\n                {...{ lookerContentItem, vectorItem, classes, index }}\n              />\n            )\n          }\n          )}\n        </Grid>\n      </div >\n    </Card>\n  );\n}\n","import React from 'react'\nimport { Grid, CircularProgress, Card } from '@material-ui/core'\n\n\nexport function Loader({ classes, height, hide }) {\n  return (\n    hide ? \"\" :\n      <Grid item sm={12} style={{ height }\n      } >\n        <Card className={`${classes.card} ${classes.flexCentered}`}\n          elevation={0}\n          mt={2}\n          style={{ height: `${height}px` }}\n        >\n          <CircularProgress className={classes.circularProgress} />\n        </Card>\n      </Grid >\n  )\n}\n","import React, { useContext } from 'react';\nimport { Typography, Grid, Fade, ClickAwayListener } from '@material-ui/core'\nimport CloseIcon from '@material-ui/icons/Close';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport { dracula } from 'react-syntax-highlighter/dist/esm/styles/hljs';\nimport { appContextMap } from '../../utils/tools';\n\nexport const CodeFlyout = (props) => {\n  // console.log(\"CodeFlyout\")\n  const { codeShow, setCodeShow } = useContext(appContextMap[process.env.REACT_APP_PACKAGE_NAME]);\n  const { classes, lookerUser, height } = props;\n\n  return (\n\n    codeShow ?\n      <Grid item sm={6}\n        className={`${classes.positionFixedTopRight}`}>\n        <ClickAwayListener onClickAway={() => setCodeShow()}>\n          <Fade in={true}>\n            {\n              Object.keys(lookerUser).length ?\n                <Grid container spacing={3}\n                  className={`${classes.padding20} ${classes.codeFlyoutContainer}`}\n                  style={{ height }}\n                >\n                  <Grid item sm={11}>\n                    <Typography variant=\"h6\" className={` ${classes.mrAuto}`} style={{ color: 'white' }}>\n                      Looker User Object\n              </Typography>\n                  </Grid>\n                  <Grid item sm={1}\n                    style={{ textAlign: 'right' }}\n                  >\n                    <CloseIcon style={{ color: 'white', cursor: 'pointer' }} onClick={() => setCodeShow()} />\n                  </Grid>\n                  <Grid item sm={12}>\n                    <CodeSnippet code={lookerUser} />\n                  </Grid>\n                </Grid> : ''\n            }\n          </Fade >\n        </ClickAwayListener >\n      </Grid>\n      : \"\"\n\n  )\n}\n\nfunction CodeSnippet(props) {\n  const { code } = props\n  return (\n    <SyntaxHighlighter language=\"json\" style={dracula} showLineNumbers={true} >\n      {typeof code === \"object\" ? JSON.stringify(code, true, 4) : code}\n    </SyntaxHighlighter>)\n}","import _ from 'lodash'\nimport React, { useState, useEffect, useContext } from 'react';\nimport { Modal, Fade, Grid, Card, CardContent, CardActions, Button, Typography, Divider, List, ListItem, ListItemText } from '@material-ui/core';\nimport { Rating } from '@material-ui/lab'\nimport { ListItemIcon } from '@material-ui/core'; //already declared\nimport { Check } from '@material-ui/icons';\nimport { appContextMap, validIdHelper } from '../../utils/tools';\n\nfunction getModalStyle() {\n  const top = 10 //+ rand();\n  const left = 50 //+ rand();\n\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${left}%, -${top}%)`,\n  };\n}\n\nexport const UserPermissionsModal = ({ content, classes }) => {\n  // console.log('MonetizationModal');\n  // console.log({ content })\n  const { clientSession, payWallModal, setPaywallModal, handleSwitchLookerUser } = useContext(appContextMap[process.env.REACT_APP_PACKAGE_NAME]);\n  const [modalStyle] = React.useState(getModalStyle);\n  const { permissionLevels, modalPermissionsMap } = content;\n\n  return (\n    < Modal\n      className={`${classes.modal} `}\n      open={payWallModal.show || false}\n      onClose={() => setPaywallModal({})}\n    >\n      <Fade in={payWallModal.show || false}>\n        <div\n          style={modalStyle}\n          className={`${classes.modalPopover} ${classes.padding30}`}\n        >\n          <Grid container\n            spacing={3}>\n            {Object.keys(permissionLevels).map((key, index) => {\n              return (\n                <Grid item sm={12 / Object.keys(permissionLevels).length}\n                  key={validIdHelper(`monetizationModal-gridItem-${key}`)}\n                >\n                  <Card className={`${classes.modalCard} ${classes[key]}`}\n                    elevation={1}\n                    style={key === clientSession.lookerUser.user_attributes.permission_level ? {\n                      backgroundColor: '#5F6BD8',\n                      color: '#ffffff',\n                      height: 519\n                    } : {\n                        height: 519\n                      }}\n                    onClick={() => {\n                      handleSwitchLookerUser(key, 'permission')\n                      setPaywallModal({})\n                    }}>\n                    <CardContent>\n                      <Typography variant=\"h6\">\n                        {_.capitalize(key)}\n                      </Typography>\n                      <Typography>\n                        <Rating\n                          name=\"read-only\"\n                          value={5 - Object.keys(permissionLevels).length + index + 1}\n                          readOnly /></Typography>\n                      <Typography variant=\"subtitle1\" style={{ fontStyle: 'italic' }}>\n                        {modalPermissionsMap[key].title}\n                      </Typography>\n\n                      <Divider className={`${classes.divider} `} />\n\n                      <List>\n                        {\n                          modalPermissionsMap[key].list.map((item, index) => (\n                            <ListItem dense={true}\n                              key={`monetizationModal-ListItem-${key}-${index}`}\n                            >\n                              <ListItemIcon\n                              >\n                                <Check fontSize=\"small\" />\n                              </ListItemIcon>\n                              <ListItemText primary={item} />\n                            </ListItem>\n                          ))\n                        }\n                      </List>\n                    </CardContent>\n                    <CardActions disableSpacing={false}>\n                      <Button\n                        color=\"primary\"\n                        variant=\"outlined\"\n                        fullWidth\n                        onClick={() => {\n                          handleSwitchLookerUser(key, 'permission')\n                          setPaywallModal({})\n                        }}\n                        style={key === clientSession.lookerUser.user_attributes.permission_level ? { color: '#ffffff', borderColor: \"#ffffff\" } : {}}>\n                        {key === clientSession.lookerUser.user_attributes.permission_level ? \"Active\" :\n                          Object.keys(modalPermissionsMap).indexOf(clientSession.lookerUser.user_attributes.permission_level) < Object.keys(modalPermissionsMap).indexOf(key) ?\n                            'Upgrade' :\n                            'Switch'}\n                      </Button>\n                    </CardActions>\n                  </Card>\n                </Grid>\n              )\n            })}\n          </Grid>\n        </div >\n      </Fade >\n    </Modal >\n  );\n}\n","import { makeStyles } from '@material-ui/core/styles';\nimport { red, green } from '@material-ui/core/colors';\nconst redPrimary = red[500];\nconst greenPrimary = green[500];\nconst redLight = red[100];\nconst greenLight = green[100];\n\nexport const topBarBottomBarHeight = 140;\nexport const additionalHeightForFlyout = 15; //hack for now\n\nexport const useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    overflow: 'scroll',\n    borderRadius: 8\n  },\n  flexCentered: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  hidden: {\n    visibility: 'hidden',\n    position: 'absolute', //hack for obscuring other elements within Box\n    zIndex: -1\n  },\n  tabs: {\n    backgroundColor: 'white',\n    color: '#6c757d'\n  },\n  dNone: {\n    display: 'none'\n  },\n  dBlock: {\n    display: 'block'\n  },\n  tree: {\n    height: 240,\n    flexGrow: 1,\n    maxWidth: 400,\n  },\n  icon: {\n    marginRight: 12,\n    fontSize: '1rem',\n    overflow: 'visible'\n  },\n  mt12: {\n    marginTop: 12\n  },\n  w100: {\n    width: '100%'\n  },\n  mlAuto: {\n    marginLeft: 'auto'\n  },\n  mrAuto: {\n    marginRight: 'auto'\n  },\n  skeleton: {\n    minWidth: 275,\n    minHeight: 600,\n  },\n  card: {\n    minWidth: 275,\n  },\n  padding30: {\n    padding: 30\n  },\n  minHeight680: {\n    minHeight: 680,\n  },\n  maxHeight200: {\n    maxHeight: 200,\n    height: 200,\n    overflow: 'hidden'\n  },\n  mt30: {\n    marginTop: 30\n  },\n  mb30: {\n    marginBottom: 30\n  },\n  textCenter: {\n    textAlign: 'center'\n  },\n  cursorPointer: {\n    cursor: 'pointer'\n  },\n  border: {\n    border: '1px solid black'\n  },\n  height800: {\n    height: 800\n  },\n  maxHeight100: {\n    maxHeight: 100,\n    height: 100,\n  },\n  maxHeight400: {\n    maxHeight: 400,\n    height: 400,\n  },\n  minHeight200: {\n    minHeight: 200,\n    overflow: 'scroll'\n  },\n  redNeg: {\n    backgroundColor: redLight,\n    color: redPrimary,\n    fontWeight: 800\n  },\n  greenPos: {\n    backgroundColor: greenLight,\n    color: greenPrimary,\n    fontWeight: 800\n  },\n  padding30: {\n    padding: 30\n  },\n  mb12: {\n    marginBottom: 12\n  },\n  overflowScroll: {\n    overflow: 'scroll'\n  },\n  overflowHidden: {\n    overflow: 'hidden'\n  },\n  overflowVisible: {\n    overflow: 'visible'\n  },\n  maxHeight150: {\n    maxHeight: 150,\n    height: 150,\n  },\n  minHeight150: {\n    minHeight: 150,\n    overflow: 'scroll'\n  },\n  carouselLegend: {\n    backgroundColor: 'rgb(192,192,192, .5)\t !important',\n    textAlign: 'center !important',\n    opacity: `100 !important`,\n    fontWeight: 800,\n    // width: `${25}% !important`,\n  },\n  carouselLegendTitle: {\n    fontSize: '24px !important',\n\n  },\n  carouselLegendBody: {\n    fontSize: '16px !important',\n  },\n  positionRelative: {\n    position: 'relative'\n  },\n  padding15: {\n    padding: 15\n  },\n  maxHeight75: {\n    maxHeight: 75,\n    height: 75,\n  },\n  overflowYScroll: {\n    overflowY: 'scroll',\n    overflowX: 'hidden'\n  },\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n  },\n  padding20: {\n    padding: 20\n  },\n  positionFixedTopRight: {\n    position: 'fixed',\n    top: 88,\n    right: 24,\n    bottom: 0,\n    zIndex: 100,\n  },\n  codeFlyoutContainer: {\n    backgroundColor: 'rgb(40, 42, 54)',\n    overflow: 'scroll',\n    borderRadius: '0 8px 8px 0'\n  },\n  height100Percent: {\n    height: '100%'\n  },\n  noContainerScroll: {\n    width: '100%',\n    margin: 0\n  },\n  lookerCardShadow: {\n    border: 'none',\n    borderRadius: '6px',\n    boxShadow: 'rgba(0, 0, 0, 0.11) 0px 2px 12px, rgba(0, 0, 0, 0.04) 0px 1px 4px'\n  },\n  maxHeight60: {\n    maxHeight: 60,\n    height: 60,\n  },\n  maxHeight350: {\n    maxHeight: 350,\n    height: 350,\n  },\n  maxHeight80Percent: {\n    maxHeight: '80%',\n    height: '80%'\n  },\n  faSm: {\n    fontSize: '.75em'\n  },\n  mr12: {\n    marginRight: 12\n  },\n  ml12: {\n    marginLeft: 12\n  },\n  dot: {\n    height: \"25px\",\n    width: \"25px\",\n    borderRadius: \"50%\",\n    display: \"inline-block\"\n  },\n  borderRadius0: { borderRadius: 0 },\n  w33: {\n    width: \"33%\"\n  },\n  verticalAlignTop: {\n    verticalAlign: 'top'\n  },\n  padding10: {\n    padding: 10\n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  visuallyHidden: {\n    border: 0,\n    clip: 'rect(0 0 0 0)',\n    height: 1,\n    margin: -1,\n    overflow: 'hidden',\n    padding: 0,\n    position: 'absolute',\n    top: 20,\n    width: 1,\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  bluePrimary: {\n    backgroundColor: 'rgba(69, 149, 236, 1)'\n  },\n  blueSecondary: {\n    backgroundColor: 'rgba(69, 149, 236, .5)',\n  },\n  orangePrimary: {\n    backgroundColor: 'rgba(243, 167, 89, 1)'\n  },\n  orangeSecondary: {\n    backgroundColor: 'rgba(243, 167, 89, .5)'\n  },\n  positionTopRight: {\n    position: 'absolute',\n    top: -30,\n    right: -50,\n    bottom: 0,\n    zIndex: 100\n  },\n  bottomBarSpacer: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n  },\n  maxHeight600: {\n    maxHeight: 600,\n    overflow: 'scroll'\n  },\n  m12: {\n    margin: 12\n  },\n  m6: {\n    margin: 6\n  },\n  small: {\n    width: theme.spacing(3),\n    height: theme.spacing(3),\n  },\n}));","import _ from 'lodash'\nimport React, { useState, useEffect, useContext } from 'react';\nimport { Box, Grid, Card } from '@material-ui/core'\nimport { Loader, CodeFlyout } from '@pbl-demo/components/Accessories'\nimport { useStyles, topBarBottomBarHeight, additionalHeightForFlyout } from './styles.js';\nconst { validIdHelper, appContextMap, validateContent } = require('../utils/tools');\n\nexport const PDFViewer = (props) => {\n  const [iFrameExists, setIFrame] = useState(1);\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\n  const { clientSession: { lookerUser, lookerHost } } = useContext(appContextMap[process.env.REACT_APP_PACKAGE_NAME]);\n  const { staticContent: { lookerContent, type, schema } } = props;\n  const demoComponentType = type;\n  const classes = useStyles();\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", () => setHeight((window.innerHeight - topBarBottomBarHeight)));\n  }, [lookerContent]);\n\n  validateContent(lookerContent[0], schema)\n\n  return (\n    <div className={`${classes.root} demoComponent`}\n      style={{ height }}>\n      <Card elevation={1} className={`${classes.padding15} ${classes.height100Percent} ${classes.overflowScroll}`}\n      >\n        <Grid container\n          key={validIdHelper(type)}>\n          <div className={classes.root}>\n\n            <Loader\n              hide={iFrameExists}\n              classes={classes}\n              height={height} />\n\n            <Box className={iFrameExists ? `` : `${classes.hidden}`}>\n              <Grid container\n                spacing={3}\n                key={`${validIdHelper(demoComponentType + '-outerFragment')}`}\n                className={`${classes.noContainerScroll}`}\n              >\n\n                <CodeFlyout {...props}\n                  classes={classes}\n                  lookerUser={lookerUser}\n                  height={height - additionalHeightForFlyout}\n                />\n\n                <object data={lookerContent[0].pdf} type=\"application/pdf\" className={`${classes.minHeight680} ${classes.w100}`}>\n                  <iframe src={`https://docs.google.com/viewer?url=${lookerContent[0].pdf}&embedded=true`} style={{ height: \"100%\", width: \"100%\" }}></iframe>\n                </object>\n\n              </Grid>\n            </Box >\n          </div >\n        </Grid >\n      </Card >\n    </div >\n  )\n}","import _ from 'lodash'\nimport React, { useState, useEffect, useContext } from 'react';\nimport { Box, Grid, Card } from '@material-ui/core'\nimport { Loader, CodeFlyout, EmbedHighlight } from '@pbl-demo/components/Accessories'\nimport { useStyles, topBarBottomBarHeight, additionalHeightForFlyout } from './styles.js';\nimport { LookerEmbedSDK } from '@looker/embed-sdk'\nconst { validIdHelper, appContextMap, validateContent } = require('../utils/tools');\n\nexport const EmbeddedExplore = (props) => {\n  const [iFrameExists, setIFrame] = useState(1);\n  const [apiContent, setApiContent] = useState(undefined);\n  const [exploreObj, setExploreObj] = useState({});\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\n  const { clientSession, clientSession: { lookerUser, lookerHost }, isReady, sdk, corsApiCall, selectedMenuItem } = useContext(appContextMap[process.env.REACT_APP_PACKAGE_NAME]);\n  const { staticContent: { lookerContent, type, schema } } = props;\n  const demoComponentType = type;\n  const classes = useStyles();\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", () => setHeight((window.innerHeight - topBarBottomBarHeight)));\n  }, [lookerContent]);\n\n  useEffect(() => {\n    if (isReady) {\n      corsApiCall(performLookerApiCalls, [[...lookerContent]])\n      setApiContent(undefined);\n    }\n  }, [lookerUser, isReady, selectedMenuItem])\n\n  // needed to copy from home to make it work\n  useEffect(() => {\n    let modifiedBaseUrl = clientSession.lookerBaseUrl.substring(0, clientSession.lookerBaseUrl.lastIndexOf(\":\"));\n    LookerEmbedSDK.init(modifiedBaseUrl, '/auth')\n  }, [])\n\n  const performLookerApiCalls = function (lookerContent) {\n    // console.log(\"performLookerApiCalls\")\n    // console.log({ lookerContent })\n    lookerContent.map(async lookerContentItem => {\n      if (lookerContentItem.type === \"explore\") {\n        let exploreId = lookerContentItem.id;\n        let qid = lookerContentItem.qid;\n        if (qid) {\n          LookerEmbedSDK.createExploreWithId(exploreId)\n            .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContentItem.id}`))\n            .withClassName('exploreIframe')\n            .withParams({\n              qid: lookerContentItem.qid,\n              toggle: \"&toggle=fil,pik\"\n            })\n            .on('explore:state:changed', (event) => {\n            })\n            .build()\n            .connect()\n            .then((explore) => {\n              setIFrame(1)\n              setExploreObj(explore)\n              let modifiedBaseUrl = clientSession.lookerBaseUrl.substring(0, clientSession.lookerBaseUrl.lastIndexOf(\":\"));\n              LookerEmbedSDK.init(modifiedBaseUrl)\n            })\n            .catch((error) => {\n              console.error('Connection error', error)\n            })\n        } else {\n          LookerEmbedSDK.createExploreWithId(exploreId)\n            .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContentItem.id}`))\n            .withClassName('exploreIframe')\n            .on('explore:state:changed', (event) => {\n            })\n            .build()\n            .connect()\n            .then((explore) => {\n              setIFrame(1)\n              setExploreObj(explore)\n              let modifiedBaseUrl = clientSession.lookerBaseUrl.substring(0, clientSession.lookerBaseUrl.lastIndexOf(\":\"));\n              LookerEmbedSDK.init(modifiedBaseUrl)\n            })\n            .catch((error) => {\n              console.error('Connection error', error)\n            })\n        }\n      }\n    })\n  }\n\n  return (\n    <div className={`${classes.root} demoComponent`}\n      style={{ height }}>\n      <Card elevation={1}\n        className={`${classes.padding15} ${classes.height100Percent} ${classes.overflowScroll}`}\n      >\n        <Grid container\n          key={validIdHelper(type)}>\n          <div className={classes.root}>\n            <Loader\n              hide={iFrameExists}\n              classes={classes}\n              height={height} />\n            <Box className={iFrameExists ? `` : `${classes.hidden}`}>\n              <Grid container\n                spacing={3}\n                key={`${validIdHelper(demoComponentType + '-outerFragment')}`}\n                className={`${classes.noContainerScroll}`}\n              >\n                <CodeFlyout {...props}\n                  classes={classes}\n                  lookerUser={lookerUser}\n                  height={height - additionalHeightForFlyout}\n                />\n                <Grid item\n                  sm={12}\n                >\n                  <Box className={`${classes.w100} ${classes.padding10}`} mt={lookerContent[0].filter || lookerContent[0].dynamicFieldLookUp ? 2 : 0}>\n                    <EmbedHighlight classes={classes}>\n                      <div\n                        className={`embedContainer ${validIdHelper(type)}`}\n                        id={validIdHelper(`embedContainer-${demoComponentType}-${lookerContent[0].id}`)}\n                        key={validIdHelper(`embedContainer-${demoComponentType}-${lookerContent[0].id}`)}\n                      >\n                      </div>\n                    </EmbedHighlight>\n                  </Box>\n                </Grid>\n              </Grid>\n            </Box >\n          </div >\n        </Grid >\n      </Card >\n    </div >\n  )\n}","import { Looker40SDK, DefaultSettings } from \"@looker/sdk\";\n// import { PblSessionEmbed } from '../LookerHelpers/pblsession'\n\nexport const checkForExistingSession = async () => {\n  // console.log('checkForExistingSession')\n  let sessionResponse = await fetch('/readsession', {\n    method: 'GET',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json'\n    }\n  })\n  const sessionResponseData = await sessionResponse.json();\n  return { session: sessionResponseData.session };\n}\n\nexport const writeNewSession = async (newSession) => {\n  // console.log('writeNewSession')\n  let newSessionResponse = await fetch('/writesession', {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ ...newSession })\n  })\n  const newSessionResponseData = await newSessionResponse.json();\n  return { session: newSessionResponseData.session };\n}\n\nexport const endSession = async () => {\n  // console.log('endSession')\n  let endSessionResponse = await fetch('/endsession', {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json'\n    }\n  })\n  const endSessionResponseData = await endSessionResponse.json();\n  return { message: endSessionResponse };\n}\n\nexport const createSdkHelper = ({ accessToken, lookerBaseUrl }) => {\n  // console.log('createSdkHelper')\n  // console.log({ accessToken })\n  // console.log({ lookerBaseUrl })\n\n  if (accessToken && lookerBaseUrl) { //added 11/22\n    const pblsession = new PblSessionEmbed({\n      ...DefaultSettings(),\n      base_url: lookerBaseUrl,\n      accessToken\n    });\n\n    let sdk = new Looker40SDK(pblsession);\n    return sdk;\n  }\n\n}\n\nexport const checkToken = async (expires_in) => {\n  // console.log('checkToken2');\n  // console.log({ expires_in });\n  // console.log('Date.now()', Date.now());\n  // let dateeee = new Date(expires_in);\n  // console.log({ dateeee })\n\n  if ((Date.now()) > expires_in) {\n    // console.log('inside iff')\n    let sessionResponse = await fetch('/refreshlookertoken', {\n      method: 'GET',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      }\n    })\n    const sessionResponseData = await sessionResponse.json();\n    const lookerBaseUrl = sessionResponseData.session.lookerBaseUrl ? sessionResponseData.session.lookerBaseUrl : '';\n    const accessToken = sessionResponseData.session.lookerApiToken ? sessionResponseData.session.lookerApiToken.api_user_token : '';\n    const sdk = createSdkHelper({ accessToken, lookerBaseUrl })\n\n    return { status: \"updated\", sdk, clientSession: sessionResponseData.session }\n\n  } else {\n    // console.log(\"inside ellse\")\n    return { status: \"ok\" }\n  }\n}\n\n","import _ from 'lodash';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useHistory, } from \"react-router-dom\";\nimport { IconButton, Menu, MenuItem, Typography, Divider, TextField, Avatar } from '@material-ui/core';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport { endSession } from '../utils/auth';\nimport { appContextMap, validIdHelper } from '../utils/tools';\n\n\nexport const UserMenu = ({ classes, content }) => {\n  // console.log(\"UserMenu\");\n  // console.log({ content })\n\n  let history = useHistory();\n  let { setPaywallModal, clientSession, setClientSession, handleSwitchLookerUser } = useContext(appContextMap[process.env.REACT_APP_PACKAGE_NAME])\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [selectedBrand, setSelectedBrand] = useState(clientSession.lookerUser.user_attributes.brand || '');\n  const { permissionLevels, rowLevelAttribute } = content\n\n\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = (newValue, property) => {\n    setAnchorEl(null);\n    if (newValue == null) {\n      setClientSession({})\n      history.push(\"/\")\n      endSession();\n    } else if (newValue === 'modal') {\n      setPaywallModal({\n        'show': true,\n        'permissionNeeded': 'explore'\n      })\n    } else if (typeof newValue === 'string') {\n      handleSwitchLookerUser(newValue, property)\n    }\n  };\n  useEffect(() => {\n    setSelectedBrand(clientSession.lookerUser.user_attributes.brand || '')\n  }, [clientSession.lookerUser]);\n\n  return (\n    <div className={`${classes.zIndex1500}`}>\n      <IconButton\n        aria-label=\"account of current user\"\n        aria-controls=\"menu-appbar\"\n        aria-haspopup=\"true\"\n        onClick={handleClick}\n        color=\"inherit\"\n      >\n        <Avatar alt={clientSession.userProfile.name} src={clientSession.userProfile.imageUrl} className={classes.mr12} />\n\n        <Typography>\n          {typeof clientSession.lookerUser.user_attributes.permission_level === 'string' ?\n            clientSession.lookerUser.user_attributes.permission_level.charAt(0).toUpperCase() + clientSession.lookerUser.user_attributes.permission_level.substring(1) : ''}\n        </Typography>\n      </IconButton>\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        <MenuItem autoFocus={false}>Select User Level</MenuItem>\n\n        {Object.keys(permissionLevels).map(key => {\n          return (<MenuItem\n            key={validIdHelper(`$lookerUserPermission-MenuItem-${key}`)}\n            autoFocus={false}\n            onClick={() => handleClose(key, 'permission')}>{_.capitalize(key)}</MenuItem>)\n        })}\n\n        <Divider className={classes.divider} />\n        <MenuItem onClick={() => handleClose(null)}>Sign Out</MenuItem>\n        <Divider className={classes.divider} />\n        <MenuItem onClick={() => handleClose('modal')}>Show Monetization Modal</MenuItem>\n        {Object.keys(rowLevelAttribute).length ? <div>\n          <Divider className={classes.divider} />\n          <MenuItem>{rowLevelAttribute.menuItemLabel}: {selectedBrand}</MenuItem>\n          <MenuItem>\n            <Autocomplete\n              id=\"combo-box-usermenu\"\n              options={rowLevelAttribute.options || []}\n              getOptionLabel={(option) => option.label}\n              style={{ width: 300 }}\n              onChange={(event) => handleClose((event.target.innerText || ''), 'brand')}\n              renderInput={(params) => <TextField {...params}\n                label={rowLevelAttribute.autoCompleteLabel}\n                variant=\"outlined\"\n              />}\n              loadingText=\"Loading...\"\n              disableautofocus=\"true\"\n              onKeyDown={(event) => event.stopPropagation()}\n            />\n          </MenuItem></div> : \"\"}\n      </Menu>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport function NumberToColoredPercent({ val, positive_good, abs_val }) {\n  const colors = {\n    up: (positive_good) ? 'green' : 'red',\n    down: (positive_good) ? 'red' : 'green'\n  }\n  const color = (val < 0) ? colors.down : (val > 0) ? colors.up : 'black'\n  const val_formatted = Math.abs(val).toLocaleString(\"en\", { style: \"percent\", minimumFractionDigits: 2 })\n  const icon = (val < 0) ? '▼' : (val > 0) ? '▲' : '—'\n\n  return (<>\n    <font\n      color={color}\n    >\n      {`${icon} ${val_formatted}`}\n    </font>\n  </>\n  )\n}","import _ from 'lodash';\nimport React from 'react';\nimport { Typography, Grid, TextField } from '@material-ui/core';\nimport { Autocomplete } from '@material-ui/lab';\nimport { ApiHighlight } from '../Accessories/Highlight';\nimport { NumberToColoredPercent } from '../Accessories/NumberToColoredPercent';\n\n// import parse from \"autosuggest-highlight/parse\";\n// import match from \"autosuggest-highlight/match\";\n\nconst { validIdHelper } = require('../../utils/tools');\n\nexport const AutoComplete = ({ filterItem, apiContent, classes, action, bgColor, setDynamicSearch }) => {\n  // console.log(\"AutoComplete\");\n  // console.log({ filterItem })\n  // console.log({ apiContent })\n\n  return (\n    filterItem ?\n      <ApiHighlight\n        key={validIdHelper(`dashEmbed-${filterItem.label}`)}\n        classes={classes} >\n        <Typography>\n          {filterItem.label ? filterItem.label : \"\"}\n        </Typography>\n        <Autocomplete\n          id={`combo-box-dashboard-${filterItem.label}`}\n          options={Array.isArray(apiContent) ?\n            apiContent :\n            []}\n          renderOption={(option) => (\n            <Grid container justify=\"space-between\">\n              <Grid item >\n                {option.label}\n              </Grid>\n              {option.trend && <Grid item>\n                <NumberToColoredPercent\n                  val={option.trend}\n                  positive_good={true}\n                  abs_val={Math.abs(option.trend)}\n                />\n              </Grid>}\n            </Grid>\n          )}\n          getOptionLabel={(option) => option.label}\n          onChange={(event, newValue) => {\n            let newValueToUse = '';\n            if (newValue && newValue.value) newValueToUse = newValue.value\n            else if (newValue && newValue.label) newValueToUse = newValue.label\n            action(\n              filterItem.filterName,\n              newValueToUse)\n          }}\n          renderInput={(params) => <TextField {...params}\n            label={filterItem.alternateName ? filterItem.alternateName : filterItem.filterName}\n            variant=\"outlined\"\n          />}\n          loadingText=\"Loading...\"\n          style={{\n            backgroundColor: bgColor || \"\"\n          }}\n          onInputChange={_.debounce((event) => {\n            if (filterItem.apiDrivenSearch && event.target.value) setDynamicSearch(event.target.value)\n          }, 1000)}\n\n        />\n      </ApiHighlight> : \"\"\n  )\n}\n\n// const handleRenderOption = (option, { inputValue }) => {\n//   const matches = match(option.label, inputValue);\n//   const parts = parse(option.label, matches);\n//   console.log({ matches })\n//   console.log({ parts })\n\n//   const highlightStyle = {\n//     fontWeight: 700,\n//     backgroundColor: \"lightyellow\",\n//     padding: \"5px 2px\"\n//   };\n\n//   return (\n//     <div>\n//       {parts.map((part, index) => (\n//         <span key={index} style={part.highlight ? highlightStyle : {}}>\n//           {part.text}\n//         </span>\n//       ))}\n//     </div>\n//   );\n// };\n\n// export default handleRenderOption;","import _ from 'lodash';\nimport React from 'react';\nimport { Typography } from '@material-ui/core'\nimport { ToggleButton, ToggleButtonGroup } from '@material-ui/lab';\nimport { EmbedMethodHighlight } from '../Accessories/Highlight';\nconst { validIdHelper } = require('../../utils/tools');\n\n\nexport const ToggleTile = ({ classes, tileToggleValue, handleTileToggle, filterItem }) => {\n  return (\n\n    <EmbedMethodHighlight classes={classes} >\n      <Typography\n      >\n        {filterItem.label}\n      </Typography>\n      <ToggleButtonGroup\n        value={tileToggleValue}\n        exclusive\n        onChange={handleTileToggle}\n        aria-label=\"text alignment\"\n      >\n        {Object.keys(filterItem.tileLookUp).map(key => {\n          return (\n            <ToggleButton\n              key={validIdHelper(`dynamicDashTileToggle-${key}`)}\n              value={key}\n              aria-label=\"left aligned\">\n              {key}\n            </ToggleButton>\n          )\n        })}\n      </ToggleButtonGroup>\n    </EmbedMethodHighlight>\n\n  )\n}\n","import _ from 'lodash';\nimport React from 'react';\nimport { Typography } from '@material-ui/core'\nimport { ToggleButton, ToggleButtonGroup } from '@material-ui/lab';\nimport { EmbedMethodHighlight } from '../Accessories/Highlight';\nconst { validIdHelper } = require('../../utils/tools');\n\n\nexport const ToggleVisColor = ({ classes, visColorToggleValue, handleVisColorToggle, filterItem }) => {\n  return (\n\n    <EmbedMethodHighlight classes={classes} >\n      <Typography\n      >{filterItem.label}</Typography>\n      <ToggleButtonGroup\n        value={visColorToggleValue}\n        exclusive\n        onChange={handleVisColorToggle}\n        aria-label=\"text alignment\"\n      >\n        {Object.keys(filterItem.colors).map(key => {\n          return (\n            <ToggleButton\n              key={validIdHelper(`dynamicDashVisConfigToggle-${key}`)}\n              value={key} aria-label=\"left aligned\">\n              <span className={`${classes.dot}`} style={{\n                backgroundColor: (filterItem.colors[key][filterItem.colors[key].length - 2]\n                  || key)\n              }}></span>\n            </ToggleButton>\n          )\n        })}\n      </ToggleButtonGroup>\n\n    </EmbedMethodHighlight>\n  )\n}\n","import React from 'react';\nimport { Typography, Grid, Switch } from '@material-ui/core'\nimport { EmbedHighlight } from '../Accessories/Highlight';\n\n\nexport const SwitchTheme = ({ classes, lightThemeToggleValue, handleThemeChange }) => {\n  return (\n    <EmbedHighlight classes={classes} >\n      <Typography\n      >{lightThemeToggleValue ? \"Light mode\" : \"Dark mode\"}</Typography>\n\n      <Switch\n        checked={!lightThemeToggleValue}\n        onChange={() => handleThemeChange(null, !lightThemeToggleValue)}\n        color=\"primary\"\n        name=\"light theme toggle\"\n        inputProps={{ 'aria-label': 'primary checkbox' }}\n      />\n\n    </EmbedHighlight>\n  )\n}\n","import React from 'react';\nimport { FormControl, Select, MenuItem, InputLabel } from '@material-ui/core'\nimport { EmbedHighlight } from '../Accessories/Highlight';\nconst { validIdHelper } = require('../../utils/tools');\n\n\nexport const SelectFont = ({ classes, fontThemeSelectValue, handleThemeChange, filterItem }) => {\n  return (\n    <EmbedHighlight classes={classes} >\n      <FormControl className={classes.formControl}>\n        <InputLabel id=\"demo-simple-select-label\"\n        >{filterItem.label}</InputLabel>\n        <Select\n          labelId=\"demo-simple-select-label\"\n          id=\"demo-simple-select\"\n          value={fontThemeSelectValue}\n          onChange={(event) => {\n            handleThemeChange(null, event.target.value)\n          }}\n        >\n          {filterItem.options.map(item => {\n            return < MenuItem\n              key={validIdHelper(`filter-select${item}`)}\n              value={item.toLowerCase()} > {item}</MenuItem>\n          })}\n        </Select>\n      </FormControl>\n\n    </EmbedHighlight >\n  )\n}\n","import { CheckboxSVGMap } from \"react-svg-map\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport _ from 'lodash'\n\nCheckboxSVGMap.prototype.toggleLocation = function toggleLocation(event) {\n  const location = event.target;\n  // console.log('location', location)\n  // console.log('this.props.map', this.props.map)\n\n  this.setState(prevState => {\n\n    // Copy old state\n    let selectedLocations = [...prevState.selectedLocations];\n    // console.log('selectedLocations', selectedLocations)\n    // console.log('selectedLocations.length', selectedLocations.length)\n\n    //get region associated with states\n    let regionFromStateClicked = _.find(this.props.map.locations, { id: location.id })\n    //all states belonging to region clicked\n    let statesWithinRegionClicked = _.filter(this.props.map.locations, { region: regionFromStateClicked.region })\n\n    //get all unique regions\n    let allUniqueRegions = [];\n    for (let i = 0; i < this.props.map.locations.length; i++) {\n      if (allUniqueRegions.indexOf(this.props.map.locations[i].region) == -1) {\n        allUniqueRegions.push(this.props.map.locations[i].region)\n      }\n    }\n    //get unique regions only from selected locations\n    let allUniqueRegionsFromSelectedLocations = [];\n    for (let j = 0; j < selectedLocations.length; j++) {\n      if (allUniqueRegionsFromSelectedLocations.indexOf(selectedLocations[j].region) == -1) {\n        allUniqueRegionsFromSelectedLocations.push(selectedLocations[j].region)\n      }\n    }\n    //determine which regions are not currently selected\n    let regionsNotCurrentlySelected = _.differenceBy(allUniqueRegions, allUniqueRegionsFromSelectedLocations);\n    let allRegionsNotSelected = [...regionsNotCurrentlySelected, regionFromStateClicked.region];\n    //filter all locations, for all the regions that have not been selected :D\n    let statesNotWithinRegionsClicked = _.filter(this.props.map.locations, (location) => {\n      return allRegionsNotSelected.indexOf(location.region) == -1\n    });\n\n    if (location.attributes['aria-checked'].value === 'true') {\n      // Delete location\n      selectedLocations = statesNotWithinRegionsClicked;\n    } else {\n      // Add location\n      selectedLocations.push(...statesWithinRegionClicked);\n    }\n\n    // Call onChange event handler\n    if (this.props.onChange) {\n      this.props.onChange(selectedLocations);\n    }\n\n    // Return new state\n    return { selectedLocations };\n  });\n}\n\nCheckboxSVGMap.prototype.componentDidMount = function componentDidMount() {\n  //override components for all states to be selected initially\n  this.setState({ selectedLocations: this.props.map.locations });\n}\n\nexport { CheckboxSVGMap as CheckboxSVGMap } \n","import Usa from \"@svg-maps/usa\";\nimport {\n  SentimentDissatisfied, SentimentSatisfied, SentimentVerySatisfied,\n} from '@material-ui/icons';\n\nexport const customUsa = {\n  ...Usa,\n  label: \"Custom map label\",\n  locations: Usa.locations.map(location => {\n    // Modify each location\n    switch (location.name) {\n      //9\n      case \"Connecticut\":\n      case \"Maine\":\n      case \"Massachusetts\":\n      case \"New Hampshire\":\n      case \"Rhode Island\":\n      case \"Vermont\":\n      case \"New Jersey\":\n      case \"New York\":\n      case \"Pennsylvania\":\n      case \"Delaware\":\n        return { ...location, region: \"Northeast\" }\n      //12\n      case \"Illinois\":\n      case \"Indiana\":\n      case \"Michigan\":\n      case \"Ohio\":\n      case \"Wisconsin\":\n      case \"Iowa\":\n      case \"Kansas\":\n      case \"Minnesota\":\n      case \"Missouri\":\n      case \"Nebraska\":\n      case \"North Dakota\":\n      case \"South Dakota\":\n        return { ...location, region: \"Midwest\" }\n      //16\n      case \"Florida\":\n      case \"Georgia\":\n      case \"Maryland\":\n      case \"North Carolina\":\n      case \"South Carolina\":\n      case \"Virginia\":\n      case \"District of Columbia\":\n      case \"Washington, DC\":\n      case \"West Virginia\":\n      case \"Alabama\":\n      case \"Kentucky\":\n      case \"Mississippi\":\n      case \"Tennessee\":\n      case \"Arkansas\":\n      case \"Louisiana\":\n      case \"Oklahoma\":\n      case \"Texas\":\n        return { ...location, region: \"South\" }\n      //8\n      case \"Arizona\":\n      case \"Colorado\":\n      case \"Idaho\":\n      case \"Montana\":\n      case \"Nevada\":\n      case \"New Mexico\":\n      case \"Utah\":\n      case \"Wyoming\":\n        return { ...location, region: \"Mountain\" }\n      //5\n      case \"Alaska\":\n      case \"California\":\n      case \"Hawaii\":\n      case \"Oregon\":\n      case \"Washington\":\n        return { ...location, region: \"Pacific\" }\n      // default:\n      //   return location\n    }\n  })\n}\nexport const lifetimeRevenueTierMap = {\n  \"0 to 99\": \"low\",\n  \"100 to 499\": \"medium\",\n  \"500 or Above\": \"high\",\n}\nexport const lifetimeRevenueTierIconMap = {\n  \"0 to 99\": SentimentDissatisfied,\n  \"100 to 499\": SentimentSatisfied,\n  \"500 or Above\": SentimentVerySatisfied,\n}\n","import React, { useState } from 'react';\nimport { Typography } from '@material-ui/core'\nimport { CheckboxSVGMap } from \"./CheckboxSvgMapRegion\";\nimport { customUsa } from './helpers';\nimport { EmbedMethodHighlight } from '../Accessories/Highlight';\nconst { validIdHelper } = require('../../utils/tools');\n\n\nexport function MapFilter({ classes, action, filterItem }) {\n\n  const [regionValue, setRegionValue] = useState('Pacific, South, Mountain, Midwest, Northeast');\n\n  return (\n    <EmbedMethodHighlight classes={classes}\n      key={validIdHelper(`dashEmbed-${filterItem.label}`)} >\n      <Typography className={`${classes.heading} ${classes.ml12}  ${classes.verticalAlignTop}`}\n      >\n        {filterItem.label}: <b>{regionValue ? regionValue : \"Outside US\"}</b>\n      </Typography>\n\n      <CheckboxSVGMap map={customUsa}\n        onChange={(locations) => {\n\n          let allUniqueRegionsFromSelectedLocations = [];\n          for (let j = 0; j < locations.length; j++) {\n            if (allUniqueRegionsFromSelectedLocations.indexOf(locations[j].region) == -1) {\n              allUniqueRegionsFromSelectedLocations.push(locations[j].region)\n            }\n          }\n          let allUniqueRegionsFromSelectedLocationsCommaSep = allUniqueRegionsFromSelectedLocations.join(\",\")\n          setRegionValue(allUniqueRegionsFromSelectedLocationsCommaSep)\n          action(\n            filterItem.filterName,\n            (regionValue) ? regionValue : '')\n        }}\n      />\n    </EmbedMethodHighlight>\n  )\n}\n","import React, { useState } from 'react';\nimport { Typography, Slider } from '@material-ui/core'\nimport { EmbedMethodHighlight } from '../Accessories/Highlight';\nconst { validIdHelper } = require('../../utils/tools');\n\n\nexport const RangeSlider = ({ apiContent, classes, action, filterItem }) => {\n\n  const [sliderValue, setSliderValue] = useState([]);\n\n  return (\n    <EmbedMethodHighlight classes={classes}\n      key={validIdHelper(`dashEmbed-${filterItem.label}`)} >\n      <Typography className={`${classes.heading} ${classes.ml12}  ${classes.verticalAlignTop}`}>\n        {filterItem.label}:\n        </Typography>\n      <Slider\n        value={sliderValue.length ? sliderValue : Array.isArray(apiContent) ? [apiContent[0].label, apiContent[apiContent.length - 1].label] : []}\n        onChange={(event, newValue) => {\n          setSliderValue(newValue);\n        }}\n        valueLabelDisplay=\"auto\"\n        aria-labelledby=\"range-slider\"\n        onChangeCommitted={(event, newValue) => {\n          action(\n            filterItem.filterName,\n            (newValue) ? `[${newValue}]` : '[]')\n        }}\n        min={Array.isArray(apiContent) && apiContent.length ? apiContent[0].label : 0}\n        max={Array.isArray(apiContent) && apiContent.length ? apiContent[apiContent.length - 1].label : 0}\n        disabled={Array.isArray(apiContent) && apiContent.length ? false : true}\n      />\n    </EmbedMethodHighlight>\n  )\n}\n","import _ from 'lodash';\nimport React, { useState } from 'react';\nimport { Typography } from '@material-ui/core'\nimport { lifetimeRevenueTierMap, lifetimeRevenueTierIconMap } from './helpers';\nimport { ToggleButton, ToggleButtonGroup } from '@material-ui/lab';\nimport { EmbedMethodHighlight } from '../Accessories/Highlight';\nconst { validIdHelper } = require('../../utils/tools');\n\nexport const ToggleApi = ({ apiContent, classes, action, filterItem }) => {\n\n  const [lifetimeRevenueTierValue, setLifetimeRevenueTierValue] = useState('0-24');\n  return (\n    <EmbedMethodHighlight classes={classes}\n      key={validIdHelper(`dashEmbed-${filterItem.label}`)} >\n      <Typography className={`${classes.heading} ${classes.ml12}  ${classes.verticalAlignTop}`}\n      >\n        {filterItem.label}:\n        </Typography>\n      <ToggleButtonGroup\n        value={lifetimeRevenueTierValue}\n        exclusive //for now\n        onChange={(event, newValue) => {\n          setLifetimeRevenueTierValue(newValue)\n          action(\n            filterItem.filterName,\n            (newValue) ? newValue : '')\n        }}\n        aria-label=\"ageTier\"\n        className={classes.w100}>\n        {Array.isArray(apiContent) ? apiContent.map((ageTier, index) => {\n          if (ageTier.label !== \"Undefined\") {\n            const Icon = lifetimeRevenueTierIconMap[ageTier.label];\n            return (\n              <ToggleButton\n                key={validIdHelper(`$FilterBar-ToggleButton-${filterItem.label}-${index}`)}\n                value={ageTier.label}\n                aria-label={ageTier.label}\n                className={classes.w33}>\n                <Icon className={classes.mr12} />\n                {_.capitalize(lifetimeRevenueTierMap[ageTier.label]) || ageTier.label}\n              </ToggleButton>\n            )\n          }\n        }) : ''}\n      </ToggleButtonGroup>\n    </EmbedMethodHighlight>\n  )\n}\n","import _ from 'lodash'\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport clsx from 'clsx';\nimport { AppBar, Toolbar, Badge, Avatar, IconButton, Grid, Typography } from '@material-ui/core';\nimport { AddAlert, ChevronLeft, Menu } from '@material-ui/icons';\nimport { UserMenu } from './UserMenu';\nimport { AutoComplete } from '@pbl-demo/components/Filters';\nimport { appContextMap } from '../utils/tools';\nimport { ThemeProvider } from '@material-ui/core/styles';\n\nexport const TopBar = ({ content, theme, classes }) => {\n  // console.log(\"TopBar\")\n  // console.log({ theme })\n  // console.log({ content })\n\n  let history = useHistory();\n\n  const { clientSession, setClientSession,\n    drawerOpen, setDrawerOpen,\n    sdk, corsApiCall, isReady } = useContext(appContextMap[process.env.REACT_APP_PACKAGE_NAME])\n  const { userProfile, lookerUser } = clientSession;\n\n  const { packageName } = clientSession\n  const [apiContent, setApiContent] = useState(undefined);\n  const [dynamicSearch, setDynamicSearch] = useState(undefined);\n\n  useEffect(() => {\n    // console.log(\"this use effect???\")\n    // console.log({ dynamicSearch })\n    if (isReady && content && content.hasOwnProperty(\"autocomplete\")) {\n      let isSubscribed = true\n      corsApiCall(retrieveAutocompleteOptions, [dynamicSearch]).then(response => {\n        if (isSubscribed) {\n          setApiContent(response)\n        }\n      })\n      return () => isSubscribed = false\n    }\n  }, [lookerUser, isReady, dynamicSearch]);\n\n  const retrieveAutocompleteOptions = async (inputValue) => {\n    // console.log(\"retrieveAutocompleteOptions\")\n    // console.log({ inputValue })\n\n\n    let autoComplteInfo = content.autocomplete;\n    let queryToUse = autoComplteInfo.inlineQuery;\n    if (inputValue) {\n      queryToUse.filters[\"person._search\"] = `%${inputValue}%`\n    }\n    let lookerResponseData = await sdk.ok(sdk.run_inline_query({ result_format: autoComplteInfo.resultFormat || \"json\", body: queryToUse }))\n    let apiContentObj = {}\n    let queryResultsForDropdown = [];\n    for (let i = 0; i < lookerResponseData.length; i++) {\n      let formattedLabel = autoComplteInfo.formattedLabel.map(field => lookerResponseData[i][field]).join(\", \")\n      let value = autoComplteInfo.value.map(value => lookerResponseData[i][value]).toString();\n      queryResultsForDropdown.push({\n        'value': value,\n        'label': formattedLabel,\n        'trend': (lookerResponseData[i]['trend']) ? lookerResponseData[i]['trend'] : undefined\n      })\n    };\n    apiContentObj[\"autocomplete\"] = queryResultsForDropdown\n    return apiContentObj;\n  }\n\n  const filterNamesUrlsMap = {\n    \"Person ID\": \"households\"\n  }\n\n  return (\n    <ThemeProvider theme={theme}>\n      <AppBar\n        position=\"fixed\"\n        className={clsx(classes.appBar)}\n      >\n        <Toolbar>\n          <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            onClick={() => setDrawerOpen(!drawerOpen)}\n            edge=\"start\"\n          >\n            {drawerOpen ? <ChevronLeft /> : <Menu />}\n          </IconButton>\n\n          {packageName ?\n            <Avatar alt=\"Icon\"\n              src={require(`../../${process.env.REACT_APP_PACKAGE_NAME}/src/images/logo.svg`).default}\n              style={{ fill: \"white\", height: \"40px\" }}\n              variant=\"square\"\n            /> : ''}\n\n          {content.label ? <Typography className={classes.ml12} variant=\"h6\">{content.label}</Typography> : \"\"}\n\n          {apiContent && apiContent.autocomplete ?\n            <Grid item sm={6} className={`${classes.mlAuto} ${classes.mr12}`}>\n              <AutoComplete\n                filterItem={content.autocomplete}\n                apiContent={apiContent.autocomplete}\n                action={(filterName, newValue) => {\n                  if (filterName && newValue) {\n                    history.push({\n                      pathname: filterNamesUrlsMap[filterName],\n                      search: (`${encodeURIComponent(filterName)}=${newValue}`)\n                    })\n                  }\n                }}\n                classes={classes}\n                bgColor={\"white\"}\n                setDynamicSearch={setDynamicSearch}\n              /></Grid> : \"\"}\n\n          <Badge badgeContent={3} color=\"error\" className={apiContent && apiContent.autocomplete ? `${classes.mr12}` : `${classes.mlAuto} ${classes.mr12}`} >\n            <AddAlert />\n          </Badge>\n          <UserMenu classes={classes} content={content.usermenu} />\n        </Toolbar>\n      </AppBar>\n    </ThemeProvider>\n  )\n}\n\n","import React, { useContext } from 'react';\nimport { AppBar, Toolbar, Button } from '@material-ui/core';\nimport { Code, HighlightOutlined } from '@material-ui/icons';\nimport { appContextMap } from '../utils/tools';\n\n\nexport const BottomBar = ({ classes }) => {\n  // console.log('BottomBar')\n\n  const { highlightShow, setHighlightShow,\n    codeShow, setCodeShow } = useContext(appContextMap[process.env.REACT_APP_PACKAGE_NAME])\n\n  return (\n    <AppBar position=\"fixed\" color=\"transparent\" className={classes.appBarBottom} >\n      <Toolbar variant=\"dense\">\n        <Button\n          className={`${classes.mlAuto} ${classes.mr12}`}\n          display=\"inline\"\n          startIcon={<HighlightOutlined />}\n          onClick={() => {\n            if (codeShow) setCodeShow(!codeShow)\n            setHighlightShow(!highlightShow)\n          }\n          }>Source\n    </Button>\n        <Button\n          display=\"inline\"\n          startIcon={<Code />}\n          onClick={() => {\n            if (highlightShow) setHighlightShow(!highlightShow)\n            setCodeShow(!codeShow)\n          }}>Code\n      </Button>\n      </Toolbar>\n    </AppBar >\n  );\n}\n","import React, { useState, useEffect, useContext } from 'react';\nimport { ApiHighlight } from './Accessories/Highlight';\nimport { Typography, Card, CircularProgress, Grid, Chip } from '@material-ui/core';\nimport { ResponsiveLine } from '@nivo/line';\nimport { validIdHelper, decodeHtml, appContextMap } from '../utils/tools';\n\nexport function SparkLine({ lookerContentItem, classes }) {\n  // console.log('SparkLine')\n  const [apiContent, setApiContent] = useState(undefined);\n  const { clientSession, sdk, corsApiCall, isReady } = useContext(appContextMap[process.env.REACT_APP_PACKAGE_NAME]);\n  const { userProfile, lookerUser } = clientSession;\n\n  let dataObjForSparkline = {}\n\n  useEffect(() => {\n    if (isReady) {\n      let isSubscribed = true\n      corsApiCall(runInlineQuery).then(response => {\n        if (isSubscribed) {\n          setApiContent(response)\n        }\n      })\n      return () => isSubscribed = false\n    }\n  }, [lookerUser, isReady])\n\n  const runInlineQuery = async () => {\n\n    // setApiContent(undefined)\n    let { inlineQuery } = lookerContentItem;\n    let lookerResponseData = await sdk.ok(sdk.run_inline_query({ result_format: lookerContentItem.resultFormat || 'json', body: inlineQuery }));\n    dataObjForSparkline.id = validIdHelper(`singleVisValue-${lookerContentItem.id}`);\n    dataObjForSparkline.data = [];\n\n    let dataArrForDataObj = [];\n    lookerResponseData.map(item => {\n      if (item[lookerContentItem.inlineQuery.fields[0]]\n        // && item['order_items.count']['order_items.previous_period'][\"This Period\" ? \"This Period\" : \"Previous Period\"]\n      ) {\n        let thisDataItem = {\n          \"x\": item[lookerContentItem.inlineQuery.fields[0]].toString(),\n          \"y\": item[lookerContentItem.inlineQuery.fields[1]] || 0,\n          \"change\": item.change\n        }\n        if (thisDataItem && thisDataItem.y !== \"null\") dataArrForDataObj.push(thisDataItem)\n      }\n    })\n    dataObjForSparkline.data = [...dataArrForDataObj]\n    //setApiContent([dataObjForSparkline])\n    return [dataObjForSparkline]\n  }\n\n  const upOrDownArrow = apiContent && apiContent.length ? isNaN((apiContent[0].data[0].change * 100).toFixed(2)) ? '' : parseInt((apiContent[0].data[0].change * 100).toFixed(0)) >= 0 ? `&uarr;` : `&darr;` : '';\n  /**\n   * TO DO\n   * convert to using rendered value the way single value does\n   */\n  const labelText = !apiContent ? '' : lookerContentItem.chipFormat === \"revenue\" ?\n    `$${(apiContent[0].data && apiContent[0].data[0] ? apiContent[0].data[0].y.toFixed(2) : '').replace(/\\d(?=(\\d{3})+\\.)/g, '$&,')}` :\n    lookerContentItem.chipFormat === \"integer\" ? parseInt(apiContent[0].data && apiContent[0].data[0] ? apiContent[0].data[0].y.toFixed(2) : '') : lookerContentItem.chipFormat === 'percent' ?\n      `${((apiContent[0].data && apiContent[0].data[0] ? apiContent[0].data[0].y.toFixed(2) : '') * 100)\n      }% `\n      : '';\n  return (\n    <Card className={`${classes.padding15} \n    ${classes.overflowHidden} \n    ${classes.lookerCardShadow}\n    `}\n    >\n      <div\n        style={{\n          height: lookerContentItem.height,\n        }}\n      >\n        {apiContent ?\n          <React.Fragment>\n            <ApiHighlight height={130} classes={classes} >\n              <Grid container className={`${classes.textCenter} `}>\n                <Grid item sm={12}>\n                  <Typography variant=\"body2\" align=\"left\" color=\"secondary\">\n                    {lookerContentItem.label}\n                  </Typography>\n                </Grid>\n                <Grid item sm={6}>\n                  <Typography variant=\"subtitle1\" align=\"left\">\n                    <b>{labelText}</b>\n                  </Typography>\n                </Grid>\n                <Grid item sm={6}>\n                  <Chip size=\"small\"\n                    label={`${decodeHtml(upOrDownArrow)} ${parseInt(apiContent[0].data[0].change * 100).toFixed(0)}% `}\n                    className={isNaN((apiContent[0].data[0].change * 100).toFixed(2)) ? '' : parseInt((apiContent[0].data[0].change * 100).toFixed(0)) >= 0 ? classes.greenPos : classes.redNeg}\n                    display=\"inline\"\n                    align=\"right\"\n                  />\n                </Grid>\n              </Grid>\n              <ResponsiveLine\n                data={apiContent}\n                margin={{ top: 10, right: 25, bottom: 50, left: 25 }}\n                xScale={{\n                  type: 'time',\n                  format: '%Y-%m-%d',\n                  precision: 'day',\n                }}\n                yScale={{ type: 'linear', min: 'auto', max: 'auto', stacked: true, reverse: false }}\n                axisLeft={{\n                  orient: \"left\",\n                  tickSize: 0,\n                  tickPadding: 5,\n                  tickRotation: 0,\n                  format: () => null\n                }}\n                axisBottom={{\n                  orient: \"bottom\",\n                  tickSize: 0,\n                  tickPadding: 5,\n                  tickRotation: 0,\n                  format: () => null,\n                }}\n                enablePoints={false}\n                enableGridX={false}\n                enableGridY={false}\n                height={100}\n                colors={lookerContentItem.visColor}\n                animate={true}\n              />\n            </ApiHighlight>\n          </React.Fragment>\n          :\n          <Grid item sm={12} className={`${classes.flexCentered} `} style={{ height: lookerContentItem.height }}>\n            <CircularProgress className={classes.circularProgress}\n              style={{ color: `${lookerContentItem.visColor} ` }} />\n          </Grid>\n        }\n      </div >\n    </Card >\n  );\n}","import React, { useState, useEffect, useContext } from 'react';\nimport { Box, Grid, Card } from '@material-ui/core'\nimport { Loader, CodeFlyout } from '@pbl-demo/components/Accessories'\nimport { appContextMap, validIdHelper } from '../utils/tools';\nimport { useStyles, topBarBottomBarHeight, additionalHeightForFlyout } from './styles.js';\n\nexport const SplashPage = (props) => {\n\n  const [iFrameExists] = useState(1);\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\n  const { clientSession: { lookerUser, lookerHost } } = useContext(appContextMap[process.env.REACT_APP_PACKAGE_NAME])\n  const { staticContent: { lookerContent }, staticContent: { type } } = props;\n  const classes = useStyles();\n  const demoComponentType = type || 'code flyout';\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", () => setHeight((window.innerHeight - topBarBottomBarHeight)));\n  }, [lookerContent]);\n\n\n  return (\n    <div className={`${classes.root}`}\n      style={{ height }}>\n      <Card elevation={1} className={`${classes.padding15} ${classes.height100Percent} ${classes.overflowScroll}`}>\n        <Grid container\n          key={validIdHelper(type)}>\n          <div className={classes.root}>\n            <Loader hide={iFrameExists} classes={classes} height={height} />\n\n            <Box className={iFrameExists ? `` : `${classes.hidden}`}>\n              <Grid container\n                spacing={3}\n                key={`${validIdHelper(demoComponentType + '-outerFragment')}`}\n                className={`${classes.noContainerScroll}`}\n              >\n                <CodeFlyout {...props}\n                  classes={classes}\n                  lookerUser={lookerUser}\n                  height={height - additionalHeightForFlyout}\n                />\n                {lookerContent.map((lookerContentItem, innerIndex) => {\n                  const ComponentToRender = lookerContentItem.component\n                  return (\n                    <Grid\n                      key={`${validIdHelper(demoComponentType + '-innerFragment-' + innerIndex)}`}\n                      item\n                      sm={parseInt(lookerContentItem.gridWidth)}\n                    >\n                      {ComponentToRender ? <ComponentToRender {...{ lookerContentItem, classes, demoComponentType, lookerHost }} /> : \"\"}\n                    </Grid>\n                  )\n                })}\n              </Grid>\n            </Box >\n          </div >\n        </Grid >\n      </Card >\n    </div >\n  )\n}","import _ from 'lodash'\nimport React, { useContext, useEffect } from 'react';\nimport { GoogleLogin } from 'react-google-login';\nimport { useStyles, topBarBottomBarHeight, additionalHeightForFlyout } from './styles.js';\n// import '../Home.css';\nimport { Grid, Card, CardActions, CardContent, Typography } from '@material-ui/core'\n// import { SignInContent } from '../../config'\nimport { writeNewSession, createSdkHelper } from '@pbl-demo/components/Utils/auth';\nconst { validIdHelper, appContextMap, validateContent } = require('../utils/tools');\n// import { initialUser } from './LookerHelpers/'\n\nexport const SignIn = ({ content, initialUser }) => {\n  console.log('SignIn');\n  console.log({ content })\n  console.log({ initialUser })\n\n  let { clientSession, setClientSession, sdk, setSdk, initialHref, setInitialHref } = useContext(appContextMap[process.env.REACT_APP_PACKAGE_NAME]);\n  const { packageName } = clientSession;\n  const { signInBackgroundImage, signInLogo } = content\n\n  const responseGoogle = async (response) => {\n    if (response.error) {\n    } else {\n      let newSession = await writeNewSession({ ...clientSession, userProfile: response.profileObj, lookerUser: initialUser }) //initialLookerUser\n\n      const lookerBaseUrl = newSession.session.lookerBaseUrl ? newSession.session.lookerBaseUrl : '';\n      const accessToken = newSession.session.lookerApiToken ? newSession.session.lookerApiToken.api_user_token : '';\n      const sdk = createSdkHelper({ lookerBaseUrl, accessToken })\n\n      setClientSession(newSession.session);\n      setSdk(sdk)\n    }\n  }\n  const googleClientId = `${process.env.REACT_APP_GOOGLE_CLIENT_ID}.apps.googleusercontent.com`;\n\n  const classes = useStyles();\n  // const logoImage = packageName ? require(`../../images/logo_text.svg`).default : \"\";\n  // const backgroundImageInt = Math.floor(Math.random() * 4) + 1;\n  // const backgroundImage = packageName ? require(`../../images/background${backgroundImageInt}.jpg`).default : \"\";\n\n\n  return (\n    <div className={`${classes.root} demoComponent ${classes.h100}`}>\n      <Grid container\n        key={validIdHelper('sign in page')}\n        className={`${classes.h100}`}>\n        <Grid item sm={12} className={'sign-in-background-img'}\n          style={{\n            backgroundImage: `url(${signInBackgroundImage})`,\n            backgroundSize: 'cover'\n          }}\n        >\n          <Card className={classes.card}>\n            <div className={classes.cardCopy}>\n              {/* <img\n                src={logoImage}\n              /> */}\n              <CardContent >\n                <Typography variant=\"h5\" component=\"h2\">\n                  {content.cardHeader}\n                </Typography>\n                <Typography variant=\"body2\" component=\"p\">\n                  {content.cardBody}\n                </Typography>\n              </CardContent>\n              <CardActions className={`${classes.actions}`} >\n                <GoogleLogin\n                  clientId={googleClientId}\n                  buttonText=\"Login\"\n                  onSuccess={responseGoogle}\n                  onFailure={responseGoogle}\n                  cookiePolicy={'single_host_origin'}\n                />\n              </CardActions>\n            </div>\n          </Card>\n        </Grid>\n      </Grid>\n    </div >\n  )\n}","import HomeIcon from '@material-ui/icons/Home';\nimport {\n  EmbeddedQuery, SplashPage, Welcome, SparkLine, PopularAnalysis\n  // , VectorThumbnail \n} from '@pbl-demo/components'\n\nconst bestWorstAnalysis = {\n  \"id\": \"19\",\n  \"gridWidth\": 12,\n  \"height\": 160,\n  \"type\": \"welcome\",\n  \"inlineQueries\": [\n    {\n      \"model\": \"atom_fashion\",\n      \"view\": \"order_items\",\n      \"fields\": [\n        \"order_items.total_sale_price\",\n        \"order_items.created_week\",\n        \"products.category\"\n      ],\n      \"pivots\": [\n        \"order_items.created_week\"\n      ],\n      \"fill_fields\": [\n        \"order_items.created_week\"\n      ],\n      \"filters\": {\n        \"order_items.created_date\": \"2 weeks ago for 2 weeks\"\n      },\n      \"filter_expression\": null,\n      \"sorts\": [\n        \"order_items.total_sale_price desc 1\",\n        \"order_items.created_week 0\"\n      ],\n      \"limit\": \"1\",\n      \"dynamic_fields\": \"[{\\\"table_calculation\\\":\\\"change\\\",\\\"label\\\":\\\"%25 Change\\\",\\\"expression\\\":\\\"(pivot_index(${order_items.total_sale_price},2)-pivot_index(${order_items.total_sale_price},1))/pivot_index(${order_items.total_sale_price},1\\\\n  )\\\",\\\"value_format\\\":null,\\\"value_format_name\\\":\\\"percent_2\\\",\\\"_kind_hint\\\":\\\"supermeasure\\\",\\\"_type_hint\\\":\\\"number\\\"}]\"\n    },\n    {\n      \"model\": \"atom_fashion\",\n      \"view\": \"order_items\",\n      \"fields\": [\n        \"order_items.total_sale_price\",\n        \"order_items.created_week\",\n        \"products.category\"\n      ],\n      \"pivots\": [\n        \"order_items.created_week\"\n      ],\n      \"fill_fields\": [\n        \"order_items.created_week\"\n      ],\n      \"filters\": {\n        \"order_items.created_date\": \"2 weeks ago for 2 weeks\"\n      },\n      \"filter_expression\": null,\n      \"sorts\": [\n        \"order_items.total_sale_price 1\",\n        \"order_items.created_week 0\"\n      ],\n      \"limit\": \"1\",\n      \"dynamic_fields\": \"[{\\\"table_calculation\\\":\\\"change\\\",\\\"label\\\":\\\"%25 Change\\\",\\\"expression\\\":\\\"(pivot_index(${order_items.total_sale_price},2)-pivot_index(${order_items.total_sale_price},1))/pivot_index(${order_items.total_sale_price},1\\\\n  )\\\",\\\"value_format\\\":null,\\\"value_format_name\\\":\\\"percent_2\\\",\\\"_kind_hint\\\":\\\"supermeasure\\\",\\\"_type_hint\\\":\\\"number\\\"}]\"\n    }\n  ],\n  \"inlineQueriesMap\": [\n    \"best\",\n    \"worst\"\n  ],\n  \"resultFormat\": \"json\",\n  \"component\": Welcome\n}\n\n\nconst revenueByWeek = {\n  \"id\": \"18\",\n  \"gridWidth\": 3,\n  \"type\": \"spark line\",\n  \"height\": 120,\n  \"inlineQuery\": {\n    \"model\": \"atom_fashion\",\n    \"view\": \"order_items\",\n    \"fields\": [\n      \"order_items.created_week\",\n      \"order_items.total_gross_margin\"\n    ],\n    \"fill_fields\": [\n      \"order_items.created_week\"\n    ],\n    \"filters\": {\n      \"order_items.created_date\": \"12 weeks ago for 12 weeks\"\n    },\n    \"sorts\": [\n      \"order_items.created_week desc\"\n    ],\n    \"limit\": \"500\",\n    \"dynamic_fields\": \"[{\\\"table_calculation\\\":\\\"change\\\",\\\"label\\\":\\\"Week over Week %25 Change\\\",\\\"expression\\\":\\\"(${order_items.total_gross_margin}-offset(${order_items.total_gross_margin},1))/offset(${order_items.total_gross_margin},1)\\\",\\\"value_format\\\":null,\\\"value_format_name\\\":\\\"percent_2\\\",\\\"_kind_hint\\\":\\\"measure\\\",\\\"_type_hint\\\":\\\"number\\\"}]\"\n  },\n  \"resultFormat\": \"json\",\n  \"label\": \"Revenue by Week\",\n  \"visColor\": \"#4595EC\",\n  \"chipFormat\": \"revenue\",\n  \"component\": SparkLine\n}\n\nconst visitsByWeek =\n{\n  \"id\": \"20\",\n  \"gridWidth\": 3,\n  \"type\": \"spark line\",\n  \"height\": 120,\n  \"inlineQuery\": {\n    \"model\": \"atom_fashion\",\n    \"view\": \"web_events\",\n    \"fields\": [\n      \"events.event_week\",\n      \"events.sessions_count\"\n    ],\n    \"fill_fields\": [\n      \"events.event_week\"\n    ],\n    \"filters\": {\n      \"events.event_date\": \"12 weeks ago for 12 weeks\"\n    },\n    \"sorts\": [\n      \"events.event_week desc\"\n    ],\n    \"limit\": \"500\",\n    \"dynamic_fields\": \"[{\\\"table_calculation\\\":\\\"change\\\",\\\"label\\\":\\\"%25 Change\\\",\\\"expression\\\":\\\"(${events.sessions_count}-offset(${events.sessions_count},1))/offset(${events.sessions_count},1)\\\",\\\"value_format\\\":null,\\\"value_format_name\\\":\\\"percent_2\\\",\\\"_kind_hint\\\":\\\"measure\\\",\\\"_type_hint\\\":\\\"number\\\"}]\"\n  },\n  \"resultFormat\": \"json\",\n  \"label\": \"Visits by Week\",\n  \"visColor\": \"#F3A759\",\n  \"chipFormat\": \"integer\",\n  \"component\": SparkLine\n}\n\nconst bounceRateByWeek =\n{\n  \"id\": \"21\",\n  \"gridWidth\": 3,\n  \"type\": \"spark line\",\n  \"height\": 120,\n  \"inlineQuery\": {\n    \"model\": \"atom_fashion\",\n    \"view\": \"web_events\",\n    \"fields\": [\n      \"events.event_week\",\n      \"events.bounce_rate\"\n    ],\n    \"fill_fields\": [\n      \"events.event_week\"\n    ],\n    \"filters\": {\n      \"events.event_date\": \"12 weeks ago for 12 weeks\"\n    },\n    \"filter_expression\": null,\n    \"sorts\": [\n      \"events.event_week desc\"\n    ],\n    \"limit\": \"500\",\n    \"dynamic_fields\": \"[{\\\"table_calculation\\\":\\\"change\\\",\\\"label\\\":\\\"%25 Change\\\",\\\"expression\\\":\\\"(${events.bounce_rate}-offset(${events.bounce_rate},1))/offset(${events.bounce_rate},1)\\\",\\\"value_format\\\":null,\\\"value_format_name\\\":\\\"percent_2\\\",\\\"_kind_hint\\\":\\\"measure\\\",\\\"_type_hint\\\":\\\"number\\\"}]\"\n  },\n  \"resultFormat\": \"json\",\n  \"label\": \"Bounce Rate by Week\",\n  \"visColor\": \"#E24E3A\",\n  \"chipFormat\": \"percent\",\n  \"component\": SparkLine\n}\n\nconst averageTimeByWeek =\n{\n  \"id\": \"22\",\n  \"gridWidth\": 3,\n  \"type\": \"spark line\",\n  \"height\": 120,\n  \"inlineQuery\": {\n    \"model\": \"atom_fashion\",\n    \"view\": \"web_events\",\n    \"fields\": [\n      \"events.event_week\",\n      \"sessions.average_duration\"\n    ],\n    \"pivots\": null,\n    \"fill_fields\": [\n      \"events.event_week\"\n    ],\n    \"filters\": {\n      \"events.event_date\": \"12 weeks ago for 12 weeks\"\n    },\n    \"filter_expression\": null,\n    \"sorts\": [\n      \"events.event_week desc\"\n    ],\n    \"limit\": \"500\",\n    \"dynamic_fields\": \"[{\\\"table_calculation\\\":\\\"change\\\",\\\"label\\\":\\\"%25 Change\\\",\\\"expression\\\":\\\"(${sessions.average_duration}-offset(${sessions.average_duration},1))/offset(${sessions.average_duration},1)\\\",\\\"value_format\\\":null,\\\"value_format_name\\\":\\\"percent_2\\\",\\\"_kind_hint\\\":\\\"measure\\\",\\\"_type_hint\\\":\\\"number\\\"}]\"\n  },\n  \"resultFormat\": \"json\",\n  \"label\": \"Average Time on Site by Week\",\n  \"visColor\": \"#65AB5A\",\n  \"chipFormat\": \"integer\",\n  \"component\": SparkLine\n}\n\nconst embeddedQuery =\n{\n  \"gridWidth\": 8,\n  \"height\": 350,\n  \"type\": \"embeddedquery\",\n  \"id\": \"12\",\n  \"queryUrl\": \"embed/query/atom_fashion/order_items?fields=order_items.created_time,users.name,order_items.total_sale_price,users.approx_location,users.city&f[users.country]=USA&sorts=order_items.created_time+desc&limit=100&query_timezone=America%2FLos_Angeles&vis=%7B%22map_plot_mode%22%3A%22points%22%2C%22heatmap_gridlines%22%3Afalse%2C%22heatmap_gridlines_empty%22%3Afalse%2C%22heatmap_opacity%22%3A0.5%2C%22show_region_field%22%3Atrue%2C%22draw_map_labels_above_data%22%3Atrue%2C%22map_tile_provider%22%3A%22traffic_day%22%2C%22map_position%22%3A%22custom%22%2C%22map_scale_indicator%22%3A%22off%22%2C%22map_pannable%22%3Atrue%2C%22map_zoomable%22%3Atrue%2C%22map_marker_type%22%3A%22circle%22%2C%22map_marker_icon_name%22%3A%22shopping_cart%22%2C%22map_marker_radius_mode%22%3A%22proportional_value%22%2C%22map_marker_units%22%3A%22pixels%22%2C%22map_marker_proportional_scale_type%22%3A%22linear%22%2C%22map_marker_color_mode%22%3A%22fixed%22%2C%22show_view_names%22%3Afalse%2C%22show_legend%22%3Atrue%2C%22quantize_map_value_colors%22%3Afalse%2C%22reverse_map_value_colors%22%3Afalse%2C%22map_latitude%22%3A40.267214274019075%2C%22map_longitude%22%3A-94.70352172851564%2C%22map_zoom%22%3A4%2C%22map_marker_color%22%3A%5B%22%234595EC%22%5D%2C%22series_types%22%3A%7B%7D%2C%22type%22%3A%22looker_map%22%2C%22defaults_version%22%3A1%2C%22hidden_fields%22%3A%5B%22users.name%22%2C%22order_items.created_time%22%5D%7D&filter_config={}&origin=share-expanded&sdk=2&embed_domain=\",\n  \"title\": \"Most Recent Orders\",\n  \"component\": EmbeddedQuery\n}\n\nconst popularAnalysis = {\n  \"gridWidth\": 4,\n  \"height\": 350,\n  \"type\": \"popular analysis\",\n  \"vectors\": [\n    {\n      \"id\": \"9\",\n      \"type\": \"thumbnail\",\n      \"resourceType\": \"dashboard\",\n      \"lookerMethod\": \"vector_thumbnail\",\n      \"label\": \"Analytics\",\n      \"gridWidth\": \"4\",\n      \"url\": \"webanalytics\",\n      // \"component\": VectorThumbnail\n    },\n    {\n      \"id\": \"5\",\n      \"type\": \"thumbnail\",\n      \"resourceType\": \"dashboard\",\n      \"lookerMethod\": \"vector_thumbnail\",\n      \"label\": \"Sales\",\n      \"gridWidth\": \"4\",\n      \"url\": \"inventoryoverview\",\n      // \"component\": VectorThumbnail\n    },\n    {\n      \"id\": \"1\",\n      \"type\": \"thumbnail\",\n      \"resourceType\": \"dashboard\",\n      \"lookerMethod\": \"vector_thumbnail\",\n      \"label\": \"Inventory\",\n      \"gridWidth\": \"4\",\n      \"url\": \"salesoverview\",\n      // \"component\": VectorThumbnail\n    }\n  ],\n  \"label\": \"Popular analysis\",\n  \"component\": PopularAnalysis\n}\n\nexport const SplashPageContent = {\n  \"type\": \"splash page\",\n  \"label\": \"Home\",\n  \"description\": \"We're thrilled to have you on Atom Fashion - the premiere third party fashion marketplace for today's leading brands. Throughout this portal you will find a series of analytic content designed to help you maximize your performance.\",\n  \"menuCategory\": \"home\",\n  \"icon\": HomeIcon,\n  \"component\": SplashPage,\n  \"lookerContent\": [\n    bestWorstAnalysis,\n    revenueByWeek,\n    visitsByWeek,\n    bounceRateByWeek,\n    averageTimeByWeek,\n    embeddedQuery,\n    popularAnalysis\n  ],\n  \"requiredPermissionLevel\": 0\n}","import React, { useContext } from 'react';\nimport { Typography } from '@material-ui/core';\nimport { NaturalLanguage } from './NaturalLanguage';\nimport { validIdHelper, appContextMap } from '../utils/tools';\n\nexport function Welcome({ lookerContentItem, classes }) {\n  // console.log('Welcome')\n  const { clientSession } = useContext(appContextMap[process.env.REACT_APP_PACKAGE_NAME]);\n  const { userProfile } = clientSession\n\n  return (\n    <div\n      className={`${classes.overflowScroll} ${classes.padding15}`}\n      style={{ maxHeight: lookerContentItem.height }}\n    >\n      <Typography variant=\"h4\">Welcome back, {userProfile.givenName}!</Typography>\n      <br />\n      <>\n        {lookerContentItem.inlineQueries.map((inlineQuery, index) => (\n          <NaturalLanguage\n            key={`${validIdHelper('naturalLanguage-splashPage-' + index)}`}\n            {...{ lookerContentItem, inlineQuery, index, classes }}\n          />\n        )\n        )}\n      </>\n    </div >\n  );\n}\n","import $ from 'jquery';\nimport React, { useEffect, useState, useContext } from 'react';\nimport { LookerEmbedSDK } from '@looker/embed-sdk'\nimport { Typography, Grid, Card, CircularProgress } from '@material-ui/core';\nimport { EmbedHighlight } from './Accessories/Highlight';\nimport { appContextMap, validIdHelper } from '../utils/tools';\nimport { Loader } from \"./Accessories\";\n\n\nexport function EmbeddedQuery({ lookerContentItem, classes, id }) {\n  // console.log(\"EmbeddedQuery\")\n  // console.log({ lookerContentItem })\n\n  const [iFrameExists, setIFrame] = useState(0);\n  const { clientSession, isReady } = useContext(appContextMap[process.env.REACT_APP_PACKAGE_NAME])\n  const { lookerUser } = clientSession;\n\n\n  useEffect(() => {\n    console.log(\"useEffect outer\");\n    console.log({ lookerUser });\n    console.log({ isReady });\n    if (isReady) {\n      console.log(\"useEffect inner\");\n      fetchData()\n    }\n  }, [lookerUser, isReady])\n\n  const idToUse = validIdHelper(`embedContainer-${lookerContentItem.type}-${lookerContentItem.id}`);\n\n  const fetchData = async () => {\n    // console.log(\"fetchData\")\n    $(`#${idToUse}`).html('')\n    setIFrame(0)\n\n    let queryUrl = encodeURIComponent(`${lookerContentItem.queryUrl}${document.location.origin}`)\n    await fetch(`/auth?src=${queryUrl}`)\n      .then(response => response.json())\n      .then(data => {\n\n        LookerEmbedSDK.createExploreWithUrl(data.url)\n          .appendTo(document.getElementById(idToUse))\n          .withClassName('explore')\n          .withClassName('splashPage')\n          .withClassName(lookerContentItem.id)\n          .withTheme('atom_fashion')\n          .build()\n          .connect()\n          .then((explore) => {\n            setIFrame(1)\n            let modifiedBaseUrl = clientSession.lookerBaseUrl.substring(0, clientSession.lookerBaseUrl.lastIndexOf(\":\"));\n            console.log({ modifiedBaseUrl })\n            LookerEmbedSDK.init(modifiedBaseUrl)\n          })\n          .catch((error) => {\n            // console.log('catch', error)\n          })\n      }).then(() => {\n        setIFrame(1)\n      })\n  }\n\n  return (\n    <Card className={`${classes.padding15} ${classes.overflowHidden} ${classes.lookerCardShadow}`}>\n\n      <Loader\n        hide={iFrameExists}\n        classes={classes}\n        height={lookerContentItem} />\n\n      <div\n        className={`${classes.overflowYScroll}`}\n        style={{ height: lookerContentItem.height }}\n      >\n        <Grid container\n          spacing={0}>\n          <Grid item sm={12}>\n            <Typography variant=\"h6\" align=\"center\" color=\"secondary\">\n              {lookerContentItem.title}\n            </Typography>\n          </Grid>\n\n          <Grid container\n            spacing={0}\n            alignItems=\"center\"\n            alignContent=\"center\"\n            justify=\"center\"\n          >\n            <Grid item sm={12}>\n              <EmbedHighlight\n                classes={classes}>\n                <div\n                  className={`embedContainer embedContainerNoHeader splashPage \n                 ${classes.overflowHidden} ${classes.maxHeight80Percent}`}\n                  id={idToUse}\n                  key={idToUse}\n                >\n                </div>\n              </EmbedHighlight>\n            </Grid>\n          </Grid>\n        </Grid>\n      </div >\n    </Card>\n  );\n}","import React from 'react';\nimport { Grid } from '@material-ui/core'\nimport { AutoComplete, ToggleTile, ToggleVisColor, SwitchTheme, SelectFont, MapFilter, RangeSlider, ToggleApi } from \"@pbl-demo/components/Filters\";\n\nconst { validIdHelper } = require('../../../tools');\n\nexport default function FilterBarChildren({ classes, apiContent, customFilterAction, tileToggleValue, handleTileToggle, visColorToggleValue,\n  handleVisColorToggle, lightThemeToggleValue, fontThemeSelectValue, handleThemeChange, horizontalLayout, lookerContent, type\n}) {\n  return (\n    <Grid\n      container spacing={3}>\n      {lookerContent[0].filters.map((filterItem, index) => {\n        return (\n          filterItem.component === 'autocomplete' ?\n            <Grid\n              item sm={horizontalLayout ? 3 : 12}\n              key={validIdHelper(`${type}-${filterItem.component}-${index}`)}>\n              <AutoComplete\n                apiContent={apiContent[filterItem.component]} //new\n                index={index}\n                classes={classes}\n                action={customFilterAction}\n                filterItem={filterItem}\n              />\n            </Grid>\n\n            : filterItem.component === 'togglebutton' ?\n\n              <Grid item sm={horizontalLayout ? 3 : 12}\n                key={validIdHelper(`${type}-${filterItem.label}`)}>\n                {filterItem.label === \"Dynamic Tiles\" ?\n                  <ToggleTile\n                    classes={classes}\n                    tileToggleValue={tileToggleValue}\n                    handleTileToggle={handleTileToggle}\n                    filterItem={filterItem}\n                  /> :\n                  <ToggleVisColor\n                    classes={classes}\n                    visColorToggleValue={visColorToggleValue}\n                    handleVisColorToggle={handleVisColorToggle}\n                    filterItem={filterItem}\n                  />}\n              </Grid>\n              :\n              filterItem.component === 'switch' ?\n\n                <Grid item sm={horizontalLayout ? 1 : 12}\n                  key={validIdHelper(`${type}-dynamicThemeMode`)}>\n                  <SwitchTheme\n                    classes={classes}\n                    lightThemeToggleValue={lightThemeToggleValue}\n                    handleThemeChange={handleThemeChange}\n                  />\n                </Grid>\n                :\n                filterItem.component === \"select\" ? <Grid item sm={horizontalLayout ? 2 : 12}\n                  key={validIdHelper(`${type}-dynamicThemeFont`)}>\n                  <SelectFont\n                    classes={classes}\n                    fontThemeSelectValue={fontThemeSelectValue}\n                    handleThemeChange={handleThemeChange}\n                    filterItem={filterItem}\n                  />\n                </Grid> :\n                  filterItem.component === 'mapfilter' ?\n\n                    <Grid item sm={horizontalLayout ? 3 : 12}\n                      key={validIdHelper(`${type}-${filterItem.component}-${index}`)}>\n                      <MapFilter\n                        classes={classes}\n                        action={customFilterAction}\n                        filterItem={filterItem}\n                      />\n                    </Grid>\n                    : filterItem.component === 'rangeslider' ?\n                      <Grid item sm={horizontalLayout ? 3 : 12}\n                        key={validIdHelper(`${type}-${filterItem.component}-${index}`)}>\n                        <RangeSlider\n                          apiContent={apiContent[filterItem.component]}\n                          classes={classes}\n                          action={customFilterAction}\n                          filterItem={filterItem}\n                        />\n                      </Grid>\n                      : filterItem.component === 'togglebuttonapi' ?\n                        <Grid item sm={horizontalLayout ? 3 : 12}\n                          key={validIdHelper(`${type}-${filterItem.component}-${index}`)}>\n                          <ToggleApi\n                            apiContent={apiContent[filterItem.component]}\n                            classes={classes}\n                            action={customFilterAction}\n                            filterItem={filterItem}\n                          />\n                        </Grid>\n                        :\n                        '')\n      })}\n    </Grid>\n  )\n}\n","import _ from 'lodash'\nimport React, { useState, useEffect } from 'react';\nimport { Grid, Accordion, AccordionSummary, AccordionDetails, Box } from '@material-ui/core'\nimport { ExpandMore, VerticalSplit, HorizontalSplit, ChevronLeft, Menu } from '@material-ui/icons';\nimport FilterBarChildren from './FilterBarChildren'\n\nconst { validIdHelper } = require('../../../tools');\n\nexport default function FilterBar(props) {\n  const { staticContent: { lookerContent }, staticContent: { type }, classes,\n    apiContent, customFilterAction, tileToggleValue, handleTileToggle, visColorToggleValue,\n    handleVisColorToggle, lightThemeToggleValue, fontThemeSelectValue, handleThemeChange,\n    horizontalLayout, setHorizontalLayout, drawerOpen, setDrawerOpen\n  } = props;\n\n\n  const [expanded, setExpanded] = useState(true);\n\n  useEffect(() => {\n    if (!expanded) setExpanded(true)\n  }, [horizontalLayout])\n\n\n  return (\n    <Grid item\n      sm={horizontalLayout ? 12 : drawerOpen ? 3 : 'auto'}\n      key={validIdHelper(`${type}-FilterBar-${lookerContent[0].id}`)}>\n      {apiContent ?\n        <Accordion\n          onChange={horizontalLayout ? () => setExpanded(!expanded) : () => { }}\n          expanded={expanded}\n          className={`${classes.w100} MuiExpansionPanel-root`}\n          elevation={0}\n        >\n          <AccordionSummary\n            expandIcon={horizontalLayout ? <ExpandMore /> : \"\"}\n            aria-controls=\"panel1a-content\"\n            id=\"panel1a-header\"\n          >\n            {horizontalLayout ?\n              <VerticalSplit\n                onClick={(e) => {\n                  setHorizontalLayout(!horizontalLayout)\n                }}\n                aria-label=\"vertical view\"\n              />\n              :\n              <>\n                {drawerOpen ?\n                  <>\n                    <ChevronLeft\n                      onClick={() => setDrawerOpen(!drawerOpen)}\n                      aria-label=\"close menu\"\n                    />\n                    <HorizontalSplit\n                      onClick={(e) => {\n                        setExpanded(true)\n                        setHorizontalLayout(!horizontalLayout)\n                      }}\n                      aria-label=\"horizontal view\" />\n                  </> :\n                  <Menu\n                    onClick={() => setDrawerOpen(!drawerOpen)}\n                    aria-label=\"open menu\"\n                  />}\n              </>}\n\n          </AccordionSummary>\n          <Box display={drawerOpen ? \"block\" : \"none\"}>\n            <AccordionDetails >\n              <FilterBarChildren {...props}\n                classes={classes}\n                apiContent={apiContent}\n                customFilterAction={customFilterAction}\n                tileToggleValue={tileToggleValue}\n                handleTileToggle={handleTileToggle}\n                visColorToggleValue={visColorToggleValue}\n                handleVisColorToggle={handleVisColorToggle}\n                lightThemeToggleValue={lightThemeToggleValue}\n                fontThemeSelectValue={fontThemeSelectValue}\n                handleThemeChange={handleThemeChange}\n                horizontalLayout={horizontalLayout}\n                setHorizontalLayout={setHorizontalLayout}\n                lookerContent={lookerContent}\n                type={type}\n              />\n            </AccordionDetails>\n          </Box>\n\n        </Accordion >\n        :\n        \"\"\n      }\n    </Grid>\n  )\n}\n\n\n","import React from 'react'\nimport { Grid, Box } from '@material-ui/core';\nimport { EmbedHighlight } from \"@pbl-demo/components/Accessories\";\n\nconst { validIdHelper } = require('../../../tools');\n\nexport default function EmbeddedDashboardContainer({ classes, lookerContent, type, width }) {\n  return (\n    <Grid item\n      sm={width}\n    >\n      <Box className={`${classes.w100} ${classes.padding10}`} mt={lookerContent[0].filter || lookerContent[0].dynamicFieldLookUp ? 2 : 0}>\n        <EmbedHighlight classes={classes}>\n          <div\n            className={`embedContainer ${validIdHelper(type)}`}\n            id={validIdHelper(`embedContainer-${type}-${lookerContent[0].id}`)}\n            key={validIdHelper(`embedContainer-${type}-${lookerContent[0].id}`)}\n          >\n          </div>\n        </EmbedHighlight>\n      </Box>\n    </Grid>\n  )\n}\n","import { makeStyles } from '@material-ui/core/styles';\nimport { red, green } from '@material-ui/core/colors';\n\nconst redPrimary = red[500];\nconst greenPrimary = green[500];\nconst redLight = red[100];\nconst greenLight = green[100];\n\nexport const topBarBottomBarHeight = 140;\nexport const additionalHeightForFlyout = 15; //hack for now\n\nexport const useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    overflow: 'scroll',\n    borderRadius: 8\n  },\n  flexCentered: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  hidden: {\n    visibility: 'hidden',\n    position: 'absolute', //hack for obscuring other elements within Box\n    zIndex: -1\n  },\n  tabs: {\n    backgroundColor: 'white',\n    color: '#6c757d'\n  },\n  dNone: {\n    display: 'none'\n  },\n  dBlock: {\n    display: 'block'\n  },\n  tree: {\n    height: 240,\n    flexGrow: 1,\n    maxWidth: 400,\n  },\n  icon: {\n    marginRight: 12,\n    fontSize: '1rem',\n    overflow: 'visible'\n  },\n  mt12: {\n    marginTop: 12\n  },\n  w100: {\n    width: '100%'\n  },\n  mlAuto: {\n    marginLeft: 'auto'\n  },\n  mrAuto: {\n    marginRight: 'auto'\n  },\n  skeleton: {\n    minWidth: 275,\n    minHeight: 600,\n  },\n  card: {\n    minWidth: 275,\n  },\n  padding30: {\n    padding: 30\n  },\n  minHeight680: {\n    minHeight: 680,\n  },\n  maxHeight200: {\n    maxHeight: 200,\n    height: 200,\n    overflow: 'hidden'\n  },\n  mt30: {\n    marginTop: 30\n  },\n  mb30: {\n    marginBottom: 30\n  },\n  textCenter: {\n    textAlign: 'center'\n  },\n  cursorPointer: {\n    cursor: 'pointer'\n  },\n  border: {\n    border: '1px solid black'\n  },\n  height800: {\n    height: 800\n  },\n  maxHeight100: {\n    maxHeight: 100,\n    height: 100,\n  },\n  maxHeight400: {\n    maxHeight: 400,\n    height: 400,\n  },\n  minHeight200: {\n    minHeight: 200,\n    overflow: 'scroll'\n  },\n  redNeg: {\n    backgroundColor: redLight,\n    color: redPrimary,\n    fontWeight: 800\n  },\n  greenPos: {\n    backgroundColor: greenLight,\n    color: greenPrimary,\n    fontWeight: 800\n  },\n  padding30: {\n    padding: 30\n  },\n  mb12: {\n    marginBottom: 12\n  },\n  overflowScroll: {\n    overflow: 'scroll'\n  },\n  overflowHidden: {\n    overflow: 'hidden'\n  },\n  overflowVisible: {\n    overflow: 'visible'\n  },\n  maxHeight150: {\n    maxHeight: 150,\n    height: 150,\n  },\n  minHeight150: {\n    minHeight: 150,\n    overflow: 'scroll'\n  },\n  carouselLegend: {\n    backgroundColor: 'rgb(192,192,192, .5)\t !important',\n    textAlign: 'center !important',\n    opacity: `100 !important`,\n    fontWeight: 800,\n    // width: `${25}% !important`,\n  },\n  carouselLegendTitle: {\n    fontSize: '24px !important',\n\n  },\n  carouselLegendBody: {\n    fontSize: '16px !important',\n  },\n  positionRelative: {\n    position: 'relative'\n  },\n  padding15: {\n    padding: 15\n  },\n  maxHeight75: {\n    maxHeight: 75,\n    height: 75,\n  },\n  overflowYScroll: {\n    overflowY: 'scroll',\n    overflowX: 'hidden'\n  },\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n  },\n  padding20: {\n    padding: 20\n  },\n  positionFixedTopRight: {\n    position: 'fixed',\n    top: 88,\n    right: 24,\n    bottom: 0,\n    zIndex: 100,\n  },\n  codeFlyoutContainer: {\n    backgroundColor: 'rgb(40, 42, 54)',\n    overflow: 'scroll',\n    borderRadius: '0 8px 8px 0'\n  },\n  height100Percent: {\n    height: '100%'\n  },\n  noContainerScroll: {\n    width: '100%',\n    margin: 0\n  },\n  lookerCardShadow: {\n    border: 'none',\n    borderRadius: '6px',\n    boxShadow: 'rgba(0, 0, 0, 0.11) 0px 2px 12px, rgba(0, 0, 0, 0.04) 0px 1px 4px'\n  },\n  maxHeight60: {\n    maxHeight: 60,\n    height: 60,\n  },\n  maxHeight350: {\n    maxHeight: 350,\n    height: 350,\n  },\n  maxHeight80Percent: {\n    maxHeight: '80%',\n    height: '80%'\n  },\n  faSm: {\n    fontSize: '.75em'\n  },\n  mr12: {\n    marginRight: 12\n  },\n  ml12: {\n    marginLeft: 12\n  },\n  dot: {\n    height: \"25px\",\n    width: \"25px\",\n    borderRadius: \"50%\",\n    display: \"inline-block\"\n  },\n  borderRadius0: { borderRadius: 0 },\n  w33: {\n    width: \"33%\"\n  },\n  verticalAlignTop: {\n    verticalAlign: 'top'\n  },\n  padding10: {\n    padding: 10\n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  visuallyHidden: {\n    border: 0,\n    clip: 'rect(0 0 0 0)',\n    height: 1,\n    margin: -1,\n    overflow: 'hidden',\n    padding: 0,\n    position: 'absolute',\n    top: 20,\n    width: 1,\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  bluePrimary: {\n    backgroundColor: 'rgba(69, 149, 236, 1)'\n  },\n  blueSecondary: {\n    backgroundColor: 'rgba(69, 149, 236, .5)',\n  },\n  orangePrimary: {\n    backgroundColor: 'rgba(243, 167, 89, 1)'\n  },\n  orangeSecondary: {\n    backgroundColor: 'rgba(243, 167, 89, .5)'\n  },\n  positionTopRight: {\n    position: 'absolute',\n    top: -30,\n    right: -50,\n    bottom: 0,\n    zIndex: 100\n  },\n  bottomBarSpacer: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n  },\n  maxHeight600: {\n    maxHeight: 600,\n    overflow: 'scroll'\n  },\n  m12: {\n    margin: 12\n  },\n  m6: {\n    margin: 6\n  },\n}));","import $ from 'jquery';\nimport _ from 'lodash'\nimport React, { useState, useEffect, useContext, useCallback } from 'react';\nimport { useLocation } from \"react-router-dom\";\nimport { Grid, Card } from '@material-ui/core'\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { LookerEmbedSDK } from '@looker/embed-sdk'\nimport AppContext from '../../../contexts/AppContext';\nimport FilterBar from './FilterBar';\nimport EmbeddedDashboardContainer from './EmbeddedDashboardContainer';\nimport { Loader, CodeFlyout } from \"@pbl-demo/components/Accessories\";\nimport { useStyles, topBarBottomBarHeight, additionalHeightForFlyout } from '../styles.js';\nimport queryString from 'query-string';\n\nconst { validIdHelper } = require('../../../tools');\n\nexport default function Dashboard(props) {\n  // console.log('Dashboard');\n  const { clientSession, clientSession: { lookerUser }, sdk, corsApiCall, theme, isReady, selectedMenuItem } = useContext(AppContext)\n  const { staticContent: { lookerContent }, staticContent: { type } } = props;\n  const demoComponentType = type || 'code flyout';\n\n  const [iFrameExists, setIFrame] = useState(0);\n  const [apiContent, setApiContent] = useState(undefined);\n  const [dashboardObj, setDashboardObj] = useState({});\n  const [dashboardOptions, setDashboardOptions] = useState({});\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\n  const [tileToggleValue, setTileToggleValue] = useState('');\n  const [visColorToggleValue, setVisColorToggleValue] = useState('#2d4266');\n  const [lightThemeToggleValue, setLightThemeToggleValue] = useState(true);\n  const [fontThemeSelectValue, setFontThemeSelectValue] = useState(\"arial\");\n  const [expansionPanelHeight, setExpansionPanelHeight] = useState(0);\n  const [horizontalLayout, setHorizontalLayout] = useState(false);\n  const [drawerOpen, setDrawerOpen] = useState(true);\n\n  let dynamicVisConfigFilterItem = _.find(lookerContent[0].filters, { label: \"Dynamic Vis Config\" });\n  const isThemeableDashboard = dynamicVisConfigFilterItem && Object.keys(dynamicVisConfigFilterItem).length ? true : false;\n  const darkThemeBackgroundColor = theme.palette.fill.main;\n\n  const classes = useStyles();\n  const location = useLocation();\n\n\n\n  //condtional theming for dark mode :D\n  let paletteToUse = !lightThemeToggleValue && isThemeableDashboard ?\n    {\n      palette: {\n        type: 'dark',\n        background: { paper: darkThemeBackgroundColor, default: darkThemeBackgroundColor },\n      }\n    }\n    :\n    { palette: { ...theme.palette } }\n\n  const themeToUse = React.useMemo(\n    () =>\n      createMuiTheme(\n        paletteToUse\n      ),\n    [lightThemeToggleValue, lookerContent],\n  );\n\n  const handleTileToggle = (event, newValue) => {\n    let dynamicTileFilterItem = _.find(lookerContent[0].filters, { label: \"Dynamic Tiles\" });\n\n    if (dynamicTileFilterItem) {\n      setTileToggleValue(newValue)\n      const filteredLayout = _.filter(dashboardOptions.layouts[0].dashboard_layout_components, (row) => {\n        return (dynamicTileFilterItem.tileLookUp[newValue].indexOf(dashboardOptions.elements[row.dashboard_element_id].title) > -1)\n      })\n\n      const newDashboardLayout = {\n        ...dashboardOptions.layouts[0],\n        dashboard_layout_components: filteredLayout\n      }\n      dashboardObj.setOptions({ \"layouts\": [newDashboardLayout] })\n\n    }\n  };\n\n  const handleVisColorToggle = (event, newValue) => {\n    let dynamicVisConfigFilterItem = _.find(lookerContent[0].filters, { label: \"Dynamic Vis Config\" });\n    if (dynamicVisConfigFilterItem) {\n      let newColorSeries = dynamicVisConfigFilterItem.colors[newValue]\n      let newDashboardElements = { ...dashboardOptions.elements };\n\n      Object.keys(newDashboardElements).map(key => {\n        if (newDashboardElements[key].vis_config.series_colors) {\n          Object.keys(newDashboardElements[key].vis_config.series_colors).map((innerKey, index) => {\n            newDashboardElements[key].vis_config.series_colors[innerKey] = newColorSeries[index] || newColorSeries[0];\n          })\n        }\n        if (newDashboardElements[key].vis_config.custom_color) {\n          newDashboardElements[key].vis_config.custom_color = newColorSeries[newColorSeries.length - 2];\n        }\n        if (newDashboardElements[key].vis_config.map_value_colors) {\n          newDashboardElements[key].vis_config.map_value_colors.map((item, index) => {\n            newDashboardElements[key].vis_config.map_value_colors[index] = newColorSeries[index] || newColorSeries[0];\n          })\n        }\n        // loss some fidelity here\n        if (newDashboardElements[key].vis_config.series_cell_visualizations) {\n          Object.keys(newDashboardElements[key].vis_config.series_cell_visualizations).map((innerKey, index) => {\n            if (newDashboardElements[key].vis_config.series_cell_visualizations[innerKey].hasOwnProperty(\"palette\")) {\n              newDashboardElements[key].vis_config.series_cell_visualizations[innerKey][\"palette\"] = { ...dynamicVisConfigFilterItem.series_cell_visualizations[newValue] }\n            }\n          })\n        }\n        if (newDashboardElements[key].vis_config.header_font_color) {\n          newDashboardElements[key].vis_config.header_font_color = newColorSeries[newColorSeries.length - 2];\n        }\n        if (isThemeableDashboard) {\n          if (newDashboardElements[key].vis_config.map_tile_provider) {\n            newDashboardElements[key].vis_config.map_tile_provider = lightThemeToggleValue ? \"light\" : \"dark\";\n          }\n\n        }\n      })\n      setVisColorToggleValue(newValue)\n      dashboardObj.setOptions({ \"elements\": { ...newDashboardElements } })\n    }\n  };\n\n  const handleThemeChange = (event, newValue) => {\n    let themeName = '';\n    if (typeof newValue === \"boolean\") {//handleModeToggle\n      setLightThemeToggleValue(newValue)\n      themeName = newValue ? `light_${fontThemeSelectValue}` : `dark_${fontThemeSelectValue}`\n    } else { //handleFontToggle\n      themeName = lightThemeToggleValue ? `light_${newValue}` : `dark_${newValue}`\n      setFontThemeSelectValue(newValue)\n    }\n\n    corsApiCall(performLookerApiCalls, [lookerContent, themeName])\n  }\n\n  useEffect(() => {\n    console.log(\"useEffect outer\");\n    console.log({ lookerUser });\n    console.log({ isReady });\n    if (isReady) {\n      console.log(\"useEffect inner\")\n      let themeName = lightThemeToggleValue ? 'light' : 'dark';\n      themeName += `_${fontThemeSelectValue}`;\n      corsApiCall(performLookerApiCalls, [[...lookerContent], themeName])\n      setApiContent(undefined);\n      setHorizontalLayout(false);\n      setDrawerOpen(true);\n    }\n  }, [lookerUser, isReady, selectedMenuItem])\n\n  useEffect(() => {\n    if (Object.keys(dashboardOptions).length && Object.keys(dashboardObj).length\n    ) {\n      handleTileToggle(null, tileToggleValue ? tileToggleValue : \"Inventory\")\n      handleVisColorToggle(null, visColorToggleValue ? visColorToggleValue : '#2d4266');\n    }\n  }, [dashboardOptions]);\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", () => setHeight((window.innerHeight - topBarBottomBarHeight)));\n    setExpansionPanelHeight(horizontalLayout ? $('.MuiExpansionPanel-root:visible').innerHeight() || 0 : 0)\n  })\n\n  useEffect(() => {\n    setHeight((window.innerHeight - topBarBottomBarHeight));\n    setExpansionPanelHeight(horizontalLayout ? $('.MuiExpansionPanel-root:visible').innerHeight() || 0 : 0)\n  }, [horizontalLayout])\n\n  useEffect(() => {\n    setApiContent(undefined);\n  }, []);\n\n  const performLookerApiCalls = function (lookerContent, dynamicTheme) {\n\n    setIFrame(0)\n    $(`.embedContainer.${validIdHelper(demoComponentType)}:visible`).html('')\n    lookerContent.map(async lookerContentItem => {\n      //dashboard creation\n      let dashboardId = lookerContentItem.id;\n      let themeToUse = dynamicTheme && isThemeableDashboard ?\n        dynamicTheme :\n        lookerContentItem.theme ?\n          lookerContentItem.theme :\n          'atom_fashion';\n\n      LookerEmbedSDK.createDashboardWithId(dashboardId)\n        .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${dashboardId}`))\n        .withClassName('iframe')\n        .withNext()\n        .withTheme(themeToUse)\n        .withParams({ 'schedule_modal': 'true' })\n        .on('dashboard:loaded', (event) => {\n          setDashboardOptions(event.dashboard.options)\n        })\n        .build()\n        .connect()\n        .then((dashboard) => {\n          setIFrame(1)\n          setDashboardObj(dashboard)\n          let modifiedBaseUrl = clientSession.lookerBaseUrl.substring(0, clientSession.lookerBaseUrl.lastIndexOf(\":\"));\n          // more robust regex solution\n          // let modifiedBaseUrl = clientSession.lookerBaseUrl.replace(/:443$/, \"\")\n          LookerEmbedSDK.init(modifiedBaseUrl)\n        }).catch(error => {\n          console.log({ error })\n        });\n\n      //api calls\n      if (lookerContentItem.hasOwnProperty('filters') //&& !apiContent\n      ) {\n        // setApiContent(undefined)\n        // get inline query from usecase file & set user attribute dynamically\n        // iterating over filters\n        let apiContentObj = {}\n        lookerContentItem.filters.map(async (filterItem, index) => {\n          if (filterItem.inlineQuery) {\n            let jsonQuery = filterItem.inlineQuery\n            jsonQuery.filters = {\n              ...jsonQuery.filters,\n              [filterItem.desiredFilterName]: lookerUser.user_attributes.brand\n            };\n            let lookerResponseData = await sdk.ok(sdk.run_inline_query({ result_format: filterItem.resultFormat || 'json', body: jsonQuery }));\n            let queryResultsForDropdown = [];\n            let desiredProperty = Object.keys(lookerResponseData[0])[0];\n\n            for (let i = 0; i < lookerResponseData.length; i++) {\n              queryResultsForDropdown.push({\n                'label': lookerResponseData[i][desiredProperty],\n                'trend': (lookerResponseData[i]['trend']) ? lookerResponseData[i]['trend'] : undefined\n              })\n            }\n            apiContentObj[filterItem.component] = queryResultsForDropdown\n          }\n          setApiContent(apiContentObj)\n        })\n      }\n    })\n  }\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const customFilterAction = useCallback((filterName, newFilterValue) => {\n    if (Object.keys(dashboardObj).length) {\n      dashboardObj.updateFilters({ [filterName]: newFilterValue })\n      dashboardObj.run()\n    }\n  })\n\n\n  useEffect(() => {\n    let params = queryString.parse(location.search);\n    let paramMatchesFilterName = params[lookerContent[0].filterName] > 0 ? true : false;\n    if (paramMatchesFilterName)\n      customFilterAction(lookerContent[0].filterName, params[lookerContent[0].filterName])\n\n  }, [customFilterAction, location.search, lookerContent])\n\n  return (\n    <div className={`${classes.root} demoComponent`}\n      style={{ height }}\n    >\n      <ThemeProvider theme={themeToUse}>\n        <Card elevation={1} className={`${classes.padding15} ${classes.height100Percent}`}>\n          <div\n            className={`${classes.root} ${classes.height100Percent}`}\n          >\n            <Grid\n              container\n              spacing={3}\n            >\n              <Loader\n                hide={iFrameExists}\n                classes={classes}\n                height={height - expansionPanelHeight} />\n\n              {lookerContent[0].hasOwnProperty(\"filters\") ?\n\n                < FilterBar {...props}\n                  classes={classes}\n                  apiContent={apiContent}\n                  customFilterAction={customFilterAction}\n                  tileToggleValue={tileToggleValue}\n                  handleTileToggle={handleTileToggle}\n                  visColorToggleValue={visColorToggleValue}\n                  handleVisColorToggle={handleVisColorToggle}\n                  lightThemeToggleValue={lightThemeToggleValue}\n                  fontThemeSelectValue={fontThemeSelectValue}\n                  handleThemeChange={handleThemeChange}\n                  horizontalLayout={horizontalLayout}\n                  setHorizontalLayout={setHorizontalLayout}\n                  drawerOpen={drawerOpen}\n                  setDrawerOpen={setDrawerOpen}\n                />\n                :\n                ''}\n\n\n              <EmbeddedDashboardContainer\n                classes={classes}\n                lookerContent={lookerContent}\n                type={demoComponentType}\n                width={lookerContent[0].hasOwnProperty(\"filters\") ? horizontalLayout ? 12 : drawerOpen ? 9 : 12 : 12}\n              />\n\n              <CodeFlyout {...props}\n                classes={classes}\n                lookerUser={lookerUser}\n                height={height - expansionPanelHeight - additionalHeightForFlyout}\n              />\n\n            </Grid>\n          </div>\n        </Card>\n      </ThemeProvider >\n    </ div >\n  )\n}","import Dashboard from '../../components/Demo/Dashboard/Dashboard'\nimport TableChartOutlinedIcon from '@material-ui/icons/TableChartOutlined';\n\nconst productNameFilter = {\n  \"label\": \"Select Product Name\",\n  \"filterName\": \"Product Name\",\n  \"lookerMethod\": \"runInlineQuery\",\n  \"inlineQuery\": {\n    \"model\": \"atom_fashion\",\n    \"view\": \"order_items\",\n    \"fields\": [\n      \"products.item_name\"\n    ],\n    \"query_timezone\": \"America/Los_Angeles\"\n  },\n  \"desiredFilterNames\": \"products.brand\",\n  \"component\": \"autocomplete\",\n  \"resultFormat\": \"json\"\n}\n\nconst tilesFilter = {\n  \"label\": \"Dynamic Tiles\",\n  \"options\": [\n    \"Inventory\",\n    \"Orders\"\n  ],\n  \"value\": \"tileToggleValue\",\n  \"component\": \"togglebutton\",\n  \"tileLookUp\": {\n    \"Inventory\": [\n      \"Inventory On Hand\",\n      \"# of Items on Hand\",\n      \"Most Popular Out of Stock Items\",\n      \"Overstocked Items\",\n      \"Aging Inventory\"\n    ],\n    \"Orders\": [\n      \"# Orders Processing\",\n      \"Total Amount Processing\",\n      \"# Orders In Transit\",\n      \"Order Shipment Status\",\n      \"Open Orders to be Shipped\"\n    ]\n  }\n}\n\nconst visConfigFilter = {\n  \"label\": \"Dynamic Vis Config\",\n  \"options\": [\n    \"#2d4266\",\n    \"#43606b\",\n    \"#414c67\"\n  ],\n  \"value\": \"visColorToggleValue\",\n  \"component\": \"togglebutton\",\n  \"colors\": {\n    \"#2d4266\": [\n      \"#2d4266\",\n      \"#416098\",\n      \"#5780cd\",\n      \"#6391e8\"\n    ],\n    \"#43606b\": [\n      \"#43606b\",\n      \"#4a7880\",\n      \"#66a99d\",\n      \"#a3d9a9\"\n    ],\n    \"#414c67\": [\n      \"#414c67\",\n      \"#64689b\",\n      \"#9682cd\",\n      \"#b48ee4\"\n    ]\n  },\n  \"series_cell_visualizations\": {\n    \"#2d4266\": {\n      \"palette_id\": \"a3425339-dbbb-2584-0e23-38ed7d87ed50\",\n      \"collection_id\": \"b43731d5-dc87-4a8e-b807-635bef3948e7\",\n      \"custom_colors\": [\n        \"#6391e8\",\n        \"#2d4266\"\n      ]\n    },\n    \"#43606b\": {\n      \"palette_id\": \"c5182d25-00a3-cd71-eed3-4056299dd78f\",\n      \"collection_id\": \"atom-fashion\",\n      \"custom_colors\": [\n        \"#a3d9a9\",\n        \"#43606b\"\n      ]\n    },\n    \"#414c67\": {\n      \"palette_id\": \"7e059aa1-0d23-dab1-dbf9-a751ab7f54fb\",\n      \"collection_id\": \"b43731d5-dc87-4a8e-b807-635bef3948e7\",\n      \"custom_colors\": [\n        \"#b48ee4\",\n        \"#414c67\"\n      ]\n    }\n  }\n}\n\nconst themeColorFilter = {\n  \"label\": \"Light or dark theme\",\n  \"component\": \"switch\"\n}\n\nconst themeFontFilter = {\n  \"label\": \"Change font\",\n  \"component\": \"select\",\n  \"options\": [\"Arial\", \"Roboto\", \"Vollkorn\"]\n}\n\nexport const InventoryOverivewContent = {\n  \"type\": \"custom filter\",\n  \"label\": \"Inventory Overview\", //old\n  \"menuLabel\": \"Inventory Overview\", //new\n  \"menuCategory\": \"operations\",\n  \"icon\": TableChartOutlinedIcon,\n  \"component\": Dashboard,\n  \"lookerContent\": [\n    {\n      \"type\": \"dashboard\",\n      \"lookerMethod\": \"embedDashboard\",\n      \"id\": \"1\",\n      \"isNext\": false,\n      \"label\": \"Inventory Overview\",\n      \"filters\": [productNameFilter, tilesFilter, visConfigFilter, themeColorFilter, themeFontFilter]\n    }],\n  \"requiredPermissionLevel\": 0\n}\n","import React from 'react';\nimport { Typography, Box } from '@material-ui/core'\nimport PropTypes from 'prop-types';\n\nexport function TabPanel(props) {\n    const { children, value, index, ...other } = props;\n\n    return (\n        <Typography\n            component=\"div\"\n            role=\"tabpanel\"\n            hidden={value !== index}\n            id={`simple-tabpanel-${index}`}\n            aria-labelledby={`simple-tab-${index}`}\n            {...other}\n        >\n            <Box p={3}>{children}</Box>\n        </Typography>\n    );\n}\n\nTabPanel.propTypes = {\n    children: PropTypes.node,\n    index: PropTypes.any.isRequired,\n    value: PropTypes.any.isRequired,\n};\n\nexport function a11yProps(index) {\n    return {\n        id: `simple-tab-${index}`,\n        'aria-controls': `simple-tabpanel-${index}`,\n    };\n}\n\nexport function descendingComparator(a, b, orderBy) {\n    if (a[orderBy] && b[orderBy] && b[orderBy].value < a[orderBy].value) {\n        return -1;\n    }\n    if (a[orderBy] && b[orderBy] && b[orderBy].value > a[orderBy].value) {\n        return 1;\n    }\n    return 0;\n}\n\nexport function getComparator(order, orderBy) {\n    return order === 'desc'\n        ? (a, b) => descendingComparator(a, b, orderBy)\n        : (a, b) => -descendingComparator(a, b, orderBy);\n}\n\nexport function stableSort(array, comparator) {\n    const stabilizedThis = array.map((el, index) => [el, index]);\n    stabilizedThis.sort((a, b) => {\n        const order = comparator(a[0], b[0]);\n        if (order !== 0) return order;\n        return a[1] - b[1];\n    });\n    return stabilizedThis.map((el) => el[0]);\n}","import $ from 'jquery';\nimport _ from 'lodash';\nimport React, { useState, useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Typography, Box, Grid, Card, Button,\n  ExpansionPanel, ExpansionPanelSummary, ExpansionPanelDetails, InputLabel, MenuItem, FormControl,\n  Select, Table, TableBody, TableCell, TableContainer, TableHead, TablePagination, TableRow,\n  TableSortLabel, FormControlLabel, Switch, Chip, Divider\n} from '@material-ui/core'\nimport { ExpandMore, Search, Done } from '@material-ui/icons';\nimport { getComparator, stableSort } from './helpers.js';\nimport AppContext from '../../../contexts/AppContext';\nimport { Loader, ApiHighlight, CodeFlyout } from \"@pbl-demo/components/Accessories\";\nimport { useStyles, topBarBottomBarHeight, additionalHeightForFlyout } from '../styles.js';\nimport { userTimeHorizonMap } from '../../../config';\n\nconst { validIdHelper, prettifyString } = require('../../../tools');\n\nexport default function QueryBuilder(props) {\n  // console.log('QueryBuilder')\n\n  const { clientSession, show, codeShow, sdk, corsApiCall } = useContext(AppContext)\n  const { userProfile, lookerUser, lookerHost } = clientSession\n\n  const sideBarWidth = 240 + 122; //24 + 24 + 30 + 30 + 12 + 12 + 10 + 10\n  const [apiContent, setApiContent] = useState({});\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\n  const [width, setWidth] = useState((window.innerWidth - sideBarWidth));\n  const [expansionPanelHeight, setExpansionPanelHeight] = useState(0);\n  const classes = useStyles();\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, } = props;\n\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", () => {\n      setHeight((window.innerHeight - topBarBottomBarHeight))\n      setWidth((window.innerWidth - sideBarWidth))\n      setExpansionPanelHeight($('.MuiExpansionPanel-root:visible').innerHeight() || 0)\n\n    });\n  })\n\n\n  const performLookerApiCalls = async (newQuery, resultFormat) => {\n    let apiContentCopy = { ...apiContent }\n    apiContentCopy.status = 'running';\n    setApiContent(apiContentCopy)\n\n    let timer = Date.now();\n\n    let lookerCreateQueryResponseData = await sdk.ok(sdk.create_query(newQuery))\n    let lookerCreateTaskResponseData = await sdk.ok(sdk.create_query_task({\n      body: {\n        query_id: lookerCreateQueryResponseData.id,\n        result_format: resultFormat || 'json_detail'//lookerContent[0].resultFormat || 'json'\n      }\n    }))\n\n    let taskInterval = setInterval(async () => {\n      let lookerCheckTaskResponseData = await sdk.ok(sdk.query_task_results(lookerCreateTaskResponseData.id, {\n        method: 'GET',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }));\n\n      if (lookerCheckTaskResponseData.status === 'complete') {\n        clearInterval(taskInterval);\n        setApiContent(lookerCheckTaskResponseData)\n        // setServerSideCode(lookerCreateTaskResponseData.code)\n      }\n\n      //time out after 30 seconds\n      if ((timer + (30 * 1000)) < Date.now()) {\n        clearInterval()\n        setApiContent([])\n      }\n    }, 1000)\n  }\n\n  return (\n    <div className={`${classes.root} demoComponent`}\n      style={{ height }}>\n      <Card elevation={1} className={`${classes.padding15} ${classes.height100Percent} ${classes.overflowYScroll}`}>\n        <Grid container\n          key={validIdHelper(type)} >\n          <div className={`${classes.root}`}>\n\n            <Loader\n              hide={apiContent && apiContent.status !== \"running\"}\n              classes={classes}\n              height={height - expansionPanelHeight}\n            />\n\n            <FilterBar {...props}\n              classes={classes}\n              action={performLookerApiCalls}\n              corsApiCall={corsApiCall}\n            />\n            {apiContent.data && apiContent.data.length ?\n              <Box>\n                <Grid container\n                  spacing={3}\n                  className={`${classes.noContainerScroll}`}>\n\n                  <CodeFlyout {...props}\n                    classes={classes}\n                    lookerUser={lookerUser}\n                    height={height - expansionPanelHeight - additionalHeightForFlyout}\n                  />\n                  <Divider className={classes.divider} />\n                  <Grid item sm={12}>\n                    <Box className={`${classes.w100}`} mt={2}>\n                      < EnhancedTable\n                        {...props}\n                        classes={classes}\n                        rows={apiContent.data}\n                        lookerContent={lookerContent}\n                        width={width}\n                      />\n                    </Box>\n                  </Grid>\n                </Grid>\n              </Box>\n              :\n              <Grid item sm={12} >\n                <Typography variant=\"h6\" component=\"h6\" className={`${classes.gridTitle} ${classes.textCenter}`}>\n                  No results found, try a new query<br />\n                </Typography>\n              </Grid>\n            }\n          </div >\n        </Grid >\n      </Card>\n    </div >\n  )\n}\n/**\n * seems inconsistent that filterbar performs performLookerApiCalls here??\n */\n\nfunction FilterBar(props) {\n  // console.log('FilterBar');\n\n\n  const { clientSession, setPaywallModal, show, codeShow, sdk, corsApiCall, isReady } = useContext(AppContext)\n  const { userProfile, lookerUser, lookerHost } = clientSession\n\n  const { staticContent, staticContent: { lookerContent }, classes, action, //lookerUser, corsApiCall \n  } = props;\n\n\n\n  let measureCounter = 0;\n  let dimensionCounter = 0;\n\n\n  const initializeFieldChipDataHelper = () => {\n    let initializedFields = lookerContent[0].queryBody.fields.map((item, index) => {\n      return {\n        key: 'fieldChipData' + index,\n        label: prettifyString(item.substring(item.lastIndexOf('.') + 1, item.length)),\n        datalabel: item,\n        selected: item === 'users.state' || item === 'users.country' || item === 'order_items.total_sale_price' ? true : false,\n        fieldType: lookerContent[0].fieldType[item]\n      }\n    })\n    return initializedFields;\n  }\n\n  const [expanded, setExpanded] = useState(true);\n  const [fieldsChipData, setFieldsChipData] = useState(lookerContent[0].queryBody ? initializeFieldChipDataHelper() : '');\n  const [queryModified, setQueryModified] = useState(true); //set to true initially\n  const [queryShouldRun, setQueryShouldRun] = useState(false); //for lookerUser useEffect\n  const [filtersData, setFilterData] = useState(lookerContent[0].queryBody ? Object.keys(lookerContent[0].queryBody.filters).map((key, index) => {\n    return {\n      key: 'filter' + index,\n      label: key,\n      value: lookerContent[0].queryBody.filters[key],\n      type: lookerContent[0].filterType[key]\n    }\n  }) : '')\n\n  const handleExpansionPanel = (event, newValue) => {\n    setExpanded(expanded ? false : true);\n  };\n\n  const handleFieldChipClick = (chip, index) => {\n    let updatedFieldsChipData = [...fieldsChipData]\n    updatedFieldsChipData[index].selected = updatedFieldsChipData[index].selected === false ? true : false\n    setFieldsChipData(updatedFieldsChipData)\n    setQueryModified(true)\n  }\n\n  const handleSelectChange = (index, newValue) => {\n    let updatedFiltersData = [...filtersData]\n    updatedFiltersData[index].value = newValue;\n    setFilterData(updatedFiltersData)\n    setQueryModified(true)\n  }\n\n  const handleQuerySubmit = (event) => {\n    if (queryModified || queryShouldRun) {\n      let newFields = fieldsChipData.filter(chip => chip.selected).map(item => item.datalabel);\n      let currentFilters = {}; //needs to be object\n      filtersData.map((item, index) => {\n        currentFilters[item.label] = item.value\n      })\n      let newQueryObj = { ...lookerContent[0].queryBody };\n      newQueryObj.fields = newFields;\n      newQueryObj.filters = currentFilters;\n\n      corsApiCall(action, [newQueryObj, lookerContent[0].resultFormat]);\n\n      setQueryModified(false)\n      setQueryShouldRun(false)\n    } //else console.log('elllse')\n  }\n\n\n\n  useEffect(() => {\n    // console.log('useEffect lookerUser')\n    if (isReady) {\n      let updatedFiltersData = [...filtersData]\n      updatedFiltersData[3].value = userTimeHorizonMap[lookerUser.user_attributes.permission_level] || \"182 days\";\n      setFilterData(updatedFiltersData);\n      setFieldsChipData(initializeFieldChipDataHelper())\n\n      setQueryShouldRun(true);\n\n    }\n  }, [lookerUser, isReady]);\n\n  useEffect(() => {\n    // console.log('useEffect queryShouldRun')\n    if (queryShouldRun) {\n      handleQuerySubmit();\n      setQueryModified(false);\n      setQueryShouldRun(false);\n    }\n  }, [queryShouldRun])\n\n\n  const datePermissionMap = {\n    'basic': [\"1 week\", \"1 month\", \"3 months\", \"last 182 days\"]\n  }\n  datePermissionMap.advanced = [...datePermissionMap.basic, \"last 365 days\"]\n  datePermissionMap.premium = [...datePermissionMap.advanced, \"last 730 days\"]\n\n  return (\n    <ExpansionPanel expanded={expanded} onChange={handleExpansionPanel} elevation={0}>\n      <ExpansionPanelSummary\n        expandIcon={<ExpandMore />}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <Search /><Typography className={`${classes.heading} ${classes.ml12}`}>Build Query:</Typography>\n        {/* <Typography className={classes.heading}>Build Query:</Typography> */}\n      </ExpansionPanelSummary>\n      <ExpansionPanelDetails>\n        <Grid container spacing={3}>\n          <Grid item sm={12}>\n            <Typography variant=\"subtitle1\">\n              Select Metrics:\n      {fieldsChipData.length ?\n                fieldsChipData.map((item, index) => {\n                  return (\n                    item.fieldType === 'measure' ?\n                      <Chip\n                        key={item.label}\n                        // key={prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}\n                        measurecounter={measureCounter += 1}\n                        className={item.selected ? `${classes.orangePrimary} ${classes.m6}` : `${classes.m6}`}\n                        label={prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}\n                        datalabel={item.label}\n                        onClick={() => handleFieldChipClick(item, index)}\n                        icon={item.selected ? <Done className={classes.dBlock} /> : <Done className={classes.dNone} />}\n                      /> : ''\n                  )\n                }) : ''\n              }<br />\n            </Typography>\n          </Grid>\n          <Grid item sm={12}>\n            <Typography variant=\"subtitle1\">\n              Group By:\n                          {fieldsChipData.length ?\n                fieldsChipData.map((item, index) => {\n                  return (\n                    item.fieldType === 'dimension' ?\n                      <Chip\n                        key={item.label}\n                        dimensioncounter={dimensionCounter += 1}\n                        className={item.selected ? `${classes.bluePrimary} ${classes.m6}` : `${classes.m6}`}\n                        label={prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}\n                        datalabel={item.label}\n                        onClick={() => handleFieldChipClick(item, index)}\n                        icon={item.selected ? <Done className={classes.dBlock} /> : <Done className={classes.dNone} />}\n                      /> : ''\n                  )\n                }) : ''\n              }<br />\n            </Typography>\n          </Grid>\n\n          <Grid item sm={3}>\n            <Typography variant=\"subtitle1\">\n              Filter By:\n                      </Typography>\n            {filtersData.length ? filtersData.map((item, index) => {\n              return (\n                <FormControl className={item.value.length ? classes.formControl : classes.hidden} key={validIdHelper(`${item.label}FormControl`)}>\n                  {\n                    item.type === 'yesno' ?\n                      <>\n                        <InputLabel id={validIdHelper(`${item.label}FilterLabel`)}>{prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}:</InputLabel>\n                        <Select\n                          labelId={validIdHelper(`${item.label}FilterLabel`)}\n                          id={validIdHelper(`${item.label}FilterSelect`)}\n                          value={item.value}\n                          onChange={(event) => handleSelectChange(index, event.target.value)}\n                        >\n                          <MenuItem value=\"Yes\">Yes</MenuItem>\n                          <MenuItem value=\"No\">No</MenuItem>\n                          <MenuItem value=\"All\">All</MenuItem>\n                        </Select>\n                      </>\n                      : item.type === 'date' ?\n                        <>\n                          <InputLabel id={validIdHelper(`${item.label}FilterLabel`)}>{prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}:</InputLabel>\n\n                          <Select\n                            labelId={validIdHelper(`${item.label}FilterLabel`)}\n                            id={validIdHelper(`${item.label}FilterSelect`)}\n                            value={item.value || '6 months'}\n                            onChange={(event) => handleSelectChange(index, event.target.value)}\n                          >\n                            {lookerUser.user_attributes.permission_level ? datePermissionMap[lookerUser.user_attributes.permission_level].map(item => (\n                              <MenuItem key={validIdHelper(item)} value={item}>{_.capitalize(item)}</MenuItem>\n                            )) : ''}\n                          </Select>\n                        </>\n                        : ''\n                  }\n                </FormControl>\n              )\n            }) : ''}\n          </Grid>\n          <Grid item sm={9}>\n            <br />\n            <Button\n              color=\"primary\"\n              variant=\"contained\"\n              size=\"large\"\n              onClick={handleQuerySubmit}\n              disabled={queryModified ? false : true}\n            >Run Query</Button></Grid>\n        </Grid>\n      </ExpansionPanelDetails>\n    </ExpansionPanel>\n  )\n}\n\nfunction EnhancedTableHead(props) {\n  const { classes, onSelectAllClick, order, orderBy, numSelected, rowCount, onRequestSort, rows } = props;\n  const createSortHandler = (property) => (event) => {\n    onRequestSort(event, property);\n  };\n\n  return (\n    <TableHead>\n      <TableRow>\n        {Object.keys(rows[0]).map((key, index) => (\n          <TableCell\n            key={validIdHelper(key + '-TableHead-TableCell-' + index)}\n            id={validIdHelper(key + '-TableHead-TableCell-' + index)}\n            align={key.numeric ? 'right' : 'left'}\n            padding={key.disablePadding ? 'none' : 'default'}\n            sortDirection={orderBy === key ? order : false}\n          >\n            <TableSortLabel\n              active={orderBy === key}\n              direction={orderBy === key ? order : 'asc'}\n              onClick={createSortHandler(key)}\n            >\n              {prettifyString(key.substring(key.lastIndexOf('.') + 1, key.length))}\n              {orderBy === key ? (\n                <span className={classes.visuallyHidden}>\n                  {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\n                </span>\n              ) : null}\n            </TableSortLabel>\n          </TableCell>\n        ))}\n      </TableRow>\n    </TableHead>\n  );\n}\n\nEnhancedTableHead.propTypes = {\n  classes: PropTypes.object.isRequired,\n  // numSelected: PropTypes.number.isRequired,\n  onRequestSort: PropTypes.func.isRequired,\n  // onSelectAllClick: PropTypes.func.isRequired,\n  order: PropTypes.oneOf(['asc', 'desc']).isRequired,\n  orderBy: PropTypes.string.isRequired,\n  rowCount: PropTypes.number.isRequired,\n};\n\nfunction EnhancedTable(props) {\n  const { rows, classes, lookerContent, width } = props;\n  const [order, setOrder] = React.useState('asc');\n  const [orderBy, setOrderBy] = React.useState(Object.keys(rows[0])[0]);\n  const [page, setPage] = React.useState(0);\n  const [dense, setDense] = React.useState(true);\n  const [rowsPerPage, setRowsPerPage] = React.useState(25);\n\n  const handleRequestSort = (event, property) => {\n    const isAsc = orderBy === property && order === 'asc';\n    setOrder(isAsc ? 'desc' : 'asc');\n    setOrderBy(property);\n  };\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = (event) => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  const handleChangeDense = (event) => {\n    setDense(event.target.checked);\n  };\n\n  const emptyRows = rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage);\n  return (\n    <div className={`${classes.root} ${classes.padding10}`}>\n      <ApiHighlight classes={classes} >\n        <TableContainer\n          style={{ maxWidth: width }}\n        >\n          <Table\n            className={classes.table}\n            aria-labelledby=\"tableTitle\"\n            size={dense ? 'small' : 'medium'}\n            aria-label=\"enhanced table\"\n          >\n            <EnhancedTableHead\n              {...props}\n              classes={classes}\n              order={order}\n              orderBy={orderBy}\n              onRequestSort={handleRequestSort}\n              rowCount={rows.length}\n            />\n            <TableBody>\n              {stableSort(rows, getComparator(order, orderBy))\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                .map((row, index) => {\n                  return (\n                    <TableRow\n                      hover\n                      key={validIdHelper('TableRow-' + index)}\n                      id={validIdHelper('TableRow-' + index)}>\n                      {Object.keys(row).map((key, index) => (\n                        <TableCell\n                          key={validIdHelper(key + '-TableBody-TableCell-' + index)}\n                          id={validIdHelper(key + '-TableBody-TableCell-' + index)}\n                          className={lookerContent[0].fieldType[key] === 'dimension' ? classes.blueSecondary : classes.orangeSecondary}\n                          align=\"right\">\n                          {row[key].rendered ? row[key].rendered : row[key].value}\n                        </TableCell>\n                      ))}\n                    </TableRow>\n                  );\n                })}\n              {emptyRows > 0 && (\n                <TableRow style={{ height: (dense ? 33 : 53) * emptyRows }}>\n                  <TableCell colSpan={6} />\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </ApiHighlight>\n      <Grid container>\n        <Grid item sm={6}>\n          <FormControlLabel\n            control={<Switch checked={dense} onChange={handleChangeDense} />}\n            label=\"Compact\"\n          /></Grid>\n        <Grid item sm={6}>\n          <TablePagination\n            rowsPerPageOptions={[5, 10, 25, 50]}\n            component=\"div\"\n            count={rows.length}\n            rowsPerPage={rowsPerPage}\n            page={page}\n            onChangePage={handleChangePage}\n            onChangeRowsPerPage={handleChangeRowsPerPage}\n          /></Grid>\n      </Grid>\n      <div className={classes.bottomBarSpacer} />\n    </div>\n  );\n}","import QueryBuilder from '../../components/Demo/QueryBuilder/QueryBuilder'\nimport SearchIcon from '@material-ui/icons/Search';\n\nexport const QueryBuilderContent = {\n  \"type\": \"query builder\",\n  \"label\": \"Query Builder\",\n  \"menuCategory\": \"operations\",\n  \"description\": \"Enable business users to self serve on data and answer their own questions\",\n  \"icon\": SearchIcon,\n  \"component\": QueryBuilder,\n  \"lookerContent\": [\n    {\n      \"type\": \"explorelite\",\n      \"id\": \"explorelite\",\n      \"label\": \"Build & Run Queries\",\n      \"queryBody\": {\n        \"model\": \"atom_fashion\",\n        \"view\": \"order_items\",\n        \"fields\": [\n          \"order_items.created_month\",\n          \"order_items.created_date\",\n          \"order_items.created_week\",\n          \"users.city\",\n          \"users.state\",\n          \"users.country\",\n          \"products.category_type\",\n          \"products.category\",\n          \"products.brand\",\n          \"order_items.total_sale_price\",\n          \"order_items.total_tax_amount\"\n        ],\n        \"filters\": {\n          \"users.state\": \"\",\n          \"users.city\": \"\",\n          \"users.country\": \"\",\n          \"order_items.created_date\": \"6 months\"\n        },\n        \"limit\": 500\n      },\n      \"resultFormat\": \"json_detail\",\n      \"fieldType\": {\n        \"order_items.created_month\": \"dimension\",\n        \"order_items.created_date\": \"dimension\",\n        \"order_items.created_week\": \"dimension\",\n        \"users.city\": \"dimension\",\n        \"users.state\": \"dimension\",\n        \"users.country\": \"dimension\",\n        \"products.category_type\": \"dimension\",\n        \"products.category\": \"dimension\",\n        \"products.brand\": \"dimension\",\n        \"order_items.total_sale_price\": \"measure\",\n        \"order_items.total_tax_amount\": \"measure\"\n      },\n      \"filterType\": {\n        \"users.state\": \"string\",\n        \"users.city\": \"string\",\n        \"users.country\": \"string\",\n        \"order_items.created_date\": \"date\"\n      }\n    }\n  ],\n  \"requiredPermissionLevel\": 0\n}","import React from 'react';\nimport { Typography, Box } from '@material-ui/core'\nimport PropTypes from 'prop-types';\n\nexport function TabPanel(props) {\n    const { children, value, index, ...other } = props;\n\n    return (\n        <Typography\n            component=\"div\"\n            role=\"tabpanel\"\n            hidden={value !== index}\n            id={`simple-tabpanel-${index}`}\n            aria-labelledby={`simple-tab-${index}`}\n            {...other}\n        >\n            <Box p={3}>{children}</Box>\n        </Typography>\n    );\n}\n\nTabPanel.propTypes = {\n    children: PropTypes.node,\n    index: PropTypes.any.isRequired,\n    value: PropTypes.any.isRequired,\n};\n\nexport function a11yProps(index) {\n    return {\n        id: `simple-tab-${index}`,\n        'aria-controls': `simple-tabpanel-${index}`,\n    };\n}\n\n","import $ from 'jquery';\nimport _ from 'lodash'\nimport React, { useState, useEffect, useContext } from 'react';\nimport { AppBar, Tabs, Tab, Box, Grid, Icon, Card, Button } from '@material-ui/core'\nimport { TreeView, TreeItem } from '@material-ui/lab';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport { LookerEmbedSDK } from '@looker/embed-sdk'\nimport { TabPanel, a11yProps } from './helpers.js';\nimport '../../Home.css';\nimport AppContext from '../../../contexts/AppContext';\nimport { Loader, ApiHighlight, EmbedHighlight, CodeFlyout } from \"@pbl-demo/components/Accessories\";\nimport { useStyles, topBarBottomBarHeight, additionalHeightForFlyout } from '../styles.js';\n\nconst { validIdHelper } = require('../../../tools');\n\n//start of ReportBuilder Component\nexport default function ReportBuilder(props) {\n\n\n  const { clientSession, setPaywallModal, show, codeShow, sdk, corsApiCall, isReady } = useContext(AppContext)\n  const { userProfile, lookerUser, lookerHost } = clientSession;\n\n  const [iFrameExists, setIFrame] = useState(0);\n  const [apiContent, setApiContent] = useState([]);\n  const [exploreObj, setExploreObj] = useState({});\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\n  const [expansionPanelHeight, setExpansionPanelHeight] = useState(0);\n\n  const classes = useStyles();\n  const [value, setValue] = useState(0);\n  const [qid, setQid] = useState(null);\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type } } = props;\n\n  const demoComponentType = type;\n  const tabContent = [...lookerContent]\n\n  const handleChange = (event, newValue) => {\n    if (newValue == 1 && lookerUser.user_attributes.permission_level !== 'premium') {\n      // handleChange(0)\n      setPaywallModal({\n        'show': true,\n        'permissionNeeded': 'explore'\n      });\n    } else {\n      setValue(newValue)\n    }\n  };\n\n  useEffect(() => {\n    if (isReady) {\n      corsApiCall(performLookerApiCalls, [lookerContent, !value])\n    }\n  }, [lookerUser, value, isReady, value]);\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", () => setHeight((window.innerHeight - topBarBottomBarHeight)));\n    setExpansionPanelHeight($('.MuiExpansionPanel-root:visible').innerHeight() || 0)\n  })\n\n\n  const action = async (contentType, contentId, secondaryAction, qid, exploreId, newReportEmbedContainer) => {\n\n    let iFrameArray = $(\".embedContainer:visible > iframe\")\n\n    let matchingIndex = 0;\n    for (let i = 0; i < iFrameArray.length; i++) {\n      if (iFrameArray[i].classList.contains(contentType) && iFrameArray[i].classList.contains(contentId)) {\n        iFrameArray[i].classList.remove('dNone')\n        matchingIndex = i;\n      } else {\n        iFrameArray[i].classList.add('dNone')\n      }\n    }\n\n    if (secondaryAction === 'edit' || secondaryAction === 'explore') {\n      //save qid to state and use in perform looker api calls\n      setQid(qid);\n      handleChange('edit', 1)\n    } else if (secondaryAction === 'delete') {\n      //remove iframe associated with content that was deleted\n      let indexOfDeletedContent;\n      for (let i = 0; i < iFrameArray.length; i++) {\n        if (iFrameArray[i].classList.contains(contentId)) {\n          indexOfDeletedContent = i;\n        }\n      }\n      let updatedIFrameArray = iFrameArray.slice()\n      updatedIFrameArray.splice(indexOfDeletedContent, 1)\n      for (let i = 0; i < updatedIFrameArray.length; i++) {\n        if (i === 0) {\n          updatedIFrameArray[i].classList.remove('dNone')\n          matchingIndex = i;\n        } else {\n          updatedIFrameArray[i].classList.add('dNone')\n        }\n      }\n      //append updated array\n      $(`#embedContainer-reportbuilder-14`).empty();\n      $(`#embedContainer-reportbuilder-14`).html(updatedIFrameArray);\n\n      let lookerResponse = await sdk.ok(sdk.delete_look(contentId));\n      corsApiCall(performLookerApiCalls, [lookerContent, 1])\n    }\n  }\n\n  const performLookerApiCalls = function (lookerContent, animateLoad) {\n    if (animateLoad) {\n      handleChange('refresh', 0)\n      setIFrame(0)\n      setApiContent([])\n    }\n\n    lookerContent.map(async lookerContent => {\n      if (value === 0 &&\n        lookerContent.type === 'folder') {\n\n        const sharedFolder = await sdk.ok(sdk.folder(lookerContent.id));\n        const embedUser = await sdk.ok(sdk.me())\n\n        for (let h = 0; h < sharedFolder.looks.length; h++) {\n          let look = await sdk.ok(sdk.look(sharedFolder.looks[h].id))\n          let clientId = look.query.client_id;\n          sharedFolder.looks[h].client_id = clientId;\n        }\n\n        let embeddedUserFolder = {}\n        if (lookerUser.user_attributes.permission_level === 'premium') {\n          let embedUserLooks = await sdk.ok(sdk.search_looks({ user_id: embedUser.id }))\n          if (embedUserLooks && embedUserLooks.length) {\n            let embedUserFolderId = embedUserLooks[0].folder_id || null;\n            embeddedUserFolder = await sdk.ok(sdk.folder(embedUserFolderId));\n            for (let i = 0; i < embeddedUserFolder.looks.length; i++) {\n              let look = await sdk.ok(sdk.look(embeddedUserFolder.looks[i].id));\n              let clientId = look.query.client_id;\n              embeddedUserFolder.looks[i].client_id = clientId;\n            }\n          }\n        }\n\n        let lookerResponseData = {\n          sharedFolder,\n          embeddedUserFolder\n        }\n\n        // console.log('lookerResponseData', lookerResponseData)\n\n        let looksToUse = [...lookerResponseData.sharedFolder.looks];\n        if (lookerUser.user_attributes.permission_level === 'premium' &&\n          Object.keys(lookerResponseData.embeddedUserFolder).length) {\n          looksToUse = [\n            ...looksToUse, ...lookerResponseData.embeddedUserFolder.looks\n          ]\n\n        }\n        let dashboardsToUse = [...lookerResponseData.sharedFolder.dashboards]\n        let objToUse = {\n          looks: looksToUse,\n          dashboards: dashboardsToUse\n        }\n        // console.log('objToUse', objToUse)\n        let iFrameArray = $(`.embedContainer.${validIdHelper(demoComponentType)} > iframe`);\n        if (objToUse.looks.length) {\n          objToUse.looks.map((item, index) => {\n\n            let lookId = item.id;\n            let lookIsRendered = false;\n            for (let i = 0; i < iFrameArray.length; i++) {\n              if (iFrameArray[i].classList.contains('look') && iFrameArray[i].classList.contains(lookId)) {\n                lookIsRendered = true;\n              }\n            }\n\n            if (!lookIsRendered) {\n              LookerEmbedSDK.createLookWithId(lookId)\n                .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\n                .withClassName('iframe')\n                .withClassName('look')\n                .withClassName(lookerResponseData.sharedFolder.looks.indexOf(item) > -1 ? \"shared\" : \"personal\")\n                .withClassName(index > 0 ? 'dNone' : 'oops')\n                .withClassName(lookId)\n                .build()\n                .connect()\n                .then((look) => {\n                  let modifiedBaseUrl = clientSession.lookerBaseUrl.substring(0, clientSession.lookerBaseUrl.lastIndexOf(\":\"));\n                  LookerEmbedSDK.init(modifiedBaseUrl)\n                })\n                .catch((error) => {\n                  console.error('Connection error', error)\n                })\n            }\n\n            if (index === objToUse.looks.length - 1) {\n              setTimeout(() => setIFrame(1), 1000)\n            }\n          })\n        }\n\n        if (objToUse.dashboards.length) {\n          objToUse.dashboards.map((item, index) => {\n            let dashboardId = item.id\n            let dashboardIsRendered = false;\n            for (let i = 0; i < iFrameArray.length; i++) {\n              if (iFrameArray[i].classList.contains('dashboard') && iFrameArray[i].classList.contains(dashboardId)) {\n                dashboardIsRendered = true;\n              }\n            }\n            if (!dashboardIsRendered) {\n              LookerEmbedSDK.createDashboardWithId(dashboardId)\n                .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\n                .withClassName('iframe')\n                .withClassName('dashboard')\n                .withClassName(lookerResponseData.sharedFolder.dashboards.indexOf(item) > -1 ? \"shared\" : \"personal\")\n                .withClassName('dNone')\n                .withClassName(dashboardId)\n                .build()\n                .connect()\n                .then((dashboard) => {\n                  setTimeout(() => {\n                    // setIFrame(1)\n                  }, 1000)\n                  let modifiedBaseUrl = clientSession.lookerBaseUrl.substring(0, clientSession.lookerBaseUrl.lastIndexOf(\":\"));\n                  LookerEmbedSDK.init(modifiedBaseUrl)\n\n                })\n                .catch((error) => {\n                  console.error('Connection error', error)\n                })\n            }\n\n\n            if (index === objToUse.dashboards.length - 1) {\n              setTimeout(() => setIFrame(1), 1000)\n            }\n          })\n        }\n        setApiContent(objToUse)\n      } else if (lookerContent.type === 'explore' &&\n        lookerUser.user_attributes.permission_level === 'premium' &&\n        value === 1) {\n        // console.log('inside else ifff')\n        let exploreId = lookerContent.id;\n        // console.log('exploreId', exploreId)\n        $(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`)).html('');\n        //separate logic for embedding explore with qid vs. no qid\n        if (qid) {\n          // console.log('qid ifff')\n          LookerEmbedSDK.createExploreWithId(exploreId)\n            .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\n            .withClassName('exploreIframe')\n            .withParams({\n              qid: qid\n            })\n            .on('explore:state:changed', (event) => {\n            })\n            .build()\n            .connect()\n            .then((explore) => {\n              console.log('explore', explore)\n              // setTimeout(() => {\n              setIFrame(1)\n              setExploreObj(explore)\n              // }, 1000)\n\n              let modifiedBaseUrl = clientSession.lookerBaseUrl.substring(0, clientSession.lookerBaseUrl.lastIndexOf(\":\"));\n              LookerEmbedSDK.init(modifiedBaseUrl)\n\n              setQid(null)\n            })\n            .catch((error) => {\n              console.error('Connection error', error)\n            })\n        } else {\n          // console.log('qid else')\n          LookerEmbedSDK.createExploreWithId(exploreId)\n            .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\n            .withClassName('exploreIframe')\n            .on('explore:state:changed', (event) => {\n            })\n            .build()\n            .connect()\n            .then((explore) => {\n              // console.log('explore', explore)\n              // setTimeout(() => {\n              setIFrame(1)\n              setExploreObj(explore)\n              // }, 1000)\n              let modifiedBaseUrl = clientSession.lookerBaseUrl.substring(0, clientSession.lookerBaseUrl.lastIndexOf(\":\"));\n              LookerEmbedSDK.init(modifiedBaseUrl)\n\n              // setQid(null)\n            })\n            .catch((error) => {\n              console.error('Connection error', error)\n            })\n        }\n      }\n      // else console.log('ellse')\n    })\n  }\n\n  return (\n    <div className={`${classes.root} demoComponent`}\n      style={{ height }}>\n      <Card elevation={1} className={`${classes.padding15} ${classes.height100Percent} ${classes.overflowYScroll}`}>\n        <Grid container\n          key={validIdHelper(type)} >\n          <div className={classes.root}>\n            <Loader\n              hide={iFrameExists}\n              classes={classes}\n              height={height - expansionPanelHeight}\n            />\n            {/* additional loading logic, need embedContainer to exist but want it hidden until iFrame has content...*/}\n            <Box className={iFrameExists ? `` : `${classes.hidden}`}>\n              <AppBar position=\"static\" elevation={0}>\n                <Tabs\n                  className={classes.tabs}\n                  value={value}\n                  onChange={handleChange}\n                  aria-label=\"simple tabs example\">\n                  {tabContent.map((item, index) => (\n                    <Tab\n                      key={`${validIdHelper(demoComponentType + '-tab-' + index)}`}\n                      label={index == 1 ?\n                        <div>\n\n                          {lookerUser.user_attributes.permission_level != 'premium' ?\n                            <Icon className={`fa fa-lock ${classes.faSm} ${classes.mr12}`} /> : <Icon className={`fa fa-plus ${classes.faSm} ${classes.mr12}`} />}\n                          {item.label}\n                        </div> :\n                        item.label}\n                      className={value === 1 && index === 1 ? `${classes.hidden}` : index == 1 ? `${classes.mlAuto}` : ``}\n                      style={index === 1 ? {\n                        backgroundColor: '#5896E6',\n                        borderRadius: '4px',\n                        color: '#fff',\n                        opacity: '1.0'\n                      } : {}}\n                      {...a11yProps(index)} />\n                  ))}\n                </Tabs>\n              </AppBar>\n              <Box className=\"tabPanelContainer\">\n                <Grid container\n                  spacing={3}\n                  className={`${classes.noContainerScroll}`}>\n\n                  <CodeFlyout {...props}\n                    classes={classes}\n                    lookerUser={lookerUser}\n                    height={height - expansionPanelHeight - additionalHeightForFlyout}\n                  />\n                  {tabContent.map((tabContentItem, tabContentItemIndex) => (\n                    <TabPanel\n                      key={`${validIdHelper(demoComponentType + '-tabPanel-' + tabContentItemIndex)}`}\n                      value={value}\n                      index={tabContentItemIndex}\n                      style={{ width: '100%' }} //weird\n                    >\n                      <Grid container>\n                        {\n                          tabContentItemIndex === 0\n                            ?\n                            <React.Fragment\n                              key={`${validIdHelper(demoComponentType + '-outerFragment-' + tabContentItemIndex)}`}>\n                              <Grid item sm={4} >\n                                <ApiHighlight height={500} classes={classes}>\n                                  <TreeSideBar {...{\n                                    setPaywallModal,\n                                    classes,\n                                    demoComponentType,\n                                    tabContent,\n                                    tabContentItemIndex,\n                                    action,\n                                    apiContent,\n                                    ...props\n                                  }}\n                                  />\n                                </ApiHighlight>\n                              </Grid>\n                              <Grid item sm={8} >\n                                <EmbedHighlight classes={classes}>\n                                  <div\n                                    className={`embedContainer ${validIdHelper(demoComponentType)}`}\n                                    id={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                    key={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                  >\n                                  </div>\n                                </EmbedHighlight>\n                              </Grid>\n                            </React.Fragment>\n                            :\n                            <Grid item sm={12} >\n                              {/* couldn't get this to work */}\n                              {/* {Object.keys(exploreObj).length ?\n                                <EmbedHighlight classes={classes}>\n                                  <div\n                                    className=\"embedContainer\"\n                                    id={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                    key={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                  >\n                                  </div>\n                                </EmbedHighlight> :\n                                <Card className={`${classes.card} ${classes.flexCentered}`}\n                                  elevation={0}\n                                  mt={2}\n                                  style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\n                                  <CircularProgress className={classes.circularProgress} />\n                                </Card>} */}\n                              <EmbedHighlight classes={classes}>\n                                <div\n                                  className=\"embedContainer\"\n                                  id={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                  key={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                >\n                                </div>\n                              </EmbedHighlight>\n                            </Grid>\n                        }\n                      </Grid>\n                    </TabPanel>\n                  ))}</Grid>\n              </Box>\n            </Box >\n          </div>\n        </Grid >\n      </Card>\n    </div >\n  )\n}\n\n\nfunction TreeSideBar(props) {\n\n\n  const { clientSession, setPaywallModal, show, codeShow, sdk, corsApiCall } = useContext(AppContext)\n  const { userProfile, lookerUser, lookerHost } = clientSession\n\n  const { staticContent, staticContent: { lookerContent }, classes, demoComponentType, tabContent, tabContentItemIndex, action, apiContent,\n    //lookerUser, setPaywallModal\n  } = props\n  const sharedFolderId = lookerContent[0].type === 'folder' ? lookerContent[0].id : '';\n  let treeCounter = 0;\n  const [selected, setSelected] = useState(2);\n  const expandedArr = Object.keys(apiContent).length ? [\"1\", \"\" + (2 + apiContent[Object.keys(apiContent)[0]].length)] : [];\n  const [expanded, setExpanded] = useState(expandedArr);\n\n  const handleToggle = (event, nodeIds) => {\n    setExpanded(nodeIds);\n  }\n\n  const handleSelect = (event, nodeIds) => {\n    setSelected(nodeIds);\n  };\n\n\n  useEffect(() => {\n    setExpanded(expandedArr);\n    if (selected !== 2) setSelected(2)\n    // let innerTreeItemArray = $(\".innerTreeItem\");\n    // console.log('innerTreeItemArray', innerTreeItemArray)\n    // for (let i = 0; i < innerTreeItemArray.length; i++) {\n    //   console.log('inside forrr', i)\n    //   if (innerTreeItemArray[i].classList.contains('Mui-selected')) {\n    //     console.log('inside iffff')\n    //     innerTreeItemArray[i].classList.remove('Mui-selected')\n    //   } else console.log('elllse')\n    // }\n  }, [apiContent]);\n\n\n  return (\n    <TreeView\n      className={classes.tree}\n      defaultCollapseIcon={<ExpandMoreIcon />}\n      defaultExpandIcon={<ChevronRightIcon />}\n      expanded={expanded}\n      onNodeToggle={handleToggle}\n      onNodeSelect={handleSelect}\n    // multiSelect={false}\n    >\n      {apiContent ? Object.keys(apiContent).map((key, outerIndex) => (\n        <React.Fragment\n          key={`${validIdHelper(demoComponentType + '-innerFragment-' + outerIndex)}`}>\n          <TreeItem\n            key={`${validIdHelper(demoComponentType + '-outerTreeItem-' + outerIndex)}`}\n            nodeId={\"\" + (treeCounter += 1)}\n            // treecounter={treeCounter}\n            label={_.capitalize(key)}\n            icon={<Icon className={`fa fa-folder ${classes.icon}`} />}\n            disabled={apiContent[key].length ? false : true}\n          >\n            {\n              apiContent[key].length ?\n                apiContent[key].map((item, index) => (\n                  <TreeItem\n                    key={`${validIdHelper(demoComponentType + '-innerTreeItem-' + treeCounter)}`}\n                    nodeId={\"\" + (treeCounter += 1)}\n                    treecounter={treeCounter}\n                    selected={selected === treeCounter}\n                    className={selected === treeCounter ? `Mui-selected innerTreeItem ${classes.whiteSpaceNoWrap}` : `innerTreeItem ${classes.whiteSpaceNoWrap}`}\n                    contentid={item.id}\n                    label={item.folder_id === sharedFolderId &&\n                      key === 'looks' ?\n                      <div\n                        id={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\n                        key={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\n                        className={`${classes.labelRoot} ${classes.parentHoverVisibility}`}\n                      >\n                        {/* {item.title.length > 15 ? item.title.substring(0, 15) + '...' : item.title} */}\n                        <Grid container>\n                          <Grid item sm={8} className={`${classes.overflowHidden}`}>\n                            {item.title}</Grid>\n                          <Grid item sm={4}>\n                            <Button\n                              id={`${validIdHelper(demoComponentType + '-innerTreeItem-Explore' + treeCounter)}`}\n                              key={`${validIdHelper(demoComponentType + '-innerTreeItem-Explore' + treeCounter)}`}\n                              size=\"small\"\n                              className={`${classes.ml12} ${classes.childHoverVisibility}`}\n                              onClick={(event) => {\n                                if (lookerUser.user_attributes.permission_level === 'premium') {\n                                  action(\n                                    key.substring(0, key.length - 1),\n                                    item.id,\n                                    'explore',\n                                    item.client_id,\n                                    tabContent[tabContentItemIndex + 1].id,\n                                    validIdHelper(`embedContainer-${demoComponentType}-${tabContent[tabContentItemIndex + 1].id}`)\n                                  );\n                                  event.stopPropagation();\n                                } else {\n                                  // setPaywallModal();\n\n                                  setPaywallModal({\n                                    'show': true,\n                                    'permissionNeeded': 'explore'\n                                  });\n                                }\n                              }\n                              }\n                              color=\"default\"\n                            >\n                              {lookerUser.user_attributes.permission_level === 'premium' ? 'Explore' : <div> <Icon className={`fa fa-lock ${classes.faSm} ${classes.mr12}`} />Explore</div>}\n                            </Button>\n                          </Grid>\n                        </Grid>\n\n\n                      </div>\n                      : key === 'looks' ?\n                        <div\n                          id={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\n                          key={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\n                          className={`${classes.labelRoot} ${classes.parentHoverVisibility}`}>\n                          <Grid container>\n                            <Grid item sm={6} className={`${classes.overflowHidden}`}>\n                              {/* {item.title.length > 15 ? item.title.substring(0, 15) + '...' : item.title} */}\n                              {item.title}\n                            </Grid>\n                            <Grid item sm={6}>\n                              <Button\n                                id={`${validIdHelper(demoComponentType + '-innerTreeItem-EditButton' + treeCounter)}`}\n                                key={`${validIdHelper(demoComponentType + '-innerTreeItem-EditButton' + treeCounter)}`}\n                                size=\"small\"\n                                className={`${classes.ml12} ${classes.childHoverVisibility}`}\n                                onClick={(event) => {\n                                  if (lookerUser.user_attributes.permission_level === 'premium') {\n                                    // setSelected(treeCounter);\n                                    action(\n                                      key.substring(0, key.length - 1),\n                                      item.id,\n                                      'edit',\n                                      item.client_id,\n                                      tabContent[tabContentItemIndex + 1].id,\n                                      validIdHelper(`embedContainer-${demoComponentType}-${tabContent[tabContentItemIndex + 1].id}`)\n                                    );\n                                    event.stopPropagation();\n                                  } else {\n                                    // setPaywallModal();\n\n                                    setPaywallModal({\n                                      'show': true,\n                                      'permissionNeeded': 'explore'\n                                    });\n                                  }\n                                }\n                                }\n                                color=\"primary\"\n                              >\n                                Edit\n                                                                                            </Button>\n                              <Button\n                                id={`${validIdHelper(demoComponentType + '-innerTreeItem-DeleteButton' + treeCounter)}`}\n                                key={`${validIdHelper(demoComponentType + '-innerTreeItem-DeleteButton' + treeCounter)}`}\n                                size=\"small\"\n                                className={`${classes.ml12} ${classes.childHoverVisibility}`}\n                                onClick={(event) => {\n                                  if (lookerUser.user_attributes.permission_level === 'premium') {\n                                    // setSelected(treeCounter);\n                                    action(\n                                      key.substring(0, key.length - 1),\n                                      item.id,\n                                      'delete',\n                                      item.client_id,\n                                      tabContent[tabContentItemIndex + 1].id,\n                                      validIdHelper(`embedContainer-${demoComponentType}-${tabContent[tabContentItemIndex + 1].id}`)\n                                    );\n                                    event.stopPropagation();\n                                  } else {\n                                    // setPaywallModal();\n\n                                    setPaywallModal({\n                                      'show': true,\n                                      'permissionNeeded': 'explore'\n                                    });\n                                  }\n                                }\n                                }\n                                color=\"secondary\"\n                              >\n                                Delete\n                                                                                            </Button>\n                            </Grid>\n                          </Grid>\n\n                        </div>\n                        : <Grid container><Grid item sm={12}>{item.title}</Grid></Grid>\n                    }\n                    onClick={() => {\n                      // setSelected(treeCounter)\n                      action(\n                        key.substring(0, key.length - 1), item.id)\n                    }} />\n\n                ))\n                :\n                ''\n            }\n          </TreeItem>\n\n        </React.Fragment>\n      )) : ''}\n    </TreeView>\n  )\n}","import ReportBuilder from '../../components/Demo/ReportBuilder/ReportBuilder'\nimport LibraryBooksOutlinedIcon from '@material-ui/icons/LibraryBooksOutlined';\n\n\nexport const ReportBuilderContent = {\n  \"type\": \"report builder\",\n  \"label\": \"Saved Reports\",\n  \"menuCategory\": \"operations\",\n  \"description\": \"Give users the ability to explore existing reports as well as create new ones all from within your application\",\n  \"icon\": LibraryBooksOutlinedIcon,\n  \"component\": ReportBuilder,\n  \"lookerContent\": [\n    {\n      \"type\": \"folder\",\n      \"id\": \"14\",\n      \"label\": \"Saved Reports\"\n    },\n    {\n      \"type\": \"explore\",\n      \"id\": \"atom_fashion::order_items\",\n      \"label\": \"Create New Report\"\n    }\n  ],\n  \"requiredPermissionLevel\": 1\n}","import React, { useState, useEffect } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Card from '@material-ui/core/Card';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nconst { validIdHelper, prettifyString } = require('../../tools');\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    position: 'absolute',\n    width: 800,\n    maxHeight: 450,\n    overflow: 'scroll',\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n  table: {\n    maxHeight: 310\n  },\n  card: {\n    minWidth: 275,\n    minHeight: '10rem',\n    boxShadow: 'none'\n  },\n  flexCentered: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n}));\n\nfunction rand() {\n  return Math.round(Math.random() * 20) - 10;\n}\nfunction getModalStyle() {\n  const top = 10 //+ rand();\n  const left = 50 //+ rand();\n\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${left}%, -${top}%)`,\n  };\n}\n\nexport default function ModalTable(props) {\n  // console.log('ModalTable')\n  // console.log('props', props)\n\n  const classes = useStyles();\n  const { open, onClose, modalContent } = props;\n  const [modalStyle] = React.useState(getModalStyle);\n\n\n  return (\n    <Modal\n      open={open}\n      onClose={onClose}\n      aria-labelledby=\"simple-modal-title\"\n      aria-describedby=\"simple-modal-description\"\n    >\n\n      <div style={modalStyle} className={classes.paper}>\n        <h2 id=\"simple-modal-title\">{modalContent.title}</h2>\n        {modalContent.body ?\n          <TableContainer component={Paper} className={classes.table}>\n            <Table stickyHeader className={classes.table} size=\"small\" aria-label=\"a dense table\">\n              <TableHead>\n                <TableRow>\n                  {Object.keys(modalContent.body[0]).map((key, index) => (\n                    <TableCell align=\"right\"\n                      key={validIdHelper(key + '-TableHead-TableCell-' + index)}\n                      id={validIdHelper(key + '-TableHead-TableCell-' + index)}>\n                      {prettifyString(key.substring(key.lastIndexOf('.') + 1, key.length))}</TableCell>\n\n\n                  ))}\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {modalContent.body.map((item, index) => (\n\n                  <TableRow\n                    key={validIdHelper('TableRow-' + index)}\n                    id={validIdHelper('TableRow-' + index)} >\n                    {\n                      Object.keys(item).map(key => (\n                        <TableCell align=\"right\"\n                          key={validIdHelper(key + '-TableBody-TableCell-' + index)}\n                          id={validIdHelper(key + '-TableBody-TableCell-' + index)}>\n                          {\n                            modalContent.body[index][key] ?\n                              modalContent.body[index][key].rendered ?\n                                modalContent.body[index][key].rendered :\n                                modalContent.body[index][key].value ?\n                                  modalContent.body[index][key].value :\n                                  typeof modalContent.body[index][key] === 'number' ?\n                                    (Math.round(modalContent.body[index][key] * 100) / 100)//.toLocaleString()\n                                    :\n                                    modalContent.body[index][key] //.toLocaleString() \n                              :\n                              ''\n                          }\n                        </TableCell>\n                      ))\n                    }\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </TableContainer >\n          :\n\n          <Card className={`${classes.card} ${classes.flexCentered}`}>\n            <CircularProgress className={classes.circularProgress} />\n          </Card>}\n\n      </div >\n    </Modal >\n  )\n}","import $ from 'jquery';\nimport _ from 'lodash'\nimport React, { useState, useEffect, useContext } from 'react';\nimport { Typography, Box, Grid, Card, Accordion, AccordionSummary, AccordionDetails, Divider, InputLabel, MenuItem, FormControl, Select } from '@material-ui/core'\nimport { ExpandMore, FilterList } from '@material-ui/icons';\nimport ModalTable from '../../Material/ModalTable';\nimport { ResponsiveCalendar } from '@nivo/calendar'\nimport { format, addDays } from 'date-fns';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { MuiPickersUtilsProvider, KeyboardDatePicker } from '@material-ui/pickers';\nimport AppContext from '../../../contexts/AppContext';\nimport { Loader, ApiHighlight, CodeFlyout } from \"@pbl-demo/components/Accessories\";\nimport { useStyles, topBarBottomBarHeight, additionalHeightForFlyout } from '../styles.js';\nconst { validIdHelper } = require('../../../tools');\n\nexport default function SalesCalendar(props) {\n  // console.log('SalesCalendar')\n  const { clientSession, setPaywallModal, show, codeShow, sdk, corsApiCall, isReady } = useContext(AppContext)\n  const { userProfile, lookerUser, lookerHost } = clientSession\n  const [value, setValue] = useState(0);\n  const [fromDate, setFromDate] = useState('');\n  const [toDate, setToDate] = useState('');\n  const [category, setCategory] = useState('All')\n  const [desiredField, setDesiredField] = useState('')\n  const [apiContent, setApiContent] = useState(undefined);\n  const [open, setOpen] = React.useState(false);\n  const [modalContent, setModalContent] = useState({});\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\n  const [expansionPanelHeight, setExpansionPanelHeight] = useState(0);\n\n  const classes = useStyles();\n  const { staticContent: { lookerContent }, staticContent: { type }, activeTabValue, handleTabChange } = props;\n\n  //handle opening of modal for advanced and premium users\n  const handleModalOpen = async ({ day }) => {\n    let originalInlineQueryCopy = JSON.parse(JSON.stringify(lookerContent[0].inlineQuery));\n    originalInlineQueryCopy.filters = {\n      ...originalInlineQueryCopy.filters,\n      [originalInlineQueryCopy.fields[0]]: day,\n      [originalInlineQueryCopy.fields[1]]: category === \"All\" ? '' : category\n    }\n    originalInlineQueryCopy.total = true;\n    originalInlineQueryCopy.limit = \"25\";\n\n    setOpen(true);\n    let lookerResponseData = await sdk.ok(sdk.run_inline_query({ result_format: lookerContent.result_format || 'json', body: originalInlineQueryCopy }));\n    let modalObj = {\n      \"title\": `Detail View for ${day}`,\n      \"body\": lookerResponseData\n    }\n    setModalContent(modalObj);\n  };\n\n  const handleModalClose = () => {\n    setModalContent({})\n    setOpen(false);\n  };\n\n  const handleFromDate = newValue => {\n    let validDate = Date.parse(newValue);\n    if (validDate > 0) {\n      let newValueAsDate = format(addDays(new Date(newValue), 1), 'yyyy-MM-dd');\n      setFromDate(newValueAsDate);\n    }\n  }\n  const handleToDate = newValue => {\n    let validDate = Date.parse(newValue);\n    if (validDate > 0) {\n      let newValueAsDate = format(addDays(new Date(newValue), 1), 'yyyy-MM-dd');\n      setToDate(newValueAsDate);\n    }\n  }\n\n  const handleCategory = newValue => {\n    setCategory(newValue)\n  }\n\n  const handleDesiredField = newValue => {\n    setDesiredField(newValue)\n  }\n\n  let filterData = [];\n  if (apiContent) {\n    //filtering for fromDate, toDate and category\n    filterData = _.filter(apiContent, (row) => {\n      return (row[apiContent.inlineQuery.fields[0]] >= fromDate\n        && row[apiContent.inlineQuery.fields[0]] < toDate\n        && (category === 'All' ? true : row[apiContent.inlineQuery.fields[1]] === category)\n      )\n    })\n    //converting filterDAta to desired format for vis\n    filterData = filterData.map(item => {\n      return {\n        'day': item[apiContent.inlineQuery.fields[0]],\n        'category': item[apiContent.inlineQuery.fields[1]],\n        'value': item[desiredField]\n      }\n    })\n\n    //special exception for category all\n    //need to reduce array by day across categories\n    //destructuing in reduce of value would not work for dynamic var\n    if (category === 'All') {\n      //create array of all unique dates\n      const uniqueDates = [...new Set(filterData.map(item => item.day))];\n      let filteredAndReducedForAll = []\n      //iterate over unique date\n      uniqueDates.map(uniqueDate => {\n        //filter filterData for current unique date\n        let value = _.filter(filterData, row => {\n          return row.day === uniqueDate\n        }).reduce((acc, { value }) => acc + value, 0)\n        let thisObj = {\n          day: uniqueDate,\n          value: value,\n          category: 'All'\n        }\n        filteredAndReducedForAll.push(thisObj)\n\n      })\n      filterData = filteredAndReducedForAll;\n    }\n  }\n\n  useEffect(() => {\n    if (isReady) {\n      corsApiCall(performLookerApiCalls, [lookerContent])\n      setDesiredField(lookerContent[0].desiredFields[0])\n    }\n  }, [lookerUser, isReady])\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", () => setHeight((window.innerHeight - topBarBottomBarHeight)));\n    setExpansionPanelHeight($('.MuiExpansionPanel-root:visible').innerHeight() || 0)\n\n  })\n\n  const performLookerApiCalls = function (lookerContent) {\n    // console.log('performLookerApiCalls')\n    setApiContent(undefined); //set to empty array to show progress bar and skeleton\n    lookerContent.map(async lookerContent => {\n      let { inlineQuery } = lookerContent;\n      inlineQuery.filters = {\n        [lookerContent.desiredFilterName]: lookerUser.user_attributes.brand\n      };\n      let lookerResponseData = await sdk.ok(sdk.run_inline_query({ result_format: lookerContent.result_format || 'json', body: inlineQuery }));\n\n      // console.log('lookerResponseData', lookerResponseData)\n      lookerResponseData = lookerResponseData.filter(item => {\n        return item[inlineQuery.fields[0]]\n      })\n      let uniqueCategories = ['All'];\n      for (let i = 0; i < lookerResponseData.length; i++) {\n        if (uniqueCategories.indexOf(lookerResponseData[i][inlineQuery.fields[1]]) === -1) {\n          uniqueCategories.push(lookerResponseData[i][inlineQuery.fields[1]])\n        }\n      }\n      lookerResponseData.inlineQuery = inlineQuery;\n      lookerResponseData.uniqueCategories = uniqueCategories;\n      setFromDate(lookerResponseData[lookerResponseData.length - 1][lookerResponseData.inlineQuery.fields[0]]);\n      setToDate(incrementDate(lookerResponseData[0][lookerResponseData.inlineQuery.fields[0]], 1));\n      setApiContent(lookerResponseData)\n    })\n  }\n\n  let nivoColorScale = ['#61cdbb', '#97e3d5', '#e8c1a0', '#f47560']\n  let googleColorScale = ['#4595EC', '#F3A759', '#E24E3A', '#65AB5A'];\n\n  return (\n    <div className={`${classes.root} demoComponent`}\n      style={{ height }}>\n      <Card elevation={1} className={`${classes.padding15} ${classes.height100Percent} ${classes.overflowScroll}`}>\n        <Grid container\n          key={validIdHelper(type)} >\n          <div className={`${classes.root} `}>\n            <Loader\n              hide={apiContent && apiContent.length}\n              classes={classes}\n              height={height - expansionPanelHeight}\n            />\n\n            <FilterBar {...props}\n              classes={classes}\n              apiContent={apiContent}\n              fromDate={fromDate}\n              toDate={toDate}\n              category={category}\n              desiredField={desiredField}\n              handleFromDate={handleFromDate}\n              handleToDate={handleToDate}\n              handleCategory={handleCategory}\n              handleDesiredField={handleDesiredField}\n            />\n\n\n            {apiContent && apiContent.length ?\n              <Box>\n                <Grid container\n                  spacing={3}\n                  className={`${classes.noContainerScroll}`}>\n\n                  <CodeFlyout {...props}\n                    classes={classes}\n                    lookerUser={lookerUser}\n                    height={height - expansionPanelHeight - additionalHeightForFlyout}\n                  />\n\n                  <Divider className={classes.divider} />\n                  <Grid item sm={12} >\n\n                    <Box className={`${classes.w100} ${classes.padding10}`} mt={2}>\n\n                      <ApiHighlight height={400} classes={classes}>\n                        <ResponsiveCalendar\n                          data={filterData}\n                          align=\"top\"\n                          from={incrementDate(fromDate, 1)}\n                          to={incrementDate(toDate, 1)}\n                          emptyColor=\"#eeeeee\"\n                          colors={desiredField === lookerContent[0].desiredFields[0] ? googleColorScale : nivoColorScale}\n                          yearSpacing={40}\n                          monthBorderColor=\"#ffffff\"\n                          dayBorderWidth={2}\n                          dayBorderColor=\"#ffffff\"\n                          margin={{ bottom: 40, left: 40 }}\n                          legends={[\n                            {\n                              anchor: 'bottom-right',\n                              direction: 'row',\n                              translateY: 36,\n                              itemCount: 4,\n                              itemWidth: 42,\n                              itemHeight: 36,\n                              itemsSpacing: 14,\n                              itemDirection: 'right-to-left'\n                            }\n                          ]}\n                          onClick={(day, event) => {\n                            if (!day.value) {\n                            } else if (lookerUser.user_attributes.permission_level === 'basic') {\n                              setPaywallModal({\n                                'show': true,\n                                'permissionNeeded': 'see_drill_overlay'\n                              });\n                            } else {\n                              corsApiCall(handleModalOpen, [day])\n                              event.stopPropagation();\n                            }\n                          }}\n                        />\n                      </ApiHighlight>\n                    </Box>\n                  </Grid>\n                </Grid>\n              </Box> :\n              ''\n            }\n          </div>\n        </Grid >\n        {\n          open ?\n            <ModalTable\n              {...props}\n              open={open}\n              onClose={handleModalClose}\n              classes={classes}\n              modalContent={modalContent}\n            />\n\n            : ''\n        }\n      </Card>\n    </div >\n  )\n}\n//Filter Bar code\nfunction FilterBar(props) {\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, classes,\n    apiContent, fromDate, toDate, category, desiredField, handleFromDate, handleToDate, handleCategory, handleDesiredField } = props;\n\n  const [expanded, setExpanded] = useState(true);\n\n  const handleExpansionPanel = (event, newValue) => {\n    setExpanded(expanded ? false : true);\n  };\n\n  // console.log('FilterBar')\n  // console.log('fromDate', fromDate)\n  // console.log('toDate', toDate)\n\n  return (\n    <Accordion expanded={expanded} onChange={handleExpansionPanel} className={classes.w100} elevation={0}>\n      <AccordionSummary\n        expandIcon={<ExpandMore />}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <FilterList /><Typography className={`${classes.heading} ${classes.ml12}`}>Filter:</Typography>\n\n      </AccordionSummary>\n      <AccordionDetails>\n        <Grid container spacing={3}>\n          {apiContent ?\n            <>\n              <Grid item sm={3}>\n\n                <ApiHighlight classes={classes}>\n                  <FormControl className={classes.formControl}>\n                    <InputLabel\n                      id={`${validIdHelper(type + '-FilterBar-DataPropery-SelectLabel')}`}\n                    >\n                      Metric</InputLabel>\n                    <Select\n                      labelId={`${validIdHelper(type + '-FilterBar-DataPropery-SelectLabel')}`}\n                      id={`${validIdHelper(type + '-FilterBar-DataPropery-Select')}`}\n                      value={desiredField}\n                      onChange={(event) => handleDesiredField(event.target.value)}\n                    >\n                      {lookerContent[0].desiredFields.map((item, index) => (\n\n                        <MenuItem\n                          id={validIdHelper(`${item}-${index}`)}\n                          key={validIdHelper(`${item}-${index}`)}\n                          value={item}\n                        >{item.substring(item.lastIndexOf(\".\") + 1, item.length).split(\"_\").map(item => item.charAt(0).toUpperCase() + item.substring(1)).join(\" \")}</MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </ApiHighlight>\n              </Grid>\n              <Grid item sm={3}>\n                <ApiHighlight classes={classes}>\n                  <FormControl className={classes.formControl}>\n                    <InputLabel\n                      id={`${validIdHelper(type + '-FilterBar-Category-SelectLabel')}`}\n                    >\n                      Category</InputLabel>\n                    <Select\n                      labelId={`${validIdHelper(type + '-FilterBar-Category-SelectLabel')}`}\n                      id={`${validIdHelper(type + '-FilterBar-Category-Select')}`}\n                      value={category}\n                      onChange={(event) => handleCategory(event.target.value)}\n                    >\n                      {apiContent.uniqueCategories.map((item, index) => (\n\n                        <MenuItem\n                          id={validIdHelper(`${item}-${index}`)}\n                          key={validIdHelper(`${item}-${index}`)}\n                          value={item}>{item}</MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </ApiHighlight>\n              </Grid>\n\n              <Grid item sm={3}>\n\n                <ApiHighlight classes={classes}>\n                  <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                    <KeyboardDatePicker\n                      disableToolbar\n                      variant=\"inline\"\n                      format=\"MM/dd/yyyy\"\n                      margin=\"normal\"\n                      id=\"fromDate\"\n                      label=\"From date\"\n                      value={fromDate}\n                      onChange={handleFromDate}\n                      KeyboardButtonProps={{\n                        'aria-label': 'change date',\n                      }}\n                      minDate={apiContent[apiContent.length - 1][apiContent.inlineQuery.fields[0]]}\n                      maxDate={apiContent[0][apiContent.inlineQuery.fields[0]]}\n                    />\n                  </MuiPickersUtilsProvider>\n                </ApiHighlight>\n              </Grid>\n              <Grid item sm={3}>\n                <ApiHighlight classes={classes}>\n                  <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                    <KeyboardDatePicker\n                      disableToolbar\n                      variant=\"inline\"\n                      format=\"MM/dd/yyyy\"\n                      margin=\"normal\"\n                      id=\"toDate\"\n                      label=\"To date\"\n                      value={toDate}\n                      onChange={handleToDate}\n                      KeyboardButtonProps={{\n                        'aria-label': 'change date',\n                      }}\n                      minDate={fromDate}\n                      maxDate={toDate}\n                    />\n                  </MuiPickersUtilsProvider>\n                </ApiHighlight>\n              </Grid>\n            </>\n            : ''}\n        </Grid>\n      </AccordionDetails>\n    </Accordion >\n  )\n}\n\nfunction incrementDate(dateInput, increment) {\n  var dateFormatTotime = new Date(dateInput);\n  var increasedDate = new Date(dateFormatTotime.getTime() + (increment * 86400000));\n  return increasedDate.toISOString().split('T')[0];\n}","import SalesCalendar from '../../components/Demo/SalesCalendar/SalesCalendar'\nimport DateRangeOutlinedIcon from '@material-ui/icons/DateRangeOutlined';\n\n\nexport const SalesCalendarContent = {\n  \"type\": \"custom vis\",\n  \"label\": \"Sales Calendar\",\n  \"menuCategory\": \"sales\",\n  \"description\": \"Ayeeeeeee\",\n  \"icon\": DateRangeOutlinedIcon,\n  \"component\": SalesCalendar,\n  \"lookerContent\": [\n    {\n      \"type\": \"custom vis\",\n      \"lookerMethod\": \"runInlineQuery\",\n      \"label\": \"Sales Calendar\",\n      \"inlineQuery\": {\n        \"model\": \"atom_fashion\",\n        \"view\": \"order_items\",\n        \"fields\": [\n          \"order_items.created_date\",\n          \"products.category\",\n          \"order_items.order_count\",\n          \"order_items.total_sale_price\"\n        ],\n        \"query_timezone\": \"America/Los_Angeles\",\n        \"limit\": \"-1\"\n      },\n      \"desiredFilterName\": \"products.brand\",\n      \"desiredFields\": [\n        \"order_items.order_count\",\n        \"order_items.total_sale_price\"\n      ],\n      \"resultFormat\": \"json\"\n    }\n  ],\n  \"requiredPermissionLevel\": 0\n}","import Dashboard from '../../components/Demo/Dashboard/Dashboard'\nimport VisibilityOutlinedIcon from '@material-ui/icons/VisibilityOutlined';\n\n\nconst productCategoryFilter = {\n  \"label\": \"Select Product Category\",\n  \"filterName\": \"Category\",\n  \"lookerMethod\": \"runInlineQuery\",\n  \"inlineQuery\": {\n    \"model\": \"atom_fashion\",\n    \"view\": \"order_items\",\n    \"fields\": [\n      \"this_period\",\n      \"last_period\",\n      \"products.category\"\n    ],\n    \"filters\": {\n      \"order_items.created_date\": \"60 days ago for 60 days\",\n      \"order_items.count\": \">5\"\n    },\n    \"sorts\": [\n      \"products.category\"\n    ],\n    \"limit\": 500,\n    \"dynamic_fields\": \"[{\\\"table_calculation\\\":\\\"trend\\\",\\\"label\\\":\\\"trend\\\",\\\"expression\\\":\\\"${this_period} / ${last_period} - 1\\\",\\\"value_format\\\":null,\\\"value_format_name\\\":null,\\\"_kind_hint\\\":\\\"measure\\\",\\\"_type_hint\\\":\\\"number\\\"},{\\\"measure\\\":\\\"this_period\\\",\\\"based_on\\\":\\\"order_items.total_sale_price\\\",\\\"type\\\":\\\"count_distinct\\\",\\\"label\\\":\\\"This Period\\\",\\\"value_format\\\":null,\\\"value_format_name\\\":null,\\\"_kind_hint\\\":\\\"measure\\\",\\\"_type_hint\\\":\\\"number\\\",\\\"filter_expression\\\":\\\"matches_filter(${order_items.created_date},`30 days ago for 30 days`)\\\"},{\\\"measure\\\":\\\"last_period\\\",\\\"based_on\\\":\\\"order_items.total_gross_margin\\\",\\\"label\\\":\\\"Last Period\\\",\\\"value_format\\\":null,\\\"value_format_name\\\":null,\\\"_kind_hint\\\":\\\"measure\\\",\\\"_type_hint\\\":\\\"number\\\",\\\"filter_expression\\\":\\\"matches_filter(${order_items.created_date},`60 days ago for 30 days`)\\\"}]\",\n    \"theme\": \"atom_fashion\"\n  },\n  \"desiredFilterNames\": \"products.brand\",\n  \"component\": \"autocomplete\",\n  \"resultFormat\": \"json\"\n}\n\nconst regionFilter = {\n  \"label\": \"Select Region\",\n  \"filterName\": \"State Region\",\n  \"lookerMethod\": \"runInlineQuery\",\n  \"inlineQuery\":\n  {\n    \"model\": \"atom_fashion\",\n    \"view\": \"order_items\",\n    \"fields\": [\n      \"users.state_region\"\n    ],\n    \"limit\": \"500\"\n  },\n  \"desiredFilterNames\": \"users.state_region\",\n  \"component\": \"mapfilter\",\n  \"resultFormat\": \"json\"\n}\n\nconst ageFilter = {\n  \"label\": \"Select Age Range\",\n  \"filterName\": \"Age\",\n  \"lookerMethod\": \"runInlineQuery\",\n  \"inlineQuery\": {\n    \"model\": \"atom_fashion\",\n    \"view\": \"order_items\",\n    \"fields\": [\n      \"users.age\"\n    ],\n    \"limit\": \"500\"\n  },\n  \"desiredFilterNames\": \"users.age\",\n  \"component\": \"rangeslider\",\n  \"resultFormat\": \"json\"\n}\n\nconst revenueTierFilter = {\n  \"label\": \"Lifetime Revenue Tier\",\n  \"filterName\": \"Lifetime Revenue Tier\",\n  \"lookerMethod\": \"runInlineQuery\",\n  \"inlineQuery\": {\n    \"model\": \"atom_fashion\",\n    \"view\": \"order_items\",\n    \"fields\": [\n      \"user_order_facts.lifetime_revenue_tier\"\n    ],\n    \"limit\": \"500\"\n  },\n  \"desiredFilterNames\": \"users.lifetime_revenue_tier\",\n  \"component\": \"togglebuttonapi\",\n  \"resultFormat\": \"json\"\n}\n\nexport const SalesOverviewContent = {\n  \"type\": \"custom filter\",\n  \"label\": \"Sales Overview\",\n  \"menuCategory\": \"sales\",\n  \"description\": \"Overview of all your sales!\",\n  \"icon\": VisibilityOutlinedIcon,\n  \"component\": Dashboard,\n  \"lookerContent\": [\n    {\n      \"type\": \"dashboard\",\n      \"lookerMethod\": \"embedDashboard\",\n      \"id\": \"5\",\n      \"label\": \"Sales Overview\",\n      \"isNext\": true,\n      \"filters\": [productCategoryFilter, regionFilter, ageFilter, revenueTierFilter]\n    }],\n  \"requiredPermissionLevel\": 0\n}","import Dashboard from '../../components/Demo/Dashboard/Dashboard'\nimport ShowChartIcon from '@material-ui/icons/ShowChart';\n\nexport const WebAnalyticsContent = {\n  \"type\": \"simple dashboard\",\n  \"label\": \"Web Analytics\",\n  \"menuCategory\": \"marketing\",\n  \"icon\": ShowChartIcon,\n  \"description\": \"Overview of all your web traffic\",\n  \"component\": Dashboard,\n  \"lookerContent\": [\n    {\n      \"type\": \"dashboard\",\n      \"lookerMethod\": \"embedDashboard\",\n      \"id\": \"9\",\n      \"label\": \"Web Analytics\",\n      \"isNext\": false,\n      \"theme\": \"atom_fashion_filters\"\n    }\n  ],\n  \"requiredPermissionLevel\": 0\n}","import _ from 'lodash'\nimport React, { useState, useEffect, useContext, useRef } from 'react';\nimport { useParams, useHistory } from \"react-router-dom\";\nimport AppContext from '../../contexts/AppContext';\nimport { LookerEmbedSDK } from '@looker/embed-sdk'\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport { CssBaseline } from '@material-ui/core/';\nimport clsx from 'clsx';\nimport LeftDrawer from './LeftDrawer';\nimport '../Home.css';\nimport { useStyles } from './styles.js';\nimport { packageNameTheme } from '../../config/theme.js';\nimport * as DemoComponentsContentArr from '../../config/Demo';\nimport { TopBar, BottomBar } from \"@pbl-demo/components\";\nimport { TopBarContent } from '../../config/TopBarContent';\nimport { checkToken } from '@pbl-demo/components/Utils/auth';\nimport { permissionLevels, userTimeHorizonMap, modalPermissionsMap } from '../../config';\nimport { UserPermissionsModal } from \"@pbl-demo/components/Accessories\";\nconst { validIdHelper } = require('../../tools');\n\nexport default function Home(props) {\n  // console.log(\"Home\")\n  let { setClientSession, clientSession, sdk, setSdk, isReady } = useContext(AppContext)\n  let { democomponent } = useParams();\n  let history = useHistory();\n  const classes = useStyles();\n  const didMountRef = useRef(false)\n  const [drawerOpen, setDrawerOpen] = useState(window.innerWidth > 768 ? true : false);\n  const [highlightShow, setHighlightShow] = useState(false);\n  const [codeShow, setCodeShow] = useState(false);\n  const [payWallModal, setPaywallModal] = useState({});\n  const [selectedMenuItem, setSelectedMenuItem] = useState(democomponent);\n\n  const { lookerUser: { user_attributes: { permission_level } } = { user_attributes: 'No match' } } = clientSession;\n  const currentPermissionLevel = Object.keys(permissionLevels).indexOf(permission_level);\n  const demoComponentsContentArr = _.filter(DemoComponentsContentArr, demoComponent => demoComponent.requiredPermissionLevel <= currentPermissionLevel);\n  let topBarContent = { ...TopBarContent };\n  if (topBarContent.autocomplete && currentPermissionLevel < topBarContent.autocomplete.correspondingComponentContent.requiredPermissionLevel) {\n    delete topBarContent.autocomplete\n  }\n\n  const handleSwitchLookerUser = async (newValue, property) => {\n\n    let newLookerUser = { ...clientSession.lookerUser }\n    if (property === 'brand') {\n      newLookerUser.user_attributes.brand = newValue\n    } else if (property === 'permission') {\n      newLookerUser.permissions = permissionLevels[newValue]\n      newLookerUser.user_attributes.permission_level = newValue\n      newLookerUser.user_attributes.time_horizon = userTimeHorizonMap[newValue]\n    }\n\n    const lookerUserResponse = await fetch('/updatelookeruser', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(newLookerUser)\n    })\n\n    let lookerUserResponseData = await lookerUserResponse.json();\n    setClientSession(lookerUserResponseData.session);\n  }\n\n\n  const corsApiCall = async (func, args = []) => {\n    // console.log(\"corsApiCall\");\n\n    let checkTokenRsp = await checkToken(clientSession.lookerApiToken.expires_in);\n    if (checkTokenRsp.sdk) {\n      setSdk(checkTokenRsp.sdk)\n    }\n    if (checkTokenRsp.clientSession) {\n      setClientSession(checkTokenRsp.clientSession)\n    }\n    let res = func(...args)\n    return res\n  }\n\n  //componentDidMount\n  useEffect(() => {\n\n    let modifiedBaseUrl = clientSession.lookerBaseUrl.substring(0, clientSession.lookerBaseUrl.lastIndexOf(\":\"));\n    LookerEmbedSDK.init(modifiedBaseUrl, '/auth')\n\n    window.addEventListener(\"resize\", () => {\n      setDrawerOpen(window.innerWidth > 768 ? true : false)\n    });\n\n  }, [])\n\n  useEffect(() => {\n    if (didMountRef.current) {\n      // doStuff()\n    } else didMountRef.current = true\n  })\n\n\n  useEffect(() => {\n    if (highlightShow) setHighlightShow(!highlightShow);\n    if (codeShow) setCodeShow(!codeShow);\n    setSelectedMenuItem(democomponent)\n  }, [democomponent])\n\n  let ActiveDemoComponent;\n  const ActiveDemoComponentContent = _.find(demoComponentsContentArr, (o) => {\n    return selectedMenuItem === validIdHelper(_.lowerCase(o.label))\n  });\n  if (!ActiveDemoComponentContent) history.push(validIdHelper(_.lowerCase(demoComponentsContentArr[0].label)))\n  else ActiveDemoComponent = ActiveDemoComponentContent.component;\n\n  return (\n    <div className={classes.root} >\n\n      <AppContext.Provider value={{\n        clientSession, setClientSession,\n        payWallModal, setPaywallModal,\n        handleSwitchLookerUser,\n        drawerOpen, setDrawerOpen,\n        selectedMenuItem,\n        highlightShow, setHighlightShow,\n        codeShow, setCodeShow,\n        sdk,\n        corsApiCall,\n        theme: packageNameTheme,\n        isReady\n      }}>\n        <ThemeProvider theme={packageNameTheme}>\n          <CssBaseline />\n          <TopBar\n            content={topBarContent}\n            theme={packageNameTheme}\n            classes={classes}\n          />\n          <UserPermissionsModal content={{ permissionLevels, modalPermissionsMap }} classes={classes} />\n          <LeftDrawer DemoComponentsContentArr={demoComponentsContentArr} />\n          <main\n            className={clsx(classes.content, {\n              [classes.contentShift]: drawerOpen,\n            })}\n          >\n\n            <div className={classes.drawerHeader} />\n            {ActiveDemoComponent ? <ActiveDemoComponent staticContent={ActiveDemoComponentContent} /> : ''}\n          </main>\n\n          <BottomBar classes={classes} />\n        </ThemeProvider>\n      </AppContext.Provider>\n    </div>\n  )\n}","import _ from 'lodash'\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types'\nimport { BrowserRouter as Router, Switch, Route, Redirect } from \"react-router-dom\";\nimport AppContext from './contexts/AppContext';\nimport { checkForExistingSession, createSdkHelper } from '@pbl-demo/components/Utils/auth';\nimport SignIn from './components/SignIn/SignIn';\nimport Home from './components/Home/Home';\n\nimport * as DemoComponentsContentArr from './config/Demo';\nimport { validIdHelper } from './tools';\n\n\nfunction App(props) {\n  // console.log(\"App\")\n\n  const [clientSession, setClientSession] = useState({});\n  const [sdk, setSdk] = useState();\n  const [initialHref, setInitialHref] = useState();\n  const [isReady, setIsReady] = useState(false);\n\n  //onload\n  useEffect(() => {\n    async function fetchSession() {\n\n      const sessionResponse = await checkForExistingSession();\n      if (sessionResponse.session) {\n\n        const lookerBaseUrl = sessionResponse.lookerBaseUrl ? sessionResponse.lookerBaseUrl : undefined;\n        const accessToken = sessionResponse.lookerApiToken ? sessionResponse.lookerApiToken.api_user_token : undefined;\n\n        if (lookerBaseUrl && accessToken) {\n          const sdk = createSdkHelper({ accessToken, lookerBaseUrl })\n          setSdk(sdk)\n        }\n\n        setClientSession(sessionResponse.session)\n      }\n    }\n    fetchSession(); //make async call\n  }, [])\n\n  useEffect(() => {\n    if (clientSession && sdk) setIsReady(true)\n    else if (clientSession.userProfile) {\n      const lookerBaseUrl = clientSession.lookerBaseUrl ? clientSession.lookerBaseUrl : '';\n      const accessToken = clientSession.lookerApiToken ? clientSession.lookerApiToken.api_user_token : '';\n      const sdk = createSdkHelper({ accessToken, lookerBaseUrl })\n      setSdk(sdk)\n    }\n  }, [clientSession, sdk])\n\n  console.log({ clientSession })\n\n  return (\n    < Router >\n      <AppContext.Provider value={{\n        clientSession, setClientSession,\n        sdk, setSdk,\n        initialHref, setInitialHref,\n        isReady\n      }}>\n        <Switch>\n          <PrivateRoute\n            path='/analytics/:democomponent?'\n            // exact\n            isSignedIn={clientSession.userProfile ? true : false}\n            component={Home}\n            setInitialHref={setInitialHref}\n            initialHref={initialHref}\n          >\n          </PrivateRoute>\n          <PublicRoute\n            path='/'\n            exact\n            isSignedIn={clientSession.userProfile ? true : false}\n            component={SignIn}\n            initialHref={initialHref}>\n          </PublicRoute>\n          {/* catach all route */}\n          <Route render={() => <Redirect to=\"/\" />} />\n        </Switch>\n      </AppContext.Provider>\n    </Router >\n  )\n}\n\nApp.propTypes = {\n\n}\n\nexport default App\n\nconst PrivateRoute = ({\n  component: Component,\n  isSignedIn,\n  setInitialHref,\n  ...rest }) => {\n\n  if (!isSignedIn) setInitialHref(window.location.href);\n  else setInitialHref()\n\n  return (\n\n    <Route exact\n      {...rest} render={(props) => (\n        (isSignedIn) ?\n          <Component {...props} />\n          : <Redirect\n            to=\"/\"\n          />\n      )} />\n  );\n};\n\n\nconst PublicRoute = ({ component: Component,\n  isSignedIn,\n  // restricted, \n  initialHref,\n  ...rest }) => {\n\n  const demoComponentMap = {};\n  Object.keys(DemoComponentsContentArr).map(key => {\n    demoComponentMap[validIdHelper(_.lowerCase(DemoComponentsContentArr[key].label))] =\n      validIdHelper(_.startCase(DemoComponentsContentArr[key].type));\n  });\n\n  let urlToUse = '/analytics/home';\n  if (initialHref) {\n    let initialHrefArr = initialHref.split('/');\n    let lastTwoHrefArr = initialHrefArr.slice(-2);\n    let lastOneHrefArr = initialHrefArr.slice(-1);\n\n    if (demoComponentMap.hasOwnProperty(lastOneHrefArr)) urlToUse = lastTwoHrefArr.join('/');\n  }\n\n  return (\n    // restricted = false meaning public route\n    // restricted = true meaning restricted route\n    <Route exact\n      {...rest} render={(props) => (\n        (isSignedIn) ?\n          <Redirect\n            to={urlToUse}\n          />\n          : <Component {...props} />\n      )} />\n  );\n};","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React from 'react';\n\nconst AppContext = React.createContext(null);\n\nexport default AppContext;","import AppContextAtom from '../../atom/src/contexts/AppContext';\nimport AppContextVision from '../../vision/src/contexts/AppContext';\n\n\nexport const makeid = (length) => {\n  var result = '';\n  var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  var charactersLength = characters.length;\n  for (var i = 0; i < length; i++) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n};\n\n\nexport const validIdHelper = (str) => {\n  // console.log('validIdHelper')\n  // console.log('str', str)\n  //need to replace special characters that may be associated with id...\n  return str.replace(/[^a-zA-Z0-9-.#]/g, \"\")\n}\n\nexport const prettifyString = (str) => {\n  var i, frags = str.split('_');\n  for (i = 0; i < frags.length; i++) {\n    frags[i] = frags[i].charAt(0).toUpperCase() + frags[i].slice(1);\n  }\n  return frags.join(' ');\n}\n\nexport const getUrlVars = (url) => {\n  var hash;\n  var myJson = {};\n  var hashes = url.slice(url.indexOf('?') + 1).split('&');\n  for (var i = 0; i < hashes.length; i++) {\n    hash = hashes[i].split('=');\n    myJson[hash[0]] = hash[1];\n    // If you want to get in native datatypes\n    // myJson[hash[0]] = JSON.parse(hash[1]); \n  }\n  return myJson;\n}\nexport const decodeHtml = (html) => {\n  var txt = document.createElement(\"textarea\");\n  txt.innerHTML = html;\n  return txt.value;\n}\n\nexport const appContextMap = {\n  \"atom\": AppContextAtom,\n  \"vision\": AppContextVision,\n}\n\nexport const validateContent = (object, schema) => {\n  var errors = Object.keys(schema).filter(function (key) {\n    return !schema[key](object[key]);\n  }).map(function (key) {\n    return new Error(key + \" is invalid.\");\n  });\n\n  if (errors.length > 0) {\n    errors.forEach(function (error) {\n      console.log(error.message);\n    });\n  } else {\n    console.log(\"info is valid\");\n  }\n}","import React from 'react';\n\nconst AppContext = React.createContext(null);\n\nexport default AppContext;","module.exports = {\n  makeid: (length) => {\n    var result = '';\n    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    var charactersLength = characters.length;\n    for (var i = 0; i < length; i++) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n    return result;\n  },\n\n\n  validIdHelper: (str) => {\n    // console.log('validIdHelper')\n    // console.log('str', str)\n    //need to replace special characters that may be associated with id...\n    return str.replace(/[^a-zA-Z0-9-.#]/g, \"\")\n  },\n\n  prettifyString: (str) => {\n    var i, frags = str.split('_');\n    for (i = 0; i < frags.length; i++) {\n      frags[i] = frags[i].charAt(0).toUpperCase() + frags[i].slice(1);\n    }\n    return frags.join(' ');\n  },\n\n  getUrlVars: (url) => {\n    var hash;\n    var myJson = {};\n    var hashes = url.slice(url.indexOf('?') + 1).split('&');\n    for (var i = 0; i < hashes.length; i++) {\n      hash = hashes[i].split('=');\n      myJson[hash[0]] = hash[1];\n      // If you want to get in native datatypes\n      // myJson[hash[0]] = JSON.parse(hash[1]); \n    }\n    return myJson;\n  },\n  decodeHtml: (html) => {\n    var txt = document.createElement(\"textarea\");\n    txt.innerHTML = html;\n    return txt.value;\n  }\n}","export default __webpack_public_path__ + \"static/media/logo_text.fdcf1447.svg\";","var map = {\n\t\"./background1.jpg\": 927,\n\t\"./background2.jpg\": 928,\n\t\"./background3.jpg\": 929,\n\t\"./background4.jpg\": 930\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 926;","export default __webpack_public_path__ + \"static/media/background1.29b503d4.jpg\";","export default __webpack_public_path__ + \"static/media/background2.1229c8ed.jpg\";","export default __webpack_public_path__ + \"static/media/background3.fab43a80.jpg\";","export default __webpack_public_path__ + \"static/media/background4.e2be32a1.jpg\";"],"sourceRoot":""}