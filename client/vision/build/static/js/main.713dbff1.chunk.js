(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{1273:function(e,t){},1274:function(e,t){},1287:function(e,t,n){"use strict";n.r(t);var a=n(2),o=n(0),r=n.n(o),i=n(38),s=n.n(i),l=(n(646),n(7)),c=n(122),d=n(11),u=n.n(d),m=n(27),p=n(8),b=n(118),h=n(51),f=r.a.createContext(null),g=n(153),j=n(77),y=n(66),x=n(386),v=n(385),C=function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).accessToken=e.accessToken,a}return Object(y.a)(n,[{key:"fetchToken",value:function(){return this.accessToken}},{key:"getToken",value:function(){var e=Object(m.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isAuthenticated()||this.activeToken.setToken(this.fetchToken()),e.abrupt("return",this.activeToken);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(function(e){Object(x.a)(n,e);var t=Object(v.a)(n);function n(e,a){var o;return Object(j.a)(this,n),(o=t.call(this,e,a||new g.BrowserTransport(e))).activeToken=new g.AuthToken,o}return Object(y.a)(n,[{key:"fetchToken",value:function(){return fetch("")}}]),Object(y.a)(n,[{key:"isAuthenticated",value:function(){var e=this.activeToken;return!(!e||!e.access_token)&&e.isActive()}},{key:"getToken",value:function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isAuthenticated()){e.next=9;break}return e.next=3,this.fetchToken();case 3:return t=e.sent,e.t0=this.activeToken,e.next=7,t.json();case 7:e.t1=e.sent,e.t0.setToken.call(e.t0,e.t1);case 9:return e.abrupt("return",this.activeToken);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"authenticate",value:function(){var e=Object(m.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getToken();case 2:return(n=e.sent)&&n.access_token&&(t.mode="cors",delete t.credentials,t.headers=Object(l.a)(Object(l.a)({},t.headers),{},{Authorization:"Bearer ".concat(this.activeToken.access_token)})),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(g.AuthSession)),O=function(){var e=Object(m.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/readsession",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",{session:n.session});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(m.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/writesession",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(Object(l.a)({},t))});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",{session:a.session});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/endsession",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.sent,e.abrupt("return",{message:t});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(e){var t=e.accessToken,n=e.lookerBaseUrl;if(t&&n){var a=new C(Object(l.a)(Object(l.a)({},Object(g.DefaultSettings)()),{},{base_url:n,accessToken:t}));return new g.Looker40SDK(a)}},S=function(){var e=Object(m.a)(u.a.mark((function e(t){var n,a,o,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Date.now()>t)){e.next=13;break}return e.next=3,fetch("/refreshlookertoken",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,o=a.session.lookerBaseUrl?a.session.lookerBaseUrl:"",r=a.session.lookerApiToken?a.session.lookerApiToken.api_user_token:"",i=w({accessToken:r,lookerBaseUrl:o}),e.abrupt("return",{status:"updated",sdk:i,clientSession:a.session});case 13:return e.abrupt("return",{status:"ok"});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=n(32),I=n.n(T),N=n(558),H=n(141),F=n(80),D=n(36),A=n(1344),P=n(280),B=P.a[200],L=Object(A.a)((function(e){var t;return t={root:{flexGrow:1,backgroundColor:e.palette.background.paper}},Object(D.a)(t,"root",{display:"flex",backgroundColor:"rgb(229, 229, 229)"}),Object(D.a)(t,"flexCentered",{display:"flex",justifyContent:"center",alignItems:"center"}),Object(D.a)(t,"card",{minWidth:350,minHeight:500,left:"75%",top:"50%",transform:"translate(-75%, -50%)",position:"absolute",textAlign:"center",backgroundColor:B}),Object(D.a)(t,"h100",{height:"100%"}),Object(D.a)(t,"title",{fontSize:14}),Object(D.a)(t,"pos",{marginBottom:12}),Object(D.a)(t,"actions",{alignItems:"center",justifyContent:"center"}),Object(D.a)(t,"cardCopy",{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",margin:"0",width:"80%"}),t})),R=(n(338),n(1346)),E=n(1348),U=n(1349),M=n(184),$=n(1350),z=n(42),V=z.validIdHelper,G=z.usecaseHelper;function q(e){var t=Object(o.useContext)(f),r=t.clientSession,i=t.setClientSession,s=(t.sdk,t.setSdk),c=(t.initialHref,t.setInitialHref,function(){var e=Object(m.a)(u.a.mark((function e(t){var n,a,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.error){e.next=3;break}e.next=11;break;case 3:return e.next=5,k(Object(l.a)(Object(l.a)({},r),{},{userProfile:t.profileObj,lookerUser:F.initialLookerUser}));case 5:n=e.sent,a=n.session.lookerBaseUrl?n.session.lookerBaseUrl:"",o=n.session.lookerApiToken?n.session.lookerApiToken.api_user_token:"",c=w({lookerBaseUrl:a,accessToken:o}),i(n.session),s(c);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d="".concat("610722499102-hqo4cena1n453n11mqk88jj5arv4p3ft",".apps.googleusercontent.com"),p=G(H),b=L(),h=Math.floor(4*Math.random())+1,g=n(906)("./".concat(p,"_background").concat(h,".jpg")).default,j=n(914)("./".concat(p,"_logo_black.svg")).default;return Object(a.jsx)("div",{className:"".concat(b.root," demoComponent ").concat(b.h100),children:Object(a.jsx)(R.a,{container:!0,className:"".concat(b.h100),children:Object(a.jsx)(R.a,{item:!0,sm:12,className:"sign-in-background-img",style:{backgroundImage:"url(".concat(g,")"),backgroundSize:"cover"},children:Object(a.jsx)(E.a,{className:b.card,children:Object(a.jsxs)("div",{className:b.cardCopy,children:[Object(a.jsx)("img",{src:j}),Object(a.jsxs)(U.a,{children:[Object(a.jsx)(M.a,{variant:"h5",component:"h2",children:"Welcome"}),Object(a.jsxs)(M.a,{variant:"body2",component:"p",children:["Please sign in to access ",Object(a.jsx)("br",{})," your merchant portal"]})]}),Object(a.jsx)($.a,{className:"".concat(b.actions),children:Object(a.jsx)(N.GoogleLogin,{clientId:d,buttonText:"Login",onSuccess:c,onFailure:c,cookiePolicy:"single_host_origin"})})]})})})},V("sign in page"))})}var Q=n(43),W=n(62),K=n(1394),Y=n(1411),J=n(4),X=n(1358),Z=n(1359),ee=n(583),te=n(1421),ne=n(1362),ae=n(1360),oe=n(1361),re=n(1363),ie=n(578),se=240,le=Object(A.a)((function(e){return{root:{display:"flex",backgroundColor:"rgb(229, 229, 229)"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),zIndex:1201,backgroundColor:"#343D4E"},appBarShift:{width:"calc(100% - ".concat(se,"px)"),marginLeft:se,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:se,flexShrink:0,borderRight:"none",backgroundColor:"transparent"},drawerPaper:{width:se,borderRight:"none",backgroundColor:"transparent"},drawerHeader:Object(l.a)(Object(l.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},title:{flexGrow:1},tabs:{borderRight:"1px solid ".concat(e.palette.divider)},dNone:{display:"none"},dBlock:{display:"block"},relative:{position:"relative"},absolute:{position:"absolute"},right0:{right:0},top0:{top:0},right24:{right:24},top24:{top:24},ml12:{marginLeft:12},mr12:{marginRight:12},mt12:{marginTop:12},highlightLegend:{position:"fixed",bottom:e.spacing(2),left:e.spacing(2),zIndex:1200},tree:{height:240,flexGrow:1,maxWidth:400},parentHoverVisibility:{"&:hover $childHoverVisibility":{visibility:"visible"}},childHoverVisibility:{visibility:"hidden"},fontSize1em:{fontSize:"1em"},padding10:{padding:10},mt5:{marginTop:5},mb5:{marginBottom:5},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},list:{width:"100%",maxWidth:360,backgroundColor:"transparent"},nested:{paddingLeft:e.spacing(4)},mlAuto:{marginLeft:"auto"},mrAuto:{marginRight:"auto"},appBarBottom:{top:"auto",bottom:0},hidden:{visibility:"hidden"},roundedTab:{borderRadius:"0 100px 100px 0"},paddingBottom30:{paddingBottom:30},mtAuto:{marginTop:"auto"},mb10:{marginBottom:10}}}),{index:1}),ce=Object(ie.a)({}),de=Object(ie.a)({palette:{primary:{main:P.a[900]},secondary:{main:P.a[400]}}}),ue=n(580),me=n(1353),pe=n(1354),be=n(1424),he=n(1417),fe=n(42).validIdHelper,ge=Object(A.a)((function(e){return{zIndex1500:{zIndex:1500},mr12:{marginRight:12}}}));function je(e){var t=Object(h.g)(),n=ge(),r=Object(o.useContext)(f),i=r.setPaywallModal,s=r.clientSession,c=r.setClientSession,d=r.handleSwitchLookerUser,u=Object(o.useState)(null),m=Object(p.a)(u,2),b=m[0],g=m[1],j=Object(o.useState)(s.lookerUser.user_attributes.brand||""),y=Object(p.a)(j,2),x=y[0],v=y[1],C=function(e,n){g(null),null==e?(c({}),t.push("/"),_()):"modal"===e?i({show:!0,permissionNeeded:"explore"}):"string"===typeof e&&d(e,n)};return Object(o.useEffect)((function(){v(s.lookerUser.user_attributes.brand||"")}),[s.lookerUser]),Object(a.jsxs)("div",{className:"".concat(n.zIndex1500),children:[Object(a.jsxs)(ee.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){g(e.currentTarget)},color:"inherit",children:[Object(a.jsx)(te.a,{alt:s.userProfile.name,src:s.userProfile.imageUrl,className:n.mr12}),Object(a.jsx)(M.a,{children:"string"===typeof s.lookerUser.user_attributes.permission_level?s.lookerUser.user_attributes.permission_level.charAt(0).toUpperCase()+s.lookerUser.user_attributes.permission_level.substring(1):""})]}),Object(a.jsxs)(ue.a,{id:"simple-menu",anchorEl:b,keepMounted:!0,open:Boolean(b),onClose:C,children:[Object(a.jsx)(me.a,{autoFocus:!1,children:"Select User Level"}),Object.keys(F.lookerUserPermissions).map((function(e){return Object(a.jsx)(me.a,{autoFocus:!1,onClick:function(){return C(e,"permission")},children:I.a.capitalize(e)},fe("$lookerUserPermission-MenuItem-".concat(e)))})),Object(a.jsx)(pe.a,{className:n.divider}),Object(a.jsx)(me.a,{onClick:function(){return C(null)},children:"Sign Out"}),Object(a.jsx)(pe.a,{className:n.divider}),Object(a.jsx)(me.a,{onClick:function(){return C("modal")},children:"Show Monetization Modal"}),Object(a.jsx)(pe.a,{className:n.divider}),Object(a.jsxs)(me.a,{children:["Current brand: ",x]}),Object(a.jsx)(me.a,{children:Object(a.jsx)(he.a,{id:"combo-box-usermenu",options:F.lookerUserAttributeBrandOptions||[],getOptionLabel:function(e){return e.label},style:{width:300},onChange:function(e){return C(e.target.innerText||"","brand")},renderInput:function(e){return Object(a.jsx)(be.a,Object(l.a)(Object(l.a)({},e),{},{label:"Change merchant brand",variant:"outlined"}))},loadingText:"Loading...",disableautofocus:"true",onKeyDown:function(e){return e.stopPropagation()}})})]})]})}function ye(e){var t=le(),r=Object(o.useContext)(f),i=(r.clientSession,r.setClientSession,r.drawerOpen),s=r.setDrawerOpen,l=r.activeUsecase;return Object(a.jsx)(X.a,{position:"fixed",className:Object(J.a)(t.appBar),children:Object(a.jsxs)(Z.a,{children:[Object(a.jsx)(ee.a,{color:"inherit","aria-label":"open drawer",onClick:function(){return s(!i)},edge:"start",children:i?Object(a.jsx)(ae.a,{}):Object(a.jsx)(oe.a,{})}),l?Object(a.jsx)(te.a,{alt:"Icon",src:n(929)("./".concat(l,".svg")).default,variant:"square"}):"",Object(a.jsx)(ne.a,{badgeContent:3,color:"error",className:"".concat(t.mlAuto," ").concat(t.mr12," "),children:Object(a.jsx)(re.a,{})}),Object(a.jsx)(je,{})]})})}var xe=n(1427),ve=n(1352),Ce=n(1289),Oe=n(1374),ke=n(1375),_e=n(1368),we=n(1369),Se=n(1370),Te=n(1371),Ie=n(1372),Ne=n(1373),He=n(560),Fe=n.n(He),De=n(1364),Ae=n(1365),Pe=n(1366);function Be(e){var t=e.classes,n=Object(o.useContext)(f),r=n.highlightShow,i=n.setHighlightShow,s=n.codeShow,l=n.setCodeShow;return Object(a.jsxs)(R.a,{container:!0,className:"".concat(t.mtAuto," ").concat(t.mb10),children:[Object(a.jsx)(R.a,{item:!0,sm:6,children:Object(a.jsx)(De.a,{display:"inline",startIcon:Object(a.jsx)(Ae.a,{}),onClick:function(){s&&l(!s),i(!r)},children:"Source"})}),Object(a.jsx)(R.a,{item:!0,sm:6,children:Object(a.jsx)(De.a,{className:"".concat(t.ml12),display:"inline",startIcon:Object(a.jsx)(Pe.a,{}),onClick:function(){r&&i(!r),l(!s)},children:"Code"})})]})}var Le=n(42).validIdHelper;function Re(e){var t=le(),n=Object(o.useContext)(f),r=n.drawerOpen,i=n.setDrawerOpen;return Object(a.jsxs)(xe.a,{className:t.drawer,variant:"persistent",anchor:"left",open:r,classes:{paper:t.drawerPaper},children:[Object(a.jsx)("div",{className:t.drawerHeader,children:Object(a.jsx)(ee.a,{onClick:function(){return i(!1)},children:Object(a.jsx)(ae.a,{"aria-label":"close drawer"})})}),Object(a.jsx)(Ee,{classes:t}),Object(a.jsx)(Be,{classes:t})]})}function Ee(e){var t=e.classes,n=Object(o.useContext)(f),i=n.activeUsecase,s=n.selectedMenuItem,l=i?I.a.orderBy(H[i].demoComponents,["menuCategory"],["asc"]):[],c={},d=[],u=0;l.map((function(e,t){c.hasOwnProperty(e.menuCategory)?c[e.menuCategory]=[].concat(Object(Q.a)(c[e.menuCategory]),[e]):(c[e.menuCategory]=[e],u+=1,d.push(""+(t+u)))}));var m={splashpage19:Fe.a,customfilter5:_e.a,simpledashboard9:we.a,customfilter1:Se.a,customvis:Te.a,querybuilderexplorelite:Ie.a,reportbuilder14:Ne.a};return Object(a.jsx)(ve.a,{component:"nav","aria-labelledby":"nested-list-subheader",className:t.list,children:i?Object.keys(c).map((function(e,n){return Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)(Ce.a,{children:Object(a.jsx)(Oe.a,{primary:"home"===e?"":I.a.capitalize(e)})},"".concat(Le(e+"-outerListItem-"+n))),Object(a.jsx)(ve.a,{component:"div",disablePadding:!0,children:c[e].map((function(n,o){var r=n.lookerContent[0].id?Le(n.type+n.lookerContent[0].id):Le(n.type),i=m[r];return Object(a.jsxs)(Ce.a,{button:!0,className:"".concat(t.nested," ").concat(t.roundedTab),selected:Le(I.a.lowerCase(n.label))===s,component:b.b,to:Le(I.a.lowerCase(n.label)),children:[Object(a.jsx)(ke.a,{children:Object(a.jsx)(i,{})}),Object(a.jsx)(Oe.a,{primary:I.a.capitalize(n.label)})]},"".concat(Le(e+"-innerListItem-"+o)))}))},"".concat(Le(e+"-innerList-"+n)))]},"".concat(Le(e+"-menuList-"+n)))})):""})}var Ue=n(1420),Me=n(1290),$e=n(1433),ze=n(1376),Ve=Object(A.a)((function(e){return{paper:{position:"absolute",width:1e3,height:604,overflow:"scroll",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},card:{display:"flex",flexDirection:"column",justifyContent:"space-between",overflow:"scroll",cursor:"pointer","&:hover":{transform:"scale(1.05)",transition:"transform .2s"}},flexCentered:{display:"flex",justifyContent:"center",alignItems:"center"},padding15:{padding:15},divider:{marginTop:15,marginBottom:15,color:"#fff"},basic:{},advanced:{},premium:{},font75:{fontSize:".75em"},font875:{},padding30:{padding:30}}})),Ge=n(42).validIdHelper;function qe(){return{top:"".concat(10,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(10,"%)")}}function Qe(e){var t=Object(o.useContext)(f),n=t.clientSession,i=t.payWallModal,s=t.setPaywallModal,l=t.handleSwitchLookerUser,c=r.a.useState(qe),d=Object(p.a)(c,1)[0],u=Ve(),m={basic:["6 months of order data history","Atom Merchant Dashboards","Download PDFs, CSVs"],advanced:["Full year of order data history","Drill to row level information","Download row level information","Schedule dashboards for delivery (to you or others)","Set alerts and key threshold notifications"],premium:["2 Full years of order data history","Analyze your own data and save custom reports","View premium level, productivity enhancing reports","Share your reports with colleagues in Atom","Text message alerts"]};return Object(a.jsx)(Ue.a,{className:"".concat(u.modal," "),open:i.show||!1,onClose:function(){return s({})},children:Object(a.jsx)(Me.a,{in:i.show||!1,children:Object(a.jsx)("div",{style:d,className:"".concat(u.paper," ").concat(u.padding30),children:Object(a.jsx)(R.a,{container:!0,spacing:3,children:Object.keys(F.lookerUserPermissions).map((function(e){return Object(a.jsx)(R.a,{item:!0,sm:4,children:Object(a.jsxs)(E.a,{className:"".concat(u.card," ").concat(u[e]),elevation:1,style:e===n.lookerUser.user_attributes.permission_level?{backgroundColor:"#5F6BD8",color:"#ffffff",height:519}:{height:519},onClick:function(){l(e,"permission"),s({})},children:[Object(a.jsxs)(U.a,{children:[Object(a.jsx)(M.a,{variant:"h6",display:"justify",children:I.a.capitalize(e)}),Object(a.jsx)(M.a,{display:"justify",children:Object(a.jsx)($e.a,{name:"read-only",value:"basic"===e?"3":"advanced"===e?"4":"5",readOnly:!0})}),Object(a.jsx)(M.a,{variant:"subtitle1",style:{fontStyle:"italic"},children:"basic"===e?"Drive your business with clear KPIs":"advanced"===e?"Deeper insights, operations":"Drive your business with Atom"}),Object(a.jsx)(pe.a,{className:"".concat(u.divider," ")}),Object(a.jsx)(ve.a,{className:u.root,children:m[e].map((function(t,n){return Object(a.jsxs)(Ce.a,{dense:!0,className:u.font875,children:[Object(a.jsx)(ke.a,{children:Object(a.jsx)(ze.a,{fontSize:"small"})}),Object(a.jsx)(Oe.a,{primary:t})]},"monetizationModal-ListItem-".concat(e,"-").concat(n))}))})]}),Object(a.jsx)($.a,{disableSpacing:!1,children:Object(a.jsx)(De.a,{color:"primary",variant:"outlined",fullWidth:!0,onClick:function(){l(e,"permission"),s({})},style:e===n.lookerUser.user_attributes.permission_level?{color:"#ffffff",borderColor:"#ffffff"}:{},children:e===n.lookerUser.user_attributes.permission_level?"Active":Object.keys(m).indexOf(n.lookerUser.user_attributes.permission_level)<Object.keys(m).indexOf(e)?"Upgrade":"Switch"})})]})},Ge("monetizationModal-gridItem-".concat(e)))}))})})})})}var We=n(1382),Ke=n(1413),Ye=n(561),Je=n.n(Ye),Xe=n(1419),Ze=n(1377);function et(e){var t=Object(o.useContext)(f),n=t.codeShow,r=t.setCodeShow,i=e.classes,s=(e.lookerContent,e.clientSideCode,e.serverSideCode,e.lookerUser),l=(e.permissionNeededCode,e.height);return Object(a.jsx)(Me.a,{in:n||!1,children:Object.keys(s).length?Object(a.jsxs)(R.a,{container:!0,spacing:3,className:"".concat(i.padding20," ").concat(i.codeFlyoutContainer),style:{height:l},children:[Object(a.jsx)(R.a,{item:!0,sm:11,children:Object(a.jsx)(M.a,{variant:"h6",className:" ".concat(i.mrAuto),style:{color:"white"},children:"Looker User Object"})}),Object(a.jsx)(R.a,{item:!0,sm:1,style:{textAlign:"right"},children:Object(a.jsx)(Je.a,{style:{color:"white",cursor:"pointer"},onClick:function(){return r()}})}),Object(a.jsx)(R.a,{item:!0,sm:12,children:Object(a.jsx)(tt,{code:s})})]}):""})}function tt(e){var t=e.code;return Object(a.jsx)(Xe.a,{language:"json",style:Ze.a,showLineNumbers:!0,children:"object"===typeof t?JSON.stringify(t,!0,4):t})}var nt=n(281),at=n(283),ot=nt.a[500],rt=at.a[500],it=(nt.a[900],at.a[900],nt.a[100]),st=at.a[100],lt=Object(A.a)((function(e){var t;return t={root:{flexGrow:1,backgroundColor:e.palette.background.paper,overflow:"scroll",borderRadius:8},flexCentered:{display:"flex",justifyContent:"center",alignItems:"center"},hidden:{visibility:"hidden",position:"absolute",zIndex:-1},tabs:{backgroundColor:"white",color:"#6c757d"},dNone:{display:"none"},dBlock:{display:"block"},tree:{height:240,flexGrow:1,maxWidth:400},icon:{marginRight:12,fontSize:"1rem",overflow:"visible"},mt12:{marginTop:12},w100:{width:"100%"},mlAuto:{marginLeft:"auto"},skeleton:{minWidth:275,minHeight:600},card:{minWidth:275},maxHeight200:{maxHeight:200,height:200,overflow:"hidden"},mt30:{marginTop:30},mb30:{marginBottom:30},textCenter:{textAlign:"center"},cursorPointer:{cursor:"pointer"},border:{border:"1px solid black"},height800:{height:800},maxHeight100:{maxHeight:100,height:100},maxHeight400:{maxHeight:400,height:400},minHeight200:{minHeight:200,overflow:"scroll"},redNeg:{backgroundColor:it,color:ot,fontWeight:800},greenPos:{backgroundColor:st,color:rt,fontWeight:800},padding30:{padding:30},mb12:{marginBottom:12},overflowScroll:{overflow:"scroll"},overflowHidden:{overflow:"hidden"},overflowVisible:{overflow:"visible"},maxHeight150:{maxHeight:150,height:150},minHeight150:{minHeight:150,overflow:"scroll"},carouselLegend:{backgroundColor:"rgb(192,192,192, .5)\t !important",textAlign:"center !important",opacity:"100 !important",fontWeight:800},carouselLegendTitle:{fontSize:"24px !important"},carouselLegendBody:{fontSize:"16px !important"},positionRelative:{position:"relative"},padding15:{padding:15},maxHeight75:{maxHeight:75,height:75},overflowYScroll:{overflowY:"scroll",overflowX:"hidden"},drawerHeader:Object(l.a)(Object(l.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),padding20:{padding:20},positionFixedTopRight:{position:"fixed",top:88,right:24,bottom:0,zIndex:100},codeFlyoutContainer:{backgroundColor:"rgb(40, 42, 54)",overflow:"scroll",borderRadius:"0 8px 8px 0"}},Object(D.a)(t,"overflowScroll",{overflow:"scroll"}),Object(D.a)(t,"overflowHidden",{overflow:"hidden"}),Object(D.a)(t,"height100Percent",{height:"100%"}),Object(D.a)(t,"noContainerScroll",{width:"100%",margin:0}),Object(D.a)(t,"lookerCardShadow",{border:"none",borderRadius:"6px",boxShadow:"rgba(0, 0, 0, 0.11) 0px 2px 12px, rgba(0, 0, 0, 0.04) 0px 1px 4px"}),Object(D.a)(t,"maxHeight60",{maxHeight:60,height:60}),Object(D.a)(t,"maxHeight350",{maxHeight:350,height:350}),Object(D.a)(t,"maxHeight80Percent",{maxHeight:"80%",height:"80%"}),t})),ct=n(1423);function dt(e){var t=e.children,n=e.color,r=e.height,i=e.width,s=e.margin,d=e.id,u=e.backgroundColor,m=(Object(c.a)(e,["children","color","height","width","margin","id","backgroundColor"]),{});return m=Object(o.useContext)(f).highlightShow?Object(l.a)(Object(l.a)({},m),{},{border:"3px solid ".concat(n),backgroundColor:"".concat(u),borderRadius:"4px",position:"relative"}):{border:"3px solid transparent",backgroundColor:"transparent"},r&&(m.height=r),i&&(m.width=i),s&&(m.margin=s),Object(a.jsx)("div",{id:d,style:m,children:t})}function ut(e){var t=Object.assign({},e),n=Object(o.useContext)(f).highlightShow,r=t.classes,i=t.children;return Object(a.jsxs)(dt,Object(l.a)(Object(l.a)({},t),{},{color:"#A142F4",backgroundColor:"rgba(161, 66, 244, 0.1)",children:[Object(a.jsx)(ct.a,{size:"small",label:"API",className:n?"test":"".concat(r.hidden),display:"inline",align:"right",style:{backgroundColor:"#A142F4",color:"#fff",top:"-10px",left:"-10px",position:"absolute"}}),i]}))}function mt(e){var t=Object.assign({},e),n=Object(o.useContext)(f).highlightShow,r=t.classes,i=t.children;return Object(a.jsxs)(dt,Object(l.a)(Object(l.a)({},t),{},{color:"#12B5CB",backgroundColor:"rgba(18, 181, 203, 0.1)",children:[Object(a.jsx)(ct.a,{size:"small",label:"Embed",className:n?"test":"".concat(r.hidden),display:"inline",align:"right",style:{backgroundColor:"#12B5CB",color:"#fff",top:"-10px",left:"-10px",position:"absolute"}}),i]}))}function pt(e){var t=Object.assign({},e),n=Object(o.useContext)(f).highlightShow,r=t.classes,i=t.children;return Object(a.jsxs)(dt,Object(l.a)(Object(l.a)({},t),{},{color:"#297AF4",backgroundColor:"rgba(41, 122, 244, 0.1)",children:[Object(a.jsx)(ct.a,{size:"small",label:"Embed Method",className:n?"test":"".concat(r.hidden),display:"inline",align:"right",style:{backgroundColor:"#297AF4",color:"#fff",top:"-10px",left:"-10px",position:"absolute"}}),i]}))}var bt=n(564),ht=n(42),ft=ht.validIdHelper,gt=ht.decodeHtml;function jt(e){var t=e.lookerContent,n=e.classes,i=Object(o.useState)(void 0),s=Object(p.a)(i,2),l=s[0],c=s[1],d=Object(o.useContext)(f),b=d.clientSession,h=d.sdk,g=d.corsApiCall,j=d.isReady,y=(b.userProfile,b.lookerUser),x={};Object(o.useEffect)((function(){if(j){var e=!0;return g(v).then((function(t){e&&c(t)})),function(){return e=!1}}}),[y,j]);var v=function(){var e=Object(m.a)(u.a.mark((function e(){var n,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.inlineQuery,e.next=3,h.ok(h.run_inline_query({result_format:t.resultFormat||"json",body:n}));case 3:return a=e.sent,x.id=ft("singleVisValue-".concat(t.id)),x.data=[],o=[],a.map((function(e){if(e[t.inlineQuery.fields[0]]){var n={x:e[t.inlineQuery.fields[0]].toString(),y:e[t.inlineQuery.fields[1]]||0,change:e.change};n&&"null"!==n.y&&o.push(n)}})),x.data=[].concat(o),e.abrupt("return",[x]);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=l&&l.length?isNaN((100*l[0].data[0].change).toFixed(2))?"":parseInt((100*l[0].data[0].change).toFixed(0))>=0?"&uarr;":"&darr;":"",O=l?"revenue"===t.chipFormat?"$".concat((l[0].data&&l[0].data[0]?l[0].data[0].y.toFixed(2):"").replace(/\d(?=(\d{3})+\.)/g,"$&,")):"integer"===t.chipFormat?parseInt(l[0].data&&l[0].data[0]?l[0].data[0].y.toFixed(2):""):"percent"===t.chipFormat?"".concat(100*(l[0].data&&l[0].data[0]?l[0].data[0].y.toFixed(2):""),"% "):"":"";return Object(a.jsx)(E.a,{className:"".concat(n.padding15," \n    ").concat(n.overflowHidden," \n    ").concat(n.lookerCardShadow,"\n    "),children:Object(a.jsx)("div",{style:{height:t.height},children:l?Object(a.jsx)(r.a.Fragment,{children:Object(a.jsxs)(ut,{height:130,classes:n,children:[Object(a.jsxs)(R.a,{container:!0,className:"".concat(n.textCenter," "),children:[Object(a.jsx)(R.a,{item:!0,sm:12,children:Object(a.jsx)(M.a,{variant:"body2",align:"left",color:"secondary",children:t.label})}),Object(a.jsx)(R.a,{item:!0,sm:6,children:Object(a.jsx)(M.a,{variant:"subtitle1",align:"left",children:Object(a.jsx)("b",{children:O})})}),Object(a.jsx)(R.a,{item:!0,sm:6,children:Object(a.jsx)(ct.a,{size:"small",label:"".concat(gt(C)," ").concat(parseInt(100*l[0].data[0].change).toFixed(0),"% "),className:isNaN((100*l[0].data[0].change).toFixed(2))?"":parseInt((100*l[0].data[0].change).toFixed(0))>=0?n.greenPos:n.redNeg,display:"inline",align:"right"})})]}),Object(a.jsx)(bt.a,{data:l,margin:{top:25,right:25,bottom:25,left:25},xScale:{type:"time",format:"%Y-%m-%d",precision:"day"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!0,reverse:!1},axisLeft:{orient:"left",tickSize:0,tickPadding:5,tickRotation:0,format:function(){return null}},axisBottom:{orient:"bottom",tickSize:0,tickPadding:5,tickRotation:0,format:function(){return null}},enablePoints:!1,enableGridX:!1,enableGridY:!1,height:100,colors:t.visColor,animate:!0})]})}):Object(a.jsx)(R.a,{item:!0,sm:12,className:"".concat(n.flexCentered," "),style:{height:t.height},children:Object(a.jsx)(We.a,{className:n.circularProgress,style:{color:"".concat(t.visColor," ")}})})})})}var yt=n(42),xt=(yt.validIdHelper,yt.decodeHtml);function vt(e){var t=e.lookerContent,n=e.inlineQuery,i=e.index,s=e.classes,l=Object(o.useState)(void 0),c=Object(p.a)(l,2),d=c[0],b=c[1],h=Object(o.useContext)(f),g=h.clientSession,j=h.sdk,y=h.corsApiCall,x=h.isReady,v=(g.userProfile,g.lookerUser);Object(o.useEffect)((function(){if(x){var e=!0;return y(C).then((function(t){e&&b(t)})),function(){return e=!1}}}),[v,x]);var C=function(){var e=Object(m.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.ok(j.run_inline_query({result_format:t.resultFormat||"json",body:n}));case 2:return a=e.sent,e.abrupt("return",a[0]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=d?d.change>0?"&uarr;":"&darr;":"";return Object(a.jsx)(R.a,{item:!0,sm:12,children:d?Object(a.jsx)(r.a.Fragment,{children:Object(a.jsxs)(ut,{classes:s,children:[Object(a.jsxs)(M.a,{variant:"subtitle1",display:"inline",children:["Your ",t.inlineQueriesMap[i]," category, ",Object(a.jsx)("b",{children:d["products.category"]}),", is ",d.change>0?"up ":"down "]}),Object(a.jsx)(ct.a,{size:"small",label:"".concat(xt(O)," ").concat(parseInt(100*d.change).toFixed(0),"% "),className:d.change>0?s.greenPos:s.redNeg,display:"inline"}),Object(a.jsx)(M.a,{variant:"subtitle1",display:"inline",children:"\xa0over the past week."})]})}):Object(a.jsx)("div",{style:{height:"56px"}})})}var Ct=n(42).validIdHelper;function Ot(e){var t=e.lookerContent,n=e.classes,r=Object(o.useContext)(f).clientSession,i=r.userProfile,s=r.lookerUser;return Object(o.useEffect)((function(){}),[t,s]),Object(a.jsxs)("div",{className:"".concat(n.overflowScroll," ").concat(n.padding15),style:{maxHeight:t.height},children:[Object(a.jsxs)(M.a,{variant:"h4",children:["Welcome back, ",i.givenName,"!"]}),Object(a.jsx)("br",{}),Object(a.jsx)(a.Fragment,{children:t.inlineQueries.map((function(e,o){return Object(a.jsx)(vt,Object(l.a)({},{lookerContent:t,inlineQuery:e,index:o,classes:n}),"".concat(Ct("naturalLanguage-splashPage-"+o)))}))})]})}function kt(e){e.lookerContent;var t=e.classes,n=e.item,r=e.index,i=Object(o.useState)(void 0),s=Object(p.a)(i,2),l=s[0],c=s[1],d=Object(o.useContext)(f),h=d.clientSession,g=d.sdk,j=d.corsApiCall,y=d.isReady,x=(h.userProfile,h.lookerUser);Object(o.useEffect)((function(){var e=!0;return y&&j(v).then((function(t){e&&c(t)})),function(){return e=!1}}),[x,y]);var v=function(){var e=Object(m.a)(u.a.mark((function e(){var t,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.ok(g.content_thumbnail({type:n.resourceType,resource_id:n.id}));case 2:return t=e.sent,a=new Blob([t],{type:"image/svg+xml"}),o=URL.createObjectURL(a),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(R.a,{container:!0,className:"".concat(t.cursorPointer),spacing:3,component:b.b,to:n.url,children:l?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(R.a,{item:!0,sm:1}),Object(a.jsx)(R.a,{item:!0,sm:6,children:Object(a.jsx)(ut,{classes:t,children:Object(a.jsx)("div",{className:" ".concat(t.maxHeight60," ").concat(t.textCenter," ").concat(t.cursorPointer," ").concat(t.overflowHidden),children:Object(a.jsx)("img",{src:l,style:{width:"100%"}})})})}),Object(a.jsx)(R.a,{item:!0,sm:4,children:Object(a.jsx)(M.a,{variant:"subtitle1",children:n.label})}),r<2?Object(a.jsx)(R.a,{item:!0,sm:12,children:Object(a.jsx)(pe.a,{className:"".concat(t.divider," ").concat(t.mb12," ").concat(t.mt12)})}):""]}):""})}var _t=n(42).validIdHelper;function wt(e){var t=e.lookerContent,n=e.classes,r=Object(o.useState)([]),i=Object(p.a)(r,2);i[0],i[1];return Object(a.jsx)(E.a,{className:"".concat(n.padding15," \n    ").concat(n.overflowHidden," \n    ").concat(n.lookerCardShadow,"\n    "),children:Object(a.jsx)("div",{className:"".concat(n.overflowYScroll),style:{height:t.height},children:Object(a.jsxs)(R.a,{container:!0,spacing:3,children:[Object(a.jsx)(R.a,{item:!0,sm:12,children:Object(a.jsx)(M.a,{variant:"h6",align:"center",color:"secondary",children:"Helpful Dashboards"})}),t.vectors.map((function(e,o){return Object(a.jsx)(kt,Object(l.a)({},{lookerContent:t,item:e,classes:n,index:o}),"".concat(_t("vectorThumbnail-splashPage-"+o)))}))]})})})}var St=n(61),Tt=n.n(St);n(1250);function It(e){var t=e.lookerContent,n=e.classes,r=e.id,i=Object(o.useState)(0),s=Object(p.a)(i,2),l=s[0],c=s[1],d=Object(o.useContext)(f),b=d.clientSession,h=(d.show,d.sdk,d.corsApiCall,d.isReady),g=(b.userProfile,b.lookerUser),j=(b.lookerHost,Object(o.useState)(void 0)),y=Object(p.a)(j,2);y[0],y[1];Object(o.useEffect)((function(){h&&x()}),[g,h]);var x=function(){var e=Object(m.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Tt()("#".concat(r)).html(""),c(0),n=encodeURIComponent("embed/query/atom_fashion/order_items?fields=order_items.created_time,users.name,order_items.total_sale_price,users.approx_location,users.city&f[users.country]=USA&sorts=order_items.created_time+desc&limit=100&query_timezone=America%2FLos_Angeles&vis=%7B%22map_plot_mode%22%3A%22points%22%2C%22heatmap_gridlines%22%3Afalse%2C%22heatmap_gridlines_empty%22%3Afalse%2C%22heatmap_opacity%22%3A0.5%2C%22show_region_field%22%3Atrue%2C%22draw_map_labels_above_data%22%3Atrue%2C%22map_tile_provider%22%3A%22traffic_day%22%2C%22map_position%22%3A%22custom%22%2C%22map_scale_indicator%22%3A%22off%22%2C%22map_pannable%22%3Atrue%2C%22map_zoomable%22%3Atrue%2C%22map_marker_type%22%3A%22circle%22%2C%22map_marker_icon_name%22%3A%22shopping_cart%22%2C%22map_marker_radius_mode%22%3A%22proportional_value%22%2C%22map_marker_units%22%3A%22pixels%22%2C%22map_marker_proportional_scale_type%22%3A%22linear%22%2C%22map_marker_color_mode%22%3A%22fixed%22%2C%22show_view_names%22%3Afalse%2C%22show_legend%22%3Atrue%2C%22quantize_map_value_colors%22%3Afalse%2C%22reverse_map_value_colors%22%3Afalse%2C%22map_latitude%22%3A40.267214274019075%2C%22map_longitude%22%3A-94.70352172851564%2C%22map_zoom%22%3A4%2C%22map_marker_color%22%3A%5B%22%234595EC%22%5D%2C%22series_types%22%3A%7B%7D%2C%22type%22%3A%22looker_map%22%2C%22defaults_version%22%3A1%2C%22hidden_fields%22%3A%5B%22users.name%22%2C%22order_items.created_time%22%5D%7D&filter_config={}&origin=share-expanded&sdk=2&embed_domain=".concat(document.location.origin)),e.next=5,fetch("/auth?src=".concat(n)).then((function(e){return e.json()})).then((function(e){W.LookerEmbedSDK.createExploreWithUrl(e.url).appendTo(document.getElementById(r)).withClassName("explore").withClassName("splashPage").withClassName(t.id).withTheme("atom_fashion").build().connect().then((function(e){c(1),W.LookerEmbedSDK.init("".concat(b.lookerBaseUrl))})).catch((function(e){console.error("Connection error",e)}))}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(E.a,{className:"".concat(n.padding15," \n    // ").concat(n.overflowHidden," \n    ").concat(n.lookerCardShadow,"\n    "),children:Object(a.jsxs)("div",{className:"".concat(n.overflowHidden),style:{height:t.height},children:[l?"":Object(a.jsx)(R.a,{item:!0,sm:12,children:Object(a.jsx)(E.a,{className:"".concat(n.card," ").concat(n.flexCentered," ").concat(n.maxHeight350," ").concat(n.overflowHidden),elevation:0,children:Object(a.jsx)(We.a,{className:n.circularProgress})})}),Object(a.jsx)(R.a,{container:!0,spacing:4,children:Object(a.jsx)(R.a,{item:!0,sm:12,children:Object(a.jsxs)(mt,{classes:n,height:l?350:0,children:[Object(a.jsx)(M.a,{variant:"h6",align:"center",color:"secondary",children:t.title}),Object(a.jsx)("div",{className:"embedContainer embedContainerNoHeader splashPage ".concat(n.overflowHidden," ").concat(n.maxHeight80Percent),id:r},r)]})})})]})})}var Nt=n(42).validIdHelper;function Ht(e){var t=Object(o.useState)(0),n=Object(p.a)(t,2),r=(n[0],n[1],Object(o.useState)(1)),i=Object(p.a)(r,2),s=i[0],c=(i[1],Object(o.useState)("")),d=Object(p.a)(c,2),u=(d[0],d[1],Object(o.useState)("")),m=Object(p.a)(u,2),b=(m[0],m[1],Object(o.useState)(window.innerHeight-112)),h=Object(p.a)(b,2),g=h[0],j=h[1],y=Object(o.useContext)(f),x=y.clientSession,v=(y.highlightShow,y.codeShow),C=(x.userProfile,x.lookerUser),O=x.lookerHost,k=lt(),_=(e.staticContent,e.staticContent.lookerContent),w=e.staticContent.type,S=(e.handleTabChange,w||"code flyout");return Object(o.useEffect)((function(){window.addEventListener("resize",(function(){return j(window.innerHeight-112)}))}),[_]),Object(a.jsx)("div",{className:"".concat(k.root," demoComponent"),style:{height:g},children:Object(a.jsx)(E.a,{elevation:1,className:"".concat(k.padding30," \n      ").concat(k.height100Percent,"\n      ").concat(k.overflowScroll),children:Object(a.jsx)(R.a,{container:!0,children:Object(a.jsxs)("div",{className:k.root,children:[s?"":Object(a.jsx)(R.a,{item:!0,sm:12,children:Object(a.jsx)(E.a,{className:"".concat(k.card," ").concat(k.flexCentered),children:Object(a.jsx)(We.a,{className:k.circularProgress})})}),Object(a.jsx)(Ke.a,{className:s?"":"".concat(k.hidden),children:Object(a.jsxs)(R.a,{container:!0,spacing:3,className:"".concat(k.noContainerScroll),children:[v?Object(a.jsx)(R.a,{item:!0,sm:6,className:"".concat(k.positionFixedTopRight),children:Object(a.jsx)(et,Object(l.a)(Object(l.a)({},e),{},{classes:k,lookerUser:C,height:g}))}):"",_.map((function(e,t){return Object(a.jsxs)(R.a,{item:!0,sm:parseInt(e.gridWidth),children:["welcome"===e.type&&Object(a.jsx)(Ot,Object(l.a)({},{lookerContent:e,classes:k,demoComponentType:S,lookerHost:O})),"single value"===e.type&&Object(a.jsx)(jt,Object(l.a)({},{lookerContent:e,classes:k,demoComponentType:S,lookerHost:O})),"dashboard"===e.type&&Object(a.jsx)(It,Object(l.a)(Object(l.a)({},{lookerContent:e,classes:k,lookerHost:O}),{},{id:Nt("embedContainer-".concat(S,"-").concat(e.id))})),"popular analysis"===e.type&&Object(a.jsx)(wt,Object(l.a)({},{lookerContent:e,classes:k,demoComponentType:S,lookerHost:O}))]},"".concat(Nt(S+"-innerFragment-"+t)))}))]},"".concat(Nt(S+"-outerFragment")))})]})},Nt(w))})})}var Ft=Object(A.a)((function(e){return{root:{flexGrow:1,overflow:"scroll",borderRadius:"8px"},flexCentered:{display:"flex",justifyContent:"center",alignItems:"center"},hidden:{visibility:"hidden"},tabs:{backgroundColor:"white",color:"#6c757d"},dNone:{display:"none"},dBlock:{display:"block"},tree:{height:240,flexGrow:1,maxWidth:400},icon:{marginRight:12,fontSize:"1rem",overflow:"visible"},mt12:{marginTop:12},w100:{width:"100%"},mlAuto:{marginLeft:"auto"},mrAuto:{marginRight:"auto"},card:{minWidth:275},padding30:{padding:30},minHeight680:{minHeight:680},positionRelative:{position:"relative"},skeleton:{height:"100%",width:"100%"},height100Percent:{height:"100%"},ml12:{marginLeft:12},padding20:{padding:20},positionFixedTopRight:{position:"fixed",top:88,right:24,bottom:0,zIndex:100},codeFlyoutContainer:{backgroundColor:"rgb(40, 42, 54)",overflow:"scroll",borderRadius:"0 8px 8px 0"},padding10:{padding:10},noContainerScroll:{width:"100%",margin:0},verticalAlignTop:{verticalAlign:"top"},w33:{width:"33%"},mr12:{marginRight:12},dot:{height:"25px",width:"25px",borderRadius:"50%",display:"inline-block"},borderRadius0:{borderRadius:0}}})),Dt=n(1387),At=n(1388),Pt=n(1392),Bt=n(1389),Lt=n(1390),Rt=n(1391),Et=n(1393),Ut=n(266);Ut.CheckboxSVGMap.prototype.toggleLocation=function(e){var t=this,n=e.target;this.setState((function(e){for(var a=Object(Q.a)(e.selectedLocations),o=I.a.find(t.props.map.locations,{id:n.id}),r=I.a.filter(t.props.map.locations,{region:o.region}),i=[],s=0;s<t.props.map.locations.length;s++)-1==i.indexOf(t.props.map.locations[s].region)&&i.push(t.props.map.locations[s].region);for(var l=[],c=0;c<a.length;c++)-1==l.indexOf(a[c].region)&&l.push(a[c].region);var d,u=I.a.differenceBy(i,l),m=[].concat(Object(Q.a)(u),[o.region]),p=I.a.filter(t.props.map.locations,(function(e){return-1==m.indexOf(e.region)}));"true"===n.attributes["aria-checked"].value?a=p:(d=a).push.apply(d,Object(Q.a)(r));return t.props.onChange&&t.props.onChange(a),{selectedLocations:a}}))},Ut.CheckboxSVGMap.prototype.componentDidMount=function(){this.setState({selectedLocations:this.props.map.locations})};var Mt=n(381),$t=n(1383),zt=n(1384),Vt=n(1385),Gt=Object(l.a)(Object(l.a)({},Mt.a),{},{label:"Custom map label",locations:Mt.a.locations.map((function(e){switch(e.name){case"Connecticut":case"Maine":case"Massachusetts":case"New Hampshire":case"Rhode Island":case"Vermont":case"New Jersey":case"New York":case"Pennsylvania":case"Delaware":return Object(l.a)(Object(l.a)({},e),{},{region:"Northeast"});case"Illinois":case"Indiana":case"Michigan":case"Ohio":case"Wisconsin":case"Iowa":case"Kansas":case"Minnesota":case"Missouri":case"Nebraska":case"North Dakota":case"South Dakota":return Object(l.a)(Object(l.a)({},e),{},{region:"Midwest"});case"Florida":case"Georgia":case"Maryland":case"North Carolina":case"South Carolina":case"Virginia":case"District of Columbia":case"Washington, DC":case"West Virginia":case"Alabama":case"Kentucky":case"Mississippi":case"Tennessee":case"Arkansas":case"Louisiana":case"Oklahoma":case"Texas":return Object(l.a)(Object(l.a)({},e),{},{region:"South"});case"Arizona":case"Colorado":case"Idaho":case"Montana":case"Nevada":case"New Mexico":case"Utah":case"Wyoming":return Object(l.a)(Object(l.a)({},e),{},{region:"Mountain"});case"Alaska":case"California":case"Hawaii":case"Oregon":case"Washington":return Object(l.a)(Object(l.a)({},e),{},{region:"Pacific"})}}))}),qt={"0 to 99":"low","100 to 499":"medium","500 or Above":"high"},Qt={"0 to 99":$t.a,"100 to 499":zt.a,"500 or Above":Vt.a},Wt=n(42).validIdHelper;function Kt(e){var t=e.lookerContent,n=(e.apiContent,e.index),r=e.classes,i=e.customFilterAction,s=e.type,l=e.horizontalLayout,c=Object(o.useState)("Pacific, South, Mountain, Midwest, Northeast"),d=Object(p.a)(c,2),u=d[0],m=d[1];return Object(a.jsx)(R.a,{item:!0,sm:l?3:12,children:Object(a.jsxs)(pt,{classes:r,children:[Object(a.jsxs)(M.a,{className:"".concat(r.heading," ").concat(r.ml12,"  ").concat(r.verticalAlignTop),children:[t[0].filters[n].label,": ",Object(a.jsx)("b",{children:u||"Outside US"})]}),Object(a.jsx)(Ut.CheckboxSVGMap,{map:Gt,onChange:function(e){for(var a=[],o=0;o<e.length;o++)-1==a.indexOf(e[o].region)&&a.push(e[o].region);var r=a.join(",");m(r),i(t[0].id,t[0].filters[n].filterName,u||"")}})]},Wt("dashEmbed-".concat(s).concat(t.id,"-").concat(n)))})}var Yt=n(1428),Jt=n(42).validIdHelper;function Xt(e){var t=e.lookerContent,n=e.apiContent,r=e.index,i=e.classes,s=e.customFilterAction,l=e.type,c=e.horizontalLayout,d=Object(o.useState)([]),u=Object(p.a)(d,2),m=u[0],b=u[1];return Object(a.jsx)(R.a,{item:!0,sm:c?3:12,children:Object(a.jsxs)(pt,{classes:i,children:[Object(a.jsxs)(M.a,{className:"".concat(i.heading," ").concat(i.ml12,"  ").concat(i.verticalAlignTop),children:[t[0].filters[r].label,":"]}),Object(a.jsx)(Yt.a,{value:m.length?m:Array.isArray(n)?[n[0].label,n[n.length-1].label]:[],onChange:function(e,t){b(t)},valueLabelDisplay:"auto","aria-labelledby":"range-slider",onChangeCommitted:function(e,n){s(t[0].id,t[0].filters[r].filterName,n?"[".concat(n,"]"):"[]")},min:Array.isArray(n)&&n.length?n[0].label:0,max:Array.isArray(n)&&n.length?n[n.length-1].label:0,marks:Array.isArray(n)&&n.length?[{value:n[0].label,label:n[0].label},{value:n[n.length-1].label,label:n[n.length-1].label}]:"",disabled:!Array.isArray(n)||!n.length})]},Jt("dashEmbed-".concat(l).concat(t.id,"-").concat(r)))})}var Zt=n(1434),en=n(1386),tn=n(42).validIdHelper;function nn(e){var t=e.lookerContent,n=e.apiContent,r=e.index,i=e.classes,s=e.customFilterAction,l=e.type,c=e.horizontalLayout,d=Object(o.useState)("0-24"),u=Object(p.a)(d,2),m=u[0],b=u[1];return Object(a.jsx)(R.a,{item:!0,sm:c?3:12,children:Object(a.jsxs)(pt,{classes:i,children:[Object(a.jsxs)(M.a,{className:"".concat(i.heading," ").concat(i.ml12,"  ").concat(i.verticalAlignTop),children:[t[0].filters[r].label,":"]}),Object(a.jsxs)(Zt.a,{value:m,exclusive:!0,onChange:function(e,n){b(n),s(t[0].id,t[0].filters[r].filterName,n||"")},"aria-label":"ageTier",className:i.w100,children:[">",Array.isArray(n)?n.map((function(e,n){if("Undefined"!==e.label){var o=Qt[e.label];return Object(a.jsxs)(en.a,{value:e.label,"aria-label":e.label,className:i.w33,children:[Object(a.jsx)(o,{className:i.mr12}),I.a.capitalize(qt[e.label])||e.label]},tn("".concat(l,"-FilterBar-ToggleButton-").concat(t[0].id,"-").concat(n)))}})):""]})]},tn("dashEmbed-".concat(l).concat(t.id,"-").concat(r)))})}var an=n(42).validIdHelper;function on(e){var t=e.lookerContent,n=e.classes,o=(e.type,e.tileToggleValue),r=e.handleTileToggle,i=e.horizontalLayout;return Object(a.jsx)(R.a,{item:!0,sm:i?3:12,children:Object(a.jsxs)(pt,{classes:n,children:[Object(a.jsx)(M.a,{children:"Dynamic Tiles:        "}),Object(a.jsx)(Zt.a,{value:o,exclusive:!0,onChange:r,"aria-label":"text alignment",children:Object.keys(t[0].dynamicFieldLookUp).map((function(e){return Object(a.jsx)(en.a,{value:e,"aria-label":"left aligned",children:e},an("dynamicDashTileToggle-".concat(e)))}))})]})})}var rn=n(42).validIdHelper;function sn(e){var t=e.lookerContent,n=e.classes,o=(e.type,e.visColorToggleValue),r=e.handleVisColorToggle,i=e.horizontalLayout;return Object(a.jsx)(R.a,{item:!0,sm:i?2:12,children:Object(a.jsxs)(pt,{classes:n,children:[Object(a.jsx)(M.a,{children:"Dynamic Vis Color:"}),Object(a.jsx)(Zt.a,{value:o,exclusive:!0,onChange:r,"aria-label":"text alignment",children:Object.keys(t[0].dynamicVisConfig.colors).map((function(e){return Object(a.jsx)(en.a,{value:e,"aria-label":"left aligned",children:Object(a.jsx)("span",{className:"".concat(n.dot),style:{backgroundColor:t[0].dynamicVisConfig.colors[e][t[0].dynamicVisConfig.colors[e].length-2]||e}})},rn("dynamicDashVisConfigToggle-".concat(e)))}))})]})})}var ln=n(1429);n(42).validIdHelper;function cn(e){e.lookerContent;var t=e.classes,n=(e.type,e.lightThemeToggleValue),o=e.handleThemeChange,r=e.horizontalLayout;return Object(a.jsx)(R.a,{item:!0,sm:r?1:12,children:Object(a.jsxs)(mt,{classes:t,children:[Object(a.jsx)(M.a,{children:n?"Light mode":"Dark mode"}),Object(a.jsx)(ln.a,{checked:!n,onChange:function(){return o(null,!n)},color:"primary",name:"light theme toggle",inputProps:{"aria-label":"primary checkbox"}})]})})}var dn=n(1357),un=n(1426),mn=n(1418);function pn(e){e.lookerContent;var t=e.classes,n=(e.type,e.fontThemeSelectValue),o=e.handleThemeChange,r=e.horizontalLayout;return Object(a.jsx)(R.a,{item:!0,sm:r?2:12,children:Object(a.jsx)(mt,{classes:t,children:Object(a.jsxs)(dn.a,{className:t.formControl,children:[Object(a.jsx)(un.a,{id:"demo-simple-select-label",children:"Change font"}),Object(a.jsxs)(mn.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:n,onChange:function(e){o(null,e.target.value)},children:[Object(a.jsx)(me.a,{value:"arial",children:"Arial"}),Object(a.jsx)(me.a,{value:"roboto",children:"Roboto"}),Object(a.jsx)(me.a,{value:"vollkorn",children:"Vollkorn"})]})]})})})}var bn=function(e){var t=e.lookerContent,n=e.apiContent,o=e.index,r=(e.classes,e.customFilterAction),i=(e.type,e.horizontalLayout);return Object(a.jsxs)(R.a,{item:!0,sm:i?3:12,children:[Object(a.jsxs)(M.a,{children:[t[0].filters[o].label,":"]}),Object(a.jsx)(he.a,{id:"combo-box-dashboard-".concat(t.id),options:Array.isArray(n)?n:[],renderOption:function(e){return Object(a.jsx)(R.a,{container:!0,justify:"space-between",children:Object(a.jsx)(R.a,{item:!0,children:e.label})})},getOptionLabel:function(e){return e.label},onChange:function(e,n){r(t[0].id,t[0].filters[o].filterName,n?n.label:"")},renderInput:function(e){return Object(a.jsx)(be.a,Object(l.a)(Object(l.a)({},e),{},{label:t[0].filters[o].filterName,variant:"outlined"}))},loadingText:"Loading..."})]})},hn=n(42).validIdHelper;function fn(e){var t=e.classes,n=e.apiContent,o=e.customFilterAction,r=e.tileToggleValue,i=e.handleTileToggle,s=e.visColorToggleValue,l=e.handleVisColorToggle,c=e.lightThemeToggleValue,d=e.fontThemeSelectValue,u=e.handleThemeChange,m=e.horizontalLayout,p=(e.setHorizontalLayout,e.lookerContent),b=e.type;return Object(a.jsxs)(R.a,{container:!0,spacing:3,children:[p[0].filterComponents.map((function(e,r){return"autocomplete"===p[0].filterComponents[r]?Object(a.jsx)(bn,{lookerContent:p,apiContent:n[r],index:r,classes:t,customFilterAction:o,type:b,horizontalLayout:m},hn("".concat(b,"-").concat(p[0].filterComponents[r],"-").concat(r))):"mapfilter"===p[0].filterComponents[r]?Object(a.jsx)(Kt,{lookerContent:p,apiContent:n[r],index:r,classes:t,customFilterAction:o,type:b,horizontalLayout:m},hn("".concat(b,"-").concat(p[0].filterComponents[r],"-").concat(r))):"rangeslider"===p[0].filterComponents[r]?Object(a.jsx)(Xt,{lookerContent:p,apiContent:n[r],index:r,classes:t,customFilterAction:o,type:b,horizontalLayout:m},hn("".concat(b,"-").concat(p[0].filterComponents[r],"-").concat(r))):"togglebuttonapi"===p[0].filterComponents[r]?Object(a.jsx)(nn,{lookerContent:p,apiContent:n[r],index:r,classes:t,customFilterAction:o,type:b,horizontalLayout:m},hn("".concat(b,"-").concat(p[0].filterComponents[r],"-").concat(r))):""})),p[0].dynamicFieldLookUp?Object(a.jsx)(on,{lookerContent:p,classes:t,type:b,tileToggleValue:r,handleTileToggle:i,horizontalLayout:m},hn("".concat(b,"-dynamicFieldLookUp"))):"",p[0].dynamicVisConfig?Object(a.jsx)(sn,{lookerContent:p,classes:t,type:b,visColorToggleValue:s,handleVisColorToggle:l,horizontalLayout:m},hn("".concat(b,"-dynamicVisConfig"))):"",p[0].dynamicThemeMode?Object(a.jsx)(cn,{lookerContent:p,classes:t,type:b,lightThemeToggleValue:c,handleThemeChange:u,horizontalLayout:m},hn("".concat(b,"-dynamicThemeMode"))):"",p[0].dynamicThemeFont?Object(a.jsx)(pn,{lookerContent:p,classes:t,type:b,fontThemeSelectValue:d,handleThemeChange:u,horizontalLayout:m},hn("".concat(b,"-dynamicThemeFont"))):""]})}var gn=n(42).validIdHelper;function jn(e){e.staticContent;var t=e.staticContent.lookerContent,n=e.staticContent.type,r=e.classes,i=e.apiContent,s=e.customFilterAction,c=e.tileToggleValue,d=e.handleTileToggle,u=e.visColorToggleValue,m=e.handleVisColorToggle,b=e.lightThemeToggleValue,h=e.fontThemeSelectValue,f=e.handleThemeChange,g=e.horizontalLayout,j=e.setHorizontalLayout,y=e.drawerOpen,x=e.setDrawerOpen,v=Object(o.useState)(!0),C=Object(p.a)(v,2),O=C[0],k=C[1];return Object(o.useEffect)((function(){O||k(!0)}),[g]),Object(a.jsx)(R.a,{item:!0,sm:g?12:y?3:"auto",children:i?Object(a.jsxs)(Dt.a,{onChange:g?function(){return k(!O)}:function(){},expanded:O,className:"".concat(r.w100," MuiExpansionPanel-root"),elevation:0,children:[Object(a.jsx)(At.a,{expandIcon:g?Object(a.jsx)(Bt.a,{}):"","aria-controls":"panel1a-content",id:"panel1a-header",children:g?Object(a.jsx)(Lt.a,{onClick:function(e){j(!g)},"aria-label":"vertical view"}):Object(a.jsx)(a.Fragment,{children:y?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ae.a,{onClick:function(){return x(!y)},"aria-label":"close menu"}),Object(a.jsx)(Rt.a,{onClick:function(e){k(!0),j(!g)},"aria-label":"horizontal view"})]}):Object(a.jsx)(oe.a,{onClick:function(){return x(!y)},"aria-label":"open menu"})})}),Object(a.jsx)(Ke.a,{display:y?"block":"none",children:Object(a.jsx)(Pt.a,{children:Object(a.jsx)(fn,Object(l.a)(Object(l.a)({},e),{},{classes:r,apiContent:i,customFilterAction:s,tileToggleValue:c,handleTileToggle:d,visColorToggleValue:u,handleVisColorToggle:m,lightThemeToggleValue:b,fontThemeSelectValue:h,handleThemeChange:f,horizontalLayout:g,setHorizontalLayout:j,lookerContent:t,type:n}))})})]}):Object(a.jsx)(Et.a,{variant:"rect",animation:"wave",className:r.skeleton})},gn("".concat(n,"-FilterBar-").concat(t[0].id)))}function yn(e){var t=e.classes,n=e.height,o=e.expansionPanelHeight;return Object(a.jsx)(R.a,{item:!0,sm:12,style:{height:n-30-o},children:Object(a.jsx)(E.a,{className:"".concat(t.card," ").concat(t.flexCentered),elevation:0,mt:2,style:{height:n-30-o},children:Object(a.jsx)(We.a,{className:t.circularProgress})})})}var xn=n(42).validIdHelper;function vn(e){var t=e.classes,n=e.lookerContent,o=e.type,r=e.width;return Object(a.jsx)(R.a,{item:!0,sm:r,children:Object(a.jsx)(Ke.a,{className:"".concat(t.w100," ").concat(t.padding10),mt:n[0].filter||n[0].dynamicFieldLookUp?2:0,children:Object(a.jsx)(mt,{classes:t,children:Object(a.jsx)("div",{className:"embedContainer ".concat(xn(o)),id:xn("embedContainer-".concat(o,"-").concat(n[0].id))},xn("embedContainer-".concat(o,"-").concat(n[0].id)))})})})}var Cn=n(42).validIdHelper;function On(e){var t=e.staticContent.lookerContent,n=e.staticContent.type,i=Object(o.useContext)(f),s=i.clientSession,c=i.codeShow,d=i.sdk,b=i.corsApiCall,h=i.atomTheme,g=i.isReady,j=i.selectedMenuItem,y=s.lookerUser,x=(s.lookerHost,n||"code flyout"),v=Object(o.useState)(0),C=Object(p.a)(v,2),O=(C[0],C[1],Object(o.useState)(0)),k=Object(p.a)(O,2),_=k[0],w=k[1],S=Object(o.useState)(void 0),T=Object(p.a)(S,2),N=T[0],H=T[1],F=Object(o.useState)({}),A=Object(p.a)(F,2),P=A[0],B=A[1],L=Object(o.useState)({}),U=Object(p.a)(L,2),M=U[0],$=U[1],z=Object(o.useState)(window.innerHeight-112),V=Object(p.a)(z,2),G=V[0],q=V[1],Y=Object(o.useState)(""),J=Object(p.a)(Y,2),X=J[0],Z=J[1],ee=Object(o.useState)("#2d4266"),te=Object(p.a)(ee,2),ne=te[0],ae=te[1],oe=Object(o.useState)(!0),re=Object(p.a)(oe,2),se=re[0],le=re[1],ce=Object(o.useState)("arial"),de=Object(p.a)(ce,2),ue=de[0],me=de[1],pe=Object(o.useState)(0),be=Object(p.a)(pe,2),he=be[0],fe=be[1],ge=Object(o.useState)(!1),je=Object(p.a)(ge,2),ye=je[0],xe=je[1],ve=Object(o.useState)(!0),Ce=Object(p.a)(ve,2),Oe=Ce[0],ke=Ce[1],_e="customfilter1"===Cn("".concat(x).concat(t[0].id)),we="#343D4E",Se=Ft(),Te=!se&&_e?{palette:{type:"dark",background:{paper:we,default:we}}}:{palette:Object(l.a)({},h.palette)},Ie=r.a.useMemo((function(){return Object(ie.a)(Te)}),[se,t]),Ne=function(e,n){Z(n);var a=I.a.filter(M.layouts[0].dashboard_layout_components,(function(e){return t[0].dynamicFieldLookUp[n].indexOf(M.elements[e.dashboard_element_id].title)>-1})),o=Object(l.a)(Object(l.a)({},M.layouts[0]),{},{dashboard_layout_components:a});P.setOptions({layouts:[o]})},He=function(e,n){var a=t[0].dynamicVisConfig.colors[n],o=Object(l.a)({},M.elements);Object.keys(o).map((function(e){o[e].vis_config.series_colors&&Object.keys(o[e].vis_config.series_colors).map((function(t,n){o[e].vis_config.series_colors[t]=a[n]||a[0]})),o[e].vis_config.custom_color&&(o[e].vis_config.custom_color=a[a.length-2]),o[e].vis_config.map_value_colors&&o[e].vis_config.map_value_colors.map((function(t,n){o[e].vis_config.map_value_colors[n]=a[n]||a[0]})),o[e].vis_config.series_cell_visualizations&&Object.keys(o[e].vis_config.series_cell_visualizations).map((function(a,r){o[e].vis_config.series_cell_visualizations[a].hasOwnProperty("palette")&&(o[e].vis_config.series_cell_visualizations[a].palette=Object(l.a)({},t[0].dynamicVisConfig.series_cell_visualizations[n]))})),o[e].vis_config.header_font_color&&(o[e].vis_config.header_font_color=a[a.length-2]),_e&&o[e].vis_config.map_tile_provider&&(o[e].vis_config.map_tile_provider=se?"light":"dark")})),ae(n),P.setOptions({elements:Object(l.a)({},o)})};Object(o.useEffect)((function(){if(g){var e=se?"light":"dark";e+="_".concat(ue),b(Fe,[Object(Q.a)(t),e]),H(void 0),xe(!1),ke(!0)}}),[y,g,j]),Object(o.useEffect)((function(){Object.keys(M).length&&Object.keys(P).length&&t[0].dynamicFieldLookUp&&(Ne(0,X||"Inventory"),He(0,ne||"#2d4266"))}),[M]),Object(o.useEffect)((function(){window.addEventListener("resize",(function(){return q(window.innerHeight-112)})),fe(ye&&Tt()(".MuiExpansionPanel-root:visible").innerHeight()||0)})),Object(o.useEffect)((function(){q(window.innerHeight-112),fe(ye&&Tt()(".MuiExpansionPanel-root:visible").innerHeight()||0)}),[ye]),Object(o.useEffect)((function(){H(void 0)}),[]);var Fe=function(e,t){w(0),Tt()(".embedContainer.".concat(Cn(x),":visible")).html(""),e.map(function(){var e=Object(m.a)(u.a.mark((function e(n){var a,o,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.id,o=t&&_e?t:n.theme?n.theme:"atom_fashion",W.LookerEmbedSDK.createDashboardWithId(a).appendTo(Cn("#embedContainer-".concat(x,"-").concat(a))).withClassName("iframe").withNext().withTheme(o).withParams({schedule_modal:"true"}).on("page:property:change",(function(e){De(e)})).on("dashboard:loaded",(function(e){$(e.dashboard.options)})).build().connect().then((function(e){w(1),B(e),W.LookerEmbedSDK.init("".concat(s.lookerBaseUrl))})).catch((function(e){})),n.hasOwnProperty("filters")&&(r=[],n.filters.map(function(){var e=Object(m.a)(u.a.mark((function e(t,a){var o,i,s,c,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.inlineQueries[a]){e.next=10;break}return(o=n.inlineQueries[a]).filters=Object(l.a)(Object(l.a)({},o.filters),{},Object(D.a)({},t.desiredFilterName,y.user_attributes.brand)),e.next=5,d.ok(d.run_inline_query({result_format:n.result_format||"json",body:o}));case 5:for(i=e.sent,s=[],c=Object.keys(i[0])[0],m=0;m<i.length;m++)s.push({label:i[m][c],trend:i[m].trend?i[m].trend:void 0});r[a]=s;case 10:H([].concat(r));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},De=function(e){};return Object(a.jsx)("div",{className:"".concat(Se.root," demoComponent"),style:{height:G},children:Object(a.jsx)(K.a,{theme:Ie,children:Object(a.jsx)(E.a,{elevation:1,className:"".concat(Se.padding30," ").concat(Se.height100Percent),children:Object(a.jsx)("div",{className:"".concat(Se.root," ").concat(Se.height100Percent),children:Object(a.jsxs)(R.a,{container:!0,spacing:3,children:[t[0].hasOwnProperty("filters")?Object(a.jsx)(jn,Object(l.a)(Object(l.a)({},e),{},{classes:Se,apiContent:N,customFilterAction:function(e,t,n){Object.keys(P).length&&(P.updateFilters(Object(D.a)({},t,n)),P.run())},tileToggleValue:X,handleTileToggle:Ne,visColorToggleValue:ne,handleVisColorToggle:He,lightThemeToggleValue:se,fontThemeSelectValue:ue,handleThemeChange:function(e,n){var a="";"boolean"===typeof n?(le(n),a=n?"light_".concat(ue):"dark_".concat(ue)):(a=se?"light_".concat(n):"dark_".concat(n),me(n)),b(Fe,[t,a])},horizontalLayout:ye,setHorizontalLayout:xe,drawerOpen:Oe,setDrawerOpen:ke})):"",_?"":Object(a.jsx)(yn,{classes:Se,height:G,expansionPanelHeight:he}),Object(a.jsx)(vn,{classes:Se,lookerContent:t,type:x,width:t[0].hasOwnProperty("filters")?ye?12:Oe?9:12:12}),c?Object(a.jsx)(R.a,{item:!0,sm:6,className:"".concat(Se.positionFixedTopRight),children:Object(a.jsx)(et,Object(l.a)(Object(l.a)({},e),{},{classes:Se,lookerUser:y,height:G}))}):""]})})})})})}var kn=n(1401),_n=n(1402),wn=n(1404),Sn=n(1403),Tn=n(1396),In=n(1400),Nn=n(1399),Hn=n(1395),Fn=n(1397),Dn=n(1398),An=n(288),Pn=n(42),Bn=Pn.validIdHelper,Ln=Pn.prettifyString,Rn=Object(A.a)((function(e){return{paper:{position:"absolute",width:800,maxHeight:450,overflow:"scroll",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},table:{maxHeight:310},card:{minWidth:275,minHeight:"10rem",boxShadow:"none"},flexCentered:{display:"flex",justifyContent:"center",alignItems:"center"}}}));function En(){return{top:"".concat(10,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(10,"%)")}}function Un(e){var t=Rn(),n=e.open,o=e.onClose,i=e.modalContent,s=r.a.useState(En),l=Object(p.a)(s,1)[0];return Object(a.jsx)(Ue.a,{open:n,onClose:o,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(a.jsxs)("div",{style:l,className:t.paper,children:[Object(a.jsx)("h2",{id:"simple-modal-title",children:i.title}),i.body?Object(a.jsx)(Hn.a,{component:An.a,className:t.table,children:Object(a.jsxs)(Tn.a,{stickyHeader:!0,className:t.table,size:"small","aria-label":"a dense table",children:[Object(a.jsx)(Fn.a,{children:Object(a.jsx)(Dn.a,{children:Object.keys(i.body[0]).map((function(e,t){return Object(a.jsx)(Nn.a,{align:"right",id:Bn(e+"-TableHead-TableCell-"+t),children:Ln(e.substring(e.lastIndexOf(".")+1,e.length))},Bn(e+"-TableHead-TableCell-"+t))}))})}),Object(a.jsx)(In.a,{children:i.body.map((function(e,t){return Object(a.jsx)(Dn.a,{id:Bn("TableRow-"+t),children:Object.keys(e).map((function(e){return Object(a.jsx)(Nn.a,{align:"right",id:Bn(e+"-TableBody-TableCell-"+t),children:i.body[t][e]?i.body[t][e].rendered?i.body[t][e].rendered:i.body[t][e].value?i.body[t][e].value:"number"===typeof i.body[t][e]?Math.round(100*i.body[t][e])/100:i.body[t][e]:""},Bn(e+"-TableBody-TableCell-"+t))}))},Bn("TableRow-"+t))}))})]})}):Object(a.jsx)(E.a,{className:"".concat(t.card," ").concat(t.flexCentered),children:Object(a.jsx)(We.a,{className:t.circularProgress})})]})})}var Mn=n(573),$n=Object(A.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,overflow:"scroll",borderRadius:"8px"},flexCentered:{display:"flex",justifyContent:"center",alignItems:"center"},hidden:{visibility:"hidden",zIndex:-1},tabs:{backgroundColor:"white",color:"#6c757d"},dNone:{display:"none"},dBlock:{display:"block"},tree:{height:240,flexGrow:1,maxWidth:400},icon:{marginRight:12,fontSize:"1rem",overflow:"visible"},mt12:{marginTop:12},w100:{width:"100%"},mlAuto:{marginLeft:"auto"},card:{minWidth:275,minHeight:400},height500:{height:500},height600:{height:600},height700:{height:700},height800:{height:800},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)},skeleton:{height:160,width:"100%"},padding30:{padding:30},positionTopRight:{position:"absolute",top:-30,right:-50,bottom:0,zIndex:100},positionRelative:{position:"relative"},height100Percent:{height:"100%"},ml12:{marginLeft:12},padding20:{padding:20},positionFixedTopRight:{position:"fixed",top:88,right:24,bottom:0,zIndex:100},codeFlyoutContainer:{backgroundColor:"rgb(40, 42, 54)",overflow:"scroll",borderRadius:"0 8px 8px 0"},padding10:{padding:10},overflowScroll:{overflow:"scroll"},noContainerScroll:{width:"100%",margin:0}}})),zn=n(579),Vn=n(383),Gn=n(384),qn=n(68),Qn=n(1412),Wn=n(42).validIdHelper;function Kn(e){var t=Object(o.useContext)(f),n=t.clientSession,i=t.setPaywallModal,s=(t.show,t.codeShow),c=t.sdk,d=t.corsApiCall,b=t.isReady,h=(n.userProfile,n.lookerUser),g=(n.lookerHost,Object(o.useState)(0)),j=Object(p.a)(g,2),y=(j[0],j[1],Object(o.useState)("")),x=Object(p.a)(y,2),v=x[0],C=x[1],O=Object(o.useState)(""),k=Object(p.a)(O,2),_=k[0],w=k[1],S=Object(o.useState)("All"),T=Object(p.a)(S,2),N=T[0],H=T[1],F=Object(o.useState)(""),A=Object(p.a)(F,2),P=A[0],B=A[1],L=Object(o.useState)(void 0),U=Object(p.a)(L,2),M=U[0],$=U[1],z=r.a.useState(!1),V=Object(p.a)(z,2),G=V[0],q=V[1],W=Object(o.useState)({}),K=Object(p.a)(W,2),Y=K[0],J=K[1],X=Object(o.useState)(""),Z=Object(p.a)(X,2),ee=(Z[0],Z[1]),te=Object(o.useState)(window.innerHeight-112),ne=Object(p.a)(te,2),ae=ne[0],oe=ne[1],re=Object(o.useState)(0),ie=Object(p.a)(re,2),se=ie[0],le=ie[1],ce=$n(),de=(e.staticContent,e.staticContent.lookerContent),ue=e.staticContent.type,me=(e.activeTabValue,e.handleTabChange,function(){var e=Object(m.a)(u.a.mark((function e(t){var n,a,o,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.day,(o=JSON.parse(JSON.stringify(de[0].inlineQuery))).filters=Object(l.a)(Object(l.a)({},o.filters),{},(n={},Object(D.a)(n,o.fields[0],a),Object(D.a)(n,o.fields[1],"All"===N?"":N),n)),o.total=!0,o.limit="25",q(!0),e.next=8,c.ok(c.run_inline_query({result_format:de.result_format||"json",body:o}));case 8:r=e.sent,i={title:"Detail View for ".concat(a),body:r},J(i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),be=[];if(M&&(be=(be=I.a.filter(M,(function(e){return e[M.inlineQuery.fields[0]]>=v&&e[M.inlineQuery.fields[0]]<_&&("All"===N||e[M.inlineQuery.fields[1]]===N)}))).map((function(e){return{day:e[M.inlineQuery.fields[0]],category:e[M.inlineQuery.fields[1]],value:e[P]}})),"All"===N)){var he=Object(Q.a)(new Set(be.map((function(e){return e.day})))),fe=[];he.map((function(e){var t=I.a.filter(be,(function(t){return t.day===e})).reduce((function(e,t){return e+t.value}),0),n={day:e,value:t,category:"All"};fe.push(n)})),be=fe}Object(o.useEffect)((function(){b&&(d(ge,[de]),B(de[0].desiredFields[0]),ee("import $ from 'jquery';\nimport _ from 'lodash'\nimport React, { useState, useEffect, useContext } from 'react';\nimport {\n  AppBar, Tabs, Tab, Typography, Box, Grid, CircularProgress, Card, TextField,\n  ExpansionPanel, ExpansionPanelSummary, ExpansionPanelDetails, Divider, InputLabel, MenuItem,\n  FormControl, Select, Modal\n} from '@material-ui/core'\nimport { Skeleton } from '@material-ui/lab';\nimport { ExpandMore, FilterList } from '@material-ui/icons';\nimport ModalTable from '../../Material/ModalTable';\nimport { ResponsiveCalendar } from '@nivo/calendar'\nimport CodeFlyout from '../CodeFlyout';\nimport rawSampleCode from '!!raw-loader!./CustomVis.js'; // eslint-disable-line import/no-webpack-loader-syntax\nimport useStyles from './styles.js';\nimport { ApiHighlight } from '../../Highlights/Highlight';\nimport { format, endOfDay, addDays } from 'date-fns';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { MuiPickersUtilsProvider, KeyboardTimePicker, KeyboardDatePicker } from '@material-ui/pickers';\nimport AppContext from '../../../contexts/AppContext';\nimport { Loader } from '../../Accessories/Loader';\n\n\nconst { validIdHelper } = require('../../../tools');\n\nexport default function CustomVis(props) {\n  // console.log('CustomVis')\n  const { clientSession, setPaywallModal, show, codeShow, sdk, corsApiCall, isReady } = useContext(AppContext)\n  const { userProfile, lookerUser, lookerHost } = clientSession\n\n  const topBarBottomBarHeight = 112;\n  const [value, setValue] = useState(0);\n  const [fromDate, setFromDate] = useState('');\n  const [toDate, setToDate] = useState('');\n  const [category, setCategory] = useState('All')\n  const [desiredField, setDesiredField] = useState('')\n  const [apiContent, setApiContent] = useState(undefined);\n  const [open, setOpen] = React.useState(false);\n  const [modalContent, setModalContent] = useState({});\n  const [clientSideCode, setClientSideCode] = useState('');\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\n  const [expansionPanelHeight, setExpansionPanelHeight] = useState(0);\n\n\n\n  //declare constants\n  const classes = useStyles();\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, activeTabValue, handleTabChange,\n    //lookerUser, lookerHost \n  } = props;\n\n  //handle opening of modal for advanced and premium users\n  const handleModalOpen = async ({ day }) => {\n    let originalInlineQueryCopy = JSON.parse(JSON.stringify(lookerContent[0].inlineQuery));\n    originalInlineQueryCopy.filters = {\n      ...originalInlineQueryCopy.filters,\n      [originalInlineQueryCopy.fields[0]]: day,\n      [originalInlineQueryCopy.fields[1]]: category === \"All\" ? '' : category\n    }\n    originalInlineQueryCopy.total = true;\n    originalInlineQueryCopy.limit = \"25\";\n\n    setOpen(true);\n    let lookerResponseData = await sdk.ok(sdk.run_inline_query({ result_format: lookerContent.result_format || 'json', body: originalInlineQueryCopy }));\n    let modalObj = {\n      \"title\": `Detail View for ${day}`,\n      \"body\": lookerResponseData\n    }\n    setModalContent(modalObj);\n  };\n\n  //handle modal close\n  const handleModalClose = () => {\n    setModalContent({})\n    setOpen(false);\n  };\n\n  //handle tab change\n  const handleChange = (event, newValue) => {\n    handleTabChange(0);\n    setValue(newValue);\n  };\n\n  const handleFromDate = newValue => {\n    let validDate = Date.parse(newValue);\n    if (validDate > 0) {\n      let newValueAsDate = format(addDays(new Date(newValue), 1), 'yyyy-MM-dd');\n      setFromDate(newValueAsDate);\n    }\n  }\n  const handleToDate = newValue => {\n    let validDate = Date.parse(newValue);\n    if (validDate > 0) {\n      let newValueAsDate = format(addDays(new Date(newValue), 1), 'yyyy-MM-dd');\n      setToDate(newValueAsDate);\n    }\n  }\n\n  const handleCategory = newValue => {\n    setCategory(newValue)\n  }\n\n  const handleDesiredField = newValue => {\n    setDesiredField(newValue)\n  }\n\n  //format response from initial api call based on LookerContent array\n  //to match format required by Nivo Calendar component\n  let filterData = [];\n  if (apiContent) {\n    //filtering for fromDate, toDate and category\n    filterData = _.filter(apiContent, (row) => {\n      return (row[apiContent.inlineQuery.fields[0]] >= fromDate\n        && row[apiContent.inlineQuery.fields[0]] < toDate\n        && (category === 'All' ? true : row[apiContent.inlineQuery.fields[1]] === category)\n      )\n    })\n    //converting filterDAta to desired format for vis\n    filterData = filterData.map(item => {\n      return {\n        'day': item[apiContent.inlineQuery.fields[0]],\n        'category': item[apiContent.inlineQuery.fields[1]],\n        'value': item[desiredField]\n      }\n    })\n\n    //special exception for category all\n    //need to reduce array by day across categories\n    //destructuing in reduce of value would not work for dynamic var\n    if (category === 'All') {\n      //create array of all unique dates\n      const uniqueDates = [...new Set(filterData.map(item => item.day))];\n      let filteredAndReducedForAll = []\n      //iterate over unique date\n      uniqueDates.map(uniqueDate => {\n        //filter filterData for current unique date\n        let value = _.filter(filterData, row => {\n          return row.day === uniqueDate\n        }).reduce((acc, { value }) => acc + value, 0)\n        let thisObj = {\n          day: uniqueDate,\n          value: value,\n          category: 'All'\n        }\n        filteredAndReducedForAll.push(thisObj)\n\n      })\n      filterData = filteredAndReducedForAll;\n    }\n  }\n\n  useEffect(() => {\n    if (isReady) {\n      corsApiCall(performLookerApiCalls, [lookerContent])\n      setDesiredField(lookerContent[0].desiredFields[0])\n      setClientSideCode(rawSampleCode)\n    }\n  }, [lookerUser, isReady])\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", () => setHeight((window.innerHeight - topBarBottomBarHeight)));\n    setExpansionPanelHeight($('.MuiExpansionPanel-root:visible').innerHeight() || 0)\n\n  })\n\n  const performLookerApiCalls = function (lookerContent) {\n    // console.log('performLookerApiCalls')\n    // console.log({ lookerContent })\n\n    setApiContent(undefined); //set to empty array to show progress bar and skeleton\n    lookerContent.map(async lookerContent => {\n      let { inlineQuery } = lookerContent;\n      inlineQuery.filters = {\n        [lookerContent.desiredFilterName]: lookerUser.user_attributes.brand\n      };\n      let lookerResponseData = await sdk.ok(sdk.run_inline_query({ result_format: lookerContent.result_format || 'json', body: inlineQuery }));\n\n      // console.log('lookerResponseData', lookerResponseData)\n      lookerResponseData = lookerResponseData.filter(item => {\n        return item[inlineQuery.fields[0]]\n      })\n      let uniqueCategories = ['All'];\n      for (let i = 0; i < lookerResponseData.length; i++) {\n        if (uniqueCategories.indexOf(lookerResponseData[i][inlineQuery.fields[1]]) === -1) {\n          uniqueCategories.push(lookerResponseData[i][inlineQuery.fields[1]])\n        }\n      }\n      lookerResponseData.inlineQuery = inlineQuery;\n      lookerResponseData.uniqueCategories = uniqueCategories;\n      setFromDate(lookerResponseData[lookerResponseData.length - 1][lookerResponseData.inlineQuery.fields[0]]);\n      setToDate(incrementDate(lookerResponseData[0][lookerResponseData.inlineQuery.fields[0]], 1));\n      setApiContent(lookerResponseData)\n    })\n  }\n\n  let nivoColorScale = ['#61cdbb', '#97e3d5', '#e8c1a0', '#f47560']\n  let googleColorScale = ['#4595EC', '#F3A759', '#E24E3A', '#65AB5A'];\n\n  return (\n    <div className={`${classes.root} demoComponent`}\n      style={{ height }}>\n      <Card elevation={1} className={`\n      ${classes.padding30} \n      ${classes.height100Percent}\n      ${classes.overflowScroll}`\n      }\n      >\n        <Grid container\n          key={validIdHelper(type)} >\n          <div className={`${classes.root} `}>\n\n            {!apiContent ?\n              <Skeleton variant=\"rect\" animation=\"wave\" className={classes.skeleton} />\n              :\n              <FilterBar {...props}\n                classes={classes}\n                apiContent={apiContent}\n                fromDate={fromDate}\n                toDate={toDate}\n                category={category}\n                desiredField={desiredField}\n                handleFromDate={handleFromDate}\n                handleToDate={handleToDate}\n                handleCategory={handleCategory}\n                handleDesiredField={handleDesiredField}\n              />\n            }\n\n\n            {!apiContent ?\n\n              <Loader classes={classes}\n                height={height}\n                expansionPanelHeight={expansionPanelHeight} />\n\n              : apiContent && apiContent.length ?\n                <Box>\n                  <Grid container\n                    spacing={3}\n                    className={`${classes.noContainerScroll}`}>\n                    {codeShow ?\n                      <Grid item sm={6}\n                        className={`${classes.positionFixedTopRight}`}\n                      >\n                        <CodeFlyout {...props}\n                          classes={classes}\n                          lookerUser={lookerUser}\n                          height={height}\n                        />\n                      </Grid> : ''}\n                    <Divider className={classes.divider} />\n                    <Grid item sm={12} >\n\n                      <Box className={`${classes.w100} ${classes.padding10}`} mt={2}>\n\n                        <ApiHighlight height={400} classes={classes}>\n                          <ResponsiveCalendar\n                            data={filterData}\n                            align=\"top\"\n                            from={incrementDate(fromDate, 1)}\n                            to={incrementDate(toDate, 1)}\n                            emptyColor=\"#eeeeee\"\n                            colors={desiredField === lookerContent[0].desiredFields[0] ? googleColorScale : nivoColorScale}\n                            yearSpacing={40}\n                            monthBorderColor=\"#ffffff\"\n                            dayBorderWidth={2}\n                            dayBorderColor=\"#ffffff\"\n                            margin={{ bottom: 40, left: 40 }}\n                            legends={[\n                              {\n                                anchor: 'bottom-right',\n                                direction: 'row',\n                                translateY: 36,\n                                itemCount: 4,\n                                itemWidth: 42,\n                                itemHeight: 36,\n                                itemsSpacing: 14,\n                                itemDirection: 'right-to-left'\n                              }\n                            ]}\n                            onClick={(day, event) => {\n                              if (!day.value) {\n                              } else if (lookerUser.user_attributes.permission_level === 'basic') {\n                                setPaywallModal({\n                                  'show': true,\n                                  'permissionNeeded': 'see_drill_overlay'\n                                });\n                              } else {\n                                corsApiCall(handleModalOpen, [day])\n                                event.stopPropagation();\n                              }\n                            }}\n                          />\n                        </ApiHighlight>\n                      </Box>\n                    </Grid>\n                  </Grid>\n                </Box> :\n                ''\n            }\n          </div>\n        </Grid >\n        {\n          open ?\n            <ModalTable\n              {...props}\n              open={open}\n              onClose={handleModalClose}\n              classes={classes}\n              modalContent={modalContent}\n            />\n\n            : ''\n        }\n      </Card>\n    </div >\n  )\n}\n//Filter Bar code\nfunction FilterBar(props) {\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, classes,\n    apiContent, fromDate, toDate, category, desiredField, handleFromDate, handleToDate, handleCategory, handleDesiredField } = props;\n\n  const [expanded, setExpanded] = useState(true);\n\n  const handleExpansionPanel = (event, newValue) => {\n    setExpanded(expanded ? false : true);\n  };\n\n  // console.log('FilterBar')\n  // console.log('fromDate', fromDate)\n  // console.log('toDate', toDate)\n\n  return (\n    <ExpansionPanel expanded={expanded} onChange={handleExpansionPanel} className={classes.w100} elevation={0}>\n      <ExpansionPanelSummary\n        expandIcon={<ExpandMore />}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <FilterList /><Typography className={`${classes.heading} ${classes.ml12}`}>Filter:</Typography>\n\n      </ExpansionPanelSummary>\n      <ExpansionPanelDetails>\n        <Grid container spacing={3}>\n          {apiContent ?\n            <>\n              <Grid item sm={3}>\n\n                <ApiHighlight classes={classes}>\n                  <FormControl className={classes.formControl}>\n                    <InputLabel\n                      id={`${validIdHelper(type + '-FilterBar-DataPropery-SelectLabel')}`}\n                    >\n                      Metric</InputLabel>\n                    <Select\n                      labelId={`${validIdHelper(type + '-FilterBar-DataPropery-SelectLabel')}`}\n                      id={`${validIdHelper(type + '-FilterBar-DataPropery-Select')}`}\n                      value={desiredField}\n                      onChange={(event) => handleDesiredField(event.target.value)}\n                    >\n                      {lookerContent[0].desiredFields.map((item, index) => (\n\n                        <MenuItem\n                          id={validIdHelper(`${item}-${index}`)}\n                          key={validIdHelper(`${item}-${index}`)}\n                          value={item}\n                        >{item.substring(item.lastIndexOf(\".\") + 1, item.length).split(\"_\").map(item => item.charAt(0).toUpperCase() + item.substring(1)).join(\" \")}</MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </ApiHighlight>\n              </Grid>\n              <Grid item sm={3}>\n                <ApiHighlight classes={classes}>\n                  <FormControl className={classes.formControl}>\n                    <InputLabel\n                      id={`${validIdHelper(type + '-FilterBar-Category-SelectLabel')}`}\n                    >\n                      Category</InputLabel>\n                    <Select\n                      labelId={`${validIdHelper(type + '-FilterBar-Category-SelectLabel')}`}\n                      id={`${validIdHelper(type + '-FilterBar-Category-Select')}`}\n                      value={category}\n                      onChange={(event) => handleCategory(event.target.value)}\n                    >\n                      {apiContent.uniqueCategories.map((item, index) => (\n\n                        <MenuItem\n                          id={validIdHelper(`${item}-${index}`)}\n                          key={validIdHelper(`${item}-${index}`)}\n                          value={item}>{item}</MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </ApiHighlight>\n              </Grid>\n\n              <Grid item sm={3}>\n\n                <ApiHighlight classes={classes}>\n                  <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                    <KeyboardDatePicker\n                      disableToolbar\n                      variant=\"inline\"\n                      format=\"MM/dd/yyyy\"\n                      margin=\"normal\"\n                      id=\"fromDate\"\n                      label=\"From date\"\n                      value={fromDate}\n                      onChange={handleFromDate}\n                      KeyboardButtonProps={{\n                        'aria-label': 'change date',\n                      }}\n                      minDate={apiContent[apiContent.length - 1][apiContent.inlineQuery.fields[0]]}\n                      maxDate={apiContent[0][apiContent.inlineQuery.fields[0]]}\n                    />\n                  </MuiPickersUtilsProvider>\n                </ApiHighlight>\n              </Grid>\n              <Grid item sm={3}>\n                <ApiHighlight classes={classes}>\n                  <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                    <KeyboardDatePicker\n                      disableToolbar\n                      variant=\"inline\"\n                      format=\"MM/dd/yyyy\"\n                      margin=\"normal\"\n                      id=\"toDate\"\n                      label=\"To date\"\n                      value={toDate}\n                      onChange={handleToDate}\n                      KeyboardButtonProps={{\n                        'aria-label': 'change date',\n                      }}\n                      minDate={fromDate}\n                      maxDate={toDate}\n                    />\n                  </MuiPickersUtilsProvider>\n                </ApiHighlight>\n              </Grid>\n            </>\n            : ''}\n        </Grid>\n      </ExpansionPanelDetails>\n    </ExpansionPanel >\n  )\n}\n\nfunction incrementDate(dateInput, increment) {\n  var dateFormatTotime = new Date(dateInput);\n  var increasedDate = new Date(dateFormatTotime.getTime() + (increment * 86400000));\n  return increasedDate.toISOString().split('T')[0];\n}"))}),[h,b]),Object(o.useEffect)((function(){window.addEventListener("resize",(function(){return oe(window.innerHeight-112)})),le(Tt()(".MuiExpansionPanel-root:visible").innerHeight()||0)}));var ge=function(e){$(void 0),e.map(function(){var e=Object(m.a)(u.a.mark((function e(t){var n,a,o,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.inlineQuery).filters=Object(D.a)({},t.desiredFilterName,h.user_attributes.brand),e.next=4,c.ok(c.run_inline_query({result_format:t.result_format||"json",body:n}));case 4:for(a=(a=e.sent).filter((function(e){return e[n.fields[0]]})),o=["All"],r=0;r<a.length;r++)-1===o.indexOf(a[r][n.fields[1]])&&o.push(a[r][n.fields[1]]);a.inlineQuery=n,a.uniqueCategories=o,C(a[a.length-1][a.inlineQuery.fields[0]]),w(Jn(a[0][a.inlineQuery.fields[0]],1)),$(a);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};return Object(a.jsx)("div",{className:"".concat(ce.root," demoComponent"),style:{height:ae},children:Object(a.jsxs)(E.a,{elevation:1,className:"\n      ".concat(ce.padding30," \n      ").concat(ce.height100Percent,"\n      ").concat(ce.overflowScroll),children:[Object(a.jsx)(R.a,{container:!0,children:Object(a.jsxs)("div",{className:"".concat(ce.root," "),children:[M?Object(a.jsx)(Yn,Object(l.a)(Object(l.a)({},e),{},{classes:ce,apiContent:M,fromDate:v,toDate:_,category:N,desiredField:P,handleFromDate:function(e){if(Date.parse(e)>0){var t=Object(zn.a)(Object(Vn.a)(new Date(e),1),"yyyy-MM-dd");C(t)}},handleToDate:function(e){if(Date.parse(e)>0){var t=Object(zn.a)(Object(Vn.a)(new Date(e),1),"yyyy-MM-dd");w(t)}},handleCategory:function(e){H(e)},handleDesiredField:function(e){B(e)}})):Object(a.jsx)(Et.a,{variant:"rect",animation:"wave",className:ce.skeleton}),M?M&&M.length?Object(a.jsx)(Ke.a,{children:Object(a.jsxs)(R.a,{container:!0,spacing:3,className:"".concat(ce.noContainerScroll),children:[s?Object(a.jsx)(R.a,{item:!0,sm:6,className:"".concat(ce.positionFixedTopRight),children:Object(a.jsx)(et,Object(l.a)(Object(l.a)({},e),{},{classes:ce,lookerUser:h,height:ae}))}):"",Object(a.jsx)(pe.a,{className:ce.divider}),Object(a.jsx)(R.a,{item:!0,sm:12,children:Object(a.jsx)(Ke.a,{className:"".concat(ce.w100," ").concat(ce.padding10),mt:2,children:Object(a.jsx)(ut,{height:400,classes:ce,children:Object(a.jsx)(Mn.a,{data:be,align:"top",from:Jn(v,1),to:Jn(_,1),emptyColor:"#eeeeee",colors:P===de[0].desiredFields[0]?["#4595EC","#F3A759","#E24E3A","#65AB5A"]:["#61cdbb","#97e3d5","#e8c1a0","#f47560"],yearSpacing:40,monthBorderColor:"#ffffff",dayBorderWidth:2,dayBorderColor:"#ffffff",margin:{bottom:40,left:40},legends:[{anchor:"bottom-right",direction:"row",translateY:36,itemCount:4,itemWidth:42,itemHeight:36,itemsSpacing:14,itemDirection:"right-to-left"}],onClick:function(e,t){e.value&&("basic"===h.user_attributes.permission_level?i({show:!0,permissionNeeded:"see_drill_overlay"}):(d(me,[e]),t.stopPropagation()))}})})})})]})}):"":Object(a.jsx)(yn,{classes:ce,height:ae,expansionPanelHeight:se})]})},Wn(ue)),G?Object(a.jsx)(Un,Object(l.a)(Object(l.a)({},e),{},{open:G,onClose:function(){J({}),q(!1)},classes:ce,modalContent:Y})):""]})})}function Yn(e){e.staticContent;var t=e.staticContent.lookerContent,n=e.staticContent.type,r=e.classes,i=e.apiContent,s=e.fromDate,l=e.toDate,c=e.category,d=e.desiredField,u=e.handleFromDate,m=e.handleToDate,b=e.handleCategory,h=e.handleDesiredField,f=Object(o.useState)(!0),g=Object(p.a)(f,2),j=g[0],y=g[1];return Object(a.jsxs)(kn.a,{expanded:j,onChange:function(e,t){y(!j)},className:r.w100,elevation:0,children:[Object(a.jsxs)(_n.a,{expandIcon:Object(a.jsx)(Bt.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:[Object(a.jsx)(Sn.a,{}),Object(a.jsx)(M.a,{className:"".concat(r.heading," ").concat(r.ml12),children:"Filter:"})]}),Object(a.jsx)(wn.a,{children:Object(a.jsx)(R.a,{container:!0,spacing:3,children:i?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(R.a,{item:!0,sm:3,children:Object(a.jsx)(ut,{classes:r,children:Object(a.jsxs)(dn.a,{className:r.formControl,children:[Object(a.jsx)(un.a,{id:"".concat(Wn(n+"-FilterBar-DataPropery-SelectLabel")),children:"Metric"}),Object(a.jsx)(mn.a,{labelId:"".concat(Wn(n+"-FilterBar-DataPropery-SelectLabel")),id:"".concat(Wn(n+"-FilterBar-DataPropery-Select")),value:d,onChange:function(e){return h(e.target.value)},children:t[0].desiredFields.map((function(e,t){return Object(a.jsx)(me.a,{id:Wn("".concat(e,"-").concat(t)),value:e,children:e.substring(e.lastIndexOf(".")+1,e.length).split("_").map((function(e){return e.charAt(0).toUpperCase()+e.substring(1)})).join(" ")},Wn("".concat(e,"-").concat(t)))}))})]})})}),Object(a.jsx)(R.a,{item:!0,sm:3,children:Object(a.jsx)(ut,{classes:r,children:Object(a.jsxs)(dn.a,{className:r.formControl,children:[Object(a.jsx)(un.a,{id:"".concat(Wn(n+"-FilterBar-Category-SelectLabel")),children:"Category"}),Object(a.jsx)(mn.a,{labelId:"".concat(Wn(n+"-FilterBar-Category-SelectLabel")),id:"".concat(Wn(n+"-FilterBar-Category-Select")),value:c,onChange:function(e){return b(e.target.value)},children:i.uniqueCategories.map((function(e,t){return Object(a.jsx)(me.a,{id:Wn("".concat(e,"-").concat(t)),value:e,children:e},Wn("".concat(e,"-").concat(t)))}))})]})})}),Object(a.jsx)(R.a,{item:!0,sm:3,children:Object(a.jsx)(ut,{classes:r,children:Object(a.jsx)(qn.a,{utils:Gn.a,children:Object(a.jsx)(Qn.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"fromDate",label:"From date",value:s,onChange:u,KeyboardButtonProps:{"aria-label":"change date"},minDate:i[i.length-1][i.inlineQuery.fields[0]],maxDate:i[0][i.inlineQuery.fields[0]]})})})}),Object(a.jsx)(R.a,{item:!0,sm:3,children:Object(a.jsx)(ut,{classes:r,children:Object(a.jsx)(qn.a,{utils:Gn.a,children:Object(a.jsx)(Qn.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"toDate",label:"To date",value:l,onChange:m,KeyboardButtonProps:{"aria-label":"change date"},minDate:s,maxDate:l})})})})]}):""})})]})}function Jn(e,t){var n=new Date(e);return new Date(n.getTime()+864e5*t).toISOString().split("T")[0]}var Xn=n(1416),Zn=n(1405),ea=n(1406),ta=n(1407),na=n(1408),aa=n(576),oa=n.n(aa),ra=n(577),ia=n.n(ra),sa=Object(A.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,overflow:"scroll",borderRadius:"8px"},card:{minWidth:275,minHeight:400},flexCentered:{display:"flex",justifyContent:"center",alignItems:"center"},hidden:{visibility:"hidden",position:"absolute",zIndex:-1},tabs:{backgroundColor:"white",color:"#6c757d"},dNone:{display:"none"},dBlock:{display:"block"},tree:{height:240,flexGrow:1,maxWidth:400},icon:{marginRight:12,fontSize:"1rem",overflow:"visible"},mt12:{marginTop:12},w100:{width:"100%"},mlAuto:{marginLeft:"auto"},skeleton:{minWidth:275,minHeight:600},ml24:{marginLeft:24},parentHoverVisibility:{"&:hover $childHoverVisibility":{visibility:"visible"}},childHoverVisibility:{visibility:"hidden"},faSm:{fontSize:".75em"},positionTopRight:{position:"absolute",top:-30,right:-50,bottom:0,zIndex:100},positionRelative:{position:"relative"},padding30:{padding:30},mr12:{marginRight:12},ml12:{marginLeft:12},height100Percent:{height:"100%"},padding20:{padding:20},positionFixedTopRight:{position:"fixed",top:88,right:24,bottom:0,zIndex:100},codeFlyoutContainer:{backgroundColor:"rgb(40, 42, 54)",overflow:"scroll",borderRadius:"0 8px 8px 0"},whiteSpaceNoWrap:{whiteSpace:"nowrap"},overflowHidden:{overflow:"hidden"},overflowScroll:{overflow:"scroll"},overflowYScroll:{overflowY:"scroll",overflowX:"hidden"},noContainerScroll:{width:"100%",margin:0}}}));function la(e){var t=e.children,n=e.value,o=e.index,r=Object(c.a)(e,["children","value","index"]);return Object(a.jsx)(M.a,Object(l.a)(Object(l.a)({component:"div",role:"tabpanel",hidden:n!==o,id:"simple-tabpanel-".concat(o),"aria-labelledby":"simple-tab-".concat(o)},r),{},{children:Object(a.jsx)(Ke.a,{p:3,children:t})}))}var ca=n(42).validIdHelper;function da(e){var t=Object(o.useContext)(f),n=t.clientSession,i=t.setPaywallModal,s=(t.show,t.codeShow),c=t.sdk,d=t.corsApiCall,b=t.isReady,h=(n.userProfile,n.lookerUser),g=(n.lookerHost,Object(o.useState)(0)),j=Object(p.a)(g,2),y=j[0],x=j[1],v=Object(o.useState)([]),C=Object(p.a)(v,2),O=C[0],k=C[1],_=Object(o.useState)({}),w=Object(p.a)(_,2),S=(w[0],w[1]),T=Object(o.useState)(""),I=Object(p.a)(T,2),N=(I[0],I[1]),H=Object(o.useState)(""),F=Object(p.a)(H,2),D=(F[0],F[1],Object(o.useState)(window.innerHeight-112)),A=Object(p.a)(D,2),P=A[0],B=A[1],L=Object(o.useState)(0),U=Object(p.a)(L,2),M=U[0],$=U[1],z=sa(),V=Object(o.useState)(0),G=Object(p.a)(V,2),q=G[0],K=G[1],Y=Object(o.useState)(null),J=Object(p.a)(Y,2),Z=J[0],ee=J[1],te=(e.staticContent,e.staticContent.lookerContent),ne=e.staticContent.type,ae=ne,oe=Object(Q.a)(te),re=function(e,t){1==t&&"premium"!=h.user_attributes.permission_level?i({show:!0,permissionNeeded:"explore"}):K(t)};Object(o.useEffect)((function(){b&&(d(se,[te,!q]),N("import $ from 'jquery';\nimport _ from 'lodash'\nimport React, { useState, useEffect, useContext } from 'react';\nimport { AppBar, Tabs, Tab, Typography, Box, Grid, Icon, CircularProgress, Card, Button } from '@material-ui/core'\nimport { TreeView, TreeItem } from '@material-ui/lab';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport { LookerEmbedSDK } from '@looker/embed-sdk'\nimport CodeFlyout from '../CodeFlyout';\nimport rawSampleCode from '!!raw-loader!./ReportBuilder.js'; // eslint-disable-line import/no-webpack-loader-syntax\nimport useStyles from './styles.js';\nimport { TabPanel, a11yProps } from './helpers.js';\nimport '../../Home.css';\nimport { ApiHighlight, EmbedHighlight } from '../../Highlights/Highlight';\nimport AppContext from '../../../contexts/AppContext';\nimport { Loader } from '../../Accessories/Loader';\n\nimport { SwapVerticalCircleOutlined } from '@material-ui/icons';\nconst { validIdHelper } = require('../../../tools');\n\n//start of ReportBuilder Component\nexport default function ReportBuilder(props) {\n\n\n  const { clientSession, setPaywallModal, show, codeShow, sdk, corsApiCall, isReady } = useContext(AppContext)\n  const { userProfile, lookerUser, lookerHost } = clientSession;\n\n  const topBarBottomBarHeight = 112;\n  const [iFrameExists, setIFrame] = useState(0);\n  // const [exploreIFrameExists, setExploreIFrame] = useState(0);\n  const [apiContent, setApiContent] = useState([]);\n  const [exploreObj, setExploreObj] = useState({});\n  const [clientSideCode, setClientSideCode] = useState('');\n  const [serverSideCode, setServerSideCode] = useState('');\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\n  const [expansionPanelHeight, setExpansionPanelHeight] = useState(0);\n\n  const classes = useStyles();\n  const [value, setValue] = useState(0);\n  const [qid, setQid] = useState(null);\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type },\n    //activeTabValue, handleTabChange, lookerUser, lookerHost \n  } = props;\n\n  const demoComponentType = type;\n  const tabContent = [...lookerContent]\n\n  const handleChange = (event, newValue) => {\n    if (newValue == 1 && lookerUser.user_attributes.permission_level != 'premium') {\n      // handleChange(0)\n      setPaywallModal({\n        'show': true,\n        'permissionNeeded': 'explore'\n      });\n    } else {\n      setValue(newValue)\n    }\n  };\n\n  useEffect(() => {\n    if (isReady) {\n      corsApiCall(performLookerApiCalls, [lookerContent, !value])\n      setClientSideCode(rawSampleCode)\n    }\n  }, [lookerUser, value, isReady, value]);\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", () => setHeight((window.innerHeight - topBarBottomBarHeight)));\n    setExpansionPanelHeight($('.MuiExpansionPanel-root:visible').innerHeight() || 0)\n  })\n\n\n  const action = async (contentType, contentId, secondaryAction, qid, exploreId, newReportEmbedContainer) => {\n\n    let iFrameArray = $(\".embedContainer:visible > iframe\")\n\n    let matchingIndex = 0;\n    for (let i = 0; i < iFrameArray.length; i++) {\n      if (iFrameArray[i].classList.contains(contentType) && iFrameArray[i].classList.contains(contentId)) {\n        iFrameArray[i].classList.remove('dNone')\n        matchingIndex = i;\n      } else {\n        iFrameArray[i].classList.add('dNone')\n      }\n    }\n\n    if (secondaryAction === 'edit' || secondaryAction === 'explore') {\n      //save qid to state and use in perform looker api calls\n      setQid(qid);\n      handleChange('edit', 1)\n    } else if (secondaryAction === 'delete') {\n      //remove iframe associated with content that was deleted\n      let indexOfDeletedContent;\n      for (let i = 0; i < iFrameArray.length; i++) {\n        if (iFrameArray[i].classList.contains(contentId)) {\n          indexOfDeletedContent = i;\n        }\n      }\n      let updatedIFrameArray = iFrameArray.slice()\n      updatedIFrameArray.splice(indexOfDeletedContent, 1)\n      for (let i = 0; i < updatedIFrameArray.length; i++) {\n        if (i === 0) {\n          updatedIFrameArray[i].classList.remove('dNone')\n          matchingIndex = i;\n        } else {\n          updatedIFrameArray[i].classList.add('dNone')\n        }\n      }\n      //append updated array\n      $(`#embedContainer-reportbuilder-14`).empty();\n      $(`#embedContainer-reportbuilder-14`).html(updatedIFrameArray);\n\n      let lookerResponse = await sdk.ok(sdk.delete_look(contentId));\n      corsApiCall(performLookerApiCalls, [lookerContent, 1])\n    }\n  }\n\n  const performLookerApiCalls = function (lookerContent, animateLoad) {\n    if (animateLoad) {\n      handleChange('refresh', 0)\n      setIFrame(0)\n      setApiContent([])\n    }\n\n    lookerContent.map(async lookerContent => {\n      if (value === 0 &&\n        lookerContent.type === 'folder') {\n\n        const sharedFolder = await sdk.ok(sdk.folder(lookerContent.id));\n        const embedUser = await sdk.ok(sdk.me())\n\n        for (let h = 0; h < sharedFolder.looks.length; h++) {\n          let look = await sdk.ok(sdk.look(sharedFolder.looks[h].id))\n          let clientId = look.query.client_id;\n          sharedFolder.looks[h].client_id = clientId;\n        }\n\n        let embeddedUserFolder = {}\n        if (lookerUser.user_attributes.permission_level === 'premium') {\n          let embedUserLooks = await sdk.ok(sdk.search_looks({ user_id: embedUser.id }))\n          if (embedUserLooks && embedUserLooks.length) {\n            let embedUserFolderId = embedUserLooks[0].folder_id || null;\n            embeddedUserFolder = await sdk.ok(sdk.folder(embedUserFolderId));\n            for (let i = 0; i < embeddedUserFolder.looks.length; i++) {\n              let look = await sdk.ok(sdk.look(embeddedUserFolder.looks[i].id));\n              let clientId = look.query.client_id;\n              embeddedUserFolder.looks[i].client_id = clientId;\n            }\n          }\n        }\n\n        let lookerResponseData = {\n          sharedFolder,\n          embeddedUserFolder\n        }\n\n        // console.log('lookerResponseData', lookerResponseData)\n\n        let looksToUse = [...lookerResponseData.sharedFolder.looks];\n        if (lookerUser.user_attributes.permission_level === 'premium' &&\n          Object.keys(lookerResponseData.embeddedUserFolder).length) {\n          looksToUse = [\n            ...looksToUse, ...lookerResponseData.embeddedUserFolder.looks\n          ]\n\n        }\n        let dashboardsToUse = [...lookerResponseData.sharedFolder.dashboards]\n        let objToUse = {\n          looks: looksToUse,\n          dashboards: dashboardsToUse\n        }\n        // console.log('objToUse', objToUse)\n        let iFrameArray = $(`.embedContainer.${validIdHelper(demoComponentType)} > iframe`);\n        if (objToUse.looks.length) {\n          objToUse.looks.map((item, index) => {\n\n            let lookId = item.id;\n            let lookIsRendered = false;\n            for (let i = 0; i < iFrameArray.length; i++) {\n              if (iFrameArray[i].classList.contains('look') && iFrameArray[i].classList.contains(lookId)) {\n                lookIsRendered = true;\n              }\n            }\n\n            if (!lookIsRendered) {\n              LookerEmbedSDK.createLookWithId(lookId)\n                .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\n                .withClassName('iframe')\n                .withClassName('look')\n                .withClassName(lookerResponseData.sharedFolder.looks.indexOf(item) > -1 ? \"shared\" : \"personal\")\n                .withClassName(index > 0 ? 'dNone' : 'oops')\n                .withClassName(lookId)\n                .build()\n                .connect()\n                .then((look) => {\n                  // setIFrame(1)\n                  LookerEmbedSDK.init(`${clientSession.lookerBaseUrl}`);\n\n\n                })\n                .catch((error) => {\n                  console.error('Connection error', error)\n                })\n            }\n\n            if (index === objToUse.looks.length - 1) {\n              setTimeout(() => setIFrame(1), 1000)\n            }\n          })\n        }\n\n        if (objToUse.dashboards.length) {\n          objToUse.dashboards.map((item, index) => {\n            let dashboardId = item.id\n            let dashboardIsRendered = false;\n            for (let i = 0; i < iFrameArray.length; i++) {\n              if (iFrameArray[i].classList.contains('dashboard') && iFrameArray[i].classList.contains(dashboardId)) {\n                dashboardIsRendered = true;\n              }\n            }\n            if (!dashboardIsRendered) {\n              LookerEmbedSDK.createDashboardWithId(dashboardId)\n                .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\n                .withClassName('iframe')\n                .withClassName('dashboard')\n                .withClassName(lookerResponseData.sharedFolder.dashboards.indexOf(item) > -1 ? \"shared\" : \"personal\")\n                .withClassName('dNone')\n                .withClassName(dashboardId)\n                .build()\n                .connect()\n                .then((dashboard) => {\n                  setTimeout(() => {\n                    // setIFrame(1)\n                  }, 1000)\n                  LookerEmbedSDK.init(`${clientSession.lookerBaseUrl}`);\n\n                })\n                .catch((error) => {\n                  console.error('Connection error', error)\n                })\n            }\n\n\n            if (index === objToUse.dashboards.length - 1) {\n              setTimeout(() => setIFrame(1), 1000)\n            }\n          })\n        }\n        setApiContent(objToUse)\n      } else if (lookerContent.type === 'explore' &&\n        lookerUser.user_attributes.permission_level === 'premium' &&\n        value === 1) {\n        // console.log('inside else ifff')\n        let exploreId = lookerContent.id;\n        // console.log('exploreId', exploreId)\n        $(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`)).html('');\n        //separate logic for embedding explore with qid vs. no qid\n        if (qid) {\n          // console.log('qid ifff')\n          LookerEmbedSDK.createExploreWithId(exploreId)\n            .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\n            .withClassName('exploreIframe')\n            .withParams({\n              qid: qid\n            })\n            .on('explore:state:changed', (event) => {\n            })\n            .build()\n            .connect()\n            .then((explore) => {\n              console.log('explore', explore)\n              // setTimeout(() => {\n              setIFrame(1)\n              setExploreObj(explore)\n              // }, 1000)\n              LookerEmbedSDK.init(`${clientSession.lookerBaseUrl}`);\n\n              setQid(null)\n            })\n            .catch((error) => {\n              console.error('Connection error', error)\n            })\n        } else {\n          // console.log('qid else')\n          LookerEmbedSDK.createExploreWithId(exploreId)\n            .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\n            .withClassName('exploreIframe')\n            .on('explore:state:changed', (event) => {\n            })\n            .build()\n            .connect()\n            .then((explore) => {\n              // console.log('explore', explore)\n              // setTimeout(() => {\n              setIFrame(1)\n              setExploreObj(explore)\n              // }, 1000)\n              LookerEmbedSDK.init(`${clientSession.lookerBaseUrl}`);\n\n              // setQid(null)\n            })\n            .catch((error) => {\n              console.error('Connection error', error)\n            })\n        }\n      }\n      // else console.log('ellse')\n    })\n  }\n\n  return (\n    <div className={`${classes.root} demoComponent`}\n      style={{ height }}>\n      <Card elevation={1} className={`\n      ${classes.padding30} \n      ${classes.height100Percent}\n      ${classes.overflowYScroll}`\n      }\n      >\n        <Grid container\n          key={validIdHelper(type)} >\n          <div className={classes.root}>\n            {iFrameExists ? '' :\n\n              <Loader classes={classes}\n                height={height}\n                expansionPanelHeight={expansionPanelHeight} />\n            }\n\n            {/* additional loading logic, need embedContainer to exist but want it hidden until iFrame has content...*/}\n            <Box className={iFrameExists ? `` : `${classes.hidden}`}>\n              <AppBar position=\"static\" elevation={0}>\n                <Tabs\n                  className={classes.tabs}\n                  value={value}\n                  onChange={handleChange}\n                  aria-label=\"simple tabs example\">\n                  {tabContent.map((item, index) => (\n                    <Tab\n                      key={`${validIdHelper(demoComponentType + '-tab-' + index)}`}\n                      label={index == 1 ?\n                        <div>\n\n                          {lookerUser.user_attributes.permission_level != 'premium' ?\n                            <Icon className={`fa fa-lock ${classes.faSm} ${classes.mr12}`} /> : <Icon className={`fa fa-plus ${classes.faSm} ${classes.mr12}`} />}\n                          {item.label}\n                        </div> :\n                        item.label}\n                      className={value === 1 && index === 1 ? `${classes.hidden}` : index == 1 ? `${classes.mlAuto}` : ``}\n                      style={index === 1 ? {\n                        backgroundColor: '#5896E6',\n                        borderRadius: '4px',\n                        color: '#fff',\n                        opacity: '1.0'\n                      } : {}}\n                      {...a11yProps(index)} />\n                  ))}\n                </Tabs>\n              </AppBar>\n              <Box className=\"tabPanelContainer\">\n                <Grid container\n                  spacing={3}\n                  className={`${classes.noContainerScroll}`}>\n                  {codeShow ?\n                    <Grid item sm={6}\n                      className={`${classes.positionFixedTopRight}`}\n                    >\n                      <CodeFlyout {...props}\n                        classes={classes}\n                        lookerUser={lookerUser}\n                        height={height}\n                      />\n                    </Grid> : ''}\n                  {tabContent.map((tabContentItem, tabContentItemIndex) => (\n                    <TabPanel\n                      key={`${validIdHelper(demoComponentType + '-tabPanel-' + tabContentItemIndex)}`}\n                      value={value}\n                      index={tabContentItemIndex}\n                      style={{ width: '100%' }} //weird\n                    >\n                      <Grid container>\n                        {\n                          tabContentItemIndex === 0\n                            ?\n                            <React.Fragment\n                              key={`${validIdHelper(demoComponentType + '-outerFragment-' + tabContentItemIndex)}`}>\n                              <Grid item sm={4} >\n                                <ApiHighlight height={500} classes={classes}>\n                                  <TreeSideBar {...{\n                                    setPaywallModal,\n                                    classes,\n                                    demoComponentType,\n                                    tabContent,\n                                    tabContentItemIndex,\n                                    action,\n                                    apiContent,\n                                    ...props\n                                  }}\n                                  />\n                                </ApiHighlight>\n                              </Grid>\n                              <Grid item sm={8} >\n                                <EmbedHighlight classes={classes}>\n                                  <div\n                                    className={`embedContainer ${validIdHelper(demoComponentType)}`}\n                                    id={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                    key={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                  >\n                                  </div>\n                                </EmbedHighlight>\n                              </Grid>\n                            </React.Fragment>\n                            :\n                            <Grid item sm={12} >\n                              {/* couldn't get this to work */}\n                              {/* {Object.keys(exploreObj).length ?\n                                <EmbedHighlight classes={classes}>\n                                  <div\n                                    className=\"embedContainer\"\n                                    id={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                    key={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                  >\n                                  </div>\n                                </EmbedHighlight> :\n                                <Card className={`${classes.card} ${classes.flexCentered}`}\n                                  elevation={0}\n                                  mt={2}\n                                  style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\n                                  <CircularProgress className={classes.circularProgress} />\n                                </Card>} */}\n                              <EmbedHighlight classes={classes}>\n                                <div\n                                  className=\"embedContainer\"\n                                  id={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                  key={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                >\n                                </div>\n                              </EmbedHighlight>\n                            </Grid>\n                        }\n                      </Grid>\n                    </TabPanel>\n                  ))}</Grid>\n              </Box>\n            </Box >\n          </div>\n        </Grid >\n      </Card>\n    </div >\n  )\n}\n\n\nfunction TreeSideBar(props) {\n\n\n  const { clientSession, setPaywallModal, show, codeShow, sdk, corsApiCall } = useContext(AppContext)\n  const { userProfile, lookerUser, lookerHost } = clientSession\n\n  const { staticContent, staticContent: { lookerContent }, classes, demoComponentType, tabContent, tabContentItemIndex, action, apiContent,\n    //lookerUser, setPaywallModal\n  } = props\n  const sharedFolderId = lookerContent[0].type === 'folder' ? lookerContent[0].id : '';\n  let treeCounter = 0;\n  const [selected, setSelected] = useState(2);\n  const expandedArr = Object.keys(apiContent).length ? [\"1\", \"\" + (2 + apiContent[Object.keys(apiContent)[0]].length)] : [];\n  const [expanded, setExpanded] = useState(expandedArr);\n\n  const handleToggle = (event, nodeIds) => {\n    setExpanded(nodeIds);\n  }\n\n  const handleSelect = (event, nodeIds) => {\n    setSelected(nodeIds);\n  };\n\n\n  useEffect(() => {\n    setExpanded(expandedArr);\n    if (selected !== 2) setSelected(2)\n    // let innerTreeItemArray = $(\".innerTreeItem\");\n    // console.log('innerTreeItemArray', innerTreeItemArray)\n    // for (let i = 0; i < innerTreeItemArray.length; i++) {\n    //   console.log('inside forrr', i)\n    //   if (innerTreeItemArray[i].classList.contains('Mui-selected')) {\n    //     console.log('inside iffff')\n    //     innerTreeItemArray[i].classList.remove('Mui-selected')\n    //   } else console.log('elllse')\n    // }\n  }, [apiContent]);\n\n\n  return (\n    <TreeView\n      className={classes.tree}\n      defaultCollapseIcon={<ExpandMoreIcon />}\n      defaultExpandIcon={<ChevronRightIcon />}\n      expanded={expanded}\n      onNodeToggle={handleToggle}\n      onNodeSelect={handleSelect}\n    // multiSelect={false}\n    >\n      {apiContent ? Object.keys(apiContent).map((key, outerIndex) => (\n        <React.Fragment\n          key={`${validIdHelper(demoComponentType + '-innerFragment-' + outerIndex)}`}>\n          <TreeItem\n            key={`${validIdHelper(demoComponentType + '-outerTreeItem-' + outerIndex)}`}\n            nodeId={\"\" + (treeCounter += 1)}\n            // treecounter={treeCounter}\n            label={_.capitalize(key)}\n            icon={<Icon className={`fa fa-folder ${classes.icon}`} />}\n            disabled={apiContent[key].length ? false : true}\n          >\n            {\n              apiContent[key].length ?\n                apiContent[key].map((item, index) => (\n                  <TreeItem\n                    key={`${validIdHelper(demoComponentType + '-innerTreeItem-' + treeCounter)}`}\n                    nodeId={\"\" + (treeCounter += 1)}\n                    treecounter={treeCounter}\n                    selected={selected === treeCounter}\n                    className={selected === treeCounter ? `Mui-selected innerTreeItem ${classes.whiteSpaceNoWrap}` : `innerTreeItem ${classes.whiteSpaceNoWrap}`}\n                    contentid={item.id}\n                    label={item.folder_id === sharedFolderId &&\n                      key === 'looks' ?\n                      <div\n                        id={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\n                        key={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\n                        className={`${classes.labelRoot} ${classes.parentHoverVisibility}`}\n                      >\n                        {/* {item.title.length > 15 ? item.title.substring(0, 15) + '...' : item.title} */}\n                        <Grid container>\n                          <Grid item sm={8} className={`${classes.overflowHidden}`}>\n                            {item.title}</Grid>\n                          <Grid item sm={4}>\n                            <Button\n                              id={`${validIdHelper(demoComponentType + '-innerTreeItem-Explore' + treeCounter)}`}\n                              key={`${validIdHelper(demoComponentType + '-innerTreeItem-Explore' + treeCounter)}`}\n                              size=\"small\"\n                              className={`${classes.ml12} ${classes.childHoverVisibility}`}\n                              onClick={(event) => {\n                                if (lookerUser.user_attributes.permission_level === 'premium') {\n                                  action(\n                                    key.substring(0, key.length - 1),\n                                    item.id,\n                                    'explore',\n                                    item.client_id,\n                                    tabContent[tabContentItemIndex + 1].id,\n                                    validIdHelper(`embedContainer-${demoComponentType}-${tabContent[tabContentItemIndex + 1].id}`)\n                                  );\n                                  event.stopPropagation();\n                                } else {\n                                  // setPaywallModal();\n\n                                  setPaywallModal({\n                                    'show': true,\n                                    'permissionNeeded': 'explore'\n                                  });\n                                }\n                              }\n                              }\n                              color=\"default\"\n                            >\n                              {lookerUser.user_attributes.permission_level === 'premium' ? 'Explore' : <div> <Icon className={`fa fa-lock ${classes.faSm} ${classes.mr12}`} />Explore</div>}\n                            </Button>\n                          </Grid>\n                        </Grid>\n\n\n                      </div>\n                      : key === 'looks' ?\n                        <div\n                          id={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\n                          key={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\n                          className={`${classes.labelRoot} ${classes.parentHoverVisibility}`}>\n                          <Grid container>\n                            <Grid item sm={6} className={`${classes.overflowHidden}`}>\n                              {/* {item.title.length > 15 ? item.title.substring(0, 15) + '...' : item.title} */}\n                              {item.title}\n                            </Grid>\n                            <Grid item sm={6}>\n                              <Button\n                                id={`${validIdHelper(demoComponentType + '-innerTreeItem-EditButton' + treeCounter)}`}\n                                key={`${validIdHelper(demoComponentType + '-innerTreeItem-EditButton' + treeCounter)}`}\n                                size=\"small\"\n                                className={`${classes.ml12} ${classes.childHoverVisibility}`}\n                                onClick={(event) => {\n                                  if (lookerUser.user_attributes.permission_level === 'premium') {\n                                    // setSelected(treeCounter);\n                                    action(\n                                      key.substring(0, key.length - 1),\n                                      item.id,\n                                      'edit',\n                                      item.client_id,\n                                      tabContent[tabContentItemIndex + 1].id,\n                                      validIdHelper(`embedContainer-${demoComponentType}-${tabContent[tabContentItemIndex + 1].id}`)\n                                    );\n                                    event.stopPropagation();\n                                  } else {\n                                    // setPaywallModal();\n\n                                    setPaywallModal({\n                                      'show': true,\n                                      'permissionNeeded': 'explore'\n                                    });\n                                  }\n                                }\n                                }\n                                color=\"primary\"\n                              >\n                                Edit\n                                                                                            </Button>\n                              <Button\n                                id={`${validIdHelper(demoComponentType + '-innerTreeItem-DeleteButton' + treeCounter)}`}\n                                key={`${validIdHelper(demoComponentType + '-innerTreeItem-DeleteButton' + treeCounter)}`}\n                                size=\"small\"\n                                className={`${classes.ml12} ${classes.childHoverVisibility}`}\n                                onClick={(event) => {\n                                  if (lookerUser.user_attributes.permission_level === 'premium') {\n                                    // setSelected(treeCounter);\n                                    action(\n                                      key.substring(0, key.length - 1),\n                                      item.id,\n                                      'delete',\n                                      item.client_id,\n                                      tabContent[tabContentItemIndex + 1].id,\n                                      validIdHelper(`embedContainer-${demoComponentType}-${tabContent[tabContentItemIndex + 1].id}`)\n                                    );\n                                    event.stopPropagation();\n                                  } else {\n                                    // setPaywallModal();\n\n                                    setPaywallModal({\n                                      'show': true,\n                                      'permissionNeeded': 'explore'\n                                    });\n                                  }\n                                }\n                                }\n                                color=\"secondary\"\n                              >\n                                Delete\n                                                                                            </Button>\n                            </Grid>\n                          </Grid>\n\n                        </div>\n                        : <Grid container><Grid item sm={12}>{item.title}</Grid></Grid>\n                    }\n                    onClick={() => {\n                      // setSelected(treeCounter)\n                      action(\n                        key.substring(0, key.length - 1), item.id)\n                    }} />\n\n                ))\n                :\n                ''\n            }\n          </TreeItem>\n\n        </React.Fragment>\n      )) : ''}\n    </TreeView>\n  )\n}"))}),[h,q,b,q]),Object(o.useEffect)((function(){window.addEventListener("resize",(function(){return B(window.innerHeight-112)})),$(Tt()(".MuiExpansionPanel-root:visible").innerHeight()||0)}));var ie=function(){var e=Object(m.a)(u.a.mark((function e(t,n,a,o,r,i){var s,l,m,p,b,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s=Tt()(".embedContainer:visible > iframe"),0,l=0;l<s.length;l++)s[l].classList.contains(t)&&s[l].classList.contains(n)?(s[l].classList.remove("dNone"),l):s[l].classList.add("dNone");if("edit"!==a&&"explore"!==a){e.next=8;break}ee(o),re(0,1),e.next=19;break;case 8:if("delete"!==a){e.next=19;break}for(p=0;p<s.length;p++)s[p].classList.contains(n)&&(m=p);for((b=s.slice()).splice(m,1),h=0;h<b.length;h++)0===h?(b[h].classList.remove("dNone"),h):b[h].classList.add("dNone");return Tt()("#embedContainer-reportbuilder-14").empty(),Tt()("#embedContainer-reportbuilder-14").html(b),e.next=17,c.ok(c.delete_look(n));case 17:e.sent,d(se,[te,1]);case 19:case"end":return e.stop()}}),e)})));return function(t,n,a,o,r,i){return e.apply(this,arguments)}}(),se=function(e,t){t&&(re(0,0),x(0),k([])),e.map(function(){var e=Object(m.a)(u.a.mark((function e(t){var a,o,r,i,s,l,d,m,p,b,f,g,j,y,v,C,O;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==q||"folder"!==t.type){e.next=48;break}return e.next=3,c.ok(c.folder(t.id));case 3:return a=e.sent,e.next=6,c.ok(c.me());case 6:o=e.sent,r=0;case 8:if(!(r<a.looks.length)){e.next=17;break}return e.next=11,c.ok(c.look(a.looks[r].id));case 11:i=e.sent,s=i.query.client_id,a.looks[r].client_id=s;case 14:r++,e.next=8;break;case 17:if(l={},"premium"!==h.user_attributes.permission_level){e.next=37;break}return e.next=21,c.ok(c.search_looks({user_id:o.id}));case 21:if(!(d=e.sent)||!d.length){e.next=37;break}return m=d[0].folder_id||null,e.next=26,c.ok(c.folder(m));case 26:l=e.sent,p=0;case 28:if(!(p<l.looks.length)){e.next=37;break}return e.next=31,c.ok(c.look(l.looks[p].id));case 31:b=e.sent,f=b.query.client_id,l.looks[p].client_id=f;case 34:p++,e.next=28;break;case 37:g={sharedFolder:a,embeddedUserFolder:l},j=Object(Q.a)(g.sharedFolder.looks),"premium"===h.user_attributes.permission_level&&Object.keys(g.embeddedUserFolder).length&&(j=[].concat(Object(Q.a)(j),Object(Q.a)(g.embeddedUserFolder.looks))),y=Object(Q.a)(g.sharedFolder.dashboards),v={looks:j,dashboards:y},C=Tt()(".embedContainer.".concat(ca(ae)," > iframe")),v.looks.length&&v.looks.map((function(e,a){for(var o=e.id,r=!1,i=0;i<C.length;i++)C[i].classList.contains("look")&&C[i].classList.contains(o)&&(r=!0);r||W.LookerEmbedSDK.createLookWithId(o).appendTo(ca("#embedContainer-".concat(ae,"-").concat(t.id))).withClassName("iframe").withClassName("look").withClassName(g.sharedFolder.looks.indexOf(e)>-1?"shared":"personal").withClassName(a>0?"dNone":"oops").withClassName(o).build().connect().then((function(e){W.LookerEmbedSDK.init("".concat(n.lookerBaseUrl))})).catch((function(e){console.error("Connection error",e)})),a===v.looks.length-1&&setTimeout((function(){return x(1)}),1e3)})),v.dashboards.length&&v.dashboards.map((function(e,a){for(var o=e.id,r=!1,i=0;i<C.length;i++)C[i].classList.contains("dashboard")&&C[i].classList.contains(o)&&(r=!0);r||W.LookerEmbedSDK.createDashboardWithId(o).appendTo(ca("#embedContainer-".concat(ae,"-").concat(t.id))).withClassName("iframe").withClassName("dashboard").withClassName(g.sharedFolder.dashboards.indexOf(e)>-1?"shared":"personal").withClassName("dNone").withClassName(o).build().connect().then((function(e){setTimeout((function(){}),1e3),W.LookerEmbedSDK.init("".concat(n.lookerBaseUrl))})).catch((function(e){console.error("Connection error",e)})),a===v.dashboards.length-1&&setTimeout((function(){return x(1)}),1e3)})),k(v),e.next=49;break;case 48:"explore"===t.type&&"premium"===h.user_attributes.permission_level&&1===q&&(O=t.id,Tt()(ca("#embedContainer-".concat(ae,"-").concat(t.id))).html(""),Z?W.LookerEmbedSDK.createExploreWithId(O).appendTo(ca("#embedContainer-".concat(ae,"-").concat(t.id))).withClassName("exploreIframe").withParams({qid:Z}).on("explore:state:changed",(function(e){})).build().connect().then((function(e){console.log("explore",e),x(1),S(e),W.LookerEmbedSDK.init("".concat(n.lookerBaseUrl)),ee(null)})).catch((function(e){console.error("Connection error",e)})):W.LookerEmbedSDK.createExploreWithId(O).appendTo(ca("#embedContainer-".concat(ae,"-").concat(t.id))).withClassName("exploreIframe").on("explore:state:changed",(function(e){})).build().connect().then((function(e){x(1),S(e),W.LookerEmbedSDK.init("".concat(n.lookerBaseUrl))})).catch((function(e){console.error("Connection error",e)})));case 49:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};return Object(a.jsx)("div",{className:"".concat(z.root," demoComponent"),style:{height:P},children:Object(a.jsx)(E.a,{elevation:1,className:"\n      ".concat(z.padding30," \n      ").concat(z.height100Percent,"\n      ").concat(z.overflowYScroll),children:Object(a.jsx)(R.a,{container:!0,children:Object(a.jsxs)("div",{className:z.root,children:[y?"":Object(a.jsx)(yn,{classes:z,height:P,expansionPanelHeight:M}),Object(a.jsxs)(Ke.a,{className:y?"":"".concat(z.hidden),children:[Object(a.jsx)(X.a,{position:"static",elevation:0,children:Object(a.jsx)(Xn.a,{className:z.tabs,value:q,onChange:re,"aria-label":"simple tabs example",children:oe.map((function(e,t){return Object(a.jsx)(Zn.a,Object(l.a)({label:1==t?Object(a.jsxs)("div",{children:["premium"!=h.user_attributes.permission_level?Object(a.jsx)(ea.a,{className:"fa fa-lock ".concat(z.faSm," ").concat(z.mr12)}):Object(a.jsx)(ea.a,{className:"fa fa-plus ".concat(z.faSm," ").concat(z.mr12)}),e.label]}):e.label,className:1===q&&1===t?"".concat(z.hidden):1==t?"".concat(z.mlAuto):"",style:1===t?{backgroundColor:"#5896E6",borderRadius:"4px",color:"#fff",opacity:"1.0"}:{}},function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}(t)),"".concat(ca(ae+"-tab-"+t)))}))})}),Object(a.jsx)(Ke.a,{className:"tabPanelContainer",children:Object(a.jsxs)(R.a,{container:!0,spacing:3,className:"".concat(z.noContainerScroll),children:[s?Object(a.jsx)(R.a,{item:!0,sm:6,className:"".concat(z.positionFixedTopRight),children:Object(a.jsx)(et,Object(l.a)(Object(l.a)({},e),{},{classes:z,lookerUser:h,height:P}))}):"",oe.map((function(t,n){return Object(a.jsx)(la,{value:q,index:n,style:{width:"100%"},children:Object(a.jsx)(R.a,{container:!0,children:0===n?Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)(R.a,{item:!0,sm:4,children:Object(a.jsx)(ut,{height:500,classes:z,children:Object(a.jsx)(ua,Object(l.a)({},Object(l.a)({setPaywallModal:i,classes:z,demoComponentType:ae,tabContent:oe,tabContentItemIndex:n,action:ie,apiContent:O},e)))})}),Object(a.jsx)(R.a,{item:!0,sm:8,children:Object(a.jsx)(mt,{classes:z,children:Object(a.jsx)("div",{className:"embedContainer ".concat(ca(ae)),id:ca("embedContainer-".concat(ae,"-").concat(t.id))},ca("embedContainer-".concat(ae,"-").concat(t.id)))})})]},"".concat(ca(ae+"-outerFragment-"+n))):Object(a.jsx)(R.a,{item:!0,sm:12,children:Object(a.jsx)(mt,{classes:z,children:Object(a.jsx)("div",{className:"embedContainer",id:ca("embedContainer-".concat(ae,"-").concat(t.id))},ca("embedContainer-".concat(ae,"-").concat(t.id)))})})})},"".concat(ca(ae+"-tabPanel-"+n)))}))]})})]})]})},ca(ne))})})}function ua(e){var t=Object(o.useContext)(f),n=t.clientSession,i=t.setPaywallModal,s=(t.show,t.codeShow,t.sdk,t.corsApiCall,n.userProfile,n.lookerUser),l=(n.lookerHost,e.staticContent,e.staticContent.lookerContent),c=e.classes,d=e.demoComponentType,u=e.tabContent,m=e.tabContentItemIndex,b=e.action,h=e.apiContent,g="folder"===l[0].type?l[0].id:"",j=0,y=Object(o.useState)(2),x=Object(p.a)(y,2),v=x[0],C=x[1],O=Object.keys(h).length?["1",""+(2+h[Object.keys(h)[0]].length)]:[],k=Object(o.useState)(O),_=Object(p.a)(k,2),w=_[0],S=_[1];return Object(o.useEffect)((function(){S(O),2!==v&&C(2)}),[h]),Object(a.jsx)(ta.a,{className:c.tree,defaultCollapseIcon:Object(a.jsx)(oa.a,{}),defaultExpandIcon:Object(a.jsx)(ia.a,{}),expanded:w,onNodeToggle:function(e,t){S(t)},onNodeSelect:function(e,t){C(t)},children:h?Object.keys(h).map((function(e,t){return Object(a.jsx)(r.a.Fragment,{children:Object(a.jsx)(na.a,{nodeId:""+(j+=1),label:I.a.capitalize(e),icon:Object(a.jsx)(ea.a,{className:"fa fa-folder ".concat(c.icon)}),disabled:!h[e].length,children:h[e].length?h[e].map((function(t,n){return Object(a.jsx)(na.a,{nodeId:""+(j+=1),treecounter:j,selected:v===j,className:v===j?"Mui-selected innerTreeItem ".concat(c.whiteSpaceNoWrap):"innerTreeItem ".concat(c.whiteSpaceNoWrap),contentid:t.id,label:t.folder_id===g&&"looks"===e?Object(a.jsx)("div",{id:"".concat(ca(d+"-innerTreeItem-LabelContainer"+j)),className:"".concat(c.labelRoot," ").concat(c.parentHoverVisibility),children:Object(a.jsxs)(R.a,{container:!0,children:[Object(a.jsx)(R.a,{item:!0,sm:8,className:"".concat(c.overflowHidden),children:t.title}),Object(a.jsx)(R.a,{item:!0,sm:4,children:Object(a.jsx)(De.a,{id:"".concat(ca(d+"-innerTreeItem-Explore"+j)),size:"small",className:"".concat(c.ml12," ").concat(c.childHoverVisibility),onClick:function(n){"premium"===s.user_attributes.permission_level?(b(e.substring(0,e.length-1),t.id,"explore",t.client_id,u[m+1].id,ca("embedContainer-".concat(d,"-").concat(u[m+1].id))),n.stopPropagation()):i({show:!0,permissionNeeded:"explore"})},color:"default",children:"premium"===s.user_attributes.permission_level?"Explore":Object(a.jsxs)("div",{children:[" ",Object(a.jsx)(ea.a,{className:"fa fa-lock ".concat(c.faSm," ").concat(c.mr12)}),"Explore"]})},"".concat(ca(d+"-innerTreeItem-Explore"+j)))})]})},"".concat(ca(d+"-innerTreeItem-LabelContainer"+j))):"looks"===e?Object(a.jsx)("div",{id:"".concat(ca(d+"-innerTreeItem-LabelContainer"+j)),className:"".concat(c.labelRoot," ").concat(c.parentHoverVisibility),children:Object(a.jsxs)(R.a,{container:!0,children:[Object(a.jsx)(R.a,{item:!0,sm:6,className:"".concat(c.overflowHidden),children:t.title}),Object(a.jsxs)(R.a,{item:!0,sm:6,children:[Object(a.jsx)(De.a,{id:"".concat(ca(d+"-innerTreeItem-EditButton"+j)),size:"small",className:"".concat(c.ml12," ").concat(c.childHoverVisibility),onClick:function(n){"premium"===s.user_attributes.permission_level?(b(e.substring(0,e.length-1),t.id,"edit",t.client_id,u[m+1].id,ca("embedContainer-".concat(d,"-").concat(u[m+1].id))),n.stopPropagation()):i({show:!0,permissionNeeded:"explore"})},color:"primary",children:"Edit"},"".concat(ca(d+"-innerTreeItem-EditButton"+j))),Object(a.jsx)(De.a,{id:"".concat(ca(d+"-innerTreeItem-DeleteButton"+j)),size:"small",className:"".concat(c.ml12," ").concat(c.childHoverVisibility),onClick:function(n){"premium"===s.user_attributes.permission_level?(b(e.substring(0,e.length-1),t.id,"delete",t.client_id,u[m+1].id,ca("embedContainer-".concat(d,"-").concat(u[m+1].id))),n.stopPropagation()):i({show:!0,permissionNeeded:"explore"})},color:"secondary",children:"Delete"},"".concat(ca(d+"-innerTreeItem-DeleteButton"+j)))]})]})},"".concat(ca(d+"-innerTreeItem-LabelContainer"+j))):Object(a.jsx)(R.a,{container:!0,children:Object(a.jsx)(R.a,{item:!0,sm:12,children:t.title})}),onClick:function(){b(e.substring(0,e.length-1),t.id)}},"".concat(ca(d+"-innerTreeItem-"+j)))})):""},"".concat(ca(d+"-outerTreeItem-"+t)))},"".concat(ca(d+"-innerFragment-"+t)))})):""})}var ma=n(1430),pa=n(1410),ba=n(1431),ha=n(1409),fa=n(282),ga=(P.a[400],P.a[100],fa.a[400],fa.a[100],Object(A.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,overflow:"scroll",borderRadius:"8px"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},flexCentered:{display:"flex",justifyContent:"center",alignItems:"center"},hidden:{visibility:"hidden",position:"absolute",zIndex:-1},tabs:{backgroundColor:"white",color:"#6c757d"},dNone:{display:"none"},dBlock:{display:"block"},tree:{height:240,flexGrow:1,maxWidth:400},icon:{marginRight:12,fontSize:"1rem",overflow:"visible"},ml12:{marginLeft:12},mt12:{marginTop:12},w100:{width:"100%"},mlAuto:{marginLeft:"auto"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},formControl:{margin:e.spacing(1),minWidth:120},skeleton:{minWidth:275,minHeight:600},card:{minWidth:275,minHeight:400},textCenter:{textAlign:"center"},bluePrimary:{backgroundColor:"rgba(69, 149, 236, 1)"},blueSecondary:{backgroundColor:"rgba(69, 149, 236, .5)"},orangePrimary:{backgroundColor:"rgba(243, 167, 89, 1)"},orangeSecondary:{backgroundColor:"rgba(243, 167, 89, .5)"},positionTopRight:{position:"absolute",top:-30,right:-50,bottom:0,zIndex:100},positionRelative:{position:"relative"},bottomBarSpacer:Object(l.a)(Object(l.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),maxHeight600:{maxHeight:600,overflow:"scroll"},padding30:{padding:30},m12:{margin:12},m6:{margin:6},height100Percent:{height:"100%",overflow:"scroll"},padding20:{padding:20},positionFixedTopRight:{position:"fixed",top:88,right:24,bottom:0,zIndex:100},codeFlyoutContainer:{backgroundColor:"rgb(40, 42, 54)",overflow:"scroll",borderRadius:"0 8px 8px 0"},padding10:{padding:10},overflowScroll:{overflow:"scroll"},overflowYScroll:{overflowY:"scroll",overflowX:"hidden"},noContainerScroll:{width:"100%",margin:0}}})));function ja(e,t,n){return e[n]&&t[n]&&t[n].value<e[n].value?-1:e[n]&&t[n]&&t[n].value>e[n].value?1:0}function ya(e,t){return"desc"===e?function(e,n){return ja(e,n,t)}:function(e,n){return-ja(e,n,t)}}function xa(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}var va=n(42),Ca=va.validIdHelper,Oa=va.prettifyString;function ka(e){var t=Object(o.useContext)(f),n=t.clientSession,r=(t.setPaywallModal,t.show,t.codeShow),i=t.sdk,s=t.corsApiCall,c=(n.userProfile,n.lookerUser),d=(n.lookerHost,Object(o.useState)(0)),b=Object(p.a)(d,2),h=(b[0],b[1],Object(o.useState)({})),g=Object(p.a)(h,2),j=g[0],y=g[1],x=Object(o.useState)(""),v=Object(p.a)(x,2),C=(v[0],v[1]),O=Object(o.useState)(""),k=Object(p.a)(O,2),_=(k[0],k[1],Object(o.useState)(window.innerHeight-112)),w=Object(p.a)(_,2),S=w[0],T=w[1],I=Object(o.useState)(window.innerWidth-392),N=Object(p.a)(I,2),H=N[0],F=N[1],D=Object(o.useState)(0),A=Object(p.a)(D,2),P=A[0],B=A[1],L=ga(),U=(e.staticContent,e.staticContent.lookerContent),$=e.staticContent.type;Object(o.useEffect)((function(){C("import $ from 'jquery';\nimport _ from 'lodash';\nimport React, { useState, useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  AppBar, Tabs, Tab, Typography, Box, Grid, Icon, CircularProgress, Card, Button,\n  ExpansionPanel, ExpansionPanelSummary, ExpansionPanelDetails, InputLabel, MenuItem, FormControl,\n  Select, Table, TableBody, TableCell, TableContainer, TableHead, TablePagination, TableRow,\n  TableSortLabel, FormControlLabel, Switch, Chip, Divider\n} from '@material-ui/core'\nimport { ExpandMore, Search, Done } from '@material-ui/icons';\nimport CodeFlyout from '../CodeFlyout';\nimport rawSampleCode from '!!raw-loader!./QueryBuilder.js'; // eslint-disable-line import/no-webpack-loader-syntax\nimport useStyles from './styles.js';\nimport { ApiHighlight } from '../../Highlights/Highlight';\nimport { TabPanel, a11yProps, descendingComparator, getComparator, stableSort } from './helpers.js';\nimport AppContext from '../../../contexts/AppContext';\nimport { lookerUserTimeHorizonMap } from '../../../LookerHelpers/defaults';\nimport { Loader } from '../../Accessories/Loader';\n\n\nconst { validIdHelper, prettifyString } = require('../../../tools');\n\nexport default function QueryBuilder(props) {\n  // console.log('QueryBuilder')\n\n  const { clientSession, setPaywallModal, show, codeShow, sdk, corsApiCall } = useContext(AppContext)\n  const { userProfile, lookerUser, lookerHost } = clientSession\n\n\n  const topBarBottomBarHeight = 112;\n  const sideBarWidth = 240 + 152; //24 + 24 + 30 + 30 + 12 + 12 + 10 + 10\n  const [value, setValue] = useState(0);\n  const [apiContent, setApiContent] = useState({});\n  const [clientSideCode, setClientSideCode] = useState('');\n  const [serverSideCode, setServerSideCode] = useState('');\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\n  const [width, setWidth] = useState((window.innerWidth - sideBarWidth));\n  const [expansionPanelHeight, setExpansionPanelHeight] = useState(0);\n\n  const classes = useStyles();\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, } = props;\n\n\n  // const handleChange = (event, newValue) => {\n  //   handleTabChange(0);\n  //   setValue(newValue);\n  // };\n\n  useEffect(() => {\n    // call this is filterBar instead to make field chip dynamic\n    // lookerContent.map(lookerContent => {\n    //   setTimeout(() => performLookerApiCalls(lookerContent.queryBody, lookerContent.resultFormat), 100);\n    // })\n    setClientSideCode(rawSampleCode);\n    // setApiContent([])\n  }, [lookerContent, lookerUser])\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", () => {\n      setHeight((window.innerHeight - topBarBottomBarHeight))\n      setWidth((window.innerWidth - sideBarWidth))\n      setExpansionPanelHeight($('.MuiExpansionPanel-root:visible').innerHeight() || 0)\n\n    });\n  })\n\n\n  const performLookerApiCalls = async (newQuery, resultFormat) => {\n    let apiContentCopy = { ...apiContent }\n    apiContentCopy.status = 'running';\n    setApiContent(apiContentCopy)\n\n    let timer = Date.now();\n\n    let lookerCreateQueryResponseData = await sdk.ok(sdk.create_query(newQuery))\n    let lookerCreateTaskResponseData = await sdk.ok(sdk.create_query_task({\n      body: {\n        query_id: lookerCreateQueryResponseData.id,\n        result_format: resultFormat || 'json_detail'//lookerContent[0].resultFormat || 'json'\n      }\n    }))\n\n    let taskInterval = setInterval(async () => {\n      let lookerCheckTaskResponseData = await sdk.ok(sdk.query_task_results(lookerCreateTaskResponseData.id, {\n        method: 'GET',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }));\n\n      if (lookerCheckTaskResponseData.status === 'complete') {\n        clearInterval(taskInterval);\n        setApiContent(lookerCheckTaskResponseData)\n        // setServerSideCode(lookerCreateTaskResponseData.code)\n      }\n\n      //time out after 30 seconds\n      if ((timer + (30 * 1000)) < Date.now()) {\n        clearInterval()\n        setApiContent([])\n      }\n    }, 1000)\n  }\n\n  return (\n    <div className={`${classes.root} demoComponent`}\n      style={{ height }}>\n      <Card elevation={1} className={`\n      ${classes.padding30} \n      ${classes.height100Percent}\n      ${classes.overflowYScroll}`\n      }\n      >\n        <Grid container\n          key={validIdHelper(type)} >\n          <div className={`${classes.root}`}>\n            <Grid item sm={12}>\n              <FilterBar {...props}\n                classes={classes}\n                action={performLookerApiCalls}\n                corsApiCall={corsApiCall}\n              />\n            </Grid>\n            {apiContent.status === 'running' ?\n\n              <Loader classes={classes}\n                height={height}\n                expansionPanelHeight={expansionPanelHeight} />\n\n              : apiContent.data && apiContent.data.length ?\n                <Box>\n                  <Grid container\n                    spacing={3}\n                    className={`${classes.noContainerScroll}`}>\n                    {codeShow ?\n                      <Grid item sm={6}\n                        className={`${classes.positionFixedTopRight}`}\n                      >\n                        <CodeFlyout {...props}\n                          classes={classes}\n                          lookerUser={lookerUser}\n                          height={height}\n                        />\n                      </Grid> : ''}\n                    <Divider className={classes.divider} />\n                    <Grid item sm={12}>\n                      <Box className={`${classes.w100}`} mt={2}>\n                        < EnhancedTable\n                          {...props}\n                          classes={classes}\n                          rows={apiContent.data}\n                          lookerContent={lookerContent}\n                          width={width}\n                        />\n                      </Box>\n                    </Grid>\n                  </Grid>\n                </Box>\n                :\n                <Grid item sm={12} >\n                  <Typography variant=\"h6\" component=\"h6\" className={`${classes.gridTitle} ${classes.textCenter}`}>\n                    No results found, try a new query<br />\n                  </Typography>\n                </Grid>\n            }\n          </div >\n        </Grid >\n      </Card>\n    </div >\n  )\n}\n/**\n * seems inconsistent that filterbar performs performLookerApiCalls here??\n */\n\nfunction FilterBar(props) {\n  // console.log('FilterBar');\n\n\n  const { clientSession, setPaywallModal, show, codeShow, sdk, corsApiCall, isReady } = useContext(AppContext)\n  const { userProfile, lookerUser, lookerHost } = clientSession\n\n  const { staticContent, staticContent: { lookerContent }, classes, action, //lookerUser, corsApiCall \n  } = props;\n\n\n\n  let measureCounter = 0;\n  let dimensionCounter = 0;\n\n\n  const initializeFieldChipDataHelper = () => {\n    let initializedFields = lookerContent[0].queryBody.fields.map((item, index) => {\n      return {\n        key: 'fieldChipData' + index,\n        label: prettifyString(item.substring(item.lastIndexOf('.') + 1, item.length)),\n        datalabel: item,\n        selected: item === 'users.state' || item === 'users.country' || item === 'order_items.total_sale_price' ? true : false,\n        fieldType: lookerContent[0].fieldType[item]\n      }\n    })\n    return initializedFields;\n  }\n\n  const [expanded, setExpanded] = useState(true);\n  const [fieldsChipData, setFieldsChipData] = useState(lookerContent[0].queryBody ? initializeFieldChipDataHelper() : '');\n  const [queryModified, setQueryModified] = useState(true); //set to true initially\n  const [queryShouldRun, setQueryShouldRun] = useState(false); //for lookerUser useEffect\n  const [filtersData, setFilterData] = useState(lookerContent[0].queryBody ? Object.keys(lookerContent[0].queryBody.filters).map((key, index) => {\n    return {\n      key: 'filter' + index,\n      label: key,\n      value: lookerContent[0].queryBody.filters[key],\n      type: lookerContent[0].filterType[key]\n    }\n  }) : '')\n\n  const handleExpansionPanel = (event, newValue) => {\n    setExpanded(expanded ? false : true);\n  };\n\n  const handleFieldChipClick = (chip, index) => {\n    let updatedFieldsChipData = [...fieldsChipData]\n    updatedFieldsChipData[index].selected = updatedFieldsChipData[index].selected === false ? true : false\n    setFieldsChipData(updatedFieldsChipData)\n    setQueryModified(true)\n  }\n\n  const handleSelectChange = (index, newValue) => {\n    let updatedFiltersData = [...filtersData]\n    updatedFiltersData[index].value = newValue;\n    setFilterData(updatedFiltersData)\n    setQueryModified(true)\n  }\n\n  const handleQuerySubmit = (event) => {\n    if (queryModified || queryShouldRun) {\n      let newFields = fieldsChipData.filter(chip => chip.selected).map(item => item.datalabel);\n      let currentFilters = {}; //needs to be object\n      filtersData.map((item, index) => {\n        currentFilters[item.label] = item.value\n      })\n      let newQueryObj = { ...lookerContent[0].queryBody };\n      newQueryObj.fields = newFields;\n      newQueryObj.filters = currentFilters;\n\n      corsApiCall(action, [newQueryObj, lookerContent[0].resultFormat]);\n\n      setQueryModified(false)\n      setQueryShouldRun(false)\n    } //else console.log('elllse')\n  }\n\n\n\n  useEffect(() => {\n    // console.log('useEffect lookerUser')\n    if (isReady) {\n      let updatedFiltersData = [...filtersData]\n      updatedFiltersData[3].value = lookerUserTimeHorizonMap[lookerUser.user_attributes.permission_level] || \"182 days\";\n      setFilterData(updatedFiltersData);\n      setFieldsChipData(initializeFieldChipDataHelper())\n\n      setQueryShouldRun(true);\n\n    }\n  }, [lookerUser, isReady]);\n\n  useEffect(() => {\n    // console.log('useEffect queryShouldRun')\n    if (queryShouldRun) {\n      handleQuerySubmit();\n      setQueryModified(false);\n      setQueryShouldRun(false);\n    }\n  }, [queryShouldRun])\n\n\n  const datePermissionMap = {\n    'basic': [\"1 week\", \"1 month\", \"3 months\", \"last 182 days\"]\n  }\n  datePermissionMap.advanced = [...datePermissionMap.basic, \"last 365 days\"]\n  datePermissionMap.premium = [...datePermissionMap.advanced, \"last 730 days\"]\n\n  return (\n    <ExpansionPanel expanded={expanded} onChange={handleExpansionPanel} elevation={0}>\n      <ExpansionPanelSummary\n        expandIcon={<ExpandMore />}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <Search /><Typography className={`${classes.heading} ${classes.ml12}`}>Build Query:</Typography>\n        {/* <Typography className={classes.heading}>Build Query:</Typography> */}\n      </ExpansionPanelSummary>\n      <ExpansionPanelDetails>\n        <Grid container spacing={3}>\n          <Grid item sm={12}>\n            <Typography variant=\"subtitle1\">\n              Select Metrics:\n      {fieldsChipData.length ?\n                fieldsChipData.map((item, index) => {\n                  return (\n                    item.fieldType === 'measure' ?\n                      <Chip\n                        key={item.label}\n                        // key={prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}\n                        measurecounter={measureCounter += 1}\n                        className={item.selected ? `${classes.orangePrimary} ${classes.m6}` : `${classes.m6}`}\n                        label={prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}\n                        datalabel={item.label}\n                        onClick={() => handleFieldChipClick(item, index)}\n                        icon={item.selected ? <Done className={classes.dBlock} /> : <Done className={classes.dNone} />}\n                      /> : ''\n                  )\n                }) : ''\n              }<br />\n            </Typography>\n          </Grid>\n          <Grid item sm={12}>\n            <Typography variant=\"subtitle1\">\n              Group By:\n                          {fieldsChipData.length ?\n                fieldsChipData.map((item, index) => {\n                  return (\n                    item.fieldType === 'dimension' ?\n                      <Chip\n                        key={item.label}\n                        dimensioncounter={dimensionCounter += 1}\n                        className={item.selected ? `${classes.bluePrimary} ${classes.m6}` : `${classes.m6}`}\n                        label={prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}\n                        datalabel={item.label}\n                        onClick={() => handleFieldChipClick(item, index)}\n                        icon={item.selected ? <Done className={classes.dBlock} /> : <Done className={classes.dNone} />}\n                      /> : ''\n                  )\n                }) : ''\n              }<br />\n            </Typography>\n          </Grid>\n\n          <Grid item sm={3}>\n            <Typography variant=\"subtitle1\">\n              Filter By:\n                      </Typography>\n            {filtersData.length ? filtersData.map((item, index) => {\n              return (\n                <FormControl className={item.value.length ? classes.formControl : classes.hidden} key={validIdHelper(`${item.label}FormControl`)}>\n                  {\n                    item.type === 'yesno' ?\n                      <>\n                        <InputLabel id={validIdHelper(`${item.label}FilterLabel`)}>{prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}:</InputLabel>\n                        <Select\n                          labelId={validIdHelper(`${item.label}FilterLabel`)}\n                          id={validIdHelper(`${item.label}FilterSelect`)}\n                          value={item.value}\n                          onChange={(event) => handleSelectChange(index, event.target.value)}\n                        >\n                          <MenuItem value=\"Yes\">Yes</MenuItem>\n                          <MenuItem value=\"No\">No</MenuItem>\n                          <MenuItem value=\"All\">All</MenuItem>\n                        </Select>\n                      </>\n                      : item.type === 'date' ?\n                        <>\n                          <InputLabel id={validIdHelper(`${item.label}FilterLabel`)}>{prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}:</InputLabel>\n\n                          <Select\n                            labelId={validIdHelper(`${item.label}FilterLabel`)}\n                            id={validIdHelper(`${item.label}FilterSelect`)}\n                            value={item.value || '6 months'}\n                            onChange={(event) => handleSelectChange(index, event.target.value)}\n                          >\n                            {lookerUser.user_attributes.permission_level ? datePermissionMap[lookerUser.user_attributes.permission_level].map(item => (\n                              <MenuItem key={validIdHelper(item)} value={item}>{_.capitalize(item)}</MenuItem>\n                            )) : ''}\n                          </Select>\n                        </>\n                        : ''\n                  }\n                </FormControl>\n              )\n            }) : ''}\n          </Grid>\n          <Grid item sm={9}>\n            <br />\n            <Button\n              color=\"primary\"\n              variant=\"contained\"\n              size=\"large\"\n              onClick={handleQuerySubmit}\n              disabled={queryModified ? false : true}\n            >Run Query</Button></Grid>\n        </Grid>\n      </ExpansionPanelDetails>\n    </ExpansionPanel>\n  )\n}\n\nfunction EnhancedTableHead(props) {\n  const { classes, onSelectAllClick, order, orderBy, numSelected, rowCount, onRequestSort, rows } = props;\n  const createSortHandler = (property) => (event) => {\n    onRequestSort(event, property);\n  };\n\n  return (\n    <TableHead>\n      <TableRow>\n        {Object.keys(rows[0]).map((key, index) => (\n          <TableCell\n            key={validIdHelper(key + '-TableHead-TableCell-' + index)}\n            id={validIdHelper(key + '-TableHead-TableCell-' + index)}\n            align={key.numeric ? 'right' : 'left'}\n            padding={key.disablePadding ? 'none' : 'default'}\n            sortDirection={orderBy === key ? order : false}\n          >\n            <TableSortLabel\n              active={orderBy === key}\n              direction={orderBy === key ? order : 'asc'}\n              onClick={createSortHandler(key)}\n            >\n              {prettifyString(key.substring(key.lastIndexOf('.') + 1, key.length))}\n              {orderBy === key ? (\n                <span className={classes.visuallyHidden}>\n                  {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\n                </span>\n              ) : null}\n            </TableSortLabel>\n          </TableCell>\n        ))}\n      </TableRow>\n    </TableHead>\n  );\n}\n\nEnhancedTableHead.propTypes = {\n  classes: PropTypes.object.isRequired,\n  // numSelected: PropTypes.number.isRequired,\n  onRequestSort: PropTypes.func.isRequired,\n  // onSelectAllClick: PropTypes.func.isRequired,\n  order: PropTypes.oneOf(['asc', 'desc']).isRequired,\n  orderBy: PropTypes.string.isRequired,\n  rowCount: PropTypes.number.isRequired,\n};\n\nfunction EnhancedTable(props) {\n  const { rows, classes, lookerContent, width } = props;\n  const [order, setOrder] = React.useState('asc');\n  const [orderBy, setOrderBy] = React.useState(Object.keys(rows[0])[0]);\n  const [page, setPage] = React.useState(0);\n  const [dense, setDense] = React.useState(true);\n  const [rowsPerPage, setRowsPerPage] = React.useState(25);\n\n  const handleRequestSort = (event, property) => {\n    const isAsc = orderBy === property && order === 'asc';\n    setOrder(isAsc ? 'desc' : 'asc');\n    setOrderBy(property);\n  };\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = (event) => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  const handleChangeDense = (event) => {\n    setDense(event.target.checked);\n  };\n\n  const emptyRows = rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage);\n  return (\n    <div className={`${classes.root} ${classes.padding10}`}>\n      <ApiHighlight classes={classes} >\n        <TableContainer style={{ maxWidth: width }}>\n          <Table\n            className={classes.table}\n            aria-labelledby=\"tableTitle\"\n            size={dense ? 'small' : 'medium'}\n            aria-label=\"enhanced table\"\n          >\n            <EnhancedTableHead\n              {...props}\n              classes={classes}\n              order={order}\n              orderBy={orderBy}\n              onRequestSort={handleRequestSort}\n              rowCount={rows.length}\n            />\n            <TableBody>\n              {stableSort(rows, getComparator(order, orderBy))\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                .map((row, index) => {\n                  return (\n                    <TableRow\n                      hover\n                      key={validIdHelper('TableRow-' + index)}\n                      id={validIdHelper('TableRow-' + index)}>\n                      {Object.keys(row).map((key, index) => (\n                        <TableCell\n                          key={validIdHelper(key + '-TableBody-TableCell-' + index)}\n                          id={validIdHelper(key + '-TableBody-TableCell-' + index)}\n                          className={lookerContent[0].fieldType[key] === 'dimension' ? classes.blueSecondary : classes.orangeSecondary}\n                          align=\"right\">\n                          {row[key].rendered ? row[key].rendered : row[key].value}\n                        </TableCell>\n                      ))}\n                    </TableRow>\n                  );\n                })}\n              {emptyRows > 0 && (\n                <TableRow style={{ height: (dense ? 33 : 53) * emptyRows }}>\n                  <TableCell colSpan={6} />\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </ApiHighlight>\n      <Grid container>\n        <Grid item sm={6}>\n          <FormControlLabel\n            control={<Switch checked={dense} onChange={handleChangeDense} />}\n            label=\"Compact\"\n          /></Grid>\n        <Grid item sm={6}>\n          <TablePagination\n            rowsPerPageOptions={[5, 10, 25, 50]}\n            component=\"div\"\n            count={rows.length}\n            rowsPerPage={rowsPerPage}\n            page={page}\n            onChangePage={handleChangePage}\n            onChangeRowsPerPage={handleChangeRowsPerPage}\n          /></Grid>\n      </Grid>\n      <div className={classes.bottomBarSpacer} />\n    </div>\n  );\n}")}),[U,c]),Object(o.useEffect)((function(){window.addEventListener("resize",(function(){T(window.innerHeight-112),F(window.innerWidth-392),B(Tt()(".MuiExpansionPanel-root:visible").innerHeight()||0)}))}));var z=function(){var e=Object(m.a)(u.a.mark((function e(t,n){var a,o,r,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=Object(l.a)({},j)).status="running",y(a),o=Date.now(),e.next=6,i.ok(i.create_query(t));case 6:return r=e.sent,e.next=9,i.ok(i.create_query_task({body:{query_id:r.id,result_format:n||"json_detail"}}));case 9:s=e.sent,c=setInterval(Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.ok(i.query_task_results(s.id,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}));case 2:"complete"===(t=e.sent).status&&(clearInterval(c),y(t)),o+3e4<Date.now()&&(clearInterval(),y([]));case 5:case"end":return e.stop()}}),e)}))),1e3);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{className:"".concat(L.root," demoComponent"),style:{height:S},children:Object(a.jsx)(E.a,{elevation:1,className:"\n      ".concat(L.padding30," \n      ").concat(L.height100Percent,"\n      ").concat(L.overflowYScroll),children:Object(a.jsx)(R.a,{container:!0,children:Object(a.jsxs)("div",{className:"".concat(L.root),children:[Object(a.jsx)(R.a,{item:!0,sm:12,children:Object(a.jsx)(_a,Object(l.a)(Object(l.a)({},e),{},{classes:L,action:z,corsApiCall:s}))}),"running"===j.status?Object(a.jsx)(yn,{classes:L,height:S,expansionPanelHeight:P}):j.data&&j.data.length?Object(a.jsx)(Ke.a,{children:Object(a.jsxs)(R.a,{container:!0,spacing:3,className:"".concat(L.noContainerScroll),children:[r?Object(a.jsx)(R.a,{item:!0,sm:6,className:"".concat(L.positionFixedTopRight),children:Object(a.jsx)(et,Object(l.a)(Object(l.a)({},e),{},{classes:L,lookerUser:c,height:S}))}):"",Object(a.jsx)(pe.a,{className:L.divider}),Object(a.jsx)(R.a,{item:!0,sm:12,children:Object(a.jsx)(Ke.a,{className:"".concat(L.w100),mt:2,children:Object(a.jsx)(Sa,Object(l.a)(Object(l.a)({},e),{},{classes:L,rows:j.data,lookerContent:U,width:H}))})})]})}):Object(a.jsx)(R.a,{item:!0,sm:12,children:Object(a.jsxs)(M.a,{variant:"h6",component:"h6",className:"".concat(L.gridTitle," ").concat(L.textCenter),children:["No results found, try a new query",Object(a.jsx)("br",{})]})})]})},Ca($))})})}function _a(e){var t=Object(o.useContext)(f),n=t.clientSession,r=(t.setPaywallModal,t.show,t.codeShow,t.sdk,t.corsApiCall),i=t.isReady,s=(n.userProfile,n.lookerUser),c=(n.lookerHost,e.staticContent,e.staticContent.lookerContent),d=e.classes,u=e.action,m=0,b=0,h=function(){return c[0].queryBody.fields.map((function(e,t){return{key:"fieldChipData"+t,label:Oa(e.substring(e.lastIndexOf(".")+1,e.length)),datalabel:e,selected:"users.state"===e||"users.country"===e||"order_items.total_sale_price"===e,fieldType:c[0].fieldType[e]}}))},g=Object(o.useState)(!0),j=Object(p.a)(g,2),y=j[0],x=j[1],v=Object(o.useState)(c[0].queryBody?h():""),C=Object(p.a)(v,2),O=C[0],k=C[1],_=Object(o.useState)(!0),w=Object(p.a)(_,2),S=w[0],T=w[1],N=Object(o.useState)(!1),H=Object(p.a)(N,2),D=H[0],A=H[1],P=Object(o.useState)(c[0].queryBody?Object.keys(c[0].queryBody.filters).map((function(e,t){return{key:"filter"+t,label:e,value:c[0].queryBody.filters[e],type:c[0].filterType[e]}})):""),B=Object(p.a)(P,2),L=B[0],E=B[1],U=function(e,t){var n=Object(Q.a)(O);n[t].selected=!1===n[t].selected,k(n),T(!0)},$=function(e,t){var n=Object(Q.a)(L);n[e].value=t,E(n),T(!0)},z=function(e){if(S||D){var t=O.filter((function(e){return e.selected})).map((function(e){return e.datalabel})),n={};L.map((function(e,t){n[e.label]=e.value}));var a=Object(l.a)({},c[0].queryBody);a.fields=t,a.filters=n,r(u,[a,c[0].resultFormat]),T(!1),A(!1)}};Object(o.useEffect)((function(){if(i){var e=Object(Q.a)(L);e[3].value=F.lookerUserTimeHorizonMap[s.user_attributes.permission_level]||"182 days",E(e),k(h()),A(!0)}}),[s,i]),Object(o.useEffect)((function(){D&&(z(),T(!1),A(!1))}),[D]);var V={basic:["1 week","1 month","3 months","last 182 days"]};return V.advanced=[].concat(Object(Q.a)(V.basic),["last 365 days"]),V.premium=[].concat(Object(Q.a)(V.advanced),["last 730 days"]),Object(a.jsxs)(kn.a,{expanded:y,onChange:function(e,t){x(!y)},elevation:0,children:[Object(a.jsxs)(_n.a,{expandIcon:Object(a.jsx)(Bt.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:[Object(a.jsx)(Ie.a,{}),Object(a.jsx)(M.a,{className:"".concat(d.heading," ").concat(d.ml12),children:"Build Query:"})]}),Object(a.jsx)(wn.a,{children:Object(a.jsxs)(R.a,{container:!0,spacing:3,children:[Object(a.jsx)(R.a,{item:!0,sm:12,children:Object(a.jsxs)(M.a,{variant:"subtitle1",children:["Select Metrics:",O.length?O.map((function(e,t){return"measure"===e.fieldType?Object(a.jsx)(ct.a,{measurecounter:m+=1,className:e.selected?"".concat(d.orangePrimary," ").concat(d.m6):"".concat(d.m6),label:Oa(e.label.substring(e.label.lastIndexOf(".")+1,e.label.length)),datalabel:e.label,onClick:function(){return U(0,t)},icon:e.selected?Object(a.jsx)(ha.a,{className:d.dBlock}):Object(a.jsx)(ha.a,{className:d.dNone})},e.label):""})):"",Object(a.jsx)("br",{})]})}),Object(a.jsx)(R.a,{item:!0,sm:12,children:Object(a.jsxs)(M.a,{variant:"subtitle1",children:["Group By:",O.length?O.map((function(e,t){return"dimension"===e.fieldType?Object(a.jsx)(ct.a,{dimensioncounter:b+=1,className:e.selected?"".concat(d.bluePrimary," ").concat(d.m6):"".concat(d.m6),label:Oa(e.label.substring(e.label.lastIndexOf(".")+1,e.label.length)),datalabel:e.label,onClick:function(){return U(0,t)},icon:e.selected?Object(a.jsx)(ha.a,{className:d.dBlock}):Object(a.jsx)(ha.a,{className:d.dNone})},e.label):""})):"",Object(a.jsx)("br",{})]})}),Object(a.jsxs)(R.a,{item:!0,sm:3,children:[Object(a.jsx)(M.a,{variant:"subtitle1",children:"Filter By:"}),L.length?L.map((function(e,t){return Object(a.jsx)(dn.a,{className:e.value.length?d.formControl:d.hidden,children:"yesno"===e.type?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(un.a,{id:Ca("".concat(e.label,"FilterLabel")),children:[Oa(e.label.substring(e.label.lastIndexOf(".")+1,e.label.length)),":"]}),Object(a.jsxs)(mn.a,{labelId:Ca("".concat(e.label,"FilterLabel")),id:Ca("".concat(e.label,"FilterSelect")),value:e.value,onChange:function(e){return $(t,e.target.value)},children:[Object(a.jsx)(me.a,{value:"Yes",children:"Yes"}),Object(a.jsx)(me.a,{value:"No",children:"No"}),Object(a.jsx)(me.a,{value:"All",children:"All"})]})]}):"date"===e.type?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(un.a,{id:Ca("".concat(e.label,"FilterLabel")),children:[Oa(e.label.substring(e.label.lastIndexOf(".")+1,e.label.length)),":"]}),Object(a.jsx)(mn.a,{labelId:Ca("".concat(e.label,"FilterLabel")),id:Ca("".concat(e.label,"FilterSelect")),value:e.value||"6 months",onChange:function(e){return $(t,e.target.value)},children:s.user_attributes.permission_level?V[s.user_attributes.permission_level].map((function(e){return Object(a.jsx)(me.a,{value:e,children:I.a.capitalize(e)},Ca(e))})):""})]}):""},Ca("".concat(e.label,"FormControl")))})):""]}),Object(a.jsxs)(R.a,{item:!0,sm:9,children:[Object(a.jsx)("br",{}),Object(a.jsx)(De.a,{color:"primary",variant:"contained",size:"large",onClick:z,disabled:!S,children:"Run Query"})]})]})})]})}function wa(e){var t=e.classes,n=(e.onSelectAllClick,e.order),o=e.orderBy,r=(e.numSelected,e.rowCount,e.onRequestSort),i=e.rows;return Object(a.jsx)(Fn.a,{children:Object(a.jsx)(Dn.a,{children:Object.keys(i[0]).map((function(e,i){return Object(a.jsx)(Nn.a,{id:Ca(e+"-TableHead-TableCell-"+i),align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:o===e&&n,children:Object(a.jsxs)(ma.a,{active:o===e,direction:o===e?n:"asc",onClick:(s=e,function(e){r(e,s)}),children:[Oa(e.substring(e.lastIndexOf(".")+1,e.length)),o===e?Object(a.jsx)("span",{className:t.visuallyHidden,children:"desc"===n?"sorted descending":"sorted ascending"}):null]})},Ca(e+"-TableHead-TableCell-"+i));var s}))})})}function Sa(e){var t=e.rows,n=e.classes,o=e.lookerContent,i=e.width,s=r.a.useState("asc"),c=Object(p.a)(s,2),d=c[0],u=c[1],m=r.a.useState(Object.keys(t[0])[0]),b=Object(p.a)(m,2),h=b[0],f=b[1],g=r.a.useState(0),j=Object(p.a)(g,2),y=j[0],x=j[1],v=r.a.useState(!0),C=Object(p.a)(v,2),O=C[0],k=C[1],_=r.a.useState(25),w=Object(p.a)(_,2),S=w[0],T=w[1],I=S-Math.min(S,t.length-y*S);return Object(a.jsxs)("div",{className:"".concat(n.root," ").concat(n.padding10),children:[Object(a.jsx)(ut,{classes:n,children:Object(a.jsx)(Hn.a,{style:{maxWidth:i},children:Object(a.jsxs)(Tn.a,{className:n.table,"aria-labelledby":"tableTitle",size:O?"small":"medium","aria-label":"enhanced table",children:[Object(a.jsx)(wa,Object(l.a)(Object(l.a)({},e),{},{classes:n,order:d,orderBy:h,onRequestSort:function(e,t){u(h===t&&"asc"===d?"desc":"asc"),f(t)},rowCount:t.length})),Object(a.jsxs)(In.a,{children:[xa(t,ya(d,h)).slice(y*S,y*S+S).map((function(e,t){return Object(a.jsx)(Dn.a,{hover:!0,id:Ca("TableRow-"+t),children:Object.keys(e).map((function(t,r){return Object(a.jsx)(Nn.a,{id:Ca(t+"-TableBody-TableCell-"+r),className:"dimension"===o[0].fieldType[t]?n.blueSecondary:n.orangeSecondary,align:"right",children:e[t].rendered?e[t].rendered:e[t].value},Ca(t+"-TableBody-TableCell-"+r))}))},Ca("TableRow-"+t))})),I>0&&Object(a.jsx)(Dn.a,{style:{height:(O?33:53)*I},children:Object(a.jsx)(Nn.a,{colSpan:6})})]})]})})}),Object(a.jsxs)(R.a,{container:!0,children:[Object(a.jsx)(R.a,{item:!0,sm:6,children:Object(a.jsx)(pa.a,{control:Object(a.jsx)(ln.a,{checked:O,onChange:function(e){k(e.target.checked)}}),label:"Compact"})}),Object(a.jsx)(R.a,{item:!0,sm:6,children:Object(a.jsx)(ba.a,{rowsPerPageOptions:[5,10,25,50],component:"div",count:t.length,rowsPerPage:S,page:y,onChangePage:function(e,t){x(t)},onChangeRowsPerPage:function(e){T(parseInt(e.target.value,10)),x(0)}})})]}),Object(a.jsx)("div",{className:n.bottomBarSpacer})]})}var Ta=n(42),Ia=Ta.validIdHelper,Na=Ta.usecaseHelper;function Ha(e){var t=Object(o.useContext)(f),n=t.setClientSession,r=t.clientSession,i=t.sdk,s=t.setSdk,c=t.isReady,d=Object(h.h)().democomponent,b=le(),g=Object(o.useRef)(!1),j=Object(o.useState)(window.innerWidth>768),y=Object(p.a)(j,2),x=y[0],v=y[1],C=Object(o.useState)(Na(H)),O=Object(p.a)(C,2),k=O[0],_=O[1],w=Object(o.useState)(!1),T=Object(p.a)(w,2),N=T[0],A=T[1],P=Object(o.useState)(!1),B=Object(p.a)(P,2),L=B[0],R=B[1],E=Object(o.useState)({}),U=Object(p.a)(E,2),M=U[0],$=U[1],z=Object(o.useState)(d),V=Object(p.a)(z,2),G=V[0],q=V[1],X=function(){var e=Object(m.a)(u.a.mark((function e(t,a){var o,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(l.a)({},r.lookerUser),"brand"===a?o.user_attributes.brand=t:"permission"===a&&(o.permissions=F.lookerUserPermissions[t]||F.lookerUserPermissions.basic,o.user_attributes.permission_level=t,o.user_attributes.time_horizon=F.lookerUserTimeHorizonMap[t]),e.next=4,fetch("/updatelookeruser",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)});case 4:return i=e.sent,e.next=7,i.json();case 7:s=e.sent,n(s.session);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Z=function(){var e=Object(m.a)(u.a.mark((function e(t){var a,o,i,l=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:[],e.next=3,S(r.lookerApiToken.expires_in);case 3:return(o=e.sent).sdk&&s(o.sdk),o.clientSession&&n(o.clientSession),i=t.apply(void 0,Object(Q.a)(a)),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){var e=Na(H);_(e),W.LookerEmbedSDK.init(r.lookerBaseUrl,"/auth"),window.addEventListener("resize",(function(){v(window.innerWidth>768)}))}),[]),Object(o.useEffect)((function(){g.current||(g.current=!0)})),Object(o.useEffect)((function(){N&&A(!N),L&&R(!L),q(d)}),[d]);var ee={atom:de},te={home:Ht,inventoryoverview:On,webanalytics:On,salesoverview:On,salescalendar:Kn,querybuilder:ka,savedreports:da}[G],ne=I.a.find(H[k].demoComponents,(function(e){return G===Ia(I.a.lowerCase(e.label))}));return Object(a.jsx)("div",{className:b.root,children:Object(a.jsx)(f.Provider,{value:{clientSession:r,setClientSession:n,payWallModal:M,setPaywallModal:$,handleSwitchLookerUser:X,drawerOpen:x,setDrawerOpen:v,activeUsecase:k,selectedMenuItem:G,highlightShow:N,setHighlightShow:A,codeShow:L,setCodeShow:R,sdk:i,corsApiCall:Z,atomTheme:de,isReady:c},children:Object(a.jsxs)(K.a,{theme:k?ee[k]:ce,children:[Object(a.jsx)(Y.a,{}),Object(a.jsx)(ye,{}),Object(a.jsx)(Qe,{}),Object(a.jsx)(Re,{}),Object(a.jsxs)("main",{className:Object(J.a)(b.content,Object(D.a)({},b.contentShift,x)),children:[Object(a.jsx)("div",{className:b.drawerHeader}),ne?Object(a.jsx)(te,{staticContent:ne}):""]})]})})})}var Fa=function(e){var t=Object(o.useState)({}),n=Object(p.a)(t,2),r=n[0],i=n[1],s=Object(o.useState)(),l=Object(p.a)(s,2),c=l[0],d=l[1],g=Object(o.useState)(),j=Object(p.a)(g,2),y=j[0],x=j[1],v=Object(o.useState)(!1),C=Object(p.a)(v,2),k=C[0],_=C[1];return Object(o.useEffect)((function(){function e(){return(e=Object(m.a)(u.a.mark((function e(){var t,n,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:(t=e.sent).session&&t.session.userProfile&&(n=t.lookerBaseUrl?t.lookerBaseUrl:"",a=t.lookerApiToken?t.lookerApiToken.api_user_token:"",o=w({accessToken:a,lookerBaseUrl:n}),i(t.session),d(o));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(o.useEffect)((function(){if(r&&c)_(!0);else if(r.userProfile){var e=r.lookerBaseUrl?r.lookerBaseUrl:"",t=r.lookerApiToken?r.lookerApiToken.api_user_token:"",n=w({accessToken:t,lookerBaseUrl:e});d(n)}}),[r,c]),Object(a.jsx)(b.a,{children:Object(a.jsx)(f.Provider,{value:{clientSession:r,setClientSession:i,sdk:c,setSdk:d,initialHref:y,setInitialHref:x,isReady:k},children:Object(a.jsxs)(h.d,{children:[Object(a.jsx)(Da,{path:"/analytics/:democomponent?",isSignedIn:!!r.userProfile,component:Ha,setInitialHref:x,initialHref:y}),Object(a.jsx)(Aa,{path:"/",exact:!0,isSignedIn:!!r.userProfile,component:q,initialHref:y}),Object(a.jsx)(h.b,{render:function(){return Object(a.jsx)(h.a,{to:"/"})}})]})})})},Da=function(e){var t=e.component,n=e.isSignedIn,o=e.setInitialHref,r=Object(c.a)(e,["component","isSignedIn","setInitialHref"]);return n?o():o(window.location.href),Object(a.jsx)(h.b,Object(l.a)(Object(l.a)({exact:!0},r),{},{render:function(e){return n?Object(a.jsx)(t,Object(l.a)({},e)):Object(a.jsx)(h.a,{to:"/"})}}))},Aa=function(e){var t=e.component,n=e.isSignedIn,o=e.initialHref,r=Object(c.a)(e,["component","isSignedIn","initialHref"]),i="/analytics/home";if(o){var s=o.split("/"),d=s.slice(-2),u=s.slice(-1);({home:"SplashPage",inventoryoverview:"Dashboard",webanalytics:"Dashboard",salesoverview:"Dashboard",salescalendar:"CustomVis",querybuilder:"QueryBuilder",savedreports:"ReportBuilder"}).hasOwnProperty(u)&&(i=d.join("/"))}return Object(a.jsx)(h.b,Object(l.a)(Object(l.a)({exact:!0},r),{},{render:function(e){return n?Object(a.jsx)(h.a,{to:i}):Object(a.jsx)(t,Object(l.a)({},e))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(a.jsx)(Fa,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},141:function(e){e.exports=JSON.parse('{"atom":{"label":"Atom Fashion","vignette":{"name":"Atom","logo_url":"../images/atom_logo.png"},"layout":"right-appbar","demoComponents":[{"type":"splash page","label":"Home","description":"We\'re thrilled to have you on Atom Fashion - the premiere third party fashion marketplace for today\'s leading brands. Throughout this portal you will find a series of analytic content designed to help you maximize your performance.","icon":"fa-home","menuCategory":"home","lookerContent":[{"id":"19","gridWidth":6,"height":160,"type":"welcome","inlineQueries":[{"model":"atom_fashion","view":"order_items","fields":["order_items.total_sale_price","order_items.created_week","products.category"],"pivots":["order_items.created_week"],"fill_fields":["order_items.created_week"],"filters":{"order_items.created_date":"2 weeks ago for 2 weeks"},"filter_expression":null,"sorts":["order_items.total_sale_price desc 1","order_items.created_week 0"],"limit":"1","dynamic_fields":"[{\\"table_calculation\\":\\"change\\",\\"label\\":\\"%25 Change\\",\\"expression\\":\\"(pivot_index(${order_items.total_sale_price},2)-pivot_index(${order_items.total_sale_price},1))/pivot_index(${order_items.total_sale_price},1\\\\n  )\\",\\"value_format\\":null,\\"value_format_name\\":\\"percent_2\\",\\"_kind_hint\\":\\"supermeasure\\",\\"_type_hint\\":\\"number\\"}]"},{"model":"atom_fashion","view":"order_items","fields":["order_items.total_sale_price","order_items.created_week","products.category"],"pivots":["order_items.created_week"],"fill_fields":["order_items.created_week"],"filters":{"order_items.created_date":"2 weeks ago for 2 weeks"},"filter_expression":null,"sorts":["order_items.total_sale_price 1","order_items.created_week 0"],"limit":"1","dynamic_fields":"[{\\"table_calculation\\":\\"change\\",\\"label\\":\\"%25 Change\\",\\"expression\\":\\"(pivot_index(${order_items.total_sale_price},2)-pivot_index(${order_items.total_sale_price},1))/pivot_index(${order_items.total_sale_price},1\\\\n  )\\",\\"value_format\\":null,\\"value_format_name\\":\\"percent_2\\",\\"_kind_hint\\":\\"supermeasure\\",\\"_type_hint\\":\\"number\\"}]"}],"inlineQueriesMap":["best","worst"],"resultFormat":"json"},{"id":"17","gridWidth":6,"height":160,"type":"carousel"},{"id":"18","gridWidth":3,"type":"single value","height":120,"inlineQuery":{"model":"atom_fashion","view":"order_items","fields":["order_items.created_week","order_items.total_gross_margin"],"fill_fields":["order_items.created_week"],"filters":{"order_items.created_date":"12 weeks ago for 12 weeks"},"sorts":["order_items.created_week desc"],"limit":"500","dynamic_fields":"[{\\"table_calculation\\":\\"change\\",\\"label\\":\\"Week over Week %25 Change\\",\\"expression\\":\\"(${order_items.total_gross_margin}-offset(${order_items.total_gross_margin},1))/offset(${order_items.total_gross_margin},1)\\",\\"value_format\\":null,\\"value_format_name\\":\\"percent_2\\",\\"_kind_hint\\":\\"measure\\",\\"_type_hint\\":\\"number\\"}]"},"resultFormat":"json","label":"Revenue by Week","visColor":"#4595EC","chipFormat":"revenue"},{"id":"20","gridWidth":3,"type":"single value","height":120,"inlineQuery":{"model":"atom_fashion","view":"web_events","fields":["events.event_week","events.sessions_count"],"fill_fields":["events.event_week"],"filters":{"events.event_date":"12 weeks ago for 12 weeks"},"sorts":["events.event_week desc"],"limit":"500","dynamic_fields":"[{\\"table_calculation\\":\\"change\\",\\"label\\":\\"%25 Change\\",\\"expression\\":\\"(${events.sessions_count}-offset(${events.sessions_count},1))/offset(${events.sessions_count},1)\\",\\"value_format\\":null,\\"value_format_name\\":\\"percent_2\\",\\"_kind_hint\\":\\"measure\\",\\"_type_hint\\":\\"number\\"}]"},"resultFormat":"json","label":"Visits by Week","visColor":"#F3A759","chipFormat":"integer"},{"id":"21","gridWidth":3,"type":"single value","height":120,"inlineQuery":{"model":"atom_fashion","view":"web_events","fields":["events.event_week","events.bounce_rate"],"fill_fields":["events.event_week"],"filters":{"events.event_date":"12 weeks ago for 12 weeks"},"filter_expression":null,"sorts":["events.event_week desc"],"limit":"500","dynamic_fields":"[{\\"table_calculation\\":\\"change\\",\\"label\\":\\"%25 Change\\",\\"expression\\":\\"(${events.bounce_rate}-offset(${events.bounce_rate},1))/offset(${events.bounce_rate},1)\\",\\"value_format\\":null,\\"value_format_name\\":\\"percent_2\\",\\"_kind_hint\\":\\"measure\\",\\"_type_hint\\":\\"number\\"}]"},"resultFormat":"json","label":"Bounce Rate by Week","visColor":"#E24E3A","chipFormat":"percent"},{"id":"22","gridWidth":3,"type":"single value","height":120,"inlineQuery":{"model":"atom_fashion","view":"web_events","fields":["events.event_week","sessions.average_duration"],"pivots":null,"fill_fields":["events.event_week"],"filters":{"events.event_date":"12 weeks ago for 12 weeks"},"filter_expression":null,"sorts":["events.event_week desc"],"limit":"500","dynamic_fields":"[{\\"table_calculation\\":\\"change\\",\\"label\\":\\"%25 Change\\",\\"expression\\":\\"(${sessions.average_duration}-offset(${sessions.average_duration},1))/offset(${sessions.average_duration},1)\\",\\"value_format\\":null,\\"value_format_name\\":\\"percent_2\\",\\"_kind_hint\\":\\"measure\\",\\"_type_hint\\":\\"number\\"}]"},"resultFormat":"json","label":"Average Time on Site by Week","visColor":"#65AB5A","chipFormat":"integer"},{"gridWidth":8,"height":350,"type":"dashboard","id":"12","slug":"3ytMWYFKKbofCDFkpAG46z","title":"Most Recent Orders"},{"gridWidth":4,"height":350,"type":"popular analysis","vectors":[{"id":"9","type":"thumbnail","resourceType":"dashboard","lookerMethod":"vector_thumbnail","label":"Analytics","gridWidth":"4","url":"webanalytics"},{"id":"5","type":"thumbnail","resourceType":"dashboard","lookerMethod":"vector_thumbnail","label":"Sales","gridWidth":"4","url":"inventoryoverview"},{"id":"1","type":"thumbnail","resourceType":"dashboard","lookerMethod":"vector_thumbnail","label":"Inventory","gridWidth":"4","url":"salesoverview"}],"label":"Popular analysis"}]},{"type":"simple dashboard","label":"Web Analytics","menuCategory":"marketing","description":"Overview of all your web traffic","icon":"fa-chart-line","lookerContent":[{"type":"dashboard","lookerMethod":"embedDashboard","id":"9","label":"Web Analytics","isNext":false,"theme":"atom_fashion_filters"}]},{"type":"custom filter","label":"Sales Overview","menuCategory":"sales","description":"Overview of all your sales!","icon":"fa-tachometer-alt","lookerContent":[{"type":"dashboard","lookerMethod":"embedDashboard","id":"5","label":"Sales Overview","isNext":true,"filters":[{"label":"Select Product Category","filterName":"Category","lookerMethod":"runInlineQuery"},{"label":"Select Region","filterName":"State Region","lookerMethod":"runInlineQuery"},{"label":"Select Age Range","filterName":"Age","lookerMethod":"runInlineQuery"},{"label":"Lifetime Revenue Tier","filterName":"Lifetime Revenue Tier","lookerMethod":"runInlineQuery"}],"inlineQueries":[{"model":"atom_fashion","view":"order_items","fields":["this_period","last_period","products.category"],"filters":{"order_items.created_date":"60 days ago for 60 days","order_items.count":">5"},"sorts":["products.category"],"limit":500,"dynamic_fields":"[{\\"table_calculation\\":\\"trend\\",\\"label\\":\\"trend\\",\\"expression\\":\\"${this_period} / ${last_period} - 1\\",\\"value_format\\":null,\\"value_format_name\\":null,\\"_kind_hint\\":\\"measure\\",\\"_type_hint\\":\\"number\\"},{\\"measure\\":\\"this_period\\",\\"based_on\\":\\"order_items.total_sale_price\\",\\"type\\":\\"count_distinct\\",\\"label\\":\\"This Period\\",\\"value_format\\":null,\\"value_format_name\\":null,\\"_kind_hint\\":\\"measure\\",\\"_type_hint\\":\\"number\\",\\"filter_expression\\":\\"matches_filter(${order_items.created_date},`30 days ago for 30 days`)\\"},{\\"measure\\":\\"last_period\\",\\"based_on\\":\\"order_items.total_gross_margin\\",\\"label\\":\\"Last Period\\",\\"value_format\\":null,\\"value_format_name\\":null,\\"_kind_hint\\":\\"measure\\",\\"_type_hint\\":\\"number\\",\\"filter_expression\\":\\"matches_filter(${order_items.created_date},`60 days ago for 30 days`)\\"}]","theme":"atom_fashion"},{"model":"atom_fashion","view":"order_items","fields":["users.state_region"],"limit":"500"},{"model":"atom_fashion","view":"order_items","fields":["users.age"],"limit":"500"},{"model":"atom_fashion","view":"order_items","fields":["user_order_facts.lifetime_revenue_tier"],"limit":"500"}],"desiredFilterName":["products.brand","users.state_region","users.age","users.lifetime_revenue_tier"],"filterComponents":["autocomplete","mapfilter","rangeslider","togglebuttonapi"]}]},{"type":"custom filter","label":"Inventory Overview","menuCategory":"operations","description":"Overview of your inventory","icon":"fa-tshirt","lookerContent":[{"type":"dashboard","lookerMethod":"embedDashboard","id":"1","isNext":false,"label":"Inventory Overview","filters":[{"label":"Select Product Name","filterName":"Product Name","lookerMethod":"runInlineQuery"},{"label":"Dynamic Tiles","options":["Inventory","Orders"],"value":"tileToggleValue","onChangeFunctionName":"handleTileToggle"},{"label":"Dynamic Vis Config","options":["#2d4266","#43606b","#414c67"],"value":"visColorToggleValue","onChangeFunctionName":"handleVisColorToggle"}],"inlineQueries":[{"model":"atom_fashion","view":"order_items","fields":["products.item_name"],"query_timezone":"America/Los_Angeles"}],"desiredFilterNames":["products.brand"],"filterComponents":["autocomplete","togglebutton","togglebutton","switch","select"],"dynamicFieldLookUp":{"Inventory":["Inventory On Hand","# of Items on Hand","Most Popular Out of Stock Items","Overstocked Items","Aging Inventory"],"Orders":["# Orders Processing","Total Amount Processing","# Orders In Transit","Order Shipment Status","Open Orders to be Shipped"]},"dynamicThemeMode":{"title":"gfy"},"dynamicThemeFont":{"title":"gfy"},"dynamicVisConfig":{"title":"gfy","colors":{"#2d4266":["#2d4266","#416098","#5780cd","#6391e8"],"#43606b":["#43606b","#4a7880","#66a99d","#a3d9a9"],"#414c67":["#414c67","#64689b","#9682cd","#b48ee4"]},"series_cell_visualizations":{"#2d4266":{"palette_id":"a3425339-dbbb-2584-0e23-38ed7d87ed50","collection_id":"b43731d5-dc87-4a8e-b807-635bef3948e7","custom_colors":["#6391e8","#2d4266"]},"#43606b":{"palette_id":"c5182d25-00a3-cd71-eed3-4056299dd78f","collection_id":"atom-fashion","custom_colors":["#a3d9a9","#43606b"]},"#414c67":{"palette_id":"7e059aa1-0d23-dab1-dbf9-a751ab7f54fb","collection_id":"b43731d5-dc87-4a8e-b807-635bef3948e7","custom_colors":["#b48ee4","#414c67"]}}},"theme":"light_arial"}]},{"type":"custom vis","label":"Sales Calendar","menuCategory":"sales","description":"Ayeeeeeee","icon":"fa-calendar","lookerContent":[{"type":"custom vis","lookerMethod":"runInlineQuery","label":"Sales Calendar","inlineQuery":{"model":"atom_fashion","view":"order_items","fields":["order_items.created_date","products.category","order_items.order_count","order_items.total_sale_price"],"query_timezone":"America/Los_Angeles","limit":"-1"},"desiredFilterName":"products.brand","desiredFields":["order_items.order_count","order_items.total_sale_price"],"resultFormat":"json"}]},{"type":"report builder","label":"Saved Reports","menuCategory":"operations","description":"Give users the ability to explore existing reports as well as create new ones all from within your application","icon":"fa-sticky-note","lookerContent":[{"type":"folder","id":"14","label":"Saved Reports"},{"type":"explore","id":"atom_fashion::order_items","label":"Create New Report"}]},{"type":"query builder","label":"Query Builder","menuCategory":"operations","description":"Enable business users to self serve on data and answer their own questions","icon":"fa-search","lookerContent":[{"type":"explorelite","id":"explorelite","label":"Build & Run Queries","queryBody":{"model":"atom_fashion","view":"order_items","fields":["order_items.created_month","order_items.created_date","order_items.created_week","users.city","users.state","users.country","products.category_type","products.category","products.brand","order_items.total_sale_price","order_items.total_tax_amount"],"filters":{"users.state":"","users.city":"","users.country":"","order_items.created_date":"6 months"},"limit":500},"resultFormat":"json_detail","fieldType":{"order_items.created_month":"dimension","order_items.created_date":"dimension","order_items.created_week":"dimension","users.city":"dimension","users.state":"dimension","users.country":"dimension","products.category_type":"dimension","products.category":"dimension","products.brand":"dimension","order_items.total_sale_price":"measure","order_items.total_tax_amount":"measure"},"filterType":{"users.state":"string","users.city":"string","users.country":"string","order_items.created_date":"date"}}]}],"groupIds":{"Calvin Klein":4,"Carhartt":5,"Columbia":6,"Levis":7,"Dockers":8}},"vidly":{"label":"Vidly Media","vignette":{"name":"Vidly","logo":""},"layout":"right-appbar","demoComponents":[]}}')},338:function(e,t,n){},42:function(e,t){e.exports={makeid:function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*a));return t},validIdHelper:function(e){return e.replace(/[^a-zA-Z0-9-.#]/g,"")},prettifyString:function(e){var t,n=e.split("_");for(t=0;t<n.length;t++)n[t]=n[t].charAt(0).toUpperCase()+n[t].slice(1);return n.join(" ")},getUrlVars:function(e){for(var t,n={},a=e.slice(e.indexOf("?")+1).split("&"),o=0;o<a.length;o++)n[(t=a[o].split("="))[0]]=t[1];return n},decodeHtml:function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},usecaseHelper:function(e){for(var t=Object.keys(e),n=window.location.href,a=0;a<t.length;a++)if(n.indexOf(t[a])>-1)return t[a];return"atom"}}},501:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/atom_logo_black.fdcf1447.svg"},646:function(e,t,n){},664:function(e,t){},666:function(e,t){},681:function(e,t){},683:function(e,t){},692:function(e,t){},694:function(e,t){},720:function(e,t){},721:function(e,t){},726:function(e,t){},728:function(e,t){},735:function(e,t){},754:function(e,t){},80:function(e,t){e.exports={initialLookerUser:{external_user_id:"",first_name:"",last_name:"",session_length:86400,force_logout_login:!0,external_group_id:"",group_ids:[4],permissions:["access_data","see_looks","see_user_dashboards","see_lookml_dashboards","download_with_limit"],models:["atom_fashion"],user_attributes:{locale:"en_US",country:"USA",brand:"Calvin Klein",time_horizon:"last 182 days",permission_level:"basic"}},lookerUserAttributeBrandOptions:[{label:"Columbia"},{label:"Calvin Klein"},{label:"Carhartt"},{label:"Levi's"},{label:"Dockers"}],lookerUserPermissions:{basic:["access_data","see_looks","see_user_dashboards","see_lookml_dashboards","download_with_limit"],advanced:["access_data","see_looks","see_user_dashboards","see_lookml_dashboards","download_with_limit","schedule_look_emails","schedule_external_look_emails","create_alerts","see_drill_overlay"],premium:["access_data","see_looks","see_user_dashboards","see_lookml_dashboards","download_with_limit","schedule_look_emails","schedule_external_look_emails","create_alerts","see_drill_overlay","save_content","embed_browse_spaces","schedule_look_emails","send_to_sftp","send_to_s3","send_outgoing_webhook","send_to_integration","download_without_limit","explore","see_sql"]},lookerUserTimeHorizonMap:{basic:"last 182 days",advanced:"last 365 days",premium:"last 730 days"}}},802:function(e,t){},906:function(e,t,n){var a={"./atom_background1.jpg":907,"./atom_background2.jpg":908,"./atom_background3.jpg":909,"./atom_background4.jpg":910,"./atom_splash_blog.jpg":911,"./atom_splash_inventory.jpg":912,"./atom_splash_trends.jpg":913};function o(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=r,e.exports=o,o.id=906},907:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/atom_background1.29b503d4.jpg"},908:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/atom_background2.1229c8ed.jpg"},909:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/atom_background3.fab43a80.jpg"},910:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/atom_background4.e2be32a1.jpg"},911:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/atom_splash_blog.610f4012.jpg"},912:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/atom_splash_inventory.2258ef83.jpg"},913:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/atom_splash_trends.f5b46203.jpg"},914:function(e,t,n){var a={"./atom_logo_black.svg":501};function o(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=r,e.exports=o,o.id=914},929:function(e,t,n){var a={"./atom.svg":930,"./atom_logo_black.svg":501,"./atom_logo_white.svg":931};function o(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=r,e.exports=o,o.id=929},930:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/atom.c18adbdf.svg"},931:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/atom_logo_white.32d39877.svg"}},[[1287,1,2]]]);
//# sourceMappingURL=main.713dbff1.chunk.js.map