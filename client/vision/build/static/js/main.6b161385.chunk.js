(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{136:function(e){e.exports=JSON.parse('{"atom":{"label":"Atom Fashion","vignette":{"name":"Atom","logo_url":"../images/atom_logo.png"},"layout":"right-appbar","demoComponents":[{"type":"splash page","label":"Home","description":"We\'re thrilled to have you on Atom Fashion - the premiere third party fashion marketplace for today\'s leading brands. Throughout this portal you will find a series of analytic content designed to help you maximize your performance.","icon":"fa-home","menuCategory":"home","lookerContent":[{"id":"19","gridWidth":6,"height":160,"type":"welcome","inlineQueries":[{"model":"atom_fashion","view":"order_items","fields":["order_items.total_sale_price","order_items.created_week","products.category"],"pivots":["order_items.created_week"],"fill_fields":["order_items.created_week"],"filters":{"order_items.created_date":"2 weeks ago for 2 weeks"},"filter_expression":null,"sorts":["order_items.total_sale_price desc 1","order_items.created_week 0"],"limit":"1","dynamic_fields":"[{\\"table_calculation\\":\\"change\\",\\"label\\":\\"%25 Change\\",\\"expression\\":\\"(pivot_index(${order_items.total_sale_price},2)-pivot_index(${order_items.total_sale_price},1))/pivot_index(${order_items.total_sale_price},1\\\\n  )\\",\\"value_format\\":null,\\"value_format_name\\":\\"percent_2\\",\\"_kind_hint\\":\\"supermeasure\\",\\"_type_hint\\":\\"number\\"}]"},{"model":"atom_fashion","view":"order_items","fields":["order_items.total_sale_price","order_items.created_week","products.category"],"pivots":["order_items.created_week"],"fill_fields":["order_items.created_week"],"filters":{"order_items.created_date":"2 weeks ago for 2 weeks"},"filter_expression":null,"sorts":["order_items.total_sale_price 1","order_items.created_week 0"],"limit":"1","dynamic_fields":"[{\\"table_calculation\\":\\"change\\",\\"label\\":\\"%25 Change\\",\\"expression\\":\\"(pivot_index(${order_items.total_sale_price},2)-pivot_index(${order_items.total_sale_price},1))/pivot_index(${order_items.total_sale_price},1\\\\n  )\\",\\"value_format\\":null,\\"value_format_name\\":\\"percent_2\\",\\"_kind_hint\\":\\"supermeasure\\",\\"_type_hint\\":\\"number\\"}]"}],"inlineQueriesMap":["best","worst"],"resultFormat":"json"},{"id":"17","gridWidth":6,"height":160,"type":"carousel"},{"id":"18","gridWidth":3,"type":"single value","height":120,"inlineQuery":{"model":"atom_fashion","view":"order_items","fields":["order_items.created_week","order_items.total_gross_margin"],"fill_fields":["order_items.created_week"],"filters":{"order_items.created_date":"12 weeks ago for 12 weeks"},"sorts":["order_items.created_week desc"],"limit":"500","dynamic_fields":"[{\\"table_calculation\\":\\"change\\",\\"label\\":\\"Week over Week %25 Change\\",\\"expression\\":\\"(${order_items.total_gross_margin}-offset(${order_items.total_gross_margin},1))/offset(${order_items.total_gross_margin},1)\\",\\"value_format\\":null,\\"value_format_name\\":\\"percent_2\\",\\"_kind_hint\\":\\"measure\\",\\"_type_hint\\":\\"number\\"}]"},"resultFormat":"json","label":"Revenue by Week","visColor":"#4595EC","chipFormat":"revenue"},{"id":"20","gridWidth":3,"type":"single value","height":120,"inlineQuery":{"model":"atom_fashion","view":"web_events","fields":["events.event_week","events.sessions_count"],"fill_fields":["events.event_week"],"filters":{"events.event_date":"12 weeks ago for 12 weeks"},"sorts":["events.event_week desc"],"limit":"500","dynamic_fields":"[{\\"table_calculation\\":\\"change\\",\\"label\\":\\"%25 Change\\",\\"expression\\":\\"(${events.sessions_count}-offset(${events.sessions_count},1))/offset(${events.sessions_count},1)\\",\\"value_format\\":null,\\"value_format_name\\":\\"percent_2\\",\\"_kind_hint\\":\\"measure\\",\\"_type_hint\\":\\"number\\"}]"},"resultFormat":"json","label":"Visits by Week","visColor":"#F3A759","chipFormat":"integer"},{"id":"21","gridWidth":3,"type":"single value","height":120,"inlineQuery":{"model":"atom_fashion","view":"web_events","fields":["events.event_week","events.bounce_rate"],"fill_fields":["events.event_week"],"filters":{"events.event_date":"12 weeks ago for 12 weeks"},"filter_expression":null,"sorts":["events.event_week desc"],"limit":"500","dynamic_fields":"[{\\"table_calculation\\":\\"change\\",\\"label\\":\\"%25 Change\\",\\"expression\\":\\"(${events.bounce_rate}-offset(${events.bounce_rate},1))/offset(${events.bounce_rate},1)\\",\\"value_format\\":null,\\"value_format_name\\":\\"percent_2\\",\\"_kind_hint\\":\\"measure\\",\\"_type_hint\\":\\"number\\"}]"},"resultFormat":"json","label":"Bounce Rate by Week","visColor":"#E24E3A","chipFormat":"percent"},{"id":"22","gridWidth":3,"type":"single value","height":120,"inlineQuery":{"model":"atom_fashion","view":"web_events","fields":["events.event_week","sessions.average_duration"],"pivots":null,"fill_fields":["events.event_week"],"filters":{"events.event_date":"12 weeks ago for 12 weeks"},"filter_expression":null,"sorts":["events.event_week desc"],"limit":"500","dynamic_fields":"[{\\"table_calculation\\":\\"change\\",\\"label\\":\\"%25 Change\\",\\"expression\\":\\"(${sessions.average_duration}-offset(${sessions.average_duration},1))/offset(${sessions.average_duration},1)\\",\\"value_format\\":null,\\"value_format_name\\":\\"percent_2\\",\\"_kind_hint\\":\\"measure\\",\\"_type_hint\\":\\"number\\"}]"},"resultFormat":"json","label":"Average Time on Site by Week","visColor":"#65AB5A","chipFormat":"integer"},{"gridWidth":8,"height":350,"type":"dashboard","id":"12","slug":"3ytMWYFKKbofCDFkpAG46z","title":"Most Recent Orders"},{"gridWidth":4,"height":350,"type":"popular analysis","vectors":[{"id":"9","type":"thumbnail","resourceType":"dashboard","lookerMethod":"vector_thumbnail","label":"Analytics","gridWidth":"4","url":"webanalytics"},{"id":"5","type":"thumbnail","resourceType":"dashboard","lookerMethod":"vector_thumbnail","label":"Sales","gridWidth":"4","url":"inventoryoverview"},{"id":"1","type":"thumbnail","resourceType":"dashboard","lookerMethod":"vector_thumbnail","label":"Inventory","gridWidth":"4","url":"salesoverview"}],"label":"Popular analysis"}]},{"type":"simple dashboard","label":"Web Analytics","menuCategory":"marketing","description":"Overview of all your web traffic","icon":"fa-chart-line","lookerContent":[{"type":"dashboard","lookerMethod":"embedDashboard","id":"9","label":"Web Analytics","isNext":false,"theme":"atom_fashion_filters"}]},{"type":"custom filter","label":"Sales Overview","menuCategory":"sales","description":"Overview of all your sales!","icon":"fa-tachometer-alt","lookerContent":[{"type":"dashboard","lookerMethod":"embedDashboard","id":"5","label":"Sales Overview","isNext":true,"filters":[{"label":"Select Product Category","filterName":"Category","lookerMethod":"runInlineQuery"},{"label":"Select Region","filterName":"State Region","lookerMethod":"runInlineQuery"},{"label":"Select Age Range","filterName":"Age","lookerMethod":"runInlineQuery"},{"label":"Lifetime Revenue Tier","filterName":"Lifetime Revenue Tier","lookerMethod":"runInlineQuery"}],"inlineQueries":[{"model":"atom_fashion","view":"order_items","fields":["this_period","last_period","products.category"],"filters":{"order_items.created_date":"60 days ago for 60 days","order_items.count":">5"},"sorts":["products.category"],"limit":500,"dynamic_fields":"[{\\"table_calculation\\":\\"trend\\",\\"label\\":\\"trend\\",\\"expression\\":\\"${this_period} / ${last_period} - 1\\",\\"value_format\\":null,\\"value_format_name\\":null,\\"_kind_hint\\":\\"measure\\",\\"_type_hint\\":\\"number\\"},{\\"measure\\":\\"this_period\\",\\"based_on\\":\\"order_items.total_sale_price\\",\\"type\\":\\"count_distinct\\",\\"label\\":\\"This Period\\",\\"value_format\\":null,\\"value_format_name\\":null,\\"_kind_hint\\":\\"measure\\",\\"_type_hint\\":\\"number\\",\\"filter_expression\\":\\"matches_filter(${order_items.created_date},`30 days ago for 30 days`)\\"},{\\"measure\\":\\"last_period\\",\\"based_on\\":\\"order_items.total_gross_margin\\",\\"label\\":\\"Last Period\\",\\"value_format\\":null,\\"value_format_name\\":null,\\"_kind_hint\\":\\"measure\\",\\"_type_hint\\":\\"number\\",\\"filter_expression\\":\\"matches_filter(${order_items.created_date},`60 days ago for 30 days`)\\"}]","theme":"atom_fashion"},{"model":"atom_fashion","view":"order_items","fields":["users.state_region"],"limit":"500"},{"model":"atom_fashion","view":"order_items","fields":["users.age"],"limit":"500"},{"model":"atom_fashion","view":"order_items","fields":["user_order_facts.lifetime_revenue_tier"],"limit":"500"}],"desiredFilterName":["products.brand","users.state_region","users.age","users.lifetime_revenue_tier"],"filterComponents":["autocomplete","mapfilter","rangeslider","togglebuttonapi"]}]},{"type":"custom filter","label":"Inventory Overview","menuCategory":"operations","description":"Overview of your inventory","icon":"fa-tshirt","lookerContent":[{"type":"dashboard","lookerMethod":"embedDashboard","id":"1","isNext":false,"label":"Inventory Overview","filters":[{"label":"Select Product Name","filterName":"Product Name","lookerMethod":"runInlineQuery"},{"label":"Dynamic Tiles","options":["Inventory","Orders"],"value":"tileToggleValue","onChangeFunctionName":"handleTileToggle"},{"label":"Dynamic Vis Config","options":["#2d4266","#43606b","#414c67"],"value":"visColorToggleValue","onChangeFunctionName":"handleVisColorToggle"}],"inlineQueries":[{"model":"atom_fashion","view":"order_items","fields":["products.item_name"],"query_timezone":"America/Los_Angeles"}],"desiredFilterNames":["products.brand"],"filterComponents":["autocomplete","togglebutton","togglebutton","switch","select"],"dynamicFieldLookUp":{"Inventory":["Inventory On Hand","# of Items on Hand","Most Popular Out of Stock Items","Overstocked Items","Aging Inventory"],"Orders":["# Orders Processing","Total Amount Processing","# Orders In Transit","Order Shipment Status","Open Orders to be Shipped"]},"dynamicThemeMode":{"title":"gfy"},"dynamicThemeFont":{"title":"gfy"},"dynamicVisConfig":{"title":"gfy","colors":{"#2d4266":["#2d4266","#416098","#5780cd","#6391e8"],"#43606b":["#43606b","#4a7880","#66a99d","#a3d9a9"],"#414c67":["#414c67","#64689b","#9682cd","#b48ee4"]},"series_cell_visualizations":{"#2d4266":{"palette_id":"a3425339-dbbb-2584-0e23-38ed7d87ed50","collection_id":"b43731d5-dc87-4a8e-b807-635bef3948e7","custom_colors":["#6391e8","#2d4266"]},"#43606b":{"palette_id":"c5182d25-00a3-cd71-eed3-4056299dd78f","collection_id":"atom-fashion","custom_colors":["#a3d9a9","#43606b"]},"#414c67":{"palette_id":"7e059aa1-0d23-dab1-dbf9-a751ab7f54fb","collection_id":"b43731d5-dc87-4a8e-b807-635bef3948e7","custom_colors":["#b48ee4","#414c67"]}}},"theme":"light_arial"}]},{"type":"custom vis","label":"Sales Calendar","menuCategory":"sales","description":"Ayeeeeeee","icon":"fa-calendar","lookerContent":[{"type":"custom vis","lookerMethod":"runInlineQuery","label":"Sales Calendar","inlineQuery":{"model":"atom_fashion","view":"order_items","fields":["order_items.created_date","products.category","order_items.order_count","order_items.total_sale_price"],"query_timezone":"America/Los_Angeles","limit":"-1"},"desiredFilterName":"products.brand","desiredFields":["order_items.order_count","order_items.total_sale_price"],"resultFormat":"json"}]},{"type":"report builder","label":"Saved Reports","menuCategory":"operations","description":"Give users the ability to explore existing reports as well as create new ones all from within your application","icon":"fa-sticky-note","lookerContent":[{"type":"folder","id":"14","label":"Saved Reports"},{"type":"explore","id":"atom_fashion::order_items","label":"Create New Report"}]},{"type":"query builder","label":"Query Builder","menuCategory":"operations","description":"Enable business users to self serve on data and answer their own questions","icon":"fa-search","lookerContent":[{"type":"explorelite","id":"explorelite","label":"Build & Run Queries","queryBody":{"model":"atom_fashion","view":"order_items","fields":["order_items.created_month","order_items.created_date","order_items.created_week","users.city","users.state","users.country","products.category_type","products.category","products.brand","order_items.total_sale_price","order_items.total_tax_amount"],"filters":{"users.state":"","users.city":"","users.country":"","order_items.created_date":"6 months"},"limit":500},"resultFormat":"json_detail","fieldType":{"order_items.created_month":"dimension","order_items.created_date":"dimension","order_items.created_week":"dimension","users.city":"dimension","users.state":"dimension","users.country":"dimension","products.category_type":"dimension","products.category":"dimension","products.brand":"dimension","order_items.total_sale_price":"measure","order_items.total_tax_amount":"measure"},"filterType":{"users.state":"string","users.city":"string","users.country":"string","order_items.created_date":"date"}}]}],"groupIds":{"Calvin Klein":4,"Carhartt":5,"Columbia":6,"Levis":7,"Dockers":8}},"vidly":{"label":"Vidly Media","vignette":{"name":"Vidly","logo":""},"layout":"right-appbar","demoComponents":[]}}')},1385:function(e,t){},1386:function(e,t){},1401:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(33),i=n.n(r),l=(n(655),n(119)),s=n(9),c=n.n(s),d=n(25),m=n(6),u=n(116),p=n(50),h=o.a.createContext(null),b=n(17),f=n(158),g=n(69),y=n(62),v=n(405),C=n(404),k=function(e){Object(v.a)(n,e);var t=Object(C.a)(n);function n(e){var a;return Object(g.a)(this,n),(a=t.call(this,e)).accessToken=e.accessToken,a}return Object(y.a)(n,[{key:"fetchToken",value:function(){return this.accessToken}},{key:"getToken",value:function(){var e=Object(d.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isAuthenticated()||this.activeToken.setToken(this.fetchToken()),e.abrupt("return",this.activeToken);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(function(e){Object(v.a)(n,e);var t=Object(C.a)(n);function n(e,a){var o;return Object(g.a)(this,n),(o=t.call(this,e,a||new f.BrowserTransport(e))).activeToken=new f.AuthToken,o}return Object(y.a)(n,[{key:"fetchToken",value:function(){return fetch("")}}]),Object(y.a)(n,[{key:"isAuthenticated",value:function(){var e=this.activeToken;return!(!e||!e.access_token)&&e.isActive()}},{key:"getToken",value:function(){var e=Object(d.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isAuthenticated()){e.next=9;break}return e.next=3,this.fetchToken();case 3:return t=e.sent,e.t0=this.activeToken,e.next=7,t.json();case 7:e.t1=e.sent,e.t0.setToken.call(e.t0,e.t1);case 9:return e.abrupt("return",this.activeToken);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"authenticate",value:function(){var e=Object(d.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getToken();case 2:return(n=e.sent)&&n.access_token&&(t.mode="cors",delete t.credentials,t.headers=Object(b.a)(Object(b.a)({},t.headers),{},{Authorization:"Bearer ".concat(this.activeToken.access_token)})),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(f.AuthSession)),_=function(){var e=Object(d.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/readsession",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",{session:n.session});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/writesession",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(Object(b.a)({},t))});case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",{session:a.session});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/endsession",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.sent,e.abrupt("return",{message:t});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(e){var t=e.accessToken,n=e.lookerBaseUrl;if(t&&n){var a=new k(Object(b.a)(Object(b.a)({},Object(f.DefaultSettings)()),{},{base_url:n,accessToken:t}));return new f.Looker40SDK(a)}},O=function(){var e=Object(d.a)(c.a.mark((function e(t){var n,a,o,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Date.now()>t)){e.next=13;break}return e.next=3,fetch("/refreshlookertoken",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,o=a.session.lookerBaseUrl?a.session.lookerBaseUrl:"",r=a.session.lookerApiToken?a.session.lookerApiToken.api_user_token:"",i=E({accessToken:r,lookerBaseUrl:o}),e.abrupt("return",{status:"updated",sdk:i,clientSession:a.session});case 13:return e.abrupt("return",{status:"ok"});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=n(31),j=n.n(S),T=n(589),I=n(136),N=n(72),H=n(37),F=n(1459),D=n(287),A=D.a[200],P=Object(F.a)((function(e){var t;return t={root:{flexGrow:1,backgroundColor:e.palette.background.paper}},Object(H.a)(t,"root",{display:"flex",backgroundColor:"rgb(229, 229, 229)"}),Object(H.a)(t,"flexCentered",{display:"flex",justifyContent:"center",alignItems:"center"}),Object(H.a)(t,"card",{minWidth:350,minHeight:500,left:"75%",top:"50%",transform:"translate(-75%, -50%)",position:"absolute",textAlign:"center",backgroundColor:A}),Object(H.a)(t,"h100",{height:"100%"}),Object(H.a)(t,"title",{fontSize:14}),Object(H.a)(t,"pos",{marginBottom:12}),Object(H.a)(t,"actions",{alignItems:"center",justifyContent:"center"}),Object(H.a)(t,"cardCopy",{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",margin:"0",width:"80%"}),t})),B=(n(347),n(1461)),L=n(1463),R=n(1464),U=n(182),M=n(1465),$=n(42),z=$.validIdHelper,V=$.usecaseHelper;function G(e){var t=Object(a.useContext)(h),r=t.clientSession,i=t.setClientSession,l=(t.sdk,t.setSdk),s=(t.initialHref,t.setInitialHref,function(){var e=Object(d.a)(c.a.mark((function e(t){var n,a,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.error){e.next=3;break}e.next=11;break;case 3:return e.next=5,w(Object(b.a)(Object(b.a)({},r),{},{userProfile:t.profileObj,lookerUser:N.initialLookerUser}));case 5:n=e.sent,a=n.session.lookerBaseUrl?n.session.lookerBaseUrl:"",o=n.session.lookerApiToken?n.session.lookerApiToken.api_user_token:"",s=E({lookerBaseUrl:a,accessToken:o}),i(n.session),l(s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m="".concat("610722499102-hqo4cena1n453n11mqk88jj5arv4p3ft",".apps.googleusercontent.com"),u=V(I),p=P(),f=Math.floor(4*Math.random())+1,g=n(912)("./".concat(u,"_background").concat(f,".jpg")),y=n(920)("./".concat(u,"_logo_black.svg"));return o.a.createElement("div",{className:"".concat(p.root," demoComponent ").concat(p.h100)},o.a.createElement(B.a,{container:!0,key:z("sign in page"),className:"".concat(p.h100)},o.a.createElement(B.a,{item:!0,sm:12,className:"sign-in-background-img",style:{backgroundImage:"url(".concat(g,")"),backgroundSize:"cover"}},o.a.createElement(L.a,{className:p.card},o.a.createElement("div",{className:p.cardCopy},o.a.createElement("img",{src:y}),o.a.createElement(R.a,null,o.a.createElement(U.a,{variant:"h5",component:"h2"},"Welcome"),o.a.createElement(U.a,{variant:"body2",component:"p"},"Please sign in to access ",o.a.createElement("br",null)," your merchant portal")),o.a.createElement(M.a,{className:"".concat(p.actions)},o.a.createElement(T.GoogleLogin,{clientId:m,buttonText:"Login",onSuccess:s,onFailure:s,cookiePolicy:"single_host_origin"})))))))}var q=n(43),Q=n(59),W=n(1549),K=n(1566),Y=n(3),J=n(1473),X=n(1474),Z=n(620),ee=n(1575),te=n(1477),ne=n(1475),ae=n(1476),oe=n(1478),re=n(615),ie=Object(F.a)((function(e){return{root:{display:"flex",backgroundColor:"rgb(229, 229, 229)"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),zIndex:1201,backgroundColor:"#343D4E"},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0,borderRight:"none",backgroundColor:"transparent"},drawerPaper:{width:240,borderRight:"none",backgroundColor:"transparent"},drawerHeader:Object(b.a)(Object(b.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},title:{flexGrow:1},tabs:{borderRight:"1px solid ".concat(e.palette.divider)},dNone:{display:"none"},dBlock:{display:"block"},relative:{position:"relative"},absolute:{position:"absolute"},right0:{right:0},top0:{top:0},right24:{right:24},top24:{top:24},ml12:{marginLeft:12},mr12:{marginRight:12},mt12:{marginTop:12},highlightLegend:{position:"fixed",bottom:e.spacing(2),left:e.spacing(2),zIndex:1200},tree:{height:240,flexGrow:1,maxWidth:400},parentHoverVisibility:{"&:hover $childHoverVisibility":{visibility:"visible"}},childHoverVisibility:{visibility:"hidden"},fontSize1em:{fontSize:"1em"},padding10:{padding:10},mt5:{marginTop:5},mb5:{marginBottom:5},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},list:{width:"100%",maxWidth:360,backgroundColor:"transparent"},nested:{paddingLeft:e.spacing(4)},mlAuto:{marginLeft:"auto"},mrAuto:{marginRight:"auto"},appBarBottom:{top:"auto",bottom:0},hidden:{visibility:"hidden"},roundedTab:{borderRadius:"0 100px 100px 0"},paddingBottom30:{paddingBottom:30},mtAuto:{marginTop:"auto"},mb10:{marginBottom:10}}}),{index:1}),le=Object(re.a)({}),se=Object(re.a)({palette:{primary:{main:D.a[900]},secondary:{main:D.a[400]}}}),ce=n(617),de=n(1468),me=n(1469),ue=n(1578),pe=n(1570),he=n(42).validIdHelper,be=Object(F.a)((function(e){return{zIndex1500:{zIndex:1500},mr12:{marginRight:12}}}));function fe(e){var t=Object(p.g)(),n=be(),r=Object(a.useContext)(h),i=r.setPaywallModal,l=r.clientSession,s=r.setClientSession,c=r.handleSwitchLookerUser,d=Object(a.useState)(null),u=Object(m.a)(d,2),b=u[0],f=u[1],g=Object(a.useState)(l.lookerUser.user_attributes.brand||""),y=Object(m.a)(g,2),v=y[0],C=y[1],k=function(e,n){f(null),null==e?(s({}),t.push("/"),x()):"modal"===e?i({show:!0,permissionNeeded:"explore"}):"string"===typeof e&&c(e,n)};return Object(a.useEffect)((function(){C(l.lookerUser.user_attributes.brand||"")}),[l.lookerUser]),o.a.createElement("div",{className:"".concat(n.zIndex1500)},o.a.createElement(Z.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){f(e.currentTarget)},color:"inherit"},o.a.createElement(ee.a,{alt:l.userProfile.name,src:l.userProfile.imageUrl,className:n.mr12}),o.a.createElement(U.a,null,"string"===typeof l.lookerUser.user_attributes.permission_level?l.lookerUser.user_attributes.permission_level.charAt(0).toUpperCase()+l.lookerUser.user_attributes.permission_level.substring(1):"")),o.a.createElement(ce.a,{id:"simple-menu",anchorEl:b,keepMounted:!0,open:Boolean(b),onClose:k},o.a.createElement(de.a,{autoFocus:!1},"Select User Level"),Object.keys(N.lookerUserPermissions).map((function(e){return o.a.createElement(de.a,{key:he("$lookerUserPermission-MenuItem-".concat(e)),autoFocus:!1,onClick:function(){return k(e,"permission")}},j.a.capitalize(e))})),o.a.createElement(me.a,{className:n.divider}),o.a.createElement(de.a,{onClick:function(){return k(null)}},"Sign Out"),o.a.createElement(me.a,{className:n.divider}),o.a.createElement(de.a,{onClick:function(){return k("modal")}},"Show Monetization Modal"),o.a.createElement(me.a,{className:n.divider}),o.a.createElement(de.a,null,"Current brand: ",v),o.a.createElement(de.a,null,o.a.createElement(pe.a,{id:"combo-box-usermenu",options:N.lookerUserAttributeBrandOptions||[],getOptionLabel:function(e){return e.label},style:{width:300},onChange:function(e){return k(e.target.innerText||"","brand")},renderInput:function(e){return o.a.createElement(ue.a,Object.assign({},e,{label:"Change merchant brand",variant:"outlined"}))},loadingText:"Loading...",disableautofocus:"true",onKeyDown:function(e){return e.stopPropagation()}}))))}function ge(e){var t=ie(),r=Object(a.useContext)(h),i=(r.clientSession,r.setClientSession,r.drawerOpen),l=r.setDrawerOpen,s=r.activeUsecase;return o.a.createElement(J.a,{position:"fixed",className:Object(Y.a)(t.appBar)},o.a.createElement(X.a,null,o.a.createElement(Z.a,{color:"inherit","aria-label":"open drawer",onClick:function(){return l(!i)},edge:"start"},i?o.a.createElement(ne.a,null):o.a.createElement(ae.a,null)),s?o.a.createElement(ee.a,{alt:"Icon",src:n(934)("./".concat(s,".svg")),variant:"square"}):"",o.a.createElement(te.a,{badgeContent:3,color:"error",className:"".concat(t.mlAuto," ").concat(t.mr12," ")},o.a.createElement(oe.a,null)),o.a.createElement(fe,null)))}var ye=n(1581),ve=n(1467),Ce=n(1403),ke=n(1489),_e=n(1490),we=n(1483),xe=n(1484),Ee=n(1485),Oe=n(1486),Se=n(1487),je=n(1488),Te=n(591),Ie=n.n(Te),Ne=n(1479),He=n(1480),Fe=n(1481);function De(e){var t=e.classes,n=Object(a.useContext)(h),r=n.highlightShow,i=n.setHighlightShow,l=n.codeShow,s=n.setCodeShow;return o.a.createElement(B.a,{container:!0,className:"".concat(t.mtAuto," ").concat(t.mb10)},o.a.createElement(B.a,{item:!0,sm:6},o.a.createElement(Ne.a,{display:"inline",startIcon:o.a.createElement(He.a,null),onClick:function(){l&&s(!l),i(!r)}},"Source")),o.a.createElement(B.a,{item:!0,sm:6},o.a.createElement(Ne.a,{className:"".concat(t.ml12),display:"inline",startIcon:o.a.createElement(Fe.a,null),onClick:function(){r&&i(!r),s(!l)}},"Code")))}var Ae=n(42).validIdHelper;function Pe(e){var t=ie(),n=Object(a.useContext)(h),r=n.drawerOpen,i=n.setDrawerOpen;return o.a.createElement(ye.a,{className:t.drawer,variant:"persistent",anchor:"left",open:r,classes:{paper:t.drawerPaper}},o.a.createElement("div",{className:t.drawerHeader},o.a.createElement(Z.a,{onClick:function(){return i(!1)}},o.a.createElement(ne.a,{"aria-label":"close drawer"}))),o.a.createElement(Be,{classes:t}),o.a.createElement(De,{classes:t}))}function Be(e){var t=e.classes,n=Object(a.useContext)(h),r=n.activeUsecase,i=n.selectedMenuItem,l=r?j.a.orderBy(I[r].demoComponents,["menuCategory"],["asc"]):[],s={},c=[],d=0;l.map((function(e,t){s.hasOwnProperty(e.menuCategory)?s[e.menuCategory]=[].concat(Object(q.a)(s[e.menuCategory]),[e]):(s[e.menuCategory]=[e],d+=1,c.push(""+(t+d)))}));var m={splashpage19:Ie.a,customfilter5:we.a,simpledashboard9:xe.a,customfilter1:Ee.a,customvis:Oe.a,querybuilderexplorelite:Se.a,reportbuilder14:je.a};return o.a.createElement(ve.a,{component:"nav","aria-labelledby":"nested-list-subheader",className:t.list},r?Object.keys(s).map((function(e,n){return o.a.createElement(o.a.Fragment,{key:"".concat(Ae(e+"-menuList-"+n))},o.a.createElement(Ce.a,{key:"".concat(Ae(e+"-outerListItem-"+n))},o.a.createElement(ke.a,{primary:"home"===e?"":j.a.capitalize(e)})),o.a.createElement(ve.a,{component:"div",disablePadding:!0,key:"".concat(Ae(e+"-innerList-"+n))},s[e].map((function(n,a){var r=n.lookerContent[0].id?Ae(n.type+n.lookerContent[0].id):Ae(n.type),l=m[r];return o.a.createElement(Ce.a,{button:!0,className:"".concat(t.nested," ").concat(t.roundedTab),key:"".concat(Ae(e+"-innerListItem-"+a)),selected:Ae(j.a.lowerCase(n.label))===i,component:u.b,to:Ae(j.a.lowerCase(n.label))},o.a.createElement(_e.a,null,o.a.createElement(l,null)),o.a.createElement(ke.a,{primary:j.a.capitalize(n.label)}))}))))})):"")}var Le=n(1574),Re=n(1404),Ue=n(1586),Me=n(1491),$e=Object(F.a)((function(e){return{paper:{position:"absolute",width:1e3,height:604,overflow:"scroll",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},card:{display:"flex",flexDirection:"column",justifyContent:"space-between",overflow:"scroll",cursor:"pointer","&:hover":{transform:"scale(1.05)",transition:"transform .2s"}},flexCentered:{display:"flex",justifyContent:"center",alignItems:"center"},padding15:{padding:15},divider:{marginTop:15,marginBottom:15,color:"#fff"},basic:{},advanced:{},premium:{},font75:{fontSize:".75em"},font875:{},padding30:{padding:30}}})),ze=n(42).validIdHelper;function Ve(){return{top:"".concat(10,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(10,"%)")}}function Ge(e){var t=Object(a.useContext)(h),n=t.clientSession,r=t.payWallModal,i=t.setPaywallModal,l=t.handleSwitchLookerUser,s=o.a.useState(Ve),c=Object(m.a)(s,1)[0],d=$e(),u={basic:["6 months of order data history","Atom Merchant Dashboards","Download PDFs, CSVs"],advanced:["Full year of order data history","Drill to row level information","Download row level information","Schedule dashboards for delivery (to you or others)","Set alerts and key threshold notifications"],premium:["2 Full years of order data history","Analyze your own data and save custom reports","View premium level, productivity enhancing reports","Share your reports with colleagues in Atom","Text message alerts"]};return o.a.createElement(Le.a,{className:"".concat(d.modal," "),open:r.show||!1,onClose:function(){return i({})}},o.a.createElement(Re.a,{in:r.show||!1},o.a.createElement("div",{style:c,className:"".concat(d.paper," ").concat(d.padding30)},o.a.createElement(B.a,{container:!0,spacing:3},Object.keys(N.lookerUserPermissions).map((function(e){return o.a.createElement(B.a,{item:!0,sm:4,key:ze("monetizationModal-gridItem-".concat(e))},o.a.createElement(L.a,{className:"".concat(d.card," ").concat(d[e]),elevation:1,style:e===n.lookerUser.user_attributes.permission_level?{backgroundColor:"#5F6BD8",color:"#ffffff",height:519}:{height:519},onClick:function(){l(e,"permission"),i({})}},o.a.createElement(R.a,null,o.a.createElement(U.a,{variant:"h6",display:"justify"},j.a.capitalize(e)),o.a.createElement(U.a,{display:"justify"},o.a.createElement(Ue.a,{name:"read-only",value:"basic"===e?"3":"advanced"===e?"4":"5",readOnly:!0})),o.a.createElement(U.a,{variant:"subtitle1",style:{fontStyle:"italic"}},"basic"===e?"Drive your business with clear KPIs":"advanced"===e?"Deeper insights, operations":"Drive your business with Atom"),o.a.createElement(me.a,{className:"".concat(d.divider," ")}),o.a.createElement(ve.a,{className:d.root},u[e].map((function(t,n){return o.a.createElement(Ce.a,{dense:!0,className:d.font875,key:"monetizationModal-ListItem-".concat(e,"-").concat(n)},o.a.createElement(_e.a,null,o.a.createElement(Me.a,{fontSize:"small"})),o.a.createElement(ke.a,{primary:t}))})))),o.a.createElement(M.a,{disableSpacing:!1},o.a.createElement(Ne.a,{color:"primary",variant:"outlined",fullWidth:!0,onClick:function(){l(e,"permission"),i({})},style:e===n.lookerUser.user_attributes.permission_level?{color:"#ffffff",borderColor:"#ffffff"}:{}},e===n.lookerUser.user_attributes.permission_level?"Active":Object.keys(u).indexOf(n.lookerUser.user_attributes.permission_level)<Object.keys(u).indexOf(e)?"Upgrade":"Switch"))))}))))))}var qe=n(1537),Qe=n(1568),We=n(592),Ke=n.n(We),Ye=n(1573),Je=n(1492);function Xe(e){var t=Object(a.useContext)(h),n=t.codeShow,r=t.setCodeShow,i=e.classes,l=(e.lookerContent,e.clientSideCode,e.serverSideCode,e.lookerUser),s=(e.permissionNeededCode,e.height);return o.a.createElement(Re.a,{in:n||!1},Object.keys(l).length?o.a.createElement(B.a,{container:!0,spacing:3,className:"".concat(i.padding20," ").concat(i.codeFlyoutContainer),style:{height:s}},o.a.createElement(B.a,{item:!0,sm:11},o.a.createElement(U.a,{variant:"h6",className:" ".concat(i.mrAuto),style:{color:"white"}},"Looker User Object")),o.a.createElement(B.a,{item:!0,sm:1,style:{textAlign:"right"}},o.a.createElement(Ke.a,{style:{color:"white",cursor:"pointer"},onClick:function(){return r()}})),o.a.createElement(B.a,{item:!0,sm:12},o.a.createElement(Ze,{code:l}))):"")}function Ze(e){var t=e.code;return o.a.createElement(Ye.a,{language:"json",style:Je.a,showLineNumbers:!0},"object"===typeof t?JSON.stringify(t,!0,4):t)}var et=n(288),tt=n(290),nt=et.a[500],at=tt.a[500],ot=(et.a[900],tt.a[900],et.a[100]),rt=tt.a[100],it=Object(F.a)((function(e){var t;return t={root:{flexGrow:1,backgroundColor:e.palette.background.paper,overflow:"scroll",borderRadius:8},flexCentered:{display:"flex",justifyContent:"center",alignItems:"center"},hidden:{visibility:"hidden",position:"absolute",zIndex:-1},tabs:{backgroundColor:"white",color:"#6c757d"},dNone:{display:"none"},dBlock:{display:"block"},tree:{height:240,flexGrow:1,maxWidth:400},icon:{marginRight:12,fontSize:"1rem",overflow:"visible"},mt12:{marginTop:12},w100:{width:"100%"},mlAuto:{marginLeft:"auto"},skeleton:{minWidth:275,minHeight:600},card:{minWidth:275},maxHeight200:{maxHeight:200,height:200,overflow:"hidden"},mt30:{marginTop:30},mb30:{marginBottom:30},textCenter:{textAlign:"center"},cursorPointer:{cursor:"pointer"},border:{border:"1px solid black"},height800:{height:800},maxHeight100:{maxHeight:100,height:100},maxHeight400:{maxHeight:400,height:400},minHeight200:{minHeight:200,overflow:"scroll"},redNeg:{backgroundColor:ot,color:nt,fontWeight:800},greenPos:{backgroundColor:rt,color:at,fontWeight:800},padding30:{padding:30},mb12:{marginBottom:12},overflowScroll:{overflow:"scroll"},overflowHidden:{overflow:"hidden"},overflowVisible:{overflow:"visible"},maxHeight150:{maxHeight:150,height:150},minHeight150:{minHeight:150,overflow:"scroll"},carouselLegend:{backgroundColor:"rgb(192,192,192, .5)\t !important",textAlign:"center !important",opacity:"100 !important",fontWeight:800},carouselLegendTitle:{fontSize:"24px !important"},carouselLegendBody:{fontSize:"16px !important"},positionRelative:{position:"relative"},padding15:{padding:15},maxHeight75:{maxHeight:75,height:75},overflowYScroll:{overflowY:"scroll",overflowX:"hidden"},drawerHeader:Object(b.a)(Object(b.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),padding20:{padding:20},positionFixedTopRight:{position:"fixed",top:88,right:24,bottom:0,zIndex:100},codeFlyoutContainer:{backgroundColor:"rgb(40, 42, 54)",overflow:"scroll",borderRadius:"0 8px 8px 0"}},Object(H.a)(t,"overflowScroll",{overflow:"scroll"}),Object(H.a)(t,"overflowHidden",{overflow:"hidden"}),Object(H.a)(t,"height100Percent",{height:"100%"}),Object(H.a)(t,"noContainerScroll",{width:"100%",margin:0}),Object(H.a)(t,"lookerCardShadow",{border:"none",borderRadius:"6px",boxShadow:"rgba(0, 0, 0, 0.11) 0px 2px 12px, rgba(0, 0, 0, 0.04) 0px 1px 4px"}),Object(H.a)(t,"maxHeight60",{maxHeight:60,height:60}),Object(H.a)(t,"maxHeight350",{maxHeight:350,height:350}),Object(H.a)(t,"maxHeight80Percent",{maxHeight:"80%",height:"80%"}),t})),lt=n(1577);function st(e){var t=e.children,n=e.color,r=e.height,i=e.width,s=e.margin,c=e.id,d=e.backgroundColor,m=(Object(l.a)(e,["children","color","height","width","margin","id","backgroundColor"]),{});return m=Object(a.useContext)(h).highlightShow?Object(b.a)(Object(b.a)({},m),{},{border:"3px solid ".concat(n),backgroundColor:"".concat(d),borderRadius:"4px",position:"relative"}):{border:"3px solid transparent",backgroundColor:"transparent"},r&&(m.height=r),i&&(m.width=i),s&&(m.margin=s),o.a.createElement("div",{id:c,style:m},t)}function ct(e){var t=Object.assign({},e),n=Object(a.useContext)(h).highlightShow,r=t.classes,i=t.children;return o.a.createElement(st,Object.assign({},t,{color:"#A142F4",backgroundColor:"rgba(161, 66, 244, 0.1)"}),o.a.createElement(lt.a,{size:"small",label:"API",className:n?"test":"".concat(r.hidden),display:"inline",align:"right",style:{backgroundColor:"#A142F4",color:"#fff",top:"-10px",left:"-10px",position:"absolute"}}),i)}function dt(e){var t=Object.assign({},e),n=Object(a.useContext)(h).highlightShow,r=t.classes,i=t.children;return o.a.createElement(st,Object.assign({},t,{color:"#12B5CB",backgroundColor:"rgba(18, 181, 203, 0.1)"}),o.a.createElement(lt.a,{size:"small",label:"Embed",className:n?"test":"".concat(r.hidden),display:"inline",align:"right",style:{backgroundColor:"#12B5CB",color:"#fff",top:"-10px",left:"-10px",position:"absolute"}}),i)}function mt(e){var t=Object.assign({},e),n=Object(a.useContext)(h).highlightShow,r=t.classes,i=t.children;return o.a.createElement(st,Object.assign({},t,{color:"#297AF4",backgroundColor:"rgba(41, 122, 244, 0.1)"}),o.a.createElement(lt.a,{size:"small",label:"Embed Method",className:n?"test":"".concat(r.hidden),display:"inline",align:"right",style:{backgroundColor:"#297AF4",color:"#fff",top:"-10px",left:"-10px",position:"absolute"}}),i)}var ut=n(595),pt=n(42),ht=pt.validIdHelper,bt=pt.decodeHtml;function ft(e){var t=e.lookerContent,n=e.classes,r=Object(a.useState)(void 0),i=Object(m.a)(r,2),l=i[0],s=i[1],u=Object(a.useContext)(h),p=u.clientSession,b=u.sdk,f=u.corsApiCall,g=u.isReady,y=(p.userProfile,p.lookerUser),v={};Object(a.useEffect)((function(){if(g){var e=!0;return f(C).then((function(t){e&&s(t)})),function(){return e=!1}}}),[y,g]);var C=function(){var e=Object(d.a)(c.a.mark((function e(){var n,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.inlineQuery,e.next=3,b.ok(b.run_inline_query({result_format:t.resultFormat||"json",body:n}));case 3:return a=e.sent,v.id=ht("singleVisValue-".concat(t.id)),v.data=[],o=[],a.map((function(e){if(e[t.inlineQuery.fields[0]]){var n={x:e[t.inlineQuery.fields[0]].toString(),y:e[t.inlineQuery.fields[1]]||0,change:e.change};n&&"null"!==n.y&&o.push(n)}})),v.data=[].concat(o),e.abrupt("return",[v]);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=l&&l.length?isNaN((100*l[0].data[0].change).toFixed(2))?"":parseInt((100*l[0].data[0].change).toFixed(0))>=0?"&uarr;":"&darr;":"",_=l?"revenue"===t.chipFormat?"$".concat((l[0].data&&l[0].data[0]?l[0].data[0].y.toFixed(2):"").replace(/\d(?=(\d{3})+\.)/g,"$&,")):"integer"===t.chipFormat?parseInt(l[0].data&&l[0].data[0]?l[0].data[0].y.toFixed(2):""):"percent"===t.chipFormat?"".concat(100*(l[0].data&&l[0].data[0]?l[0].data[0].y.toFixed(2):""),"% "):"":"";return o.a.createElement(L.a,{className:"".concat(n.padding15," \n    ").concat(n.overflowHidden," \n    ").concat(n.lookerCardShadow,"\n    ")},o.a.createElement("div",{style:{height:t.height}},l?o.a.createElement(o.a.Fragment,null,o.a.createElement(ct,{height:130,classes:n},o.a.createElement(B.a,{container:!0,className:"".concat(n.textCenter," ")},o.a.createElement(B.a,{item:!0,sm:12},o.a.createElement(U.a,{variant:"body2",align:"left",color:"secondary"},t.label)),o.a.createElement(B.a,{item:!0,sm:6},o.a.createElement(U.a,{variant:"subtitle1",align:"left"},o.a.createElement("b",null,_))),o.a.createElement(B.a,{item:!0,sm:6},o.a.createElement(lt.a,{size:"small",label:"".concat(bt(k)," ").concat(parseInt(100*l[0].data[0].change).toFixed(0),"% "),className:isNaN((100*l[0].data[0].change).toFixed(2))?"":parseInt((100*l[0].data[0].change).toFixed(0))>=0?n.greenPos:n.redNeg,display:"inline",align:"right"}))),o.a.createElement(ut.a,{data:l,margin:{top:25,right:25,bottom:25,left:25},xScale:{type:"time",format:"%Y-%m-%d",precision:"day"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!0,reverse:!1},axisLeft:{orient:"left",tickSize:0,tickPadding:5,tickRotation:0,format:function(){return null}},axisBottom:{orient:"bottom",tickSize:0,tickPadding:5,tickRotation:0,format:function(){return null}},enablePoints:!1,enableGridX:!1,enableGridY:!1,height:100,colors:t.visColor,animate:!0}))):o.a.createElement(B.a,{item:!0,sm:12,className:"".concat(n.flexCentered," "),style:{height:t.height}},o.a.createElement(qe.a,{className:n.circularProgress,style:{color:"".concat(t.visColor," ")}}))))}n(1360);var gt=n(42),yt=(gt.validIdHelper,gt.decodeHtml);function vt(e){var t=e.lookerContent,n=e.inlineQuery,r=e.index,i=e.classes,l=Object(a.useState)(void 0),s=Object(m.a)(l,2),u=s[0],p=s[1],b=Object(a.useContext)(h),f=b.clientSession,g=b.sdk,y=b.corsApiCall,v=b.isReady,C=(f.userProfile,f.lookerUser);Object(a.useEffect)((function(){if(v){var e=!0;return y(k).then((function(t){e&&p(t)})),function(){return e=!1}}}),[C,v]);var k=function(){var e=Object(d.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.ok(g.run_inline_query({result_format:t.resultFormat||"json",body:n}));case 2:return a=e.sent,e.abrupt("return",a[0]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=u?u.change>0?"&uarr;":"&darr;":"";return o.a.createElement(B.a,{item:!0,sm:12},u?o.a.createElement(o.a.Fragment,null,o.a.createElement(ct,{classes:i},o.a.createElement(U.a,{variant:"subtitle1",display:"inline"},"Your ",t.inlineQueriesMap[r]," category, ",o.a.createElement("b",null,u["products.category"]),", is ",u.change>0?"up ":"down "),o.a.createElement(lt.a,{size:"small",label:"".concat(yt(_)," ").concat(parseInt(100*u.change).toFixed(0),"% "),className:u.change>0?i.greenPos:i.redNeg,display:"inline"}),o.a.createElement(U.a,{variant:"subtitle1",display:"inline"},"\xa0over the past week."))):o.a.createElement("div",{style:{height:"56px"}}))}var Ct=n(42).validIdHelper;function kt(e){var t=e.lookerContent,n=e.classes,r=Object(a.useContext)(h).clientSession,i=r.userProfile,l=r.lookerUser;return Object(a.useEffect)((function(){}),[t,l]),o.a.createElement("div",{className:"".concat(n.overflowScroll," ").concat(n.padding15),style:{maxHeight:t.height}},o.a.createElement(U.a,{variant:"h4"},"Welcome back, ",i.givenName,"!"),o.a.createElement("br",null),o.a.createElement(o.a.Fragment,null,t.inlineQueries.map((function(e,a){return o.a.createElement(vt,Object.assign({key:"".concat(Ct("naturalLanguage-splashPage-"+a))},{lookerContent:t,inlineQuery:e,index:a,classes:n}))}))))}function _t(e){e.lookerContent;var t=e.classes,n=e.item,r=e.index,i=Object(a.useState)(void 0),l=Object(m.a)(i,2),s=l[0],p=l[1],b=Object(a.useContext)(h),f=b.clientSession,g=b.sdk,y=b.corsApiCall,v=b.isReady,C=(f.userProfile,f.lookerUser);Object(a.useEffect)((function(){var e=!0;return v&&y(k).then((function(t){e&&p(t)})),function(){return e=!1}}),[C,v]);var k=function(){var e=Object(d.a)(c.a.mark((function e(){var t,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.ok(g.content_thumbnail({type:n.resourceType,resource_id:n.id}));case 2:return t=e.sent,a=new Blob([t],{type:"image/svg+xml"}),o=URL.createObjectURL(a),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(B.a,{container:!0,className:"".concat(t.cursorPointer),spacing:3,component:u.b,to:n.url},s?o.a.createElement(o.a.Fragment,null,o.a.createElement(B.a,{item:!0,sm:1}),o.a.createElement(B.a,{item:!0,sm:6},o.a.createElement(ct,{classes:t},o.a.createElement("div",{className:" ".concat(t.maxHeight60," ").concat(t.textCenter," ").concat(t.cursorPointer," ").concat(t.overflowHidden)},o.a.createElement("img",{src:s,style:{width:"100%"}})))),o.a.createElement(B.a,{item:!0,sm:4},o.a.createElement(U.a,{variant:"subtitle1"},n.label)),r<2?o.a.createElement(B.a,{item:!0,sm:12},o.a.createElement(me.a,{className:"".concat(t.divider," ").concat(t.mb12," ").concat(t.mt12)})):""):"")}var wt=n(42).validIdHelper;function xt(e){var t=e.lookerContent,n=e.classes,r=Object(a.useState)([]),i=Object(m.a)(r,2);i[0],i[1];return o.a.createElement(L.a,{className:"".concat(n.padding15," \n    ").concat(n.overflowHidden," \n    ").concat(n.lookerCardShadow,"\n    ")},o.a.createElement("div",{className:"".concat(n.overflowYScroll),style:{height:t.height}},o.a.createElement(B.a,{container:!0,spacing:3},o.a.createElement(B.a,{item:!0,sm:12},o.a.createElement(U.a,{variant:"h6",align:"center",color:"secondary"},"Helpful Dashboards")),t.vectors.map((function(e,a){return o.a.createElement(_t,Object.assign({key:"".concat(wt("vectorThumbnail-splashPage-"+a))},{lookerContent:t,item:e,classes:n,index:a}))})))))}var Et=n(58),Ot=n.n(Et);n(1361);function St(e){var t=e.lookerContent,n=e.classes,r=e.id,i=Object(a.useState)(0),l=Object(m.a)(i,2),s=l[0],u=l[1],p=Object(a.useContext)(h),b=p.clientSession,f=(p.show,p.sdk,p.corsApiCall,p.isReady),g=(b.userProfile,b.lookerUser),y=(b.lookerHost,Object(a.useState)(void 0)),v=Object(m.a)(y,2);v[0],v[1];Object(a.useEffect)((function(){f&&C()}),[g,f]);var C=function(){var e=Object(d.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ot()("#".concat(r)).html(""),u(0),n=encodeURIComponent("embed/query/atom_fashion/order_items?fields=order_items.created_time,users.name,order_items.total_sale_price,users.approx_location,users.city&f[users.country]=USA&sorts=order_items.created_time+desc&limit=100&query_timezone=America%2FLos_Angeles&vis=%7B%22map_plot_mode%22%3A%22points%22%2C%22heatmap_gridlines%22%3Afalse%2C%22heatmap_gridlines_empty%22%3Afalse%2C%22heatmap_opacity%22%3A0.5%2C%22show_region_field%22%3Atrue%2C%22draw_map_labels_above_data%22%3Atrue%2C%22map_tile_provider%22%3A%22traffic_day%22%2C%22map_position%22%3A%22custom%22%2C%22map_scale_indicator%22%3A%22off%22%2C%22map_pannable%22%3Atrue%2C%22map_zoomable%22%3Atrue%2C%22map_marker_type%22%3A%22circle%22%2C%22map_marker_icon_name%22%3A%22shopping_cart%22%2C%22map_marker_radius_mode%22%3A%22proportional_value%22%2C%22map_marker_units%22%3A%22pixels%22%2C%22map_marker_proportional_scale_type%22%3A%22linear%22%2C%22map_marker_color_mode%22%3A%22fixed%22%2C%22show_view_names%22%3Afalse%2C%22show_legend%22%3Atrue%2C%22quantize_map_value_colors%22%3Afalse%2C%22reverse_map_value_colors%22%3Afalse%2C%22map_latitude%22%3A40.267214274019075%2C%22map_longitude%22%3A-94.70352172851564%2C%22map_zoom%22%3A4%2C%22map_marker_color%22%3A%5B%22%234595EC%22%5D%2C%22series_types%22%3A%7B%7D%2C%22type%22%3A%22looker_map%22%2C%22defaults_version%22%3A1%2C%22hidden_fields%22%3A%5B%22users.name%22%2C%22order_items.created_time%22%5D%7D&filter_config={}&origin=share-expanded&sdk=2&embed_domain=".concat(document.location.origin)),e.next=5,fetch("/auth?src=".concat(n)).then((function(e){return e.json()})).then((function(e){Q.LookerEmbedSDK.createExploreWithUrl(e.url).appendTo(document.getElementById(r)).withClassName("explore").withClassName("splashPage").withClassName(t.id).withTheme("atom_fashion").build().connect().then((function(e){u(1),Q.LookerEmbedSDK.init("".concat(b.lookerBaseUrl))})).catch((function(e){console.error("Connection error",e)}))}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(L.a,{className:"".concat(n.padding15," \n    // ").concat(n.overflowHidden," \n    ").concat(n.lookerCardShadow,"\n    ")},o.a.createElement("div",{className:"".concat(n.overflowHidden),style:{height:t.height}},s?"":o.a.createElement(B.a,{item:!0,sm:12},o.a.createElement(L.a,{className:"".concat(n.card," ").concat(n.flexCentered," ").concat(n.maxHeight350," ").concat(n.overflowHidden),elevation:0},o.a.createElement(qe.a,{className:n.circularProgress}))),o.a.createElement(B.a,{container:!0,spacing:4},o.a.createElement(B.a,{item:!0,sm:12},o.a.createElement(dt,{classes:n,height:s?350:0},o.a.createElement(U.a,{variant:"h6",align:"center",color:"secondary"},t.title),o.a.createElement("div",{className:"embedContainer embedContainerNoHeader splashPage ".concat(n.overflowHidden," ").concat(n.maxHeight80Percent),id:r,key:r}))))))}var jt=n(42).validIdHelper;function Tt(e){var t=Object(a.useState)(0),n=Object(m.a)(t,2),r=(n[0],n[1],Object(a.useState)(1)),i=Object(m.a)(r,2),l=i[0],s=(i[1],Object(a.useState)("")),c=Object(m.a)(s,2),d=(c[0],c[1],Object(a.useState)("")),u=Object(m.a)(d,2),p=(u[0],u[1],Object(a.useState)(window.innerHeight-112)),b=Object(m.a)(p,2),f=b[0],g=b[1],y=Object(a.useContext)(h),v=y.clientSession,C=(y.highlightShow,y.codeShow),k=(v.userProfile,v.lookerUser),_=v.lookerHost,w=it(),x=(e.staticContent,e.staticContent.lookerContent),E=e.staticContent.type,O=(e.handleTabChange,E||"code flyout");return Object(a.useEffect)((function(){window.addEventListener("resize",(function(){return g(window.innerHeight-112)}))}),[x]),o.a.createElement("div",{className:"".concat(w.root," demoComponent"),style:{height:f}},o.a.createElement(L.a,{elevation:1,className:"".concat(w.padding30," \n      ").concat(w.height100Percent,"\n      ").concat(w.overflowScroll)},o.a.createElement(B.a,{container:!0,key:jt(E)},o.a.createElement("div",{className:w.root},l?"":o.a.createElement(B.a,{item:!0,sm:12},o.a.createElement(L.a,{className:"".concat(w.card," ").concat(w.flexCentered)},o.a.createElement(qe.a,{className:w.circularProgress}))),o.a.createElement(Qe.a,{className:l?"":"".concat(w.hidden)},o.a.createElement(B.a,{container:!0,spacing:3,key:"".concat(jt(O+"-outerFragment")),className:"".concat(w.noContainerScroll)},C?o.a.createElement(B.a,{item:!0,sm:6,className:"".concat(w.positionFixedTopRight)},o.a.createElement(Xe,Object.assign({},e,{classes:w,lookerUser:k,height:f}))):"",x.map((function(e,t){return o.a.createElement(B.a,{key:"".concat(jt(O+"-innerFragment-"+t)),item:!0,sm:parseInt(e.gridWidth)},"welcome"===e.type&&o.a.createElement(kt,{lookerContent:e,classes:w,demoComponentType:O,lookerHost:_}),"single value"===e.type&&o.a.createElement(ft,{lookerContent:e,classes:w,demoComponentType:O,lookerHost:_}),"dashboard"===e.type&&o.a.createElement(St,Object.assign({lookerContent:e,classes:w,lookerHost:_},{id:jt("embedContainer-".concat(O,"-").concat(e.id))})),"popular analysis"===e.type&&o.a.createElement(xt,{lookerContent:e,classes:w,demoComponentType:O,lookerHost:_}))}))))))))}var It=Object(F.a)((function(e){return{root:{flexGrow:1,overflow:"scroll",borderRadius:"8px"},flexCentered:{display:"flex",justifyContent:"center",alignItems:"center"},hidden:{visibility:"hidden"},tabs:{backgroundColor:"white",color:"#6c757d"},dNone:{display:"none"},dBlock:{display:"block"},tree:{height:240,flexGrow:1,maxWidth:400},icon:{marginRight:12,fontSize:"1rem",overflow:"visible"},mt12:{marginTop:12},w100:{width:"100%"},mlAuto:{marginLeft:"auto"},mrAuto:{marginRight:"auto"},card:{minWidth:275},padding30:{padding:30},minHeight680:{minHeight:680},positionRelative:{position:"relative"},skeleton:{height:"100%",width:"100%"},height100Percent:{height:"100%"},ml12:{marginLeft:12},padding20:{padding:20},positionFixedTopRight:{position:"fixed",top:88,right:24,bottom:0,zIndex:100},codeFlyoutContainer:{backgroundColor:"rgb(40, 42, 54)",overflow:"scroll",borderRadius:"0 8px 8px 0"},padding10:{padding:10},noContainerScroll:{width:"100%",margin:0},verticalAlignTop:{verticalAlign:"top"},w33:{width:"33%"},mr12:{marginRight:12},dot:{height:"25px",width:"25px",borderRadius:"50%",display:"inline-block"},borderRadius0:{borderRadius:0}}})),Nt=n(1542),Ht=n(1543),Ft=n(1547),Dt=n(1544),At=n(1545),Pt=n(1546),Bt=n(1548);function Lt(e){var t=e.val,n=e.positive_good,a=(e.abs_val,{up:n?"green":"red",down:n?"red":"green"}),r=t<0?a.down:t>0?a.up:"black",i=Math.abs(t).toLocaleString("en",{style:"percent",minimumFractionDigits:2}),l=t<0?"\u25bc":t>0?"\u25b2":"\u2014";return o.a.createElement(o.a.Fragment,null,o.a.createElement("font",{color:r},"".concat(l," ").concat(i)))}var Rt=n(42).validIdHelper;function Ut(e){var t=e.lookerContent,n=e.apiContent,a=e.index,r=e.classes,i=e.customFilterAction,l=e.type,s=e.horizontalLayout;return o.a.createElement(B.a,{key:Rt("dashEmbed-".concat(l).concat(t.id,"-").concat(a)),item:!0,sm:s?3:12},o.a.createElement(ct,{classes:r},o.a.createElement(U.a,null,t[0].filters[a].label,":"),o.a.createElement(pe.a,{id:"combo-box-dashboard-".concat(t.id),options:Array.isArray(n)?n:[],renderOption:function(e){return o.a.createElement(B.a,{container:!0,justify:"space-between"},o.a.createElement(B.a,{item:!0},e.label),e.trend&&o.a.createElement(B.a,{item:!0},o.a.createElement(Lt,{val:e.trend,positive_good:!0,abs_val:Math.abs(e.trend)})))},getOptionLabel:function(e){return e.label},onChange:function(e,n){i(t[0].id,t[0].filters[a].filterName,n?n.label:"")},renderInput:function(e){return o.a.createElement(ue.a,Object.assign({},e,{label:t[0].filters[a].filterName,variant:"outlined"}))},loadingText:"Loading..."})))}var Mt=n(273);Mt.CheckboxSVGMap.prototype.toggleLocation=function(e){var t=this,n=e.target;this.setState((function(e){for(var a=Object(q.a)(e.selectedLocations),o=j.a.find(t.props.map.locations,{id:n.id}),r=j.a.filter(t.props.map.locations,{region:o.region}),i=[],l=0;l<t.props.map.locations.length;l++)-1==i.indexOf(t.props.map.locations[l].region)&&i.push(t.props.map.locations[l].region);for(var s=[],c=0;c<a.length;c++)-1==s.indexOf(a[c].region)&&s.push(a[c].region);var d,m=j.a.differenceBy(i,s),u=[].concat(Object(q.a)(m),[o.region]),p=j.a.filter(t.props.map.locations,(function(e){return-1==u.indexOf(e.region)}));"true"===n.attributes["aria-checked"].value?a=p:(d=a).push.apply(d,Object(q.a)(r));return t.props.onChange&&t.props.onChange(a),{selectedLocations:a}}))},Mt.CheckboxSVGMap.prototype.componentDidMount=function(){this.setState({selectedLocations:this.props.map.locations})};var $t=n(399),zt=n(1538),Vt=n(1539),Gt=n(1540),qt=Object(b.a)(Object(b.a)({},$t.a),{},{label:"Custom map label",locations:$t.a.locations.map((function(e){switch(e.name){case"Connecticut":case"Maine":case"Massachusetts":case"New Hampshire":case"Rhode Island":case"Vermont":case"New Jersey":case"New York":case"Pennsylvania":case"Delaware":return Object(b.a)(Object(b.a)({},e),{},{region:"Northeast"});case"Illinois":case"Indiana":case"Michigan":case"Ohio":case"Wisconsin":case"Iowa":case"Kansas":case"Minnesota":case"Missouri":case"Nebraska":case"North Dakota":case"South Dakota":return Object(b.a)(Object(b.a)({},e),{},{region:"Midwest"});case"Florida":case"Georgia":case"Maryland":case"North Carolina":case"South Carolina":case"Virginia":case"District of Columbia":case"Washington, DC":case"West Virginia":case"Alabama":case"Kentucky":case"Mississippi":case"Tennessee":case"Arkansas":case"Louisiana":case"Oklahoma":case"Texas":return Object(b.a)(Object(b.a)({},e),{},{region:"South"});case"Arizona":case"Colorado":case"Idaho":case"Montana":case"Nevada":case"New Mexico":case"Utah":case"Wyoming":return Object(b.a)(Object(b.a)({},e),{},{region:"Mountain"});case"Alaska":case"California":case"Hawaii":case"Oregon":case"Washington":return Object(b.a)(Object(b.a)({},e),{},{region:"Pacific"})}}))}),Qt={"0 to 99":"low","100 to 499":"medium","500 or Above":"high"},Wt={"0 to 99":zt.a,"100 to 499":Vt.a,"500 or Above":Gt.a},Kt=n(42).validIdHelper;function Yt(e){var t=e.lookerContent,n=(e.apiContent,e.index),r=e.classes,i=e.customFilterAction,l=e.type,s=e.horizontalLayout,c=Object(a.useState)("Pacific, South, Mountain, Midwest, Northeast"),d=Object(m.a)(c,2),u=d[0],p=d[1];return o.a.createElement(B.a,{item:!0,sm:s?3:12},o.a.createElement(mt,{classes:r,key:Kt("dashEmbed-".concat(l).concat(t.id,"-").concat(n))},o.a.createElement(U.a,{className:"".concat(r.heading," ").concat(r.ml12,"  ").concat(r.verticalAlignTop)},t[0].filters[n].label,": ",o.a.createElement("b",null,u||"Outside US")),o.a.createElement(Mt.CheckboxSVGMap,{map:qt,onChange:function(e){for(var a=[],o=0;o<e.length;o++)-1==a.indexOf(e[o].region)&&a.push(e[o].region);var r=a.join(",");p(r),i(t[0].id,t[0].filters[n].filterName,u||"")}})))}var Jt=n(1582),Xt=n(42).validIdHelper;function Zt(e){var t=e.lookerContent,n=e.apiContent,r=e.index,i=e.classes,l=e.customFilterAction,s=e.type,c=e.horizontalLayout,d=Object(a.useState)([]),u=Object(m.a)(d,2),p=u[0],h=u[1];return o.a.createElement(B.a,{item:!0,sm:c?3:12},o.a.createElement(mt,{classes:i,key:Xt("dashEmbed-".concat(s).concat(t.id,"-").concat(r))},o.a.createElement(U.a,{className:"".concat(i.heading," ").concat(i.ml12,"  ").concat(i.verticalAlignTop)},t[0].filters[r].label,":"),o.a.createElement(Jt.a,{value:p.length?p:Array.isArray(n)?[n[0].label,n[n.length-1].label]:[],onChange:function(e,t){h(t)},valueLabelDisplay:"auto","aria-labelledby":"range-slider",onChangeCommitted:function(e,n){l(t[0].id,t[0].filters[r].filterName,n?"[".concat(n,"]"):"[]")},min:Array.isArray(n)&&n.length?n[0].label:0,max:Array.isArray(n)&&n.length?n[n.length-1].label:0,marks:Array.isArray(n)&&n.length?[{value:n[0].label,label:n[0].label},{value:n[n.length-1].label,label:n[n.length-1].label}]:"",disabled:!Array.isArray(n)||!n.length})))}var en=n(1587),tn=n(1541),nn=n(42).validIdHelper;function an(e){var t=e.lookerContent,n=e.apiContent,r=e.index,i=e.classes,l=e.customFilterAction,s=e.type,c=e.horizontalLayout,d=Object(a.useState)("0-24"),u=Object(m.a)(d,2),p=u[0],h=u[1];return o.a.createElement(B.a,{item:!0,sm:c?3:12},o.a.createElement(mt,{classes:i,key:nn("dashEmbed-".concat(s).concat(t.id,"-").concat(r))},o.a.createElement(U.a,{className:"".concat(i.heading," ").concat(i.ml12,"  ").concat(i.verticalAlignTop)},t[0].filters[r].label,":"),o.a.createElement(en.a,{value:p,exclusive:!0,onChange:function(e,n){h(n),l(t[0].id,t[0].filters[r].filterName,n||"")},"aria-label":"ageTier",className:i.w100},">",Array.isArray(n)?n.map((function(e,n){if("Undefined"!==e.label){var a=Wt[e.label];return o.a.createElement(tn.a,{key:nn("".concat(s,"-FilterBar-ToggleButton-").concat(t[0].id,"-").concat(n)),value:e.label,"aria-label":e.label,className:i.w33},o.a.createElement(a,{className:i.mr12}),j.a.capitalize(Qt[e.label])||e.label)}})):"")))}var on=n(42).validIdHelper;function rn(e){var t=e.lookerContent,n=e.classes,a=(e.type,e.tileToggleValue),r=e.handleTileToggle,i=e.horizontalLayout;return o.a.createElement(B.a,{item:!0,sm:i?3:12},o.a.createElement(mt,{classes:n},o.a.createElement(U.a,null,"Dynamic Tiles:        "),o.a.createElement(en.a,{value:a,exclusive:!0,onChange:r,"aria-label":"text alignment"},Object.keys(t[0].dynamicFieldLookUp).map((function(e){return o.a.createElement(tn.a,{key:on("dynamicDashTileToggle-".concat(e)),value:e,"aria-label":"left aligned"},e)})))))}var ln=n(42).validIdHelper;function sn(e){var t=e.lookerContent,n=e.classes,a=(e.type,e.visColorToggleValue),r=e.handleVisColorToggle,i=e.horizontalLayout;return o.a.createElement(B.a,{item:!0,sm:i?2:12},o.a.createElement(mt,{classes:n},o.a.createElement(U.a,null,"Dynamic Vis Color:"),o.a.createElement(en.a,{value:a,exclusive:!0,onChange:r,"aria-label":"text alignment"},Object.keys(t[0].dynamicVisConfig.colors).map((function(e){return o.a.createElement(tn.a,{key:ln("dynamicDashVisConfigToggle-".concat(e)),value:e,"aria-label":"left aligned"},o.a.createElement("span",{className:"".concat(n.dot),style:{backgroundColor:t[0].dynamicVisConfig.colors[e][t[0].dynamicVisConfig.colors[e].length-2]||e}}))})))))}var cn=n(1583);n(42).validIdHelper;function dn(e){e.lookerContent;var t=e.classes,n=(e.type,e.lightThemeToggleValue),a=e.handleThemeChange,r=e.horizontalLayout;return o.a.createElement(B.a,{item:!0,sm:r?1:12},o.a.createElement(dt,{classes:t},o.a.createElement(U.a,null,n?"Light mode":"Dark mode"),o.a.createElement(cn.a,{checked:!n,onChange:function(){return a(null,!n)},color:"primary",name:"light theme toggle",inputProps:{"aria-label":"primary checkbox"}})))}var mn=n(1472),un=n(1580),pn=n(1572);function hn(e){e.lookerContent;var t=e.classes,n=(e.type,e.fontThemeSelectValue),a=e.handleThemeChange,r=e.horizontalLayout;return o.a.createElement(B.a,{item:!0,sm:r?2:12},o.a.createElement(dt,{classes:t},o.a.createElement(mn.a,{className:t.formControl},o.a.createElement(un.a,{id:"demo-simple-select-label"},"Change font"),o.a.createElement(pn.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:n,onChange:function(e){a(null,e.target.value)}},o.a.createElement(de.a,{value:"arial"},"Arial"),o.a.createElement(de.a,{value:"roboto"},"Roboto"),o.a.createElement(de.a,{value:"vollkorn"},"Vollkorn")))))}var bn=n(42).validIdHelper;function fn(e){var t=e.classes,n=e.apiContent,a=e.customFilterAction,r=e.tileToggleValue,i=e.handleTileToggle,l=e.visColorToggleValue,s=e.handleVisColorToggle,c=e.lightThemeToggleValue,d=e.fontThemeSelectValue,m=e.handleThemeChange,u=e.horizontalLayout,p=(e.setHorizontalLayout,e.lookerContent),h=e.type;return o.a.createElement(B.a,{container:!0,spacing:3},p[0].filterComponents.map((function(e,r){return"autocomplete"===p[0].filterComponents[r]?o.a.createElement(Ut,{lookerContent:p,apiContent:n[r],index:r,classes:t,customFilterAction:a,type:h,horizontalLayout:u,key:bn("".concat(h,"-").concat(p[0].filterComponents[r],"-").concat(r))}):"mapfilter"===p[0].filterComponents[r]?o.a.createElement(Yt,{lookerContent:p,apiContent:n[r],index:r,classes:t,customFilterAction:a,type:h,horizontalLayout:u,key:bn("".concat(h,"-").concat(p[0].filterComponents[r],"-").concat(r))}):"rangeslider"===p[0].filterComponents[r]?o.a.createElement(Zt,{lookerContent:p,apiContent:n[r],index:r,classes:t,customFilterAction:a,type:h,horizontalLayout:u,key:bn("".concat(h,"-").concat(p[0].filterComponents[r],"-").concat(r))}):"togglebuttonapi"===p[0].filterComponents[r]?o.a.createElement(an,{lookerContent:p,apiContent:n[r],index:r,classes:t,customFilterAction:a,type:h,horizontalLayout:u,key:bn("".concat(h,"-").concat(p[0].filterComponents[r],"-").concat(r))}):""})),p[0].dynamicFieldLookUp?o.a.createElement(rn,{lookerContent:p,classes:t,type:h,tileToggleValue:r,handleTileToggle:i,horizontalLayout:u,key:bn("".concat(h,"-dynamicFieldLookUp"))}):"",p[0].dynamicVisConfig?o.a.createElement(sn,{lookerContent:p,classes:t,type:h,visColorToggleValue:l,handleVisColorToggle:s,horizontalLayout:u,key:bn("".concat(h,"-dynamicVisConfig"))}):"",p[0].dynamicThemeMode?o.a.createElement(dn,{lookerContent:p,classes:t,type:h,lightThemeToggleValue:c,handleThemeChange:m,horizontalLayout:u,key:bn("".concat(h,"-dynamicThemeMode"))}):"",p[0].dynamicThemeFont?o.a.createElement(hn,{lookerContent:p,classes:t,type:h,fontThemeSelectValue:d,handleThemeChange:m,horizontalLayout:u,key:bn("".concat(h,"-dynamicThemeFont"))}):"")}var gn=n(42).validIdHelper;function yn(e){e.staticContent;var t=e.staticContent.lookerContent,n=e.staticContent.type,r=e.classes,i=e.apiContent,l=e.customFilterAction,s=e.tileToggleValue,c=e.handleTileToggle,d=e.visColorToggleValue,u=e.handleVisColorToggle,p=e.lightThemeToggleValue,h=e.fontThemeSelectValue,b=e.handleThemeChange,f=e.horizontalLayout,g=e.setHorizontalLayout,y=e.drawerOpen,v=e.setDrawerOpen,C=Object(a.useState)(!0),k=Object(m.a)(C,2),_=k[0],w=k[1];return Object(a.useEffect)((function(){_||w(!0)}),[f]),o.a.createElement(B.a,{item:!0,sm:f?12:y?3:"auto",key:gn("".concat(n,"-FilterBar-").concat(t[0].id))},i?o.a.createElement(Nt.a,{onChange:f?function(){return w(!_)}:function(){},expanded:_,className:"".concat(r.w100," MuiExpansionPanel-root"),elevation:0},o.a.createElement(Ht.a,{expandIcon:f?o.a.createElement(Dt.a,null):"","aria-controls":"panel1a-content",id:"panel1a-header"},f?o.a.createElement(At.a,{onClick:function(e){g(!f)},"aria-label":"vertical view"}):o.a.createElement(o.a.Fragment,null,y?o.a.createElement(o.a.Fragment,null,o.a.createElement(ne.a,{onClick:function(){return v(!y)},"aria-label":"close menu"}),o.a.createElement(Pt.a,{onClick:function(e){w(!0),g(!f)},"aria-label":"horizontal view"})):o.a.createElement(ae.a,{onClick:function(){return v(!y)},"aria-label":"open menu"}))),o.a.createElement(Qe.a,{display:y?"block":"none"},o.a.createElement(Ft.a,null,o.a.createElement(fn,Object.assign({},e,{classes:r,apiContent:i,customFilterAction:l,tileToggleValue:s,handleTileToggle:c,visColorToggleValue:d,handleVisColorToggle:u,lightThemeToggleValue:p,fontThemeSelectValue:h,handleThemeChange:b,horizontalLayout:f,setHorizontalLayout:g,lookerContent:t,type:n}))))):o.a.createElement(Bt.a,{variant:"rect",animation:"wave",className:r.skeleton}))}function vn(e){var t=e.classes,n=e.height,a=e.expansionPanelHeight;return o.a.createElement(B.a,{item:!0,sm:12,style:{height:n-30-a}},o.a.createElement(L.a,{className:"".concat(t.card," ").concat(t.flexCentered),elevation:0,mt:2,style:{height:n-30-a}},o.a.createElement(qe.a,{className:t.circularProgress})))}var Cn=n(42).validIdHelper;function kn(e){var t=e.classes,n=e.lookerContent,a=e.type,r=e.width;return o.a.createElement(B.a,{item:!0,sm:r},o.a.createElement(Qe.a,{className:"".concat(t.w100," ").concat(t.padding10),mt:n[0].filter||n[0].dynamicFieldLookUp?2:0},o.a.createElement(dt,{classes:t},o.a.createElement("div",{className:"embedContainer ".concat(Cn(a)),id:Cn("embedContainer-".concat(a,"-").concat(n[0].id)),key:Cn("embedContainer-".concat(a,"-").concat(n[0].id))}))))}var _n=n(42).validIdHelper;function wn(e){var t=e.staticContent.lookerContent,n=e.staticContent.type,r=Object(a.useContext)(h),i=r.clientSession,l=r.codeShow,s=r.sdk,u=r.corsApiCall,p=r.atomTheme,f=r.isReady,g=r.selectedMenuItem,y=i.lookerUser,v=(i.lookerHost,n||"code flyout"),C=Object(a.useState)(0),k=Object(m.a)(C,2),_=(k[0],k[1],Object(a.useState)(0)),w=Object(m.a)(_,2),x=w[0],E=w[1],O=Object(a.useState)(void 0),S=Object(m.a)(O,2),T=S[0],I=S[1],N=Object(a.useState)({}),F=Object(m.a)(N,2),D=F[0],A=F[1],P=Object(a.useState)({}),R=Object(m.a)(P,2),U=R[0],M=R[1],$=Object(a.useState)(window.innerHeight-112),z=Object(m.a)($,2),V=z[0],G=z[1],K=Object(a.useState)(""),Y=Object(m.a)(K,2),J=Y[0],X=Y[1],Z=Object(a.useState)("#2d4266"),ee=Object(m.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(!0),oe=Object(m.a)(ae,2),ie=oe[0],le=oe[1],se=Object(a.useState)("arial"),ce=Object(m.a)(se,2),de=ce[0],me=ce[1],ue=Object(a.useState)(0),pe=Object(m.a)(ue,2),he=pe[0],be=pe[1],fe=Object(a.useState)(!1),ge=Object(m.a)(fe,2),ye=ge[0],ve=ge[1],Ce=Object(a.useState)(!0),ke=Object(m.a)(Ce,2),_e=ke[0],we=ke[1],xe="customfilter1"===_n("".concat(v).concat(t[0].id)),Ee=It(),Oe=!ie&&xe?{palette:{type:"dark",background:{paper:"#343D4E",default:"#343D4E"}}}:{palette:Object(b.a)({},p.palette)},Se=o.a.useMemo((function(){return Object(re.a)(Oe)}),[ie,t]),je=function(e,n){X(n);var a=j.a.filter(U.layouts[0].dashboard_layout_components,(function(e){return t[0].dynamicFieldLookUp[n].indexOf(U.elements[e.dashboard_element_id].title)>-1})),o=Object(b.a)(Object(b.a)({},U.layouts[0]),{},{dashboard_layout_components:a});D.setOptions({layouts:[o]})},Te=function(e,n){var a=t[0].dynamicVisConfig.colors[n],o=Object(b.a)({},U.elements);Object.keys(o).map((function(e){o[e].vis_config.series_colors&&Object.keys(o[e].vis_config.series_colors).map((function(t,n){o[e].vis_config.series_colors[t]=a[n]||a[0]})),o[e].vis_config.custom_color&&(o[e].vis_config.custom_color=a[a.length-2]),o[e].vis_config.map_value_colors&&o[e].vis_config.map_value_colors.map((function(t,n){o[e].vis_config.map_value_colors[n]=a[n]||a[0]})),o[e].vis_config.series_cell_visualizations&&Object.keys(o[e].vis_config.series_cell_visualizations).map((function(a,r){o[e].vis_config.series_cell_visualizations[a].hasOwnProperty("palette")&&(o[e].vis_config.series_cell_visualizations[a].palette=Object(b.a)({},t[0].dynamicVisConfig.series_cell_visualizations[n]))})),o[e].vis_config.header_font_color&&(o[e].vis_config.header_font_color=a[a.length-2]),xe&&o[e].vis_config.map_tile_provider&&(o[e].vis_config.map_tile_provider=ie?"light":"dark")})),ne(n),D.setOptions({elements:Object(b.a)({},o)})};Object(a.useEffect)((function(){if(f){var e=ie?"light":"dark";e+="_".concat(de),u(Ie,[Object(q.a)(t),e]),I(void 0),ve(!1),we(!0)}}),[y,f,g]),Object(a.useEffect)((function(){Object.keys(U).length&&Object.keys(D).length&&t[0].dynamicFieldLookUp&&(je(0,J||"Inventory"),Te(0,te||"#2d4266"))}),[U]),Object(a.useEffect)((function(){window.addEventListener("resize",(function(){return G(window.innerHeight-112)})),be(ye&&Ot()(".MuiExpansionPanel-root:visible").innerHeight()||0)})),Object(a.useEffect)((function(){G(window.innerHeight-112),be(ye&&Ot()(".MuiExpansionPanel-root:visible").innerHeight()||0)}),[ye]),Object(a.useEffect)((function(){I(void 0)}),[]);var Ie=function(e,t){E(0),Ot()(".embedContainer.".concat(_n(v),":visible")).html(""),e.map(function(){var e=Object(d.a)(c.a.mark((function e(n){var a,o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.id,o=t&&xe?t:n.theme?n.theme:"atom_fashion",Q.LookerEmbedSDK.createDashboardWithId(a).appendTo(_n("#embedContainer-".concat(v,"-").concat(a))).withClassName("iframe").withNext().withTheme(o).withParams({schedule_modal:"true"}).on("page:property:change",(function(e){Ne(e)})).on("dashboard:loaded",(function(e){M(e.dashboard.options)})).build().connect().then((function(e){E(1),A(e),Q.LookerEmbedSDK.init("".concat(i.lookerBaseUrl))})).catch((function(e){})),n.hasOwnProperty("filters")&&(r=[],n.filters.map(function(){var e=Object(d.a)(c.a.mark((function e(t,a){var o,i,l,d,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.inlineQueries[a]){e.next=10;break}return(o=n.inlineQueries[a]).filters=Object(b.a)(Object(b.a)({},o.filters),{},Object(H.a)({},t.desiredFilterName,y.user_attributes.brand)),e.next=5,s.ok(s.run_inline_query({result_format:n.result_format||"json",body:o}));case 5:for(i=e.sent,l=[],d=Object.keys(i[0])[0],m=0;m<i.length;m++)l.push({label:i[m][d],trend:i[m].trend?i[m].trend:void 0});r[a]=l;case 10:I([].concat(r));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},Ne=function(e){};return o.a.createElement("div",{className:"".concat(Ee.root," demoComponent"),style:{height:V}},o.a.createElement(W.a,{theme:Se},o.a.createElement(L.a,{elevation:1,className:"".concat(Ee.padding30," ").concat(Ee.height100Percent)},o.a.createElement("div",{className:"".concat(Ee.root," ").concat(Ee.height100Percent)},o.a.createElement(B.a,{container:!0,spacing:3},t[0].hasOwnProperty("filters")?o.a.createElement(yn,Object.assign({},e,{classes:Ee,apiContent:T,customFilterAction:function(e,t,n){Object.keys(D).length&&(D.updateFilters(Object(H.a)({},t,n)),D.run())},tileToggleValue:J,handleTileToggle:je,visColorToggleValue:te,handleVisColorToggle:Te,lightThemeToggleValue:ie,fontThemeSelectValue:de,handleThemeChange:function(e,n){var a="";"boolean"===typeof n?(le(n),a=n?"light_".concat(de):"dark_".concat(de)):(a=ie?"light_".concat(n):"dark_".concat(n),me(n)),u(Ie,[t,a])},horizontalLayout:ye,setHorizontalLayout:ve,drawerOpen:_e,setDrawerOpen:we})):"",x?"":o.a.createElement(vn,{classes:Ee,height:V,expansionPanelHeight:he}),o.a.createElement(kn,{classes:Ee,lookerContent:t,type:v,width:t[0].hasOwnProperty("filters")?ye?12:_e?9:12:12}),l?o.a.createElement(B.a,{item:!0,sm:6,className:"".concat(Ee.positionFixedTopRight)},o.a.createElement(Xe,Object.assign({},e,{classes:Ee,lookerUser:y,height:V}))):"")))))}var xn=n(1556),En=n(1557),On=n(1559),Sn=n(1558),jn=n(1551),Tn=n(1555),In=n(1554),Nn=n(1550),Hn=n(1552),Fn=n(1553),Dn=n(298),An=n(42),Pn=An.validIdHelper,Bn=An.prettifyString,Ln=Object(F.a)((function(e){return{paper:{position:"absolute",width:800,maxHeight:450,overflow:"scroll",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},table:{maxHeight:310},card:{minWidth:275,minHeight:"10rem",boxShadow:"none"},flexCentered:{display:"flex",justifyContent:"center",alignItems:"center"}}}));function Rn(){return{top:"".concat(10,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(10,"%)")}}function Un(e){var t=Ln(),n=e.open,a=e.onClose,r=e.modalContent,i=o.a.useState(Rn),l=Object(m.a)(i,1)[0];return o.a.createElement(Le.a,{open:n,onClose:a,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},o.a.createElement("div",{style:l,className:t.paper},o.a.createElement("h2",{id:"simple-modal-title"},r.title),r.body?o.a.createElement(Nn.a,{component:Dn.a,className:t.table},o.a.createElement(jn.a,{stickyHeader:!0,className:t.table,size:"small","aria-label":"a dense table"},o.a.createElement(Hn.a,null,o.a.createElement(Fn.a,null,Object.keys(r.body[0]).map((function(e,t){return o.a.createElement(In.a,{align:"right",key:Pn(e+"-TableHead-TableCell-"+t),id:Pn(e+"-TableHead-TableCell-"+t)},Bn(e.substring(e.lastIndexOf(".")+1,e.length)))})))),o.a.createElement(Tn.a,null,r.body.map((function(e,t){return o.a.createElement(Fn.a,{key:Pn("TableRow-"+t),id:Pn("TableRow-"+t)},Object.keys(e).map((function(e){return o.a.createElement(In.a,{align:"right",key:Pn(e+"-TableBody-TableCell-"+t),id:Pn(e+"-TableBody-TableCell-"+t)},r.body[t][e]?r.body[t][e].rendered?r.body[t][e].rendered:r.body[t][e].value?r.body[t][e].value:"number"===typeof r.body[t][e]?Math.round(100*r.body[t][e])/100:r.body[t][e]:"")})))}))))):o.a.createElement(L.a,{className:"".concat(t.card," ").concat(t.flexCentered)},o.a.createElement(qe.a,{className:t.circularProgress}))))}var Mn=n(610),$n=Object(F.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,overflow:"scroll",borderRadius:"8px"},flexCentered:{display:"flex",justifyContent:"center",alignItems:"center"},hidden:{visibility:"hidden",zIndex:-1},tabs:{backgroundColor:"white",color:"#6c757d"},dNone:{display:"none"},dBlock:{display:"block"},tree:{height:240,flexGrow:1,maxWidth:400},icon:{marginRight:12,fontSize:"1rem",overflow:"visible"},mt12:{marginTop:12},w100:{width:"100%"},mlAuto:{marginLeft:"auto"},card:{minWidth:275,minHeight:400},height500:{height:500},height600:{height:600},height700:{height:700},height800:{height:800},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)},skeleton:{height:160,width:"100%"},padding30:{padding:30},positionTopRight:{position:"absolute",top:-30,right:-50,bottom:0,zIndex:100},positionRelative:{position:"relative"},height100Percent:{height:"100%"},ml12:{marginLeft:12},padding20:{padding:20},positionFixedTopRight:{position:"fixed",top:88,right:24,bottom:0,zIndex:100},codeFlyoutContainer:{backgroundColor:"rgb(40, 42, 54)",overflow:"scroll",borderRadius:"0 8px 8px 0"},padding10:{padding:10},overflowScroll:{overflow:"scroll"},noContainerScroll:{width:"100%",margin:0}}})),zn=n(616),Vn=n(402),Gn=n(403),qn=n(64),Qn=n(1567),Wn=n(42).validIdHelper;function Kn(e){var t=Object(a.useContext)(h),n=t.clientSession,r=t.setPaywallModal,i=(t.show,t.codeShow),l=t.sdk,s=t.corsApiCall,u=t.isReady,p=(n.userProfile,n.lookerUser),f=(n.lookerHost,Object(a.useState)(0)),g=Object(m.a)(f,2),y=(g[0],g[1],Object(a.useState)("")),v=Object(m.a)(y,2),C=v[0],k=v[1],_=Object(a.useState)(""),w=Object(m.a)(_,2),x=w[0],E=w[1],O=Object(a.useState)("All"),S=Object(m.a)(O,2),T=S[0],I=S[1],N=Object(a.useState)(""),F=Object(m.a)(N,2),D=F[0],A=F[1],P=Object(a.useState)(void 0),R=Object(m.a)(P,2),U=R[0],M=R[1],$=o.a.useState(!1),z=Object(m.a)($,2),V=z[0],G=z[1],Q=Object(a.useState)({}),W=Object(m.a)(Q,2),K=W[0],Y=W[1],J=Object(a.useState)(""),X=Object(m.a)(J,2),Z=(X[0],X[1]),ee=Object(a.useState)(window.innerHeight-112),te=Object(m.a)(ee,2),ne=te[0],ae=te[1],oe=Object(a.useState)(0),re=Object(m.a)(oe,2),ie=re[0],le=re[1],se=$n(),ce=(e.staticContent,e.staticContent.lookerContent),de=e.staticContent.type,ue=(e.activeTabValue,e.handleTabChange,function(){var e=Object(d.a)(c.a.mark((function e(t){var n,a,o,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.day,(o=JSON.parse(JSON.stringify(ce[0].inlineQuery))).filters=Object(b.a)(Object(b.a)({},o.filters),{},(n={},Object(H.a)(n,o.fields[0],a),Object(H.a)(n,o.fields[1],"All"===T?"":T),n)),o.total=!0,o.limit="25",G(!0),e.next=8,l.ok(l.run_inline_query({result_format:ce.result_format||"json",body:o}));case 8:r=e.sent,i={title:"Detail View for ".concat(a),body:r},Y(i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),pe=[];if(U&&(pe=(pe=j.a.filter(U,(function(e){return e[U.inlineQuery.fields[0]]>=C&&e[U.inlineQuery.fields[0]]<x&&("All"===T||e[U.inlineQuery.fields[1]]===T)}))).map((function(e){return{day:e[U.inlineQuery.fields[0]],category:e[U.inlineQuery.fields[1]],value:e[D]}})),"All"===T)){var he=Object(q.a)(new Set(pe.map((function(e){return e.day})))),be=[];he.map((function(e){var t=j.a.filter(pe,(function(t){return t.day===e})).reduce((function(e,t){return e+t.value}),0),n={day:e,value:t,category:"All"};be.push(n)})),pe=be}Object(a.useEffect)((function(){u&&(s(fe,[ce]),A(ce[0].desiredFields[0]),Z("import $ from 'jquery';\nimport _ from 'lodash'\nimport React, { useState, useEffect, useContext } from 'react';\nimport {\n  AppBar, Tabs, Tab, Typography, Box, Grid, CircularProgress, Card, TextField,\n  ExpansionPanel, ExpansionPanelSummary, ExpansionPanelDetails, Divider, InputLabel, MenuItem,\n  FormControl, Select, Modal\n} from '@material-ui/core'\nimport { Skeleton } from '@material-ui/lab';\nimport { ExpandMore, FilterList } from '@material-ui/icons';\nimport ModalTable from '../../Material/ModalTable';\nimport { ResponsiveCalendar } from '@nivo/calendar'\nimport CodeFlyout from '../CodeFlyout';\nimport rawSampleCode from '!!raw-loader!./CustomVis.js'; // eslint-disable-line import/no-webpack-loader-syntax\nimport useStyles from './styles.js';\nimport { ApiHighlight } from '../../Highlights/Highlight';\nimport { format, endOfDay, addDays } from 'date-fns';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { MuiPickersUtilsProvider, KeyboardTimePicker, KeyboardDatePicker } from '@material-ui/pickers';\nimport AppContext from '../../../contexts/AppContext';\nimport { Loader } from '../../Accessories/Loader';\n\n\nconst { validIdHelper } = require('../../../tools');\n\nexport default function CustomVis(props) {\n  // console.log('CustomVis')\n  const { clientSession, setPaywallModal, show, codeShow, sdk, corsApiCall, isReady } = useContext(AppContext)\n  const { userProfile, lookerUser, lookerHost } = clientSession\n\n  const topBarBottomBarHeight = 112;\n  const [value, setValue] = useState(0);\n  const [fromDate, setFromDate] = useState('');\n  const [toDate, setToDate] = useState('');\n  const [category, setCategory] = useState('All')\n  const [desiredField, setDesiredField] = useState('')\n  const [apiContent, setApiContent] = useState(undefined);\n  const [open, setOpen] = React.useState(false);\n  const [modalContent, setModalContent] = useState({});\n  const [clientSideCode, setClientSideCode] = useState('');\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\n  const [expansionPanelHeight, setExpansionPanelHeight] = useState(0);\n\n\n\n  //declare constants\n  const classes = useStyles();\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, activeTabValue, handleTabChange,\n    //lookerUser, lookerHost \n  } = props;\n\n  //handle opening of modal for advanced and premium users\n  const handleModalOpen = async ({ day }) => {\n    let originalInlineQueryCopy = JSON.parse(JSON.stringify(lookerContent[0].inlineQuery));\n    originalInlineQueryCopy.filters = {\n      ...originalInlineQueryCopy.filters,\n      [originalInlineQueryCopy.fields[0]]: day,\n      [originalInlineQueryCopy.fields[1]]: category === \"All\" ? '' : category\n    }\n    originalInlineQueryCopy.total = true;\n    originalInlineQueryCopy.limit = \"25\";\n\n    setOpen(true);\n    let lookerResponseData = await sdk.ok(sdk.run_inline_query({ result_format: lookerContent.result_format || 'json', body: originalInlineQueryCopy }));\n    let modalObj = {\n      \"title\": `Detail View for ${day}`,\n      \"body\": lookerResponseData\n    }\n    setModalContent(modalObj);\n  };\n\n  //handle modal close\n  const handleModalClose = () => {\n    setModalContent({})\n    setOpen(false);\n  };\n\n  //handle tab change\n  const handleChange = (event, newValue) => {\n    handleTabChange(0);\n    setValue(newValue);\n  };\n\n  const handleFromDate = newValue => {\n    let validDate = Date.parse(newValue);\n    if (validDate > 0) {\n      let newValueAsDate = format(addDays(new Date(newValue), 1), 'yyyy-MM-dd');\n      setFromDate(newValueAsDate);\n    }\n  }\n  const handleToDate = newValue => {\n    let validDate = Date.parse(newValue);\n    if (validDate > 0) {\n      let newValueAsDate = format(addDays(new Date(newValue), 1), 'yyyy-MM-dd');\n      setToDate(newValueAsDate);\n    }\n  }\n\n  const handleCategory = newValue => {\n    setCategory(newValue)\n  }\n\n  const handleDesiredField = newValue => {\n    setDesiredField(newValue)\n  }\n\n  //format response from initial api call based on LookerContent array\n  //to match format required by Nivo Calendar component\n  let filterData = [];\n  if (apiContent) {\n    //filtering for fromDate, toDate and category\n    filterData = _.filter(apiContent, (row) => {\n      return (row[apiContent.inlineQuery.fields[0]] >= fromDate\n        && row[apiContent.inlineQuery.fields[0]] < toDate\n        && (category === 'All' ? true : row[apiContent.inlineQuery.fields[1]] === category)\n      )\n    })\n    //converting filterDAta to desired format for vis\n    filterData = filterData.map(item => {\n      return {\n        'day': item[apiContent.inlineQuery.fields[0]],\n        'category': item[apiContent.inlineQuery.fields[1]],\n        'value': item[desiredField]\n      }\n    })\n\n    //special exception for category all\n    //need to reduce array by day across categories\n    //destructuing in reduce of value would not work for dynamic var\n    if (category === 'All') {\n      //create array of all unique dates\n      const uniqueDates = [...new Set(filterData.map(item => item.day))];\n      let filteredAndReducedForAll = []\n      //iterate over unique date\n      uniqueDates.map(uniqueDate => {\n        //filter filterData for current unique date\n        let value = _.filter(filterData, row => {\n          return row.day === uniqueDate\n        }).reduce((acc, { value }) => acc + value, 0)\n        let thisObj = {\n          day: uniqueDate,\n          value: value,\n          category: 'All'\n        }\n        filteredAndReducedForAll.push(thisObj)\n\n      })\n      filterData = filteredAndReducedForAll;\n    }\n  }\n\n  useEffect(() => {\n    if (isReady) {\n      corsApiCall(performLookerApiCalls, [lookerContent])\n      setDesiredField(lookerContent[0].desiredFields[0])\n      setClientSideCode(rawSampleCode)\n    }\n  }, [lookerUser, isReady])\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", () => setHeight((window.innerHeight - topBarBottomBarHeight)));\n    setExpansionPanelHeight($('.MuiExpansionPanel-root:visible').innerHeight() || 0)\n\n  })\n\n  const performLookerApiCalls = function (lookerContent) {\n    // console.log('performLookerApiCalls')\n    // console.log({ lookerContent })\n\n    setApiContent(undefined); //set to empty array to show progress bar and skeleton\n    lookerContent.map(async lookerContent => {\n      let { inlineQuery } = lookerContent;\n      inlineQuery.filters = {\n        [lookerContent.desiredFilterName]: lookerUser.user_attributes.brand\n      };\n      let lookerResponseData = await sdk.ok(sdk.run_inline_query({ result_format: lookerContent.result_format || 'json', body: inlineQuery }));\n\n      // console.log('lookerResponseData', lookerResponseData)\n      lookerResponseData = lookerResponseData.filter(item => {\n        return item[inlineQuery.fields[0]]\n      })\n      let uniqueCategories = ['All'];\n      for (let i = 0; i < lookerResponseData.length; i++) {\n        if (uniqueCategories.indexOf(lookerResponseData[i][inlineQuery.fields[1]]) === -1) {\n          uniqueCategories.push(lookerResponseData[i][inlineQuery.fields[1]])\n        }\n      }\n      lookerResponseData.inlineQuery = inlineQuery;\n      lookerResponseData.uniqueCategories = uniqueCategories;\n      setFromDate(lookerResponseData[lookerResponseData.length - 1][lookerResponseData.inlineQuery.fields[0]]);\n      setToDate(incrementDate(lookerResponseData[0][lookerResponseData.inlineQuery.fields[0]], 1));\n      setApiContent(lookerResponseData)\n    })\n  }\n\n  let nivoColorScale = ['#61cdbb', '#97e3d5', '#e8c1a0', '#f47560']\n  let googleColorScale = ['#4595EC', '#F3A759', '#E24E3A', '#65AB5A'];\n\n  return (\n    <div className={`${classes.root} demoComponent`}\n      style={{ height }}>\n      <Card elevation={1} className={`\n      ${classes.padding30} \n      ${classes.height100Percent}\n      ${classes.overflowScroll}`\n      }\n      >\n        <Grid container\n          key={validIdHelper(type)} >\n          <div className={`${classes.root} `}>\n\n            {!apiContent ?\n              <Skeleton variant=\"rect\" animation=\"wave\" className={classes.skeleton} />\n              :\n              <FilterBar {...props}\n                classes={classes}\n                apiContent={apiContent}\n                fromDate={fromDate}\n                toDate={toDate}\n                category={category}\n                desiredField={desiredField}\n                handleFromDate={handleFromDate}\n                handleToDate={handleToDate}\n                handleCategory={handleCategory}\n                handleDesiredField={handleDesiredField}\n              />\n            }\n\n\n            {!apiContent ?\n\n              <Loader classes={classes}\n                height={height}\n                expansionPanelHeight={expansionPanelHeight} />\n\n              : apiContent && apiContent.length ?\n                <Box>\n                  <Grid container\n                    spacing={3}\n                    className={`${classes.noContainerScroll}`}>\n                    {codeShow ?\n                      <Grid item sm={6}\n                        className={`${classes.positionFixedTopRight}`}\n                      >\n                        <CodeFlyout {...props}\n                          classes={classes}\n                          lookerUser={lookerUser}\n                          height={height}\n                        />\n                      </Grid> : ''}\n                    <Divider className={classes.divider} />\n                    <Grid item sm={12} >\n\n                      <Box className={`${classes.w100} ${classes.padding10}`} mt={2}>\n\n                        <ApiHighlight height={400} classes={classes}>\n                          <ResponsiveCalendar\n                            data={filterData}\n                            align=\"top\"\n                            from={incrementDate(fromDate, 1)}\n                            to={incrementDate(toDate, 1)}\n                            emptyColor=\"#eeeeee\"\n                            colors={desiredField === lookerContent[0].desiredFields[0] ? googleColorScale : nivoColorScale}\n                            yearSpacing={40}\n                            monthBorderColor=\"#ffffff\"\n                            dayBorderWidth={2}\n                            dayBorderColor=\"#ffffff\"\n                            margin={{ bottom: 40, left: 40 }}\n                            legends={[\n                              {\n                                anchor: 'bottom-right',\n                                direction: 'row',\n                                translateY: 36,\n                                itemCount: 4,\n                                itemWidth: 42,\n                                itemHeight: 36,\n                                itemsSpacing: 14,\n                                itemDirection: 'right-to-left'\n                              }\n                            ]}\n                            onClick={(day, event) => {\n                              if (!day.value) {\n                              } else if (lookerUser.user_attributes.permission_level === 'basic') {\n                                setPaywallModal({\n                                  'show': true,\n                                  'permissionNeeded': 'see_drill_overlay'\n                                });\n                              } else {\n                                corsApiCall(handleModalOpen, [day])\n                                event.stopPropagation();\n                              }\n                            }}\n                          />\n                        </ApiHighlight>\n                      </Box>\n                    </Grid>\n                  </Grid>\n                </Box> :\n                ''\n            }\n          </div>\n        </Grid >\n        {\n          open ?\n            <ModalTable\n              {...props}\n              open={open}\n              onClose={handleModalClose}\n              classes={classes}\n              modalContent={modalContent}\n            />\n\n            : ''\n        }\n      </Card>\n    </div >\n  )\n}\n//Filter Bar code\nfunction FilterBar(props) {\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, classes,\n    apiContent, fromDate, toDate, category, desiredField, handleFromDate, handleToDate, handleCategory, handleDesiredField } = props;\n\n  const [expanded, setExpanded] = useState(true);\n\n  const handleExpansionPanel = (event, newValue) => {\n    setExpanded(expanded ? false : true);\n  };\n\n  // console.log('FilterBar')\n  // console.log('fromDate', fromDate)\n  // console.log('toDate', toDate)\n\n  return (\n    <ExpansionPanel expanded={expanded} onChange={handleExpansionPanel} className={classes.w100} elevation={0}>\n      <ExpansionPanelSummary\n        expandIcon={<ExpandMore />}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <FilterList /><Typography className={`${classes.heading} ${classes.ml12}`}>Filter:</Typography>\n\n      </ExpansionPanelSummary>\n      <ExpansionPanelDetails>\n        <Grid container spacing={3}>\n          {apiContent ?\n            <>\n              <Grid item sm={3}>\n\n                <ApiHighlight classes={classes}>\n                  <FormControl className={classes.formControl}>\n                    <InputLabel\n                      id={`${validIdHelper(type + '-FilterBar-DataPropery-SelectLabel')}`}\n                    >\n                      Metric</InputLabel>\n                    <Select\n                      labelId={`${validIdHelper(type + '-FilterBar-DataPropery-SelectLabel')}`}\n                      id={`${validIdHelper(type + '-FilterBar-DataPropery-Select')}`}\n                      value={desiredField}\n                      onChange={(event) => handleDesiredField(event.target.value)}\n                    >\n                      {lookerContent[0].desiredFields.map((item, index) => (\n\n                        <MenuItem\n                          id={validIdHelper(`${item}-${index}`)}\n                          key={validIdHelper(`${item}-${index}`)}\n                          value={item}\n                        >{item.substring(item.lastIndexOf(\".\") + 1, item.length).split(\"_\").map(item => item.charAt(0).toUpperCase() + item.substring(1)).join(\" \")}</MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </ApiHighlight>\n              </Grid>\n              <Grid item sm={3}>\n                <ApiHighlight classes={classes}>\n                  <FormControl className={classes.formControl}>\n                    <InputLabel\n                      id={`${validIdHelper(type + '-FilterBar-Category-SelectLabel')}`}\n                    >\n                      Category</InputLabel>\n                    <Select\n                      labelId={`${validIdHelper(type + '-FilterBar-Category-SelectLabel')}`}\n                      id={`${validIdHelper(type + '-FilterBar-Category-Select')}`}\n                      value={category}\n                      onChange={(event) => handleCategory(event.target.value)}\n                    >\n                      {apiContent.uniqueCategories.map((item, index) => (\n\n                        <MenuItem\n                          id={validIdHelper(`${item}-${index}`)}\n                          key={validIdHelper(`${item}-${index}`)}\n                          value={item}>{item}</MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </ApiHighlight>\n              </Grid>\n\n              <Grid item sm={3}>\n\n                <ApiHighlight classes={classes}>\n                  <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                    <KeyboardDatePicker\n                      disableToolbar\n                      variant=\"inline\"\n                      format=\"MM/dd/yyyy\"\n                      margin=\"normal\"\n                      id=\"fromDate\"\n                      label=\"From date\"\n                      value={fromDate}\n                      onChange={handleFromDate}\n                      KeyboardButtonProps={{\n                        'aria-label': 'change date',\n                      }}\n                      minDate={apiContent[apiContent.length - 1][apiContent.inlineQuery.fields[0]]}\n                      maxDate={apiContent[0][apiContent.inlineQuery.fields[0]]}\n                    />\n                  </MuiPickersUtilsProvider>\n                </ApiHighlight>\n              </Grid>\n              <Grid item sm={3}>\n                <ApiHighlight classes={classes}>\n                  <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                    <KeyboardDatePicker\n                      disableToolbar\n                      variant=\"inline\"\n                      format=\"MM/dd/yyyy\"\n                      margin=\"normal\"\n                      id=\"toDate\"\n                      label=\"To date\"\n                      value={toDate}\n                      onChange={handleToDate}\n                      KeyboardButtonProps={{\n                        'aria-label': 'change date',\n                      }}\n                      minDate={fromDate}\n                      maxDate={toDate}\n                    />\n                  </MuiPickersUtilsProvider>\n                </ApiHighlight>\n              </Grid>\n            </>\n            : ''}\n        </Grid>\n      </ExpansionPanelDetails>\n    </ExpansionPanel >\n  )\n}\n\nfunction incrementDate(dateInput, increment) {\n  var dateFormatTotime = new Date(dateInput);\n  var increasedDate = new Date(dateFormatTotime.getTime() + (increment * 86400000));\n  return increasedDate.toISOString().split('T')[0];\n}"))}),[p,u]),Object(a.useEffect)((function(){window.addEventListener("resize",(function(){return ae(window.innerHeight-112)})),le(Ot()(".MuiExpansionPanel-root:visible").innerHeight()||0)}));var fe=function(e){M(void 0),e.map(function(){var e=Object(d.a)(c.a.mark((function e(t){var n,a,o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.inlineQuery).filters=Object(H.a)({},t.desiredFilterName,p.user_attributes.brand),e.next=4,l.ok(l.run_inline_query({result_format:t.result_format||"json",body:n}));case 4:for(a=(a=e.sent).filter((function(e){return e[n.fields[0]]})),o=["All"],r=0;r<a.length;r++)-1===o.indexOf(a[r][n.fields[1]])&&o.push(a[r][n.fields[1]]);a.inlineQuery=n,a.uniqueCategories=o,k(a[a.length-1][a.inlineQuery.fields[0]]),E(Jn(a[0][a.inlineQuery.fields[0]],1)),M(a);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};return o.a.createElement("div",{className:"".concat(se.root," demoComponent"),style:{height:ne}},o.a.createElement(L.a,{elevation:1,className:"\n      ".concat(se.padding30," \n      ").concat(se.height100Percent,"\n      ").concat(se.overflowScroll)},o.a.createElement(B.a,{container:!0,key:Wn(de)},o.a.createElement("div",{className:"".concat(se.root," ")},U?o.a.createElement(Yn,Object.assign({},e,{classes:se,apiContent:U,fromDate:C,toDate:x,category:T,desiredField:D,handleFromDate:function(e){if(Date.parse(e)>0){var t=Object(zn.a)(Object(Vn.a)(new Date(e),1),"yyyy-MM-dd");k(t)}},handleToDate:function(e){if(Date.parse(e)>0){var t=Object(zn.a)(Object(Vn.a)(new Date(e),1),"yyyy-MM-dd");E(t)}},handleCategory:function(e){I(e)},handleDesiredField:function(e){A(e)}})):o.a.createElement(Bt.a,{variant:"rect",animation:"wave",className:se.skeleton}),U?U&&U.length?o.a.createElement(Qe.a,null,o.a.createElement(B.a,{container:!0,spacing:3,className:"".concat(se.noContainerScroll)},i?o.a.createElement(B.a,{item:!0,sm:6,className:"".concat(se.positionFixedTopRight)},o.a.createElement(Xe,Object.assign({},e,{classes:se,lookerUser:p,height:ne}))):"",o.a.createElement(me.a,{className:se.divider}),o.a.createElement(B.a,{item:!0,sm:12},o.a.createElement(Qe.a,{className:"".concat(se.w100," ").concat(se.padding10),mt:2},o.a.createElement(ct,{height:400,classes:se},o.a.createElement(Mn.a,{data:pe,align:"top",from:Jn(C,1),to:Jn(x,1),emptyColor:"#eeeeee",colors:D===ce[0].desiredFields[0]?["#4595EC","#F3A759","#E24E3A","#65AB5A"]:["#61cdbb","#97e3d5","#e8c1a0","#f47560"],yearSpacing:40,monthBorderColor:"#ffffff",dayBorderWidth:2,dayBorderColor:"#ffffff",margin:{bottom:40,left:40},legends:[{anchor:"bottom-right",direction:"row",translateY:36,itemCount:4,itemWidth:42,itemHeight:36,itemsSpacing:14,itemDirection:"right-to-left"}],onClick:function(e,t){e.value&&("basic"===p.user_attributes.permission_level?r({show:!0,permissionNeeded:"see_drill_overlay"}):(s(ue,[e]),t.stopPropagation()))}})))))):"":o.a.createElement(vn,{classes:se,height:ne,expansionPanelHeight:ie}))),V?o.a.createElement(Un,Object.assign({},e,{open:V,onClose:function(){Y({}),G(!1)},classes:se,modalContent:K})):""))}function Yn(e){e.staticContent;var t=e.staticContent.lookerContent,n=e.staticContent.type,r=e.classes,i=e.apiContent,l=e.fromDate,s=e.toDate,c=e.category,d=e.desiredField,u=e.handleFromDate,p=e.handleToDate,h=e.handleCategory,b=e.handleDesiredField,f=Object(a.useState)(!0),g=Object(m.a)(f,2),y=g[0],v=g[1];return o.a.createElement(xn.a,{expanded:y,onChange:function(e,t){v(!y)},className:r.w100,elevation:0},o.a.createElement(En.a,{expandIcon:o.a.createElement(Dt.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},o.a.createElement(Sn.a,null),o.a.createElement(U.a,{className:"".concat(r.heading," ").concat(r.ml12)},"Filter:")),o.a.createElement(On.a,null,o.a.createElement(B.a,{container:!0,spacing:3},i?o.a.createElement(o.a.Fragment,null,o.a.createElement(B.a,{item:!0,sm:3},o.a.createElement(ct,{classes:r},o.a.createElement(mn.a,{className:r.formControl},o.a.createElement(un.a,{id:"".concat(Wn(n+"-FilterBar-DataPropery-SelectLabel"))},"Metric"),o.a.createElement(pn.a,{labelId:"".concat(Wn(n+"-FilterBar-DataPropery-SelectLabel")),id:"".concat(Wn(n+"-FilterBar-DataPropery-Select")),value:d,onChange:function(e){return b(e.target.value)}},t[0].desiredFields.map((function(e,t){return o.a.createElement(de.a,{id:Wn("".concat(e,"-").concat(t)),key:Wn("".concat(e,"-").concat(t)),value:e},e.substring(e.lastIndexOf(".")+1,e.length).split("_").map((function(e){return e.charAt(0).toUpperCase()+e.substring(1)})).join(" "))})))))),o.a.createElement(B.a,{item:!0,sm:3},o.a.createElement(ct,{classes:r},o.a.createElement(mn.a,{className:r.formControl},o.a.createElement(un.a,{id:"".concat(Wn(n+"-FilterBar-Category-SelectLabel"))},"Category"),o.a.createElement(pn.a,{labelId:"".concat(Wn(n+"-FilterBar-Category-SelectLabel")),id:"".concat(Wn(n+"-FilterBar-Category-Select")),value:c,onChange:function(e){return h(e.target.value)}},i.uniqueCategories.map((function(e,t){return o.a.createElement(de.a,{id:Wn("".concat(e,"-").concat(t)),key:Wn("".concat(e,"-").concat(t)),value:e},e)})))))),o.a.createElement(B.a,{item:!0,sm:3},o.a.createElement(ct,{classes:r},o.a.createElement(qn.a,{utils:Gn.a},o.a.createElement(Qn.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"fromDate",label:"From date",value:l,onChange:u,KeyboardButtonProps:{"aria-label":"change date"},minDate:i[i.length-1][i.inlineQuery.fields[0]],maxDate:i[0][i.inlineQuery.fields[0]]})))),o.a.createElement(B.a,{item:!0,sm:3},o.a.createElement(ct,{classes:r},o.a.createElement(qn.a,{utils:Gn.a},o.a.createElement(Qn.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"toDate",label:"To date",value:s,onChange:p,KeyboardButtonProps:{"aria-label":"change date"},minDate:l,maxDate:s}))))):"")))}function Jn(e,t){var n=new Date(e);return new Date(n.getTime()+864e5*t).toISOString().split("T")[0]}var Xn=n(1569),Zn=n(1560),ea=n(1561),ta=n(1562),na=n(1563),aa=n(613),oa=n.n(aa),ra=n(614),ia=n.n(ra),la=Object(F.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,overflow:"scroll",borderRadius:"8px"},card:{minWidth:275,minHeight:400},flexCentered:{display:"flex",justifyContent:"center",alignItems:"center"},hidden:{visibility:"hidden",position:"absolute",zIndex:-1},tabs:{backgroundColor:"white",color:"#6c757d"},dNone:{display:"none"},dBlock:{display:"block"},tree:{height:240,flexGrow:1,maxWidth:400},icon:{marginRight:12,fontSize:"1rem",overflow:"visible"},mt12:{marginTop:12},w100:{width:"100%"},mlAuto:{marginLeft:"auto"},skeleton:{minWidth:275,minHeight:600},ml24:{marginLeft:24},parentHoverVisibility:{"&:hover $childHoverVisibility":{visibility:"visible"}},childHoverVisibility:{visibility:"hidden"},faSm:{fontSize:".75em"},positionTopRight:{position:"absolute",top:-30,right:-50,bottom:0,zIndex:100},positionRelative:{position:"relative"},padding30:{padding:30},mr12:{marginRight:12},ml12:{marginLeft:12},height100Percent:{height:"100%"},padding20:{padding:20},positionFixedTopRight:{position:"fixed",top:88,right:24,bottom:0,zIndex:100},codeFlyoutContainer:{backgroundColor:"rgb(40, 42, 54)",overflow:"scroll",borderRadius:"0 8px 8px 0"},whiteSpaceNoWrap:{whiteSpace:"nowrap"},overflowHidden:{overflow:"hidden"},overflowScroll:{overflow:"scroll"},overflowYScroll:{overflowY:"scroll",overflowX:"hidden"},noContainerScroll:{width:"100%",margin:0}}}));function sa(e){var t=e.children,n=e.value,a=e.index,r=Object(l.a)(e,["children","value","index"]);return o.a.createElement(U.a,Object.assign({component:"div",role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},r),o.a.createElement(Qe.a,{p:3},t))}var ca=n(42).validIdHelper;function da(e){var t=Object(a.useContext)(h),n=t.clientSession,r=t.setPaywallModal,i=(t.show,t.codeShow),l=t.sdk,s=t.corsApiCall,u=t.isReady,p=(n.userProfile,n.lookerUser),f=(n.lookerHost,Object(a.useState)(0)),g=Object(m.a)(f,2),y=g[0],v=g[1],C=Object(a.useState)([]),k=Object(m.a)(C,2),_=k[0],w=k[1],x=Object(a.useState)({}),E=Object(m.a)(x,2),O=(E[0],E[1]),S=Object(a.useState)(""),j=Object(m.a)(S,2),T=(j[0],j[1]),I=Object(a.useState)(""),N=Object(m.a)(I,2),H=(N[0],N[1],Object(a.useState)(window.innerHeight-112)),F=Object(m.a)(H,2),D=F[0],A=F[1],P=Object(a.useState)(0),R=Object(m.a)(P,2),U=R[0],M=R[1],$=la(),z=Object(a.useState)(0),V=Object(m.a)(z,2),G=V[0],W=V[1],K=Object(a.useState)(null),Y=Object(m.a)(K,2),X=Y[0],Z=Y[1],ee=(e.staticContent,e.staticContent.lookerContent),te=e.staticContent.type,ne=te,ae=Object(q.a)(ee),oe=function(e,t){1==t&&"premium"!=p.user_attributes.permission_level?r({show:!0,permissionNeeded:"explore"}):W(t)};Object(a.useEffect)((function(){u&&(s(ie,[ee,!G]),T("import $ from 'jquery';\nimport _ from 'lodash'\nimport React, { useState, useEffect, useContext } from 'react';\nimport { AppBar, Tabs, Tab, Typography, Box, Grid, Icon, CircularProgress, Card, Button } from '@material-ui/core'\nimport { TreeView, TreeItem } from '@material-ui/lab';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport { LookerEmbedSDK } from '@looker/embed-sdk'\nimport CodeFlyout from '../CodeFlyout';\nimport rawSampleCode from '!!raw-loader!./ReportBuilder.js'; // eslint-disable-line import/no-webpack-loader-syntax\nimport useStyles from './styles.js';\nimport { TabPanel, a11yProps } from './helpers.js';\nimport '../../Home.css';\nimport { ApiHighlight, EmbedHighlight } from '../../Highlights/Highlight';\nimport AppContext from '../../../contexts/AppContext';\nimport { Loader } from '../../Accessories/Loader';\n\nimport { SwapVerticalCircleOutlined } from '@material-ui/icons';\nconst { validIdHelper } = require('../../../tools');\n\n//start of ReportBuilder Component\nexport default function ReportBuilder(props) {\n\n\n  const { clientSession, setPaywallModal, show, codeShow, sdk, corsApiCall, isReady } = useContext(AppContext)\n  const { userProfile, lookerUser, lookerHost } = clientSession;\n\n  const topBarBottomBarHeight = 112;\n  const [iFrameExists, setIFrame] = useState(0);\n  // const [exploreIFrameExists, setExploreIFrame] = useState(0);\n  const [apiContent, setApiContent] = useState([]);\n  const [exploreObj, setExploreObj] = useState({});\n  const [clientSideCode, setClientSideCode] = useState('');\n  const [serverSideCode, setServerSideCode] = useState('');\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\n  const [expansionPanelHeight, setExpansionPanelHeight] = useState(0);\n\n  const classes = useStyles();\n  const [value, setValue] = useState(0);\n  const [qid, setQid] = useState(null);\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type },\n    //activeTabValue, handleTabChange, lookerUser, lookerHost \n  } = props;\n\n  const demoComponentType = type;\n  const tabContent = [...lookerContent]\n\n  const handleChange = (event, newValue) => {\n    if (newValue == 1 && lookerUser.user_attributes.permission_level != 'premium') {\n      // handleChange(0)\n      setPaywallModal({\n        'show': true,\n        'permissionNeeded': 'explore'\n      });\n    } else {\n      setValue(newValue)\n    }\n  };\n\n  useEffect(() => {\n    if (isReady) {\n      corsApiCall(performLookerApiCalls, [lookerContent, !value])\n      setClientSideCode(rawSampleCode)\n    }\n  }, [lookerUser, value, isReady, value]);\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", () => setHeight((window.innerHeight - topBarBottomBarHeight)));\n    setExpansionPanelHeight($('.MuiExpansionPanel-root:visible').innerHeight() || 0)\n  })\n\n\n  const action = async (contentType, contentId, secondaryAction, qid, exploreId, newReportEmbedContainer) => {\n\n    let iFrameArray = $(\".embedContainer:visible > iframe\")\n\n    let matchingIndex = 0;\n    for (let i = 0; i < iFrameArray.length; i++) {\n      if (iFrameArray[i].classList.contains(contentType) && iFrameArray[i].classList.contains(contentId)) {\n        iFrameArray[i].classList.remove('dNone')\n        matchingIndex = i;\n      } else {\n        iFrameArray[i].classList.add('dNone')\n      }\n    }\n\n    if (secondaryAction === 'edit' || secondaryAction === 'explore') {\n      //save qid to state and use in perform looker api calls\n      setQid(qid);\n      handleChange('edit', 1)\n    } else if (secondaryAction === 'delete') {\n      //remove iframe associated with content that was deleted\n      let indexOfDeletedContent;\n      for (let i = 0; i < iFrameArray.length; i++) {\n        if (iFrameArray[i].classList.contains(contentId)) {\n          indexOfDeletedContent = i;\n        }\n      }\n      let updatedIFrameArray = iFrameArray.slice()\n      updatedIFrameArray.splice(indexOfDeletedContent, 1)\n      for (let i = 0; i < updatedIFrameArray.length; i++) {\n        if (i === 0) {\n          updatedIFrameArray[i].classList.remove('dNone')\n          matchingIndex = i;\n        } else {\n          updatedIFrameArray[i].classList.add('dNone')\n        }\n      }\n      //append updated array\n      $(`#embedContainer-reportbuilder-14`).empty();\n      $(`#embedContainer-reportbuilder-14`).html(updatedIFrameArray);\n\n      let lookerResponse = await sdk.ok(sdk.delete_look(contentId));\n      corsApiCall(performLookerApiCalls, [lookerContent, 1])\n    }\n  }\n\n  const performLookerApiCalls = function (lookerContent, animateLoad) {\n    if (animateLoad) {\n      handleChange('refresh', 0)\n      setIFrame(0)\n      setApiContent([])\n    }\n\n    lookerContent.map(async lookerContent => {\n      if (value === 0 &&\n        lookerContent.type === 'folder') {\n\n        const sharedFolder = await sdk.ok(sdk.folder(lookerContent.id));\n        const embedUser = await sdk.ok(sdk.me())\n\n        for (let h = 0; h < sharedFolder.looks.length; h++) {\n          let look = await sdk.ok(sdk.look(sharedFolder.looks[h].id))\n          let clientId = look.query.client_id;\n          sharedFolder.looks[h].client_id = clientId;\n        }\n\n        let embeddedUserFolder = {}\n        if (lookerUser.user_attributes.permission_level === 'premium') {\n          let embedUserLooks = await sdk.ok(sdk.search_looks({ user_id: embedUser.id }))\n          if (embedUserLooks && embedUserLooks.length) {\n            let embedUserFolderId = embedUserLooks[0].folder_id || null;\n            embeddedUserFolder = await sdk.ok(sdk.folder(embedUserFolderId));\n            for (let i = 0; i < embeddedUserFolder.looks.length; i++) {\n              let look = await sdk.ok(sdk.look(embeddedUserFolder.looks[i].id));\n              let clientId = look.query.client_id;\n              embeddedUserFolder.looks[i].client_id = clientId;\n            }\n          }\n        }\n\n        let lookerResponseData = {\n          sharedFolder,\n          embeddedUserFolder\n        }\n\n        // console.log('lookerResponseData', lookerResponseData)\n\n        let looksToUse = [...lookerResponseData.sharedFolder.looks];\n        if (lookerUser.user_attributes.permission_level === 'premium' &&\n          Object.keys(lookerResponseData.embeddedUserFolder).length) {\n          looksToUse = [\n            ...looksToUse, ...lookerResponseData.embeddedUserFolder.looks\n          ]\n\n        }\n        let dashboardsToUse = [...lookerResponseData.sharedFolder.dashboards]\n        let objToUse = {\n          looks: looksToUse,\n          dashboards: dashboardsToUse\n        }\n        // console.log('objToUse', objToUse)\n        let iFrameArray = $(`.embedContainer.${validIdHelper(demoComponentType)} > iframe`);\n        if (objToUse.looks.length) {\n          objToUse.looks.map((item, index) => {\n\n            let lookId = item.id;\n            let lookIsRendered = false;\n            for (let i = 0; i < iFrameArray.length; i++) {\n              if (iFrameArray[i].classList.contains('look') && iFrameArray[i].classList.contains(lookId)) {\n                lookIsRendered = true;\n              }\n            }\n\n            if (!lookIsRendered) {\n              LookerEmbedSDK.createLookWithId(lookId)\n                .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\n                .withClassName('iframe')\n                .withClassName('look')\n                .withClassName(lookerResponseData.sharedFolder.looks.indexOf(item) > -1 ? \"shared\" : \"personal\")\n                .withClassName(index > 0 ? 'dNone' : 'oops')\n                .withClassName(lookId)\n                .build()\n                .connect()\n                .then((look) => {\n                  // setIFrame(1)\n                  LookerEmbedSDK.init(`${clientSession.lookerBaseUrl}`);\n\n\n                })\n                .catch((error) => {\n                  console.error('Connection error', error)\n                })\n            }\n\n            if (index === objToUse.looks.length - 1) {\n              setTimeout(() => setIFrame(1), 1000)\n            }\n          })\n        }\n\n        if (objToUse.dashboards.length) {\n          objToUse.dashboards.map((item, index) => {\n            let dashboardId = item.id\n            let dashboardIsRendered = false;\n            for (let i = 0; i < iFrameArray.length; i++) {\n              if (iFrameArray[i].classList.contains('dashboard') && iFrameArray[i].classList.contains(dashboardId)) {\n                dashboardIsRendered = true;\n              }\n            }\n            if (!dashboardIsRendered) {\n              LookerEmbedSDK.createDashboardWithId(dashboardId)\n                .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\n                .withClassName('iframe')\n                .withClassName('dashboard')\n                .withClassName(lookerResponseData.sharedFolder.dashboards.indexOf(item) > -1 ? \"shared\" : \"personal\")\n                .withClassName('dNone')\n                .withClassName(dashboardId)\n                .build()\n                .connect()\n                .then((dashboard) => {\n                  setTimeout(() => {\n                    // setIFrame(1)\n                  }, 1000)\n                  LookerEmbedSDK.init(`${clientSession.lookerBaseUrl}`);\n\n                })\n                .catch((error) => {\n                  console.error('Connection error', error)\n                })\n            }\n\n\n            if (index === objToUse.dashboards.length - 1) {\n              setTimeout(() => setIFrame(1), 1000)\n            }\n          })\n        }\n        setApiContent(objToUse)\n      } else if (lookerContent.type === 'explore' &&\n        lookerUser.user_attributes.permission_level === 'premium' &&\n        value === 1) {\n        // console.log('inside else ifff')\n        let exploreId = lookerContent.id;\n        // console.log('exploreId', exploreId)\n        $(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`)).html('');\n        //separate logic for embedding explore with qid vs. no qid\n        if (qid) {\n          // console.log('qid ifff')\n          LookerEmbedSDK.createExploreWithId(exploreId)\n            .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\n            .withClassName('exploreIframe')\n            .withParams({\n              qid: qid\n            })\n            .on('explore:state:changed', (event) => {\n            })\n            .build()\n            .connect()\n            .then((explore) => {\n              console.log('explore', explore)\n              // setTimeout(() => {\n              setIFrame(1)\n              setExploreObj(explore)\n              // }, 1000)\n              LookerEmbedSDK.init(`${clientSession.lookerBaseUrl}`);\n\n              setQid(null)\n            })\n            .catch((error) => {\n              console.error('Connection error', error)\n            })\n        } else {\n          // console.log('qid else')\n          LookerEmbedSDK.createExploreWithId(exploreId)\n            .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\n            .withClassName('exploreIframe')\n            .on('explore:state:changed', (event) => {\n            })\n            .build()\n            .connect()\n            .then((explore) => {\n              // console.log('explore', explore)\n              // setTimeout(() => {\n              setIFrame(1)\n              setExploreObj(explore)\n              // }, 1000)\n              LookerEmbedSDK.init(`${clientSession.lookerBaseUrl}`);\n\n              // setQid(null)\n            })\n            .catch((error) => {\n              console.error('Connection error', error)\n            })\n        }\n      }\n      // else console.log('ellse')\n    })\n  }\n\n  return (\n    <div className={`${classes.root} demoComponent`}\n      style={{ height }}>\n      <Card elevation={1} className={`\n      ${classes.padding30} \n      ${classes.height100Percent}\n      ${classes.overflowYScroll}`\n      }\n      >\n        <Grid container\n          key={validIdHelper(type)} >\n          <div className={classes.root}>\n            {iFrameExists ? '' :\n\n              <Loader classes={classes}\n                height={height}\n                expansionPanelHeight={expansionPanelHeight} />\n            }\n\n            {/* additional loading logic, need embedContainer to exist but want it hidden until iFrame has content...*/}\n            <Box className={iFrameExists ? `` : `${classes.hidden}`}>\n              <AppBar position=\"static\" elevation={0}>\n                <Tabs\n                  className={classes.tabs}\n                  value={value}\n                  onChange={handleChange}\n                  aria-label=\"simple tabs example\">\n                  {tabContent.map((item, index) => (\n                    <Tab\n                      key={`${validIdHelper(demoComponentType + '-tab-' + index)}`}\n                      label={index == 1 ?\n                        <div>\n\n                          {lookerUser.user_attributes.permission_level != 'premium' ?\n                            <Icon className={`fa fa-lock ${classes.faSm} ${classes.mr12}`} /> : <Icon className={`fa fa-plus ${classes.faSm} ${classes.mr12}`} />}\n                          {item.label}\n                        </div> :\n                        item.label}\n                      className={value === 1 && index === 1 ? `${classes.hidden}` : index == 1 ? `${classes.mlAuto}` : ``}\n                      style={index === 1 ? {\n                        backgroundColor: '#5896E6',\n                        borderRadius: '4px',\n                        color: '#fff',\n                        opacity: '1.0'\n                      } : {}}\n                      {...a11yProps(index)} />\n                  ))}\n                </Tabs>\n              </AppBar>\n              <Box className=\"tabPanelContainer\">\n                <Grid container\n                  spacing={3}\n                  className={`${classes.noContainerScroll}`}>\n                  {codeShow ?\n                    <Grid item sm={6}\n                      className={`${classes.positionFixedTopRight}`}\n                    >\n                      <CodeFlyout {...props}\n                        classes={classes}\n                        lookerUser={lookerUser}\n                        height={height}\n                      />\n                    </Grid> : ''}\n                  {tabContent.map((tabContentItem, tabContentItemIndex) => (\n                    <TabPanel\n                      key={`${validIdHelper(demoComponentType + '-tabPanel-' + tabContentItemIndex)}`}\n                      value={value}\n                      index={tabContentItemIndex}\n                      style={{ width: '100%' }} //weird\n                    >\n                      <Grid container>\n                        {\n                          tabContentItemIndex === 0\n                            ?\n                            <React.Fragment\n                              key={`${validIdHelper(demoComponentType + '-outerFragment-' + tabContentItemIndex)}`}>\n                              <Grid item sm={4} >\n                                <ApiHighlight height={500} classes={classes}>\n                                  <TreeSideBar {...{\n                                    setPaywallModal,\n                                    classes,\n                                    demoComponentType,\n                                    tabContent,\n                                    tabContentItemIndex,\n                                    action,\n                                    apiContent,\n                                    ...props\n                                  }}\n                                  />\n                                </ApiHighlight>\n                              </Grid>\n                              <Grid item sm={8} >\n                                <EmbedHighlight classes={classes}>\n                                  <div\n                                    className={`embedContainer ${validIdHelper(demoComponentType)}`}\n                                    id={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                    key={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                  >\n                                  </div>\n                                </EmbedHighlight>\n                              </Grid>\n                            </React.Fragment>\n                            :\n                            <Grid item sm={12} >\n                              {/* couldn't get this to work */}\n                              {/* {Object.keys(exploreObj).length ?\n                                <EmbedHighlight classes={classes}>\n                                  <div\n                                    className=\"embedContainer\"\n                                    id={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                    key={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                  >\n                                  </div>\n                                </EmbedHighlight> :\n                                <Card className={`${classes.card} ${classes.flexCentered}`}\n                                  elevation={0}\n                                  mt={2}\n                                  style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\n                                  <CircularProgress className={classes.circularProgress} />\n                                </Card>} */}\n                              <EmbedHighlight classes={classes}>\n                                <div\n                                  className=\"embedContainer\"\n                                  id={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                  key={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                >\n                                </div>\n                              </EmbedHighlight>\n                            </Grid>\n                        }\n                      </Grid>\n                    </TabPanel>\n                  ))}</Grid>\n              </Box>\n            </Box >\n          </div>\n        </Grid >\n      </Card>\n    </div >\n  )\n}\n\n\nfunction TreeSideBar(props) {\n\n\n  const { clientSession, setPaywallModal, show, codeShow, sdk, corsApiCall } = useContext(AppContext)\n  const { userProfile, lookerUser, lookerHost } = clientSession\n\n  const { staticContent, staticContent: { lookerContent }, classes, demoComponentType, tabContent, tabContentItemIndex, action, apiContent,\n    //lookerUser, setPaywallModal\n  } = props\n  const sharedFolderId = lookerContent[0].type === 'folder' ? lookerContent[0].id : '';\n  let treeCounter = 0;\n  const [selected, setSelected] = useState(2);\n  const expandedArr = Object.keys(apiContent).length ? [\"1\", \"\" + (2 + apiContent[Object.keys(apiContent)[0]].length)] : [];\n  const [expanded, setExpanded] = useState(expandedArr);\n\n  const handleToggle = (event, nodeIds) => {\n    setExpanded(nodeIds);\n  }\n\n  const handleSelect = (event, nodeIds) => {\n    setSelected(nodeIds);\n  };\n\n\n  useEffect(() => {\n    setExpanded(expandedArr);\n    if (selected !== 2) setSelected(2)\n    // let innerTreeItemArray = $(\".innerTreeItem\");\n    // console.log('innerTreeItemArray', innerTreeItemArray)\n    // for (let i = 0; i < innerTreeItemArray.length; i++) {\n    //   console.log('inside forrr', i)\n    //   if (innerTreeItemArray[i].classList.contains('Mui-selected')) {\n    //     console.log('inside iffff')\n    //     innerTreeItemArray[i].classList.remove('Mui-selected')\n    //   } else console.log('elllse')\n    // }\n  }, [apiContent]);\n\n\n  return (\n    <TreeView\n      className={classes.tree}\n      defaultCollapseIcon={<ExpandMoreIcon />}\n      defaultExpandIcon={<ChevronRightIcon />}\n      expanded={expanded}\n      onNodeToggle={handleToggle}\n      onNodeSelect={handleSelect}\n    // multiSelect={false}\n    >\n      {apiContent ? Object.keys(apiContent).map((key, outerIndex) => (\n        <React.Fragment\n          key={`${validIdHelper(demoComponentType + '-innerFragment-' + outerIndex)}`}>\n          <TreeItem\n            key={`${validIdHelper(demoComponentType + '-outerTreeItem-' + outerIndex)}`}\n            nodeId={\"\" + (treeCounter += 1)}\n            // treecounter={treeCounter}\n            label={_.capitalize(key)}\n            icon={<Icon className={`fa fa-folder ${classes.icon}`} />}\n            disabled={apiContent[key].length ? false : true}\n          >\n            {\n              apiContent[key].length ?\n                apiContent[key].map((item, index) => (\n                  <TreeItem\n                    key={`${validIdHelper(demoComponentType + '-innerTreeItem-' + treeCounter)}`}\n                    nodeId={\"\" + (treeCounter += 1)}\n                    treecounter={treeCounter}\n                    selected={selected === treeCounter}\n                    className={selected === treeCounter ? `Mui-selected innerTreeItem ${classes.whiteSpaceNoWrap}` : `innerTreeItem ${classes.whiteSpaceNoWrap}`}\n                    contentid={item.id}\n                    label={item.folder_id === sharedFolderId &&\n                      key === 'looks' ?\n                      <div\n                        id={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\n                        key={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\n                        className={`${classes.labelRoot} ${classes.parentHoverVisibility}`}\n                      >\n                        {/* {item.title.length > 15 ? item.title.substring(0, 15) + '...' : item.title} */}\n                        <Grid container>\n                          <Grid item sm={8} className={`${classes.overflowHidden}`}>\n                            {item.title}</Grid>\n                          <Grid item sm={4}>\n                            <Button\n                              id={`${validIdHelper(demoComponentType + '-innerTreeItem-Explore' + treeCounter)}`}\n                              key={`${validIdHelper(demoComponentType + '-innerTreeItem-Explore' + treeCounter)}`}\n                              size=\"small\"\n                              className={`${classes.ml12} ${classes.childHoverVisibility}`}\n                              onClick={(event) => {\n                                if (lookerUser.user_attributes.permission_level === 'premium') {\n                                  action(\n                                    key.substring(0, key.length - 1),\n                                    item.id,\n                                    'explore',\n                                    item.client_id,\n                                    tabContent[tabContentItemIndex + 1].id,\n                                    validIdHelper(`embedContainer-${demoComponentType}-${tabContent[tabContentItemIndex + 1].id}`)\n                                  );\n                                  event.stopPropagation();\n                                } else {\n                                  // setPaywallModal();\n\n                                  setPaywallModal({\n                                    'show': true,\n                                    'permissionNeeded': 'explore'\n                                  });\n                                }\n                              }\n                              }\n                              color=\"default\"\n                            >\n                              {lookerUser.user_attributes.permission_level === 'premium' ? 'Explore' : <div> <Icon className={`fa fa-lock ${classes.faSm} ${classes.mr12}`} />Explore</div>}\n                            </Button>\n                          </Grid>\n                        </Grid>\n\n\n                      </div>\n                      : key === 'looks' ?\n                        <div\n                          id={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\n                          key={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\n                          className={`${classes.labelRoot} ${classes.parentHoverVisibility}`}>\n                          <Grid container>\n                            <Grid item sm={6} className={`${classes.overflowHidden}`}>\n                              {/* {item.title.length > 15 ? item.title.substring(0, 15) + '...' : item.title} */}\n                              {item.title}\n                            </Grid>\n                            <Grid item sm={6}>\n                              <Button\n                                id={`${validIdHelper(demoComponentType + '-innerTreeItem-EditButton' + treeCounter)}`}\n                                key={`${validIdHelper(demoComponentType + '-innerTreeItem-EditButton' + treeCounter)}`}\n                                size=\"small\"\n                                className={`${classes.ml12} ${classes.childHoverVisibility}`}\n                                onClick={(event) => {\n                                  if (lookerUser.user_attributes.permission_level === 'premium') {\n                                    // setSelected(treeCounter);\n                                    action(\n                                      key.substring(0, key.length - 1),\n                                      item.id,\n                                      'edit',\n                                      item.client_id,\n                                      tabContent[tabContentItemIndex + 1].id,\n                                      validIdHelper(`embedContainer-${demoComponentType}-${tabContent[tabContentItemIndex + 1].id}`)\n                                    );\n                                    event.stopPropagation();\n                                  } else {\n                                    // setPaywallModal();\n\n                                    setPaywallModal({\n                                      'show': true,\n                                      'permissionNeeded': 'explore'\n                                    });\n                                  }\n                                }\n                                }\n                                color=\"primary\"\n                              >\n                                Edit\n                                                                                            </Button>\n                              <Button\n                                id={`${validIdHelper(demoComponentType + '-innerTreeItem-DeleteButton' + treeCounter)}`}\n                                key={`${validIdHelper(demoComponentType + '-innerTreeItem-DeleteButton' + treeCounter)}`}\n                                size=\"small\"\n                                className={`${classes.ml12} ${classes.childHoverVisibility}`}\n                                onClick={(event) => {\n                                  if (lookerUser.user_attributes.permission_level === 'premium') {\n                                    // setSelected(treeCounter);\n                                    action(\n                                      key.substring(0, key.length - 1),\n                                      item.id,\n                                      'delete',\n                                      item.client_id,\n                                      tabContent[tabContentItemIndex + 1].id,\n                                      validIdHelper(`embedContainer-${demoComponentType}-${tabContent[tabContentItemIndex + 1].id}`)\n                                    );\n                                    event.stopPropagation();\n                                  } else {\n                                    // setPaywallModal();\n\n                                    setPaywallModal({\n                                      'show': true,\n                                      'permissionNeeded': 'explore'\n                                    });\n                                  }\n                                }\n                                }\n                                color=\"secondary\"\n                              >\n                                Delete\n                                                                                            </Button>\n                            </Grid>\n                          </Grid>\n\n                        </div>\n                        : <Grid container><Grid item sm={12}>{item.title}</Grid></Grid>\n                    }\n                    onClick={() => {\n                      // setSelected(treeCounter)\n                      action(\n                        key.substring(0, key.length - 1), item.id)\n                    }} />\n\n                ))\n                :\n                ''\n            }\n          </TreeItem>\n\n        </React.Fragment>\n      )) : ''}\n    </TreeView>\n  )\n}"))}),[p,G,u,G]),Object(a.useEffect)((function(){window.addEventListener("resize",(function(){return A(window.innerHeight-112)})),M(Ot()(".MuiExpansionPanel-root:visible").innerHeight()||0)}));var re=function(){var e=Object(d.a)(c.a.mark((function e(t,n,a,o,r,i){var d,m,u,p,h,b;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(d=Ot()(".embedContainer:visible > iframe"),0,m=0;m<d.length;m++)d[m].classList.contains(t)&&d[m].classList.contains(n)?(d[m].classList.remove("dNone"),m):d[m].classList.add("dNone");if("edit"!==a&&"explore"!==a){e.next=8;break}Z(o),oe(0,1),e.next=19;break;case 8:if("delete"!==a){e.next=19;break}for(p=0;p<d.length;p++)d[p].classList.contains(n)&&(u=p);for((h=d.slice()).splice(u,1),b=0;b<h.length;b++)0===b?(h[b].classList.remove("dNone"),b):h[b].classList.add("dNone");return Ot()("#embedContainer-reportbuilder-14").empty(),Ot()("#embedContainer-reportbuilder-14").html(h),e.next=17,l.ok(l.delete_look(n));case 17:e.sent,s(ie,[ee,1]);case 19:case"end":return e.stop()}}),e)})));return function(t,n,a,o,r,i){return e.apply(this,arguments)}}(),ie=function(e,t){t&&(oe(0,0),v(0),w([])),e.map(function(){var e=Object(d.a)(c.a.mark((function e(t){var a,o,r,i,s,d,m,u,h,b,f,g,y,C,k,_,x;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==G||"folder"!==t.type){e.next=48;break}return e.next=3,l.ok(l.folder(t.id));case 3:return a=e.sent,e.next=6,l.ok(l.me());case 6:o=e.sent,r=0;case 8:if(!(r<a.looks.length)){e.next=17;break}return e.next=11,l.ok(l.look(a.looks[r].id));case 11:i=e.sent,s=i.query.client_id,a.looks[r].client_id=s;case 14:r++,e.next=8;break;case 17:if(d={},"premium"!==p.user_attributes.permission_level){e.next=37;break}return e.next=21,l.ok(l.search_looks({user_id:o.id}));case 21:if(!(m=e.sent)||!m.length){e.next=37;break}return u=m[0].folder_id||null,e.next=26,l.ok(l.folder(u));case 26:d=e.sent,h=0;case 28:if(!(h<d.looks.length)){e.next=37;break}return e.next=31,l.ok(l.look(d.looks[h].id));case 31:b=e.sent,f=b.query.client_id,d.looks[h].client_id=f;case 34:h++,e.next=28;break;case 37:g={sharedFolder:a,embeddedUserFolder:d},y=Object(q.a)(g.sharedFolder.looks),"premium"===p.user_attributes.permission_level&&Object.keys(g.embeddedUserFolder).length&&(y=[].concat(Object(q.a)(y),Object(q.a)(g.embeddedUserFolder.looks))),C=Object(q.a)(g.sharedFolder.dashboards),k={looks:y,dashboards:C},_=Ot()(".embedContainer.".concat(ca(ne)," > iframe")),k.looks.length&&k.looks.map((function(e,a){for(var o=e.id,r=!1,i=0;i<_.length;i++)_[i].classList.contains("look")&&_[i].classList.contains(o)&&(r=!0);r||Q.LookerEmbedSDK.createLookWithId(o).appendTo(ca("#embedContainer-".concat(ne,"-").concat(t.id))).withClassName("iframe").withClassName("look").withClassName(g.sharedFolder.looks.indexOf(e)>-1?"shared":"personal").withClassName(a>0?"dNone":"oops").withClassName(o).build().connect().then((function(e){Q.LookerEmbedSDK.init("".concat(n.lookerBaseUrl))})).catch((function(e){console.error("Connection error",e)})),a===k.looks.length-1&&setTimeout((function(){return v(1)}),1e3)})),k.dashboards.length&&k.dashboards.map((function(e,a){for(var o=e.id,r=!1,i=0;i<_.length;i++)_[i].classList.contains("dashboard")&&_[i].classList.contains(o)&&(r=!0);r||Q.LookerEmbedSDK.createDashboardWithId(o).appendTo(ca("#embedContainer-".concat(ne,"-").concat(t.id))).withClassName("iframe").withClassName("dashboard").withClassName(g.sharedFolder.dashboards.indexOf(e)>-1?"shared":"personal").withClassName("dNone").withClassName(o).build().connect().then((function(e){setTimeout((function(){}),1e3),Q.LookerEmbedSDK.init("".concat(n.lookerBaseUrl))})).catch((function(e){console.error("Connection error",e)})),a===k.dashboards.length-1&&setTimeout((function(){return v(1)}),1e3)})),w(k),e.next=49;break;case 48:"explore"===t.type&&"premium"===p.user_attributes.permission_level&&1===G&&(x=t.id,Ot()(ca("#embedContainer-".concat(ne,"-").concat(t.id))).html(""),X?Q.LookerEmbedSDK.createExploreWithId(x).appendTo(ca("#embedContainer-".concat(ne,"-").concat(t.id))).withClassName("exploreIframe").withParams({qid:X}).on("explore:state:changed",(function(e){})).build().connect().then((function(e){console.log("explore",e),v(1),O(e),Q.LookerEmbedSDK.init("".concat(n.lookerBaseUrl)),Z(null)})).catch((function(e){console.error("Connection error",e)})):Q.LookerEmbedSDK.createExploreWithId(x).appendTo(ca("#embedContainer-".concat(ne,"-").concat(t.id))).withClassName("exploreIframe").on("explore:state:changed",(function(e){})).build().connect().then((function(e){v(1),O(e),Q.LookerEmbedSDK.init("".concat(n.lookerBaseUrl))})).catch((function(e){console.error("Connection error",e)})));case 49:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};return o.a.createElement("div",{className:"".concat($.root," demoComponent"),style:{height:D}},o.a.createElement(L.a,{elevation:1,className:"\n      ".concat($.padding30," \n      ").concat($.height100Percent,"\n      ").concat($.overflowYScroll)},o.a.createElement(B.a,{container:!0,key:ca(te)},o.a.createElement("div",{className:$.root},y?"":o.a.createElement(vn,{classes:$,height:D,expansionPanelHeight:U}),o.a.createElement(Qe.a,{className:y?"":"".concat($.hidden)},o.a.createElement(J.a,{position:"static",elevation:0},o.a.createElement(Xn.a,{className:$.tabs,value:G,onChange:oe,"aria-label":"simple tabs example"},ae.map((function(e,t){return o.a.createElement(Zn.a,Object.assign({key:"".concat(ca(ne+"-tab-"+t)),label:1==t?o.a.createElement("div",null,"premium"!=p.user_attributes.permission_level?o.a.createElement(ea.a,{className:"fa fa-lock ".concat($.faSm," ").concat($.mr12)}):o.a.createElement(ea.a,{className:"fa fa-plus ".concat($.faSm," ").concat($.mr12)}),e.label):e.label,className:1===G&&1===t?"".concat($.hidden):1==t?"".concat($.mlAuto):"",style:1===t?{backgroundColor:"#5896E6",borderRadius:"4px",color:"#fff",opacity:"1.0"}:{}},function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}(t)))})))),o.a.createElement(Qe.a,{className:"tabPanelContainer"},o.a.createElement(B.a,{container:!0,spacing:3,className:"".concat($.noContainerScroll)},i?o.a.createElement(B.a,{item:!0,sm:6,className:"".concat($.positionFixedTopRight)},o.a.createElement(Xe,Object.assign({},e,{classes:$,lookerUser:p,height:D}))):"",ae.map((function(t,n){return o.a.createElement(sa,{key:"".concat(ca(ne+"-tabPanel-"+n)),value:G,index:n,style:{width:"100%"}},o.a.createElement(B.a,{container:!0},0===n?o.a.createElement(o.a.Fragment,{key:"".concat(ca(ne+"-outerFragment-"+n))},o.a.createElement(B.a,{item:!0,sm:4},o.a.createElement(ct,{height:500,classes:$},o.a.createElement(ma,Object(b.a)({setPaywallModal:r,classes:$,demoComponentType:ne,tabContent:ae,tabContentItemIndex:n,action:re,apiContent:_},e)))),o.a.createElement(B.a,{item:!0,sm:8},o.a.createElement(dt,{classes:$},o.a.createElement("div",{className:"embedContainer ".concat(ca(ne)),id:ca("embedContainer-".concat(ne,"-").concat(t.id)),key:ca("embedContainer-".concat(ne,"-").concat(t.id))})))):o.a.createElement(B.a,{item:!0,sm:12},o.a.createElement(dt,{classes:$},o.a.createElement("div",{className:"embedContainer",id:ca("embedContainer-".concat(ne,"-").concat(t.id)),key:ca("embedContainer-".concat(ne,"-").concat(t.id))})))))})))))))))}function ma(e){var t=Object(a.useContext)(h),n=t.clientSession,r=t.setPaywallModal,i=(t.show,t.codeShow,t.sdk,t.corsApiCall,n.userProfile,n.lookerUser),l=(n.lookerHost,e.staticContent,e.staticContent.lookerContent),s=e.classes,c=e.demoComponentType,d=e.tabContent,u=e.tabContentItemIndex,p=e.action,b=e.apiContent,f="folder"===l[0].type?l[0].id:"",g=0,y=Object(a.useState)(2),v=Object(m.a)(y,2),C=v[0],k=v[1],_=Object.keys(b).length?["1",""+(2+b[Object.keys(b)[0]].length)]:[],w=Object(a.useState)(_),x=Object(m.a)(w,2),E=x[0],O=x[1];return Object(a.useEffect)((function(){O(_),2!==C&&k(2)}),[b]),o.a.createElement(ta.a,{className:s.tree,defaultCollapseIcon:o.a.createElement(oa.a,null),defaultExpandIcon:o.a.createElement(ia.a,null),expanded:E,onNodeToggle:function(e,t){O(t)},onNodeSelect:function(e,t){k(t)}},b?Object.keys(b).map((function(e,t){return o.a.createElement(o.a.Fragment,{key:"".concat(ca(c+"-innerFragment-"+t))},o.a.createElement(na.a,{key:"".concat(ca(c+"-outerTreeItem-"+t)),nodeId:""+(g+=1),label:j.a.capitalize(e),icon:o.a.createElement(ea.a,{className:"fa fa-folder ".concat(s.icon)}),disabled:!b[e].length},b[e].length?b[e].map((function(t,n){return o.a.createElement(na.a,{key:"".concat(ca(c+"-innerTreeItem-"+g)),nodeId:""+(g+=1),treecounter:g,selected:C===g,className:C===g?"Mui-selected innerTreeItem ".concat(s.whiteSpaceNoWrap):"innerTreeItem ".concat(s.whiteSpaceNoWrap),contentid:t.id,label:t.folder_id===f&&"looks"===e?o.a.createElement("div",{id:"".concat(ca(c+"-innerTreeItem-LabelContainer"+g)),key:"".concat(ca(c+"-innerTreeItem-LabelContainer"+g)),className:"".concat(s.labelRoot," ").concat(s.parentHoverVisibility)},o.a.createElement(B.a,{container:!0},o.a.createElement(B.a,{item:!0,sm:8,className:"".concat(s.overflowHidden)},t.title),o.a.createElement(B.a,{item:!0,sm:4},o.a.createElement(Ne.a,{id:"".concat(ca(c+"-innerTreeItem-Explore"+g)),key:"".concat(ca(c+"-innerTreeItem-Explore"+g)),size:"small",className:"".concat(s.ml12," ").concat(s.childHoverVisibility),onClick:function(n){"premium"===i.user_attributes.permission_level?(p(e.substring(0,e.length-1),t.id,"explore",t.client_id,d[u+1].id,ca("embedContainer-".concat(c,"-").concat(d[u+1].id))),n.stopPropagation()):r({show:!0,permissionNeeded:"explore"})},color:"default"},"premium"===i.user_attributes.permission_level?"Explore":o.a.createElement("div",null," ",o.a.createElement(ea.a,{className:"fa fa-lock ".concat(s.faSm," ").concat(s.mr12)}),"Explore"))))):"looks"===e?o.a.createElement("div",{id:"".concat(ca(c+"-innerTreeItem-LabelContainer"+g)),key:"".concat(ca(c+"-innerTreeItem-LabelContainer"+g)),className:"".concat(s.labelRoot," ").concat(s.parentHoverVisibility)},o.a.createElement(B.a,{container:!0},o.a.createElement(B.a,{item:!0,sm:6,className:"".concat(s.overflowHidden)},t.title),o.a.createElement(B.a,{item:!0,sm:6},o.a.createElement(Ne.a,{id:"".concat(ca(c+"-innerTreeItem-EditButton"+g)),key:"".concat(ca(c+"-innerTreeItem-EditButton"+g)),size:"small",className:"".concat(s.ml12," ").concat(s.childHoverVisibility),onClick:function(n){"premium"===i.user_attributes.permission_level?(p(e.substring(0,e.length-1),t.id,"edit",t.client_id,d[u+1].id,ca("embedContainer-".concat(c,"-").concat(d[u+1].id))),n.stopPropagation()):r({show:!0,permissionNeeded:"explore"})},color:"primary"},"Edit"),o.a.createElement(Ne.a,{id:"".concat(ca(c+"-innerTreeItem-DeleteButton"+g)),key:"".concat(ca(c+"-innerTreeItem-DeleteButton"+g)),size:"small",className:"".concat(s.ml12," ").concat(s.childHoverVisibility),onClick:function(n){"premium"===i.user_attributes.permission_level?(p(e.substring(0,e.length-1),t.id,"delete",t.client_id,d[u+1].id,ca("embedContainer-".concat(c,"-").concat(d[u+1].id))),n.stopPropagation()):r({show:!0,permissionNeeded:"explore"})},color:"secondary"},"Delete")))):o.a.createElement(B.a,{container:!0},o.a.createElement(B.a,{item:!0,sm:12},t.title)),onClick:function(){p(e.substring(0,e.length-1),t.id)}})})):""))})):"")}var ua=n(1584),pa=n(1565),ha=n(1585),ba=n(1564),fa=n(289),ga=(D.a[400],D.a[100],fa.a[400],fa.a[100],Object(F.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,overflow:"scroll",borderRadius:"8px"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},flexCentered:{display:"flex",justifyContent:"center",alignItems:"center"},hidden:{visibility:"hidden",position:"absolute",zIndex:-1},tabs:{backgroundColor:"white",color:"#6c757d"},dNone:{display:"none"},dBlock:{display:"block"},tree:{height:240,flexGrow:1,maxWidth:400},icon:{marginRight:12,fontSize:"1rem",overflow:"visible"},ml12:{marginLeft:12},mt12:{marginTop:12},w100:{width:"100%"},mlAuto:{marginLeft:"auto"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},formControl:{margin:e.spacing(1),minWidth:120},skeleton:{minWidth:275,minHeight:600},card:{minWidth:275,minHeight:400},textCenter:{textAlign:"center"},bluePrimary:{backgroundColor:"rgba(69, 149, 236, 1)"},blueSecondary:{backgroundColor:"rgba(69, 149, 236, .5)"},orangePrimary:{backgroundColor:"rgba(243, 167, 89, 1)"},orangeSecondary:{backgroundColor:"rgba(243, 167, 89, .5)"},positionTopRight:{position:"absolute",top:-30,right:-50,bottom:0,zIndex:100},positionRelative:{position:"relative"},bottomBarSpacer:Object(b.a)(Object(b.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),maxHeight600:{maxHeight:600,overflow:"scroll"},padding30:{padding:30},m12:{margin:12},m6:{margin:6},height100Percent:{height:"100%",overflow:"scroll"},padding20:{padding:20},positionFixedTopRight:{position:"fixed",top:88,right:24,bottom:0,zIndex:100},codeFlyoutContainer:{backgroundColor:"rgb(40, 42, 54)",overflow:"scroll",borderRadius:"0 8px 8px 0"},padding10:{padding:10},overflowScroll:{overflow:"scroll"},overflowYScroll:{overflowY:"scroll",overflowX:"hidden"},noContainerScroll:{width:"100%",margin:0}}})));function ya(e,t,n){return e[n]&&t[n]&&t[n].value<e[n].value?-1:e[n]&&t[n]&&t[n].value>e[n].value?1:0}var va=n(42),Ca=va.validIdHelper,ka=va.prettifyString;function _a(e){var t=Object(a.useContext)(h),n=t.clientSession,r=(t.setPaywallModal,t.show,t.codeShow),i=t.sdk,l=t.corsApiCall,s=(n.userProfile,n.lookerUser),u=(n.lookerHost,Object(a.useState)(0)),p=Object(m.a)(u,2),f=(p[0],p[1],Object(a.useState)({})),g=Object(m.a)(f,2),y=g[0],v=g[1],C=Object(a.useState)(""),k=Object(m.a)(C,2),_=(k[0],k[1]),w=Object(a.useState)(""),x=Object(m.a)(w,2),E=(x[0],x[1],Object(a.useState)(window.innerHeight-112)),O=Object(m.a)(E,2),S=O[0],j=O[1],T=Object(a.useState)(window.innerWidth-392),I=Object(m.a)(T,2),N=I[0],H=I[1],F=Object(a.useState)(0),D=Object(m.a)(F,2),A=D[0],P=D[1],R=ga(),M=(e.staticContent,e.staticContent.lookerContent),$=e.staticContent.type;Object(a.useEffect)((function(){_("import $ from 'jquery';\nimport _ from 'lodash';\nimport React, { useState, useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  AppBar, Tabs, Tab, Typography, Box, Grid, Icon, CircularProgress, Card, Button,\n  ExpansionPanel, ExpansionPanelSummary, ExpansionPanelDetails, InputLabel, MenuItem, FormControl,\n  Select, Table, TableBody, TableCell, TableContainer, TableHead, TablePagination, TableRow,\n  TableSortLabel, FormControlLabel, Switch, Chip, Divider\n} from '@material-ui/core'\nimport { ExpandMore, Search, Done } from '@material-ui/icons';\nimport CodeFlyout from '../CodeFlyout';\nimport rawSampleCode from '!!raw-loader!./QueryBuilder.js'; // eslint-disable-line import/no-webpack-loader-syntax\nimport useStyles from './styles.js';\nimport { ApiHighlight } from '../../Highlights/Highlight';\nimport { TabPanel, a11yProps, descendingComparator, getComparator, stableSort } from './helpers.js';\nimport AppContext from '../../../contexts/AppContext';\nimport { lookerUserTimeHorizonMap } from '../../../LookerHelpers/defaults';\nimport { Loader } from '../../Accessories/Loader';\n\n\nconst { validIdHelper, prettifyString } = require('../../../tools');\n\nexport default function QueryBuilder(props) {\n  // console.log('QueryBuilder')\n\n  const { clientSession, setPaywallModal, show, codeShow, sdk, corsApiCall } = useContext(AppContext)\n  const { userProfile, lookerUser, lookerHost } = clientSession\n\n\n  const topBarBottomBarHeight = 112;\n  const sideBarWidth = 240 + 152; //24 + 24 + 30 + 30 + 12 + 12 + 10 + 10\n  const [value, setValue] = useState(0);\n  const [apiContent, setApiContent] = useState({});\n  const [clientSideCode, setClientSideCode] = useState('');\n  const [serverSideCode, setServerSideCode] = useState('');\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\n  const [width, setWidth] = useState((window.innerWidth - sideBarWidth));\n  const [expansionPanelHeight, setExpansionPanelHeight] = useState(0);\n\n  const classes = useStyles();\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, } = props;\n\n\n  // const handleChange = (event, newValue) => {\n  //   handleTabChange(0);\n  //   setValue(newValue);\n  // };\n\n  useEffect(() => {\n    // call this is filterBar instead to make field chip dynamic\n    // lookerContent.map(lookerContent => {\n    //   setTimeout(() => performLookerApiCalls(lookerContent.queryBody, lookerContent.resultFormat), 100);\n    // })\n    setClientSideCode(rawSampleCode);\n    // setApiContent([])\n  }, [lookerContent, lookerUser])\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", () => {\n      setHeight((window.innerHeight - topBarBottomBarHeight))\n      setWidth((window.innerWidth - sideBarWidth))\n      setExpansionPanelHeight($('.MuiExpansionPanel-root:visible').innerHeight() || 0)\n\n    });\n  })\n\n\n  const performLookerApiCalls = async (newQuery, resultFormat) => {\n    let apiContentCopy = { ...apiContent }\n    apiContentCopy.status = 'running';\n    setApiContent(apiContentCopy)\n\n    let timer = Date.now();\n\n    let lookerCreateQueryResponseData = await sdk.ok(sdk.create_query(newQuery))\n    let lookerCreateTaskResponseData = await sdk.ok(sdk.create_query_task({\n      body: {\n        query_id: lookerCreateQueryResponseData.id,\n        result_format: resultFormat || 'json_detail'//lookerContent[0].resultFormat || 'json'\n      }\n    }))\n\n    let taskInterval = setInterval(async () => {\n      let lookerCheckTaskResponseData = await sdk.ok(sdk.query_task_results(lookerCreateTaskResponseData.id, {\n        method: 'GET',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }));\n\n      if (lookerCheckTaskResponseData.status === 'complete') {\n        clearInterval(taskInterval);\n        setApiContent(lookerCheckTaskResponseData)\n        // setServerSideCode(lookerCreateTaskResponseData.code)\n      }\n\n      //time out after 30 seconds\n      if ((timer + (30 * 1000)) < Date.now()) {\n        clearInterval()\n        setApiContent([])\n      }\n    }, 1000)\n  }\n\n  return (\n    <div className={`${classes.root} demoComponent`}\n      style={{ height }}>\n      <Card elevation={1} className={`\n      ${classes.padding30} \n      ${classes.height100Percent}\n      ${classes.overflowYScroll}`\n      }\n      >\n        <Grid container\n          key={validIdHelper(type)} >\n          <div className={`${classes.root}`}>\n            <Grid item sm={12}>\n              <FilterBar {...props}\n                classes={classes}\n                action={performLookerApiCalls}\n                corsApiCall={corsApiCall}\n              />\n            </Grid>\n            {apiContent.status === 'running' ?\n\n              <Loader classes={classes}\n                height={height}\n                expansionPanelHeight={expansionPanelHeight} />\n\n              : apiContent.data && apiContent.data.length ?\n                <Box>\n                  <Grid container\n                    spacing={3}\n                    className={`${classes.noContainerScroll}`}>\n                    {codeShow ?\n                      <Grid item sm={6}\n                        className={`${classes.positionFixedTopRight}`}\n                      >\n                        <CodeFlyout {...props}\n                          classes={classes}\n                          lookerUser={lookerUser}\n                          height={height}\n                        />\n                      </Grid> : ''}\n                    <Divider className={classes.divider} />\n                    <Grid item sm={12}>\n                      <Box className={`${classes.w100}`} mt={2}>\n                        < EnhancedTable\n                          {...props}\n                          classes={classes}\n                          rows={apiContent.data}\n                          lookerContent={lookerContent}\n                          width={width}\n                        />\n                      </Box>\n                    </Grid>\n                  </Grid>\n                </Box>\n                :\n                <Grid item sm={12} >\n                  <Typography variant=\"h6\" component=\"h6\" className={`${classes.gridTitle} ${classes.textCenter}`}>\n                    No results found, try a new query<br />\n                  </Typography>\n                </Grid>\n            }\n          </div >\n        </Grid >\n      </Card>\n    </div >\n  )\n}\n/**\n * seems inconsistent that filterbar performs performLookerApiCalls here??\n */\n\nfunction FilterBar(props) {\n  // console.log('FilterBar');\n\n\n  const { clientSession, setPaywallModal, show, codeShow, sdk, corsApiCall, isReady } = useContext(AppContext)\n  const { userProfile, lookerUser, lookerHost } = clientSession\n\n  const { staticContent, staticContent: { lookerContent }, classes, action, //lookerUser, corsApiCall \n  } = props;\n\n\n\n  let measureCounter = 0;\n  let dimensionCounter = 0;\n\n\n  const initializeFieldChipDataHelper = () => {\n    let initializedFields = lookerContent[0].queryBody.fields.map((item, index) => {\n      return {\n        key: 'fieldChipData' + index,\n        label: prettifyString(item.substring(item.lastIndexOf('.') + 1, item.length)),\n        datalabel: item,\n        selected: item === 'users.state' || item === 'users.country' || item === 'order_items.total_sale_price' ? true : false,\n        fieldType: lookerContent[0].fieldType[item]\n      }\n    })\n    return initializedFields;\n  }\n\n  const [expanded, setExpanded] = useState(true);\n  const [fieldsChipData, setFieldsChipData] = useState(lookerContent[0].queryBody ? initializeFieldChipDataHelper() : '');\n  const [queryModified, setQueryModified] = useState(true); //set to true initially\n  const [queryShouldRun, setQueryShouldRun] = useState(false); //for lookerUser useEffect\n  const [filtersData, setFilterData] = useState(lookerContent[0].queryBody ? Object.keys(lookerContent[0].queryBody.filters).map((key, index) => {\n    return {\n      key: 'filter' + index,\n      label: key,\n      value: lookerContent[0].queryBody.filters[key],\n      type: lookerContent[0].filterType[key]\n    }\n  }) : '')\n\n  const handleExpansionPanel = (event, newValue) => {\n    setExpanded(expanded ? false : true);\n  };\n\n  const handleFieldChipClick = (chip, index) => {\n    let updatedFieldsChipData = [...fieldsChipData]\n    updatedFieldsChipData[index].selected = updatedFieldsChipData[index].selected === false ? true : false\n    setFieldsChipData(updatedFieldsChipData)\n    setQueryModified(true)\n  }\n\n  const handleSelectChange = (index, newValue) => {\n    let updatedFiltersData = [...filtersData]\n    updatedFiltersData[index].value = newValue;\n    setFilterData(updatedFiltersData)\n    setQueryModified(true)\n  }\n\n  const handleQuerySubmit = (event) => {\n    if (queryModified || queryShouldRun) {\n      let newFields = fieldsChipData.filter(chip => chip.selected).map(item => item.datalabel);\n      let currentFilters = {}; //needs to be object\n      filtersData.map((item, index) => {\n        currentFilters[item.label] = item.value\n      })\n      let newQueryObj = { ...lookerContent[0].queryBody };\n      newQueryObj.fields = newFields;\n      newQueryObj.filters = currentFilters;\n\n      corsApiCall(action, [newQueryObj, lookerContent[0].resultFormat]);\n\n      setQueryModified(false)\n      setQueryShouldRun(false)\n    } //else console.log('elllse')\n  }\n\n\n\n  useEffect(() => {\n    // console.log('useEffect lookerUser')\n    if (isReady) {\n      let updatedFiltersData = [...filtersData]\n      updatedFiltersData[3].value = lookerUserTimeHorizonMap[lookerUser.user_attributes.permission_level] || \"182 days\";\n      setFilterData(updatedFiltersData);\n      setFieldsChipData(initializeFieldChipDataHelper())\n\n      setQueryShouldRun(true);\n\n    }\n  }, [lookerUser, isReady]);\n\n  useEffect(() => {\n    // console.log('useEffect queryShouldRun')\n    if (queryShouldRun) {\n      handleQuerySubmit();\n      setQueryModified(false);\n      setQueryShouldRun(false);\n    }\n  }, [queryShouldRun])\n\n\n  const datePermissionMap = {\n    'basic': [\"1 week\", \"1 month\", \"3 months\", \"last 182 days\"]\n  }\n  datePermissionMap.advanced = [...datePermissionMap.basic, \"last 365 days\"]\n  datePermissionMap.premium = [...datePermissionMap.advanced, \"last 730 days\"]\n\n  return (\n    <ExpansionPanel expanded={expanded} onChange={handleExpansionPanel} elevation={0}>\n      <ExpansionPanelSummary\n        expandIcon={<ExpandMore />}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <Search /><Typography className={`${classes.heading} ${classes.ml12}`}>Build Query:</Typography>\n        {/* <Typography className={classes.heading}>Build Query:</Typography> */}\n      </ExpansionPanelSummary>\n      <ExpansionPanelDetails>\n        <Grid container spacing={3}>\n          <Grid item sm={12}>\n            <Typography variant=\"subtitle1\">\n              Select Metrics:\n      {fieldsChipData.length ?\n                fieldsChipData.map((item, index) => {\n                  return (\n                    item.fieldType === 'measure' ?\n                      <Chip\n                        key={item.label}\n                        // key={prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}\n                        measurecounter={measureCounter += 1}\n                        className={item.selected ? `${classes.orangePrimary} ${classes.m6}` : `${classes.m6}`}\n                        label={prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}\n                        datalabel={item.label}\n                        onClick={() => handleFieldChipClick(item, index)}\n                        icon={item.selected ? <Done className={classes.dBlock} /> : <Done className={classes.dNone} />}\n                      /> : ''\n                  )\n                }) : ''\n              }<br />\n            </Typography>\n          </Grid>\n          <Grid item sm={12}>\n            <Typography variant=\"subtitle1\">\n              Group By:\n                          {fieldsChipData.length ?\n                fieldsChipData.map((item, index) => {\n                  return (\n                    item.fieldType === 'dimension' ?\n                      <Chip\n                        key={item.label}\n                        dimensioncounter={dimensionCounter += 1}\n                        className={item.selected ? `${classes.bluePrimary} ${classes.m6}` : `${classes.m6}`}\n                        label={prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}\n                        datalabel={item.label}\n                        onClick={() => handleFieldChipClick(item, index)}\n                        icon={item.selected ? <Done className={classes.dBlock} /> : <Done className={classes.dNone} />}\n                      /> : ''\n                  )\n                }) : ''\n              }<br />\n            </Typography>\n          </Grid>\n\n          <Grid item sm={3}>\n            <Typography variant=\"subtitle1\">\n              Filter By:\n                      </Typography>\n            {filtersData.length ? filtersData.map((item, index) => {\n              return (\n                <FormControl className={item.value.length ? classes.formControl : classes.hidden} key={validIdHelper(`${item.label}FormControl`)}>\n                  {\n                    item.type === 'yesno' ?\n                      <>\n                        <InputLabel id={validIdHelper(`${item.label}FilterLabel`)}>{prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}:</InputLabel>\n                        <Select\n                          labelId={validIdHelper(`${item.label}FilterLabel`)}\n                          id={validIdHelper(`${item.label}FilterSelect`)}\n                          value={item.value}\n                          onChange={(event) => handleSelectChange(index, event.target.value)}\n                        >\n                          <MenuItem value=\"Yes\">Yes</MenuItem>\n                          <MenuItem value=\"No\">No</MenuItem>\n                          <MenuItem value=\"All\">All</MenuItem>\n                        </Select>\n                      </>\n                      : item.type === 'date' ?\n                        <>\n                          <InputLabel id={validIdHelper(`${item.label}FilterLabel`)}>{prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}:</InputLabel>\n\n                          <Select\n                            labelId={validIdHelper(`${item.label}FilterLabel`)}\n                            id={validIdHelper(`${item.label}FilterSelect`)}\n                            value={item.value || '6 months'}\n                            onChange={(event) => handleSelectChange(index, event.target.value)}\n                          >\n                            {lookerUser.user_attributes.permission_level ? datePermissionMap[lookerUser.user_attributes.permission_level].map(item => (\n                              <MenuItem key={validIdHelper(item)} value={item}>{_.capitalize(item)}</MenuItem>\n                            )) : ''}\n                          </Select>\n                        </>\n                        : ''\n                  }\n                </FormControl>\n              )\n            }) : ''}\n          </Grid>\n          <Grid item sm={9}>\n            <br />\n            <Button\n              color=\"primary\"\n              variant=\"contained\"\n              size=\"large\"\n              onClick={handleQuerySubmit}\n              disabled={queryModified ? false : true}\n            >Run Query</Button></Grid>\n        </Grid>\n      </ExpansionPanelDetails>\n    </ExpansionPanel>\n  )\n}\n\nfunction EnhancedTableHead(props) {\n  const { classes, onSelectAllClick, order, orderBy, numSelected, rowCount, onRequestSort, rows } = props;\n  const createSortHandler = (property) => (event) => {\n    onRequestSort(event, property);\n  };\n\n  return (\n    <TableHead>\n      <TableRow>\n        {Object.keys(rows[0]).map((key, index) => (\n          <TableCell\n            key={validIdHelper(key + '-TableHead-TableCell-' + index)}\n            id={validIdHelper(key + '-TableHead-TableCell-' + index)}\n            align={key.numeric ? 'right' : 'left'}\n            padding={key.disablePadding ? 'none' : 'default'}\n            sortDirection={orderBy === key ? order : false}\n          >\n            <TableSortLabel\n              active={orderBy === key}\n              direction={orderBy === key ? order : 'asc'}\n              onClick={createSortHandler(key)}\n            >\n              {prettifyString(key.substring(key.lastIndexOf('.') + 1, key.length))}\n              {orderBy === key ? (\n                <span className={classes.visuallyHidden}>\n                  {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\n                </span>\n              ) : null}\n            </TableSortLabel>\n          </TableCell>\n        ))}\n      </TableRow>\n    </TableHead>\n  );\n}\n\nEnhancedTableHead.propTypes = {\n  classes: PropTypes.object.isRequired,\n  // numSelected: PropTypes.number.isRequired,\n  onRequestSort: PropTypes.func.isRequired,\n  // onSelectAllClick: PropTypes.func.isRequired,\n  order: PropTypes.oneOf(['asc', 'desc']).isRequired,\n  orderBy: PropTypes.string.isRequired,\n  rowCount: PropTypes.number.isRequired,\n};\n\nfunction EnhancedTable(props) {\n  const { rows, classes, lookerContent, width } = props;\n  const [order, setOrder] = React.useState('asc');\n  const [orderBy, setOrderBy] = React.useState(Object.keys(rows[0])[0]);\n  const [page, setPage] = React.useState(0);\n  const [dense, setDense] = React.useState(true);\n  const [rowsPerPage, setRowsPerPage] = React.useState(25);\n\n  const handleRequestSort = (event, property) => {\n    const isAsc = orderBy === property && order === 'asc';\n    setOrder(isAsc ? 'desc' : 'asc');\n    setOrderBy(property);\n  };\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = (event) => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  const handleChangeDense = (event) => {\n    setDense(event.target.checked);\n  };\n\n  const emptyRows = rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage);\n  return (\n    <div className={`${classes.root} ${classes.padding10}`}>\n      <ApiHighlight classes={classes} >\n        <TableContainer style={{ maxWidth: width }}>\n          <Table\n            className={classes.table}\n            aria-labelledby=\"tableTitle\"\n            size={dense ? 'small' : 'medium'}\n            aria-label=\"enhanced table\"\n          >\n            <EnhancedTableHead\n              {...props}\n              classes={classes}\n              order={order}\n              orderBy={orderBy}\n              onRequestSort={handleRequestSort}\n              rowCount={rows.length}\n            />\n            <TableBody>\n              {stableSort(rows, getComparator(order, orderBy))\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                .map((row, index) => {\n                  return (\n                    <TableRow\n                      hover\n                      key={validIdHelper('TableRow-' + index)}\n                      id={validIdHelper('TableRow-' + index)}>\n                      {Object.keys(row).map((key, index) => (\n                        <TableCell\n                          key={validIdHelper(key + '-TableBody-TableCell-' + index)}\n                          id={validIdHelper(key + '-TableBody-TableCell-' + index)}\n                          className={lookerContent[0].fieldType[key] === 'dimension' ? classes.blueSecondary : classes.orangeSecondary}\n                          align=\"right\">\n                          {row[key].rendered ? row[key].rendered : row[key].value}\n                        </TableCell>\n                      ))}\n                    </TableRow>\n                  );\n                })}\n              {emptyRows > 0 && (\n                <TableRow style={{ height: (dense ? 33 : 53) * emptyRows }}>\n                  <TableCell colSpan={6} />\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </ApiHighlight>\n      <Grid container>\n        <Grid item sm={6}>\n          <FormControlLabel\n            control={<Switch checked={dense} onChange={handleChangeDense} />}\n            label=\"Compact\"\n          /></Grid>\n        <Grid item sm={6}>\n          <TablePagination\n            rowsPerPageOptions={[5, 10, 25, 50]}\n            component=\"div\"\n            count={rows.length}\n            rowsPerPage={rowsPerPage}\n            page={page}\n            onChangePage={handleChangePage}\n            onChangeRowsPerPage={handleChangeRowsPerPage}\n          /></Grid>\n      </Grid>\n      <div className={classes.bottomBarSpacer} />\n    </div>\n  );\n}")}),[M,s]),Object(a.useEffect)((function(){window.addEventListener("resize",(function(){j(window.innerHeight-112),H(window.innerWidth-392),P(Ot()(".MuiExpansionPanel-root:visible").innerHeight()||0)}))}));var z=function(){var e=Object(d.a)(c.a.mark((function e(t,n){var a,o,r,l,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=Object(b.a)({},y)).status="running",v(a),o=Date.now(),e.next=6,i.ok(i.create_query(t));case 6:return r=e.sent,e.next=9,i.ok(i.create_query_task({body:{query_id:r.id,result_format:n||"json_detail"}}));case 9:l=e.sent,s=setInterval(Object(d.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.ok(i.query_task_results(l.id,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}));case 2:"complete"===(t=e.sent).status&&(clearInterval(s),v(t)),o+3e4<Date.now()&&(clearInterval(),v([]));case 5:case"end":return e.stop()}}),e)}))),1e3);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return o.a.createElement("div",{className:"".concat(R.root," demoComponent"),style:{height:S}},o.a.createElement(L.a,{elevation:1,className:"\n      ".concat(R.padding30," \n      ").concat(R.height100Percent,"\n      ").concat(R.overflowYScroll)},o.a.createElement(B.a,{container:!0,key:Ca($)},o.a.createElement("div",{className:"".concat(R.root)},o.a.createElement(B.a,{item:!0,sm:12},o.a.createElement(wa,Object.assign({},e,{classes:R,action:z,corsApiCall:l}))),"running"===y.status?o.a.createElement(vn,{classes:R,height:S,expansionPanelHeight:A}):y.data&&y.data.length?o.a.createElement(Qe.a,null,o.a.createElement(B.a,{container:!0,spacing:3,className:"".concat(R.noContainerScroll)},r?o.a.createElement(B.a,{item:!0,sm:6,className:"".concat(R.positionFixedTopRight)},o.a.createElement(Xe,Object.assign({},e,{classes:R,lookerUser:s,height:S}))):"",o.a.createElement(me.a,{className:R.divider}),o.a.createElement(B.a,{item:!0,sm:12},o.a.createElement(Qe.a,{className:"".concat(R.w100),mt:2},o.a.createElement(Ea,Object.assign({},e,{classes:R,rows:y.data,lookerContent:M,width:N})))))):o.a.createElement(B.a,{item:!0,sm:12},o.a.createElement(U.a,{variant:"h6",component:"h6",className:"".concat(R.gridTitle," ").concat(R.textCenter)},"No results found, try a new query",o.a.createElement("br",null)))))))}function wa(e){var t=Object(a.useContext)(h),n=t.clientSession,r=(t.setPaywallModal,t.show,t.codeShow,t.sdk,t.corsApiCall),i=t.isReady,l=(n.userProfile,n.lookerUser),s=(n.lookerHost,e.staticContent,e.staticContent.lookerContent),c=e.classes,d=e.action,u=0,p=0,f=function(){return s[0].queryBody.fields.map((function(e,t){return{key:"fieldChipData"+t,label:ka(e.substring(e.lastIndexOf(".")+1,e.length)),datalabel:e,selected:"users.state"===e||"users.country"===e||"order_items.total_sale_price"===e,fieldType:s[0].fieldType[e]}}))},g=Object(a.useState)(!0),y=Object(m.a)(g,2),v=y[0],C=y[1],k=Object(a.useState)(s[0].queryBody?f():""),_=Object(m.a)(k,2),w=_[0],x=_[1],E=Object(a.useState)(!0),O=Object(m.a)(E,2),S=O[0],T=O[1],I=Object(a.useState)(!1),H=Object(m.a)(I,2),F=H[0],D=H[1],A=Object(a.useState)(s[0].queryBody?Object.keys(s[0].queryBody.filters).map((function(e,t){return{key:"filter"+t,label:e,value:s[0].queryBody.filters[e],type:s[0].filterType[e]}})):""),P=Object(m.a)(A,2),L=P[0],R=P[1],M=function(e,t){var n=Object(q.a)(w);n[t].selected=!1===n[t].selected,x(n),T(!0)},$=function(e,t){var n=Object(q.a)(L);n[e].value=t,R(n),T(!0)},z=function(e){if(S||F){var t=w.filter((function(e){return e.selected})).map((function(e){return e.datalabel})),n={};L.map((function(e,t){n[e.label]=e.value}));var a=Object(b.a)({},s[0].queryBody);a.fields=t,a.filters=n,r(d,[a,s[0].resultFormat]),T(!1),D(!1)}};Object(a.useEffect)((function(){if(i){var e=Object(q.a)(L);e[3].value=N.lookerUserTimeHorizonMap[l.user_attributes.permission_level]||"182 days",R(e),x(f()),D(!0)}}),[l,i]),Object(a.useEffect)((function(){F&&(z(),T(!1),D(!1))}),[F]);var V={basic:["1 week","1 month","3 months","last 182 days"]};return V.advanced=[].concat(Object(q.a)(V.basic),["last 365 days"]),V.premium=[].concat(Object(q.a)(V.advanced),["last 730 days"]),o.a.createElement(xn.a,{expanded:v,onChange:function(e,t){C(!v)},elevation:0},o.a.createElement(En.a,{expandIcon:o.a.createElement(Dt.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},o.a.createElement(Se.a,null),o.a.createElement(U.a,{className:"".concat(c.heading," ").concat(c.ml12)},"Build Query:")),o.a.createElement(On.a,null,o.a.createElement(B.a,{container:!0,spacing:3},o.a.createElement(B.a,{item:!0,sm:12},o.a.createElement(U.a,{variant:"subtitle1"},"Select Metrics:",w.length?w.map((function(e,t){return"measure"===e.fieldType?o.a.createElement(lt.a,{key:e.label,measurecounter:u+=1,className:e.selected?"".concat(c.orangePrimary," ").concat(c.m6):"".concat(c.m6),label:ka(e.label.substring(e.label.lastIndexOf(".")+1,e.label.length)),datalabel:e.label,onClick:function(){return M(0,t)},icon:e.selected?o.a.createElement(ba.a,{className:c.dBlock}):o.a.createElement(ba.a,{className:c.dNone})}):""})):"",o.a.createElement("br",null))),o.a.createElement(B.a,{item:!0,sm:12},o.a.createElement(U.a,{variant:"subtitle1"},"Group By:",w.length?w.map((function(e,t){return"dimension"===e.fieldType?o.a.createElement(lt.a,{key:e.label,dimensioncounter:p+=1,className:e.selected?"".concat(c.bluePrimary," ").concat(c.m6):"".concat(c.m6),label:ka(e.label.substring(e.label.lastIndexOf(".")+1,e.label.length)),datalabel:e.label,onClick:function(){return M(0,t)},icon:e.selected?o.a.createElement(ba.a,{className:c.dBlock}):o.a.createElement(ba.a,{className:c.dNone})}):""})):"",o.a.createElement("br",null))),o.a.createElement(B.a,{item:!0,sm:3},o.a.createElement(U.a,{variant:"subtitle1"},"Filter By:"),L.length?L.map((function(e,t){return o.a.createElement(mn.a,{className:e.value.length?c.formControl:c.hidden,key:Ca("".concat(e.label,"FormControl"))},"yesno"===e.type?o.a.createElement(o.a.Fragment,null,o.a.createElement(un.a,{id:Ca("".concat(e.label,"FilterLabel"))},ka(e.label.substring(e.label.lastIndexOf(".")+1,e.label.length)),":"),o.a.createElement(pn.a,{labelId:Ca("".concat(e.label,"FilterLabel")),id:Ca("".concat(e.label,"FilterSelect")),value:e.value,onChange:function(e){return $(t,e.target.value)}},o.a.createElement(de.a,{value:"Yes"},"Yes"),o.a.createElement(de.a,{value:"No"},"No"),o.a.createElement(de.a,{value:"All"},"All"))):"date"===e.type?o.a.createElement(o.a.Fragment,null,o.a.createElement(un.a,{id:Ca("".concat(e.label,"FilterLabel"))},ka(e.label.substring(e.label.lastIndexOf(".")+1,e.label.length)),":"),o.a.createElement(pn.a,{labelId:Ca("".concat(e.label,"FilterLabel")),id:Ca("".concat(e.label,"FilterSelect")),value:e.value||"6 months",onChange:function(e){return $(t,e.target.value)}},l.user_attributes.permission_level?V[l.user_attributes.permission_level].map((function(e){return o.a.createElement(de.a,{key:Ca(e),value:e},j.a.capitalize(e))})):"")):"")})):""),o.a.createElement(B.a,{item:!0,sm:9},o.a.createElement("br",null),o.a.createElement(Ne.a,{color:"primary",variant:"contained",size:"large",onClick:z,disabled:!S},"Run Query")))))}function xa(e){var t=e.classes,n=(e.onSelectAllClick,e.order),a=e.orderBy,r=(e.numSelected,e.rowCount,e.onRequestSort),i=e.rows;return o.a.createElement(Hn.a,null,o.a.createElement(Fn.a,null,Object.keys(i[0]).map((function(e,i){return o.a.createElement(In.a,{key:Ca(e+"-TableHead-TableCell-"+i),id:Ca(e+"-TableHead-TableCell-"+i),align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:a===e&&n},o.a.createElement(ua.a,{active:a===e,direction:a===e?n:"asc",onClick:(l=e,function(e){r(e,l)})},ka(e.substring(e.lastIndexOf(".")+1,e.length)),a===e?o.a.createElement("span",{className:t.visuallyHidden},"desc"===n?"sorted descending":"sorted ascending"):null));var l}))))}function Ea(e){var t=e.rows,n=e.classes,a=e.lookerContent,r=e.width,i=o.a.useState("asc"),l=Object(m.a)(i,2),s=l[0],c=l[1],d=o.a.useState(Object.keys(t[0])[0]),u=Object(m.a)(d,2),p=u[0],h=u[1],b=o.a.useState(0),f=Object(m.a)(b,2),g=f[0],y=f[1],v=o.a.useState(!0),C=Object(m.a)(v,2),k=C[0],_=C[1],w=o.a.useState(25),x=Object(m.a)(w,2),E=x[0],O=x[1],S=E-Math.min(E,t.length-g*E);return o.a.createElement("div",{className:"".concat(n.root," ").concat(n.padding10)},o.a.createElement(ct,{classes:n},o.a.createElement(Nn.a,{style:{maxWidth:r}},o.a.createElement(jn.a,{className:n.table,"aria-labelledby":"tableTitle",size:k?"small":"medium","aria-label":"enhanced table"},o.a.createElement(xa,Object.assign({},e,{classes:n,order:s,orderBy:p,onRequestSort:function(e,t){c(p===t&&"asc"===s?"desc":"asc"),h(t)},rowCount:t.length})),o.a.createElement(Tn.a,null,function(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}(t,function(e,t){return"desc"===e?function(e,n){return ya(e,n,t)}:function(e,n){return-ya(e,n,t)}}(s,p)).slice(g*E,g*E+E).map((function(e,t){return o.a.createElement(Fn.a,{hover:!0,key:Ca("TableRow-"+t),id:Ca("TableRow-"+t)},Object.keys(e).map((function(t,r){return o.a.createElement(In.a,{key:Ca(t+"-TableBody-TableCell-"+r),id:Ca(t+"-TableBody-TableCell-"+r),className:"dimension"===a[0].fieldType[t]?n.blueSecondary:n.orangeSecondary,align:"right"},e[t].rendered?e[t].rendered:e[t].value)})))})),S>0&&o.a.createElement(Fn.a,{style:{height:(k?33:53)*S}},o.a.createElement(In.a,{colSpan:6})))))),o.a.createElement(B.a,{container:!0},o.a.createElement(B.a,{item:!0,sm:6},o.a.createElement(pa.a,{control:o.a.createElement(cn.a,{checked:k,onChange:function(e){_(e.target.checked)}}),label:"Compact"})),o.a.createElement(B.a,{item:!0,sm:6},o.a.createElement(ha.a,{rowsPerPageOptions:[5,10,25,50],component:"div",count:t.length,rowsPerPage:E,page:g,onChangePage:function(e,t){y(t)},onChangeRowsPerPage:function(e){O(parseInt(e.target.value,10)),y(0)}}))),o.a.createElement("div",{className:n.bottomBarSpacer}))}var Oa=n(42),Sa=Oa.validIdHelper,ja=Oa.usecaseHelper;function Ta(e){var t=Object(a.useContext)(h),n=t.setClientSession,r=t.clientSession,i=t.sdk,l=t.setSdk,s=t.isReady,u=Object(p.h)().democomponent,f=ie(),g=Object(a.useRef)(!1),y=Object(a.useState)(window.innerWidth>768),v=Object(m.a)(y,2),C=v[0],k=v[1],_=Object(a.useState)(ja(I)),w=Object(m.a)(_,2),x=w[0],E=w[1],S=Object(a.useState)(!1),T=Object(m.a)(S,2),F=T[0],D=T[1],A=Object(a.useState)(!1),P=Object(m.a)(A,2),B=P[0],L=P[1],R=Object(a.useState)({}),U=Object(m.a)(R,2),M=U[0],$=U[1],z=Object(a.useState)(u),V=Object(m.a)(z,2),G=V[0],J=V[1],X=function(){var e=Object(d.a)(c.a.mark((function e(t,a){var o,i,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(b.a)({},r.lookerUser),"brand"===a?o.user_attributes.brand=t:"permission"===a&&(o.permissions=N.lookerUserPermissions[t]||N.lookerUserPermissions.basic,o.user_attributes.permission_level=t,o.user_attributes.time_horizon=N.lookerUserTimeHorizonMap[t]),e.next=4,fetch("/updatelookeruser",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)});case 4:return i=e.sent,e.next=7,i.json();case 7:l=e.sent,n(l.session);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Z=function(){var e=Object(d.a)(c.a.mark((function e(t){var a,o,i,s=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:[],e.next=3,O(r.lookerApiToken.expires_in);case 3:return(o=e.sent).sdk&&l(o.sdk),o.clientSession&&n(o.clientSession),i=t.apply(void 0,Object(q.a)(a)),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){var e=ja(I);E(e),Q.LookerEmbedSDK.init(r.lookerBaseUrl,"/auth"),window.addEventListener("resize",(function(){k(window.innerWidth>768)}))}),[]),Object(a.useEffect)((function(){g.current||(g.current=!0)})),Object(a.useEffect)((function(){F&&D(!F),B&&L(!B),J(u)}),[u]);var ee={atom:se},te={home:Tt,inventoryoverview:wn,webanalytics:wn,salesoverview:wn,salescalendar:Kn,querybuilder:_a,savedreports:da}[G],ne=j.a.find(I[x].demoComponents,(function(e){return G===Sa(j.a.lowerCase(e.label))}));return o.a.createElement("div",{className:f.root},o.a.createElement(h.Provider,{value:{clientSession:r,setClientSession:n,payWallModal:M,setPaywallModal:$,handleSwitchLookerUser:X,drawerOpen:C,setDrawerOpen:k,activeUsecase:x,selectedMenuItem:G,highlightShow:F,setHighlightShow:D,codeShow:B,setCodeShow:L,sdk:i,corsApiCall:Z,atomTheme:se,isReady:s}},o.a.createElement(W.a,{theme:x?ee[x]:le},o.a.createElement(K.a,null),o.a.createElement(ge,null),o.a.createElement(Ge,null),o.a.createElement(Pe,null),o.a.createElement("main",{className:Object(Y.a)(f.content,Object(H.a)({},f.contentShift,C))},o.a.createElement("div",{className:f.drawerHeader}),ne?o.a.createElement(te,{staticContent:ne}):""))))}var Ia=function(e){var t=Object(a.useState)({}),n=Object(m.a)(t,2),r=n[0],i=n[1],l=Object(a.useState)(),s=Object(m.a)(l,2),b=s[0],f=s[1],g=Object(a.useState)(),y=Object(m.a)(g,2),v=y[0],C=y[1],k=Object(a.useState)(!1),w=Object(m.a)(k,2),x=w[0],O=w[1];return Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(c.a.mark((function e(){var t,n,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:(t=e.sent).session&&t.session.userProfile&&(n=t.lookerBaseUrl?t.lookerBaseUrl:"",a=t.lookerApiToken?t.lookerApiToken.api_user_token:"",o=E({accessToken:a,lookerBaseUrl:n}),i(t.session),f(o));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){if(r&&b)O(!0);else if(r.userProfile){var e=r.lookerBaseUrl?r.lookerBaseUrl:"",t=r.lookerApiToken?r.lookerApiToken.api_user_token:"",n=E({accessToken:t,lookerBaseUrl:e});f(n)}}),[r,b]),o.a.createElement(u.a,null,o.a.createElement(h.Provider,{value:{clientSession:r,setClientSession:i,sdk:b,setSdk:f,initialHref:v,setInitialHref:C,isReady:x}},o.a.createElement(p.d,null,o.a.createElement(Na,{path:"/analytics/:democomponent?",isSignedIn:!!r.userProfile,component:Ta,setInitialHref:C,initialHref:v}),o.a.createElement(Ha,{path:"/",exact:!0,isSignedIn:!!r.userProfile,component:G,initialHref:v}),o.a.createElement(p.b,{render:function(){return o.a.createElement(p.a,{to:"/"})}}))))},Na=function(e){var t=e.component,n=e.isSignedIn,a=e.setInitialHref,r=Object(l.a)(e,["component","isSignedIn","setInitialHref"]);return n?a():a(window.location.href),o.a.createElement(p.b,Object.assign({exact:!0},r,{render:function(e){return n?o.a.createElement(t,e):o.a.createElement(p.a,{to:"/"})}}))},Ha=function(e){var t=e.component,n=e.isSignedIn,a=e.initialHref,r=Object(l.a)(e,["component","isSignedIn","initialHref"]),i="/analytics/home";if(a){var s=a.split("/"),c=s.slice(-2),d=s.slice(-1);({home:"SplashPage",inventoryoverview:"Dashboard",webanalytics:"Dashboard",salesoverview:"Dashboard",salescalendar:"CustomVis",querybuilder:"QueryBuilder",savedreports:"ReportBuilder"}).hasOwnProperty(d)&&(i=c.join("/"))}return o.a.createElement(p.b,Object.assign({exact:!0},r,{render:function(e){return n?o.a.createElement(p.a,{to:i}):o.a.createElement(t,e)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(Ia,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},347:function(e,t,n){},42:function(e,t){e.exports={makeid:function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*a));return t},validIdHelper:function(e){return e.replace(/[^a-zA-Z0-9-.#]/g,"")},prettifyString:function(e){var t,n=e.split("_");for(t=0;t<n.length;t++)n[t]=n[t].charAt(0).toUpperCase()+n[t].slice(1);return n.join(" ")},getUrlVars:function(e){for(var t,n={},a=e.slice(e.indexOf("?")+1).split("&"),o=0;o<a.length;o++)n[(t=a[o].split("="))[0]]=t[1];return n},decodeHtml:function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},usecaseHelper:function(e){for(var t=Object.keys(e),n=window.location.href,a=0;a<t.length;a++)if(n.indexOf(t[a])>-1)return t[a];return"atom"}}},516:function(e,t,n){e.exports=n.p+"static/media/atom_logo_black.a213ea2a.svg"},650:function(e,t,n){e.exports=n(1401)},655:function(e,t,n){},673:function(e,t){},675:function(e,t){},693:function(e,t){},695:function(e,t){},72:function(e,t){e.exports={initialLookerUser:{external_user_id:"",first_name:"",last_name:"",session_length:86400,force_logout_login:!0,external_group_id:"",group_ids:[4],permissions:["access_data","see_looks","see_user_dashboards","see_lookml_dashboards","download_with_limit"],models:["atom_fashion"],user_attributes:{locale:"en_US",country:"USA",brand:"Calvin Klein",time_horizon:"last 182 days",permission_level:"basic"}},lookerUserAttributeBrandOptions:[{label:"Columbia"},{label:"Calvin Klein"},{label:"Carhartt"},{label:"Levi's"},{label:"Dockers"}],lookerUserPermissions:{basic:["access_data","see_looks","see_user_dashboards","see_lookml_dashboards","download_with_limit"],advanced:["access_data","see_looks","see_user_dashboards","see_lookml_dashboards","download_with_limit","schedule_look_emails","schedule_external_look_emails","create_alerts","see_drill_overlay"],premium:["access_data","see_looks","see_user_dashboards","see_lookml_dashboards","download_with_limit","schedule_look_emails","schedule_external_look_emails","create_alerts","see_drill_overlay","save_content","embed_browse_spaces","schedule_look_emails","send_to_sftp","send_to_s3","send_outgoing_webhook","send_to_integration","download_without_limit","explore","see_sql"]},lookerUserTimeHorizonMap:{basic:"last 182 days",advanced:"last 365 days",premium:"last 730 days"}}},721:function(e,t){},723:function(e,t){},724:function(e,t){},730:function(e,t){},732:function(e,t){},750:function(e,t){},752:function(e,t){},764:function(e,t){},767:function(e,t){},782:function(e,t){},784:function(e,t){},806:function(e,t){},912:function(e,t,n){var a={"./atom_background1.jpg":913,"./atom_background2.jpg":914,"./atom_background3.jpg":915,"./atom_background4.jpg":916,"./atom_splash_blog.jpg":917,"./atom_splash_inventory.jpg":918,"./atom_splash_trends.jpg":919};function o(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=r,e.exports=o,o.id=912},913:function(e,t,n){e.exports=n.p+"static/media/atom_background1.9ed7593f.jpg"},914:function(e,t,n){e.exports=n.p+"static/media/atom_background2.7d29770e.jpg"},915:function(e,t,n){e.exports=n.p+"static/media/atom_background3.b9aecb61.jpg"},916:function(e,t,n){e.exports=n.p+"static/media/atom_background4.1acd6c1b.jpg"},917:function(e,t,n){e.exports=n.p+"static/media/atom_splash_blog.57457a86.jpg"},918:function(e,t,n){e.exports=n.p+"static/media/atom_splash_inventory.6bbb655e.jpg"},919:function(e,t,n){e.exports=n.p+"static/media/atom_splash_trends.dbd4fdc6.jpg"},920:function(e,t,n){var a={"./atom_logo_black.svg":516};function o(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=r,e.exports=o,o.id=920},934:function(e,t,n){var a={"./atom.svg":935,"./atom_logo_black.svg":516,"./atom_logo_white.svg":936};function o(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=r,e.exports=o,o.id=934},935:function(e,t,n){e.exports=n.p+"static/media/atom.e208988c.svg"},936:function(e,t,n){e.exports=n.p+"static/media/atom_logo_white.89cfe3df.svg"}},[[650,1,2]]]);
//# sourceMappingURL=main.6b161385.chunk.js.map