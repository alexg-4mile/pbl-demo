(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{1004:function(e,n){},1006:function(e,n){},1035:function(e,n,t){var a={"./atom.svg":1036,"./atom_logo_black.svg":462,"./atom_logo_white.svg":1037};function o(e){var n=r(e);return t(n)}function r(e){if(!t.o(a,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=r,e.exports=o,o.id=1035},1036:function(e,n,t){e.exports=t.p+"static/media/atom.e208988c.svg"},1037:function(e,n,t){e.exports=t.p+"static/media/atom_logo_white.89cfe3df.svg"},1038:function(e,n,t){var a={"./atom_background1.jpg":1039,"./atom_background2.jpg":1040,"./atom_background3.jpg":1041,"./atom_background4.jpg":1042,"./atom_splash_blog.jpg":444,"./atom_splash_inventory.jpg":445,"./atom_splash_trends.jpg":446};function o(e){var n=r(e);return t(n)}function r(e){if(!t.o(a,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=r,e.exports=o,o.id=1038},1039:function(e,n,t){e.exports=t.p+"static/media/atom_background1.9ed7593f.jpg"},1040:function(e,n,t){e.exports=t.p+"static/media/atom_background2.7d29770e.jpg"},1041:function(e,n,t){e.exports=t.p+"static/media/atom_background3.b9aecb61.jpg"},1042:function(e,n,t){e.exports=t.p+"static/media/atom_background4.1acd6c1b.jpg"},1043:function(e,n,t){var a={"./atom_logo_black.svg":462};function o(e){var n=r(e);return t(n)}function r(e){if(!t.o(a,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=r,e.exports=o,o.id=1043},1058:function(e,n){},1060:function(e,n){},1097:function(e,n){},1098:function(e,n){},1159:function(e,n){},1263:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(31),i=t.n(r),l=(t(637),t(37)),s=t(9),c=t.n(s),d=t(18),m=t(26),u=t(83),p=t(57),h=t(51),g=t(133),b=t(132),f=(t(639),t(49)),y=t(567),C=t(35),k=t(44),v=t.n(k),_=t(3),w=t(5),x=t(1378),E=t(1407),T=t(1265),S=t(1389),O=t(1366),j=t(1365),I=t(1396),N=t(1381),F=t(1333),A=t(1266),D=t(1376),H=t(1375),P=t(1379),B=t(1380),M=t(1382),U=t(1383),L=t(1384),$=t(1385),R=t(1386),V=t(1371),G=t(1387),W=t(564),q=t.n(W),z=t(568),Q=t(1348),K=t(273),Y=t(276),J=t(7),X=t(1329),Z=t(178),ee=t(570),ne=t(1334),te=t(1335),ae=t(1399),oe=t(1390),re=o.a.createContext(null),ie=(t(67).validIdHelper,Object(X.a)((function(e){return{zIndex1500:{zIndex:1500},mr12:{marginRight:12}}})));function le(e){var n=e.lookerUser,t=e.onLogoutSuccess,r=e.lookerUserAttributeBrandOptions,i=e.handleUserMenuSwitch,l=ie(),s=Object(a.useContext)(re),c=s.togglePayWallModal,d=(s.codeShow,s.toggleShow,s.userProfile),m=o.a.useState(null),u=Object(J.a)(m,2),p=u[0],h=u[1],g=o.a.useState(n.user_attributes.brand||""),b=Object(J.a)(g,2),f=b[0],y=b[1],C=function(e,n){h(null),null==e?t({}):"modal"===e?c({show:!0,permissionNeeded:"explore"}):"string"===typeof e&&i(e,n)};return Object(a.useEffect)((function(){y(n.user_attributes.brand||"")}),[n]),o.a.createElement("div",{className:"".concat(l.zIndex1500)},o.a.createElement(T.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){h(e.currentTarget)},color:"inherit"},o.a.createElement(I.a,{alt:d.name,src:d.imageUrl,className:l.mr12}),o.a.createElement(Z.a,null,"string"===typeof n.user_attributes.permission_level?n.user_attributes.permission_level.charAt(0).toUpperCase()+n.user_attributes.permission_level.substring(1):"")),o.a.createElement(ee.a,{id:"simple-menu",anchorEl:p,keepMounted:!0,open:Boolean(p),onClose:C},o.a.createElement(ne.a,{autoFocus:!1},"Select User Level"),o.a.createElement(ne.a,{autoFocus:!1,onClick:function(){return C("basic","permission")}},"Basic"),o.a.createElement(ne.a,{autoFocus:!1,onClick:function(){return C("advanced","permission")}},"Advanced"),o.a.createElement(ne.a,{autoFocus:!1,onClick:function(){return C("premium","permission")}},"Premium"),o.a.createElement(te.a,{className:l.divider}),o.a.createElement(ne.a,{onClick:function(){return C(null)}},"Sign Out"),o.a.createElement(te.a,{className:l.divider}),o.a.createElement(ne.a,{onClick:function(){return C("modal")}},"Show Monetization Modal"),o.a.createElement(te.a,{className:l.divider}),o.a.createElement(ne.a,null,"Current brand: ",f),o.a.createElement(ne.a,null,o.a.createElement(oe.a,{id:"combo-box-usermenu",options:r,getOptionLabel:function(e){return e.label},style:{width:300},onChange:function(e){return C(e.target.innerText||"","brand")},renderInput:function(e){return o.a.createElement(ae.a,Object.assign({},e,{label:"Change merchant brand",variant:"outlined"}))},loadingText:"Loading...",disableautofocus:"true",onKeyDown:function(e){return e.stopPropagation()}}))))}var se=t(39),ce=t(84),de=t(46),me=t.n(de),ue=t(1343),pe=t(1340),he=t(1344),ge=t(1267),be=t(544),fe=t.n(be),ye=t(1395),Ce=t(1341);function ke(e){var n=Object(a.useContext)(re).toggleCodeShow,t=Object(a.useContext)(re).codeShow,r=e.classes,i=(e.lookerContent,e.clientSideCode,e.serverSideCode,e.lookerUser),l=(e.permissionNeededCode,e.height);return o.a.createElement(ge.a,{in:t||!1},Object.keys(i).length?o.a.createElement(pe.a,{container:!0,spacing:3,className:"".concat(r.padding20," ").concat(r.codeFlyoutContainer),style:{height:l}},o.a.createElement(pe.a,{item:!0,sm:11},o.a.createElement(Z.a,{variant:"h6",className:" ".concat(r.mrAuto),style:{color:"white"}},"Looker User Object")),o.a.createElement(pe.a,{item:!0,sm:1,style:{textAlign:"right"}},o.a.createElement(fe.a,{style:{color:"white",cursor:"pointer"},onClick:function(){return n()}})),o.a.createElement(pe.a,{item:!0,sm:12},o.a.createElement(ve,{code:i}))):"")}function ve(e){var n=e.code;return o.a.createElement(ye.a,{language:"json",style:Ce.a,showLineNumbers:!0},"object"===typeof n?JSON.stringify(n,!0,4):n)}var _e=t(274),we=t(277),xe=_e.a[500],Ee=we.a[500],Te=(_e.a[900],we.a[900],_e.a[100]),Se=we.a[100],Oe=Object(X.a)((function(e){var n;return n={root:{flexGrow:1,backgroundColor:e.palette.background.paper,overflow:"scroll",borderRadius:8},flexCentered:{display:"flex",justifyContent:"center",alignItems:"center"},hidden:{visibility:"hidden",position:"absolute",zIndex:-1},tabs:{backgroundColor:"white",color:"#6c757d"},dNone:{display:"none"},dBlock:{display:"block"},tree:{height:240,flexGrow:1,maxWidth:400},icon:{marginRight:12,fontSize:"1rem",overflow:"visible"},mt12:{marginTop:12},w100:{width:"100%"},mlAuto:{marginLeft:"auto"},skeleton:{minWidth:275,minHeight:600},card:{minWidth:275},maxHeight200:{maxHeight:200,height:200,overflow:"hidden"},mt30:{marginTop:30},mb30:{marginBottom:30},textCenter:{textAlign:"center"},cursorPointer:{cursor:"pointer"},border:{border:"1px solid black"},height800:{height:800},maxHeight100:{maxHeight:100,height:100},maxHeight400:{maxHeight:400,height:400},minHeight200:{minHeight:200,overflow:"scroll"},redNeg:{backgroundColor:Te,color:xe,fontWeight:800},greenPos:{backgroundColor:Se,color:Ee,fontWeight:800},padding30:{padding:30},mb12:{marginBottom:12},overflowScroll:{overflow:"scroll"},overflowHidden:{overflow:"hidden"},overflowVisible:{overflow:"visible"},maxHeight150:{maxHeight:150,height:150},minHeight150:{minHeight:150,overflow:"scroll"},carouselLegend:{backgroundColor:"rgb(192,192,192, .5)\t !important",textAlign:"center !important",opacity:"100 !important",fontWeight:800},carouselLegendTitle:{fontSize:"24px !important"},carouselLegendBody:{fontSize:"16px !important"},positionRelative:{position:"relative"},padding15:{padding:15},maxHeight75:{maxHeight:75,height:75},overflowYScroll:{overflowY:"scroll",overflowX:"hidden"},drawerHeader:Object(d.a)(Object(d.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),padding20:{padding:20},positionFixedTopRight:{position:"fixed",top:88,right:24,bottom:0,zIndex:100},codeFlyoutContainer:{backgroundColor:"rgb(40, 42, 54)",overflow:"scroll",borderRadius:"0 8px 8px 0"}},Object(C.a)(n,"overflowScroll",{overflow:"scroll"}),Object(C.a)(n,"overflowHidden",{overflow:"hidden"}),Object(C.a)(n,"height100Percent",{height:"100%"}),Object(C.a)(n,"noContainerScroll",{width:"100%",margin:0}),Object(C.a)(n,"lookerCardShadow",{border:"none",borderRadius:"6px",boxShadow:"rgba(0, 0, 0, 0.11) 0px 2px 12px, rgba(0, 0, 0, 0.04) 0px 1px 4px"}),Object(C.a)(n,"maxHeight60",{maxHeight:60,height:60}),Object(C.a)(n,"maxHeight350",{maxHeight:350,height:350}),Object(C.a)(n,"maxHeight80Percent",{maxHeight:"80%",height:"80%"}),n}));var je=t(1398);function Ie(e){var n=e.children,t=e.color,r=e.height,i=e.width,l=e.margin,s=e.id,c=e.backgroundColor,m=(Object(u.a)(e,["children","color","height","width","margin","id","backgroundColor"]),{});return m=Object(a.useContext)(re).show?Object(d.a)(Object(d.a)({},m),{},{border:"3px solid ".concat(t),backgroundColor:"".concat(c),borderRadius:"4px",position:"relative"}):{border:"3px solid transparent",backgroundColor:"transparent"},r&&(m.height=r),i&&(m.width=i),l&&(m.margin=l),o.a.createElement("div",{id:s,style:m},n)}function Ne(e){var n=Object.assign({},e),t=Object(a.useContext)(re).show,r=n.classes,i=n.children;return o.a.createElement(Ie,Object.assign({},n,{color:"#A142F4",backgroundColor:"rgba(161, 66, 244, 0.1)"}),o.a.createElement(je.a,{size:"small",label:"API",className:t?"test":"".concat(r.hidden),display:"inline",align:"right",style:{backgroundColor:"#A142F4",color:"#fff",top:"-10px",left:"-10px",position:"absolute"}}),i)}function Fe(e){var n=Object.assign({},e),t=Object(a.useContext)(re).show,r=n.classes,i=n.children;return o.a.createElement(Ie,Object.assign({},n,{color:"#12B5CB",backgroundColor:"rgba(18, 181, 203, 0.1)"}),o.a.createElement(je.a,{size:"small",label:"Embed",className:t?"test":"".concat(r.hidden),display:"inline",align:"right",style:{backgroundColor:"#12B5CB",color:"#fff",top:"-10px",left:"-10px",position:"absolute"}}),i)}function Ae(e){var n=Object.assign({},e),t=Object(a.useContext)(re).show,r=n.classes,i=n.children;return o.a.createElement(Ie,Object.assign({},n,{color:"#297AF4",backgroundColor:"rgba(41, 122, 244, 0.1)"}),o.a.createElement(je.a,{size:"small",label:"Embed Method",className:t?"test":"".concat(r.hidden),display:"inline",align:"right",style:{backgroundColor:"#297AF4",color:"#fff",top:"-10px",left:"-10px",position:"absolute"}}),i)}var De=t(358),He=t(67),Pe=He.validIdHelper,Be=He.decodeHtml;function Me(e){var n=e.lookerContent,t=e.classes,r=Object(a.useState)(void 0),i=Object(J.a)(r,2),l=i[0],s=i[1],d=Object(a.useContext)(re),u=(d.userProfile,d.lookerUser),p=(d.show,d.sdk),h=d.corsApiCall,g={};Object(a.useEffect)((function(){var e=!0;return h(b).then((function(n){e&&s(n)})),function(){return e=!1}}),[n,u]);var b=function(){var e=Object(m.a)(c.a.mark((function e(){var t,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(void 0),t=n.inlineQuery,e.next=4,p.ok(p.run_inline_query({result_format:n.result_format||"json",body:t}));case 4:return a=e.sent,g.id=Pe("singleVisValue-".concat(n.id)),g.data=[],o=[],a.map((function(e){if(e[n.inlineQuery.fields[0]]){var t={x:e[n.inlineQuery.fields[0]].toString(),y:e[n.inlineQuery.fields[1]]||0,change:e.change};t&&"null"!==t.y&&o.push(t)}})),g.data=[].concat(o),e.abrupt("return",[g]);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=l&&l.length?isNaN((100*l[0].data[0].change).toFixed(2))?"":parseInt((100*l[0].data[0].change).toFixed(0))>=0?"&uarr;":"&darr;":"",y=l?"revenue"===n.chipFormat?"$".concat((l[0].data&&l[0].data[0]?l[0].data[0].y.toFixed(2):"").replace(/\d(?=(\d{3})+\.)/g,"$&,")):"integer"===n.chipFormat?parseInt(l[0].data&&l[0].data[0]?l[0].data[0].y.toFixed(2):""):"percent"===n.chipFormat?"".concat(100*(l[0].data&&l[0].data[0]?l[0].data[0].y.toFixed(2):""),"% "):"":"";return o.a.createElement(ue.a,{className:"".concat(t.padding15," \n    ").concat(t.overflowHidden," \n    ").concat(t.lookerCardShadow,"\n    ")},o.a.createElement("div",{style:{height:n.height}},l?o.a.createElement(o.a.Fragment,null,o.a.createElement(Ne,{height:130,classes:t},o.a.createElement(pe.a,{container:!0,className:"".concat(t.textCenter," ")},o.a.createElement(pe.a,{item:!0,sm:12},o.a.createElement(Z.a,{variant:"body2",align:"left",color:"secondary"},n.label)),o.a.createElement(pe.a,{item:!0,sm:6},o.a.createElement(Z.a,{variant:"subtitle1",align:"left"},o.a.createElement("b",null,y))),o.a.createElement(pe.a,{item:!0,sm:6},o.a.createElement(je.a,{size:"small",label:"".concat(Be(f)," ").concat(parseInt(100*l[0].data[0].change).toFixed(0),"% "),className:isNaN((100*l[0].data[0].change).toFixed(2))?"":parseInt((100*l[0].data[0].change).toFixed(0))>=0?t.greenPos:t.redNeg,display:"inline",align:"right"}))),o.a.createElement(De.a,{data:l,margin:{top:25,right:25,bottom:25,left:25},xScale:{type:"time",format:"%Y-%m-%d",precision:"day"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!0,reverse:!1},axisLeft:{orient:"left",tickSize:0,tickPadding:5,tickRotation:0,format:function(){return null}},axisBottom:{orient:"bottom",tickSize:0,tickPadding:5,tickRotation:0,format:function(){return null}},enablePoints:!1,enableGridX:!1,enableGridY:!1,height:100,colors:n.visColor,animate:!0}))):o.a.createElement(pe.a,{item:!0,sm:12,className:"".concat(t.flexCentered," "),style:{height:n.height}},o.a.createElement(he.a,{className:t.circularProgress,style:{color:"".concat(n.visColor," ")}}))))}t(438);var Ue=t(67),Le=(Ue.validIdHelper,Ue.decodeHtml);function $e(e){var n=e.lookerContent,t=e.inlineQuery,r=e.index,i=e.classes,l=Object(a.useState)(void 0),s=Object(J.a)(l,2),d=s[0],u=s[1],p=Object(a.useContext)(re),h=(p.userProfile,p.lookerUser),g=(p.show,p.sdk),b=p.corsApiCall;Object(a.useEffect)((function(){var e=!0;return b(f).then((function(n){e&&u(n)})),function(){return e=!1}}),[t,h]);var f=function(){var e=Object(m.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(void 0),e.next=3,g.ok(g.run_inline_query({result_format:n.result_format||"json",body:t}));case 3:return a=e.sent,e.abrupt("return",a[0]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=d?d.change>0?"&uarr;":"&darr;":"";return o.a.createElement(pe.a,{item:!0,sm:12},d?o.a.createElement(o.a.Fragment,null,o.a.createElement(Ne,{classes:i},o.a.createElement(Z.a,{variant:"subtitle1",display:"inline"},"Your ",n.inlineQueriesMap[r]," category, ",o.a.createElement("b",null,d["products.category"]),", is ",d.change>0?"up ":"down "),o.a.createElement(je.a,{size:"small",label:"".concat(Le(y)," ").concat(parseInt(100*d.change).toFixed(0),"% "),className:d.change>0?i.greenPos:i.redNeg,display:"inline"}),o.a.createElement(Z.a,{variant:"subtitle1",display:"inline"},"\xa0over the past week."))):o.a.createElement("div",{style:{height:"56px"}}))}var Re=t(67).validIdHelper;function Ve(e){var n=e.lookerContent,t=e.classes,r=Object(a.useContext)(re),i=r.userProfile,l=r.lookerUser;return Object(a.useEffect)((function(){}),[n,l]),o.a.createElement("div",{className:"".concat(t.overflowScroll," ").concat(t.padding15),style:{maxHeight:n.height}},o.a.createElement(Z.a,{variant:"h4"},"Welcome back, ",i.givenName,"!"),o.a.createElement("br",null),o.a.createElement(o.a.Fragment,null,n.inlineQueries.map((function(e,a){return o.a.createElement($e,Object.assign({key:"".concat(Re("naturalLanguage-splashPage-"+a))},{lookerContent:n,inlineQuery:e,index:a,classes:t}))}))))}function Ge(e){e.lookerContent;var n=e.classes,t=e.item,r=e.handleMenuItemSelect,i=e.index,l=Object(a.useState)(void 0),s=Object(J.a)(l,2),d=s[0],u=s[1],p=Object(a.useContext)(re),h=(p.userProfile,p.lookerUser),g=(p.show,p.sdk),b=p.corsApiCall;Object(a.useEffect)((function(){var e=!0;return b(f).then((function(n){e&&u(n)})),function(){return e=!1}}),[t,h]);var f=function(){var e=Object(m.a)(c.a.mark((function e(){var n,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.ok(g.content_thumbnail({type:t.resourceType,resource_id:t.id}));case 2:return n=e.sent,a=new Blob([n],{type:"image/svg+xml"}),o=URL.createObjectURL(a),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(pe.a,{container:!0,onClick:function(){return r(t.id,1)},className:"".concat(n.cursorPointer),spacing:3},d?o.a.createElement(o.a.Fragment,null,o.a.createElement(pe.a,{item:!0,sm:1}),o.a.createElement(pe.a,{item:!0,sm:6},o.a.createElement(Ne,{classes:n},o.a.createElement("div",{className:" ".concat(n.maxHeight60," ").concat(n.textCenter," ").concat(n.cursorPointer," ").concat(n.overflowHidden)},o.a.createElement("img",{onClick:function(){return r(t.id,1)},src:d,style:{width:"100%"}})))),o.a.createElement(pe.a,{item:!0,sm:4},o.a.createElement(Z.a,{variant:"subtitle1"},t.label)),i<2?o.a.createElement(pe.a,{item:!0,sm:12},o.a.createElement(te.a,{className:"".concat(n.divider," ").concat(n.mb12," ").concat(n.mt12)})):""):"")}var We=t(67).validIdHelper;function qe(e){var n=e.lookerContent,t=e.classes,r=e.handleMenuItemSelect,i=Object(a.useState)([]),l=Object(J.a)(i,2);l[0],l[1];return o.a.createElement(ue.a,{className:"".concat(t.padding15," \n    ").concat(t.overflowHidden," \n    ").concat(t.lookerCardShadow,"\n    ")},o.a.createElement("div",{className:"".concat(t.overflowYScroll),style:{height:n.height}},o.a.createElement(pe.a,{container:!0,spacing:3},o.a.createElement(pe.a,{item:!0,sm:12},o.a.createElement(Z.a,{variant:"h6",align:"center",color:"secondary"},"Helpful Dashboards")),n.vectors.map((function(e,a){return o.a.createElement(Ge,Object.assign({key:"".concat(We("vectorThumbnail-splashPage-"+a))},{lookerContent:n,item:e,classes:t,handleMenuItemSelect:r,index:a}))})))))}var ze=t(557);t(67).validIdHelper;function Qe(e){var n=e.lookerContent,r=e.classes,i=Object(a.useContext)(re),l=(i.userProfile,i.lookerUser);Object(a.useEffect)((function(){}),[n,l]);var s=t(444),c=t(445),d=t(446);return o.a.createElement("div",{className:"".concat(r.overflowHidden,"  MuiPaper-rounded"),style:{maxHeight:n.height,borderRadius:"4px"}},o.a.createElement(ze.Carousel,{infiniteLoop:!0,autoPlay:!0,showThumbs:!1},o.a.createElement("div",{style:{maxHeight:n.height}},o.a.createElement("img",{src:s}),o.a.createElement("p",{className:"legend ".concat(r.carouselLegend)},o.a.createElement("span",{className:"".concat(r.carouselLegendTitle)},"Blog"),o.a.createElement("br",null),o.a.createElement("span",{className:"".concat(r.carouselLegendBody)},"".concat("Read our latest thoughts on the ecommerce landscape".substring(0,50),"...")))),o.a.createElement("div",{style:{maxHeight:n.height}},o.a.createElement("img",{src:c}),o.a.createElement("p",{className:"legend ".concat(r.carouselLegend)},o.a.createElement("span",{className:"".concat(r.carouselLegendTitle)},"Inventory Best Practices"),o.a.createElement("br",null),o.a.createElement("span",{className:"".concat(r.carouselLegendBody)},"".concat("McKinsey & Co found in a recent study that retailers who implement JIT inventory and fulfillment practices can result in 5 - 15% longer run operating margin vs similar competitors that don\u2019t while maintaining similar CSAT scores".substring(0,50),"...")))),o.a.createElement("div",{style:{maxHeight:n.height}},o.a.createElement("img",{src:d}),o.a.createElement("p",{className:"legend ".concat(r.carouselLegend)},o.a.createElement("span",{className:"".concat(r.carouselLegendTitle)},"Macro Trends"),o.a.createElement("br",null),o.a.createElement("span",{className:"".concat(r.carouselLegendBody)},"".concat("Online and brick and mortar retailers are rapidly converging on Omni Channel where the traditional walls of retail vs online are blurred. Amazon partners with Kohls to create in person returns and Walmart acquires Jet.com to boost its reach and  ability to execute an online strategy. As a brand partner how do you capitalize on these trends?".substring(0,50),"..."))))))}var Ke=t(1345),Ye=t(1346),Je=t(1347);function Xe(e){var n=e.classes,t=Object(a.useContext)(re).toggleShow,r=Object(a.useContext)(re).toggleCodeShow;return o.a.createElement(pe.a,{container:!0,className:"".concat(n.mtAuto," ").concat(n.mb10)},o.a.createElement(pe.a,{item:!0,sm:6},o.a.createElement(Ke.a,{display:"inline",startIcon:o.a.createElement(Ye.a,null),onClick:t},"Source")),o.a.createElement(pe.a,{item:!0,sm:6},o.a.createElement(Ke.a,{className:"".concat(n.ml12),display:"inline",startIcon:o.a.createElement(Je.a,null),onClick:r},"Code")))}t(973);function Ze(e){var n=e.lookerContent,t=e.classes,r=e.id,i=Object(a.useState)(0),l=Object(J.a)(i,2),s=l[0],d=l[1],u=Object(a.useContext)(re),p=(u.userProfile,u.lookerUser),h=(u.show,u.lookerHost);return Object(a.useEffect)((function(){me()("#".concat(r)).html(""),d(0);var e=encodeURIComponent("embed/query/atom_fashion/order_items?fields=order_items.created_time,users.name,order_items.total_sale_price,users.approx_location,users.city&f[users.country]=USA&sorts=order_items.created_time+desc&limit=100&query_timezone=America%2FLos_Angeles&vis=%7B%22map_plot_mode%22%3A%22points%22%2C%22heatmap_gridlines%22%3Afalse%2C%22heatmap_gridlines_empty%22%3Afalse%2C%22heatmap_opacity%22%3A0.5%2C%22show_region_field%22%3Atrue%2C%22draw_map_labels_above_data%22%3Atrue%2C%22map_tile_provider%22%3A%22traffic_day%22%2C%22map_position%22%3A%22custom%22%2C%22map_scale_indicator%22%3A%22off%22%2C%22map_pannable%22%3Atrue%2C%22map_zoomable%22%3Atrue%2C%22map_marker_type%22%3A%22circle%22%2C%22map_marker_icon_name%22%3A%22shopping_cart%22%2C%22map_marker_radius_mode%22%3A%22proportional_value%22%2C%22map_marker_units%22%3A%22pixels%22%2C%22map_marker_proportional_scale_type%22%3A%22linear%22%2C%22map_marker_color_mode%22%3A%22fixed%22%2C%22show_view_names%22%3Afalse%2C%22show_legend%22%3Atrue%2C%22quantize_map_value_colors%22%3Afalse%2C%22reverse_map_value_colors%22%3Afalse%2C%22map_latitude%22%3A40.267214274019075%2C%22map_longitude%22%3A-94.70352172851564%2C%22map_zoom%22%3A4%2C%22map_marker_color%22%3A%5B%22%234595EC%22%5D%2C%22series_types%22%3A%7B%7D%2C%22type%22%3A%22looker_map%22%2C%22defaults_version%22%3A1%2C%22hidden_fields%22%3A%5B%22users.name%22%2C%22order_items.created_time%22%5D%7D&filter_config={}&origin=share-expanded&sdk=2&embed_domain=".concat(document.location.origin));function t(){return(t=Object(m.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/auth?src=".concat(e)).then((function(e){return e.json()})).then((function(e){se.LookerEmbedSDK.createExploreWithUrl(e.url).appendTo(document.getElementById(r)).withClassName("explore").withClassName("splashPage").withClassName(n.id).withTheme("atom_fashion").build().connect().then((function(e){d(1),se.LookerEmbedSDK.init("https://".concat(h,".looker.com"))})).catch((function(e){console.error("Connection error",e)}))}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[p]),o.a.createElement(ue.a,{className:"".concat(t.padding15," \n    // ").concat(t.overflowHidden," \n    ").concat(t.lookerCardShadow,"\n    ")},o.a.createElement("div",{className:"".concat(t.overflowHidden),style:{height:n.height}},s?"":o.a.createElement(pe.a,{item:!0,sm:12},o.a.createElement(ue.a,{className:"".concat(t.card," ").concat(t.flexCentered," ").concat(t.maxHeight350," ").concat(t.overflowHidden),elevation:0},o.a.createElement(he.a,{className:t.circularProgress}))),o.a.createElement(pe.a,{container:!0,spacing:4},o.a.createElement(pe.a,{item:!0,sm:12},o.a.createElement(Fe,{classes:t,height:s?350:0},o.a.createElement(Z.a,{variant:"h6",align:"center",color:"secondary"},n.title),o.a.createElement("div",{className:"embedContainer embedContainerNoHeader splashPage ".concat(t.overflowHidden," ").concat(t.maxHeight80Percent),id:r,key:r}))))))}var en=t(67).validIdHelper;function nn(e){var n=Object(a.useState)(0),t=Object(J.a)(n,2),r=(t[0],t[1],Object(a.useState)(1)),i=Object(J.a)(r,2),l=i[0],s=(i[1],Object(a.useState)("")),c=Object(J.a)(s,2),d=(c[0],c[1],Object(a.useState)("")),m=Object(J.a)(d,2),u=(m[0],m[1],Object(a.useState)(window.innerHeight-112)),p=Object(J.a)(u,2),h=p[0],g=p[1],b=(Object(a.useContext)(re).toggleShow,Object(a.useContext)(re).show,Object(a.useContext)(re).codeShow),f=Oe(),y=(e.staticContent,e.staticContent.lookerContent),C=e.staticContent.type,k=(e.handleTabChange,e.handleMenuItemSelect),v=e.lookerUser,_=e.lookerHost,w=C||"code flyout";return Object(a.useEffect)((function(){window.addEventListener("resize",(function(){return g(window.innerHeight-112)}))}),[y]),o.a.createElement("div",{className:"".concat(f.root," demoComponent"),style:{height:h}},o.a.createElement(ue.a,{elevation:1,className:"".concat(f.padding30," \n      ").concat(f.height100Percent,"\n      ").concat(f.overflowScroll)},o.a.createElement(pe.a,{container:!0,key:en(C)},o.a.createElement("div",{className:f.root},l?"":o.a.createElement(pe.a,{item:!0,sm:12},o.a.createElement(ue.a,{className:"".concat(f.card," ").concat(f.flexCentered)},o.a.createElement(he.a,{className:f.circularProgress}))),o.a.createElement(S.a,{className:l?"":"".concat(f.hidden)},o.a.createElement(pe.a,{container:!0,spacing:3,key:"".concat(en(w+"-outerFragment")),className:"".concat(f.noContainerScroll)},b?o.a.createElement(pe.a,{item:!0,sm:6,className:"".concat(f.positionFixedTopRight)},o.a.createElement(ke,Object.assign({},e,{classes:f,lookerUser:v,height:h}))):"",y.map((function(e,n){return o.a.createElement(pe.a,{key:"".concat(en(w+"-innerFragment-"+n)),item:!0,sm:parseInt(e.gridWidth)},"welcome"===e.type&&o.a.createElement(Ve,{lookerContent:e,classes:f,demoComponentType:w,lookerHost:_}),"carousel"===e.type&&o.a.createElement(Qe,{lookerContent:e,classes:f,demoComponentType:w,lookerHost:_}),"single value"===e.type&&o.a.createElement(Me,{lookerContent:e,classes:f,demoComponentType:w,lookerHost:_}),"dashboard"===e.type&&o.a.createElement(Ze,Object.assign({lookerContent:e,classes:f,lookerHost:_},{id:en("embedContainer-".concat(w,"-").concat(e.id))})),"popular analysis"===e.type&&o.a.createElement(qe,{lookerContent:e,classes:f,demoComponentType:w,handleMenuItemSelect:k,lookerHost:_}))}))))))))}var tn=t(1402),an=t(1353),on=t(1356),rn=t(1403),ln=t(1404),sn=t(1339),cn=t(1401),dn=t(1394),mn=t(1349),un=t(1408),pn=t(1357),hn=t(1350),gn=t(1351),bn=t(1352),fn=t(1354),yn=t(1355),Cn=Object(X.a)((function(e){return{root:{flexGrow:1,overflow:"scroll",borderRadius:"8px"},flexCentered:{display:"flex",justifyContent:"center",alignItems:"center"},hidden:{visibility:"hidden"},tabs:{backgroundColor:"white",color:"#6c757d"},dNone:{display:"none"},dBlock:{display:"block"},tree:{height:240,flexGrow:1,maxWidth:400},icon:{marginRight:12,fontSize:"1rem",overflow:"visible"},mt12:{marginTop:12},w100:{width:"100%"},mlAuto:{marginLeft:"auto"},mrAuto:{marginRight:"auto"},card:{minWidth:275},padding30:{padding:30},minHeight680:{minHeight:680},positionRelative:{position:"relative"},skeleton:{height:160,width:"100%"},height100Percent:{height:"100%"},ml12:{marginLeft:12},padding20:{padding:20},positionFixedTopRight:{position:"fixed",top:88,right:24,bottom:0,zIndex:100},codeFlyoutContainer:{backgroundColor:"rgb(40, 42, 54)",overflow:"scroll",borderRadius:"0 8px 8px 0"},padding10:{padding:10},noContainerScroll:{width:"100%",margin:0},verticalAlignTop:{verticalAlign:"top"},w33:{width:"33%"},mr12:{marginRight:12},dot:{height:"25px",width:"25px",borderRadius:"50%",display:"inline-block"},borderRadius0:{borderRadius:0}}}));function kn(e){var n=e.val,t=e.positive_good,a=(e.abs_val,{up:t?"green":"red",down:t?"red":"green"}),r=n<0?a.down:n>0?a.up:"black",i=Math.abs(n).toLocaleString("en",{style:"percent",minimumFractionDigits:2}),l=n<0?"\u25bc":n>0?"\u25b2":"\u2014";return o.a.createElement(o.a.Fragment,null,o.a.createElement("font",{color:r},"".concat(l," ").concat(i)))}var vn=t(366),_n=t(261);_n.CheckboxSVGMap.prototype.toggleLocation=function(e){var n=this,t=e.target;this.setState((function(e){for(var a=Object(l.a)(e.selectedLocations),o=v.a.find(n.props.map.locations,{id:t.id}),r=v.a.filter(n.props.map.locations,{region:o.region}),i=[],s=0;s<n.props.map.locations.length;s++)-1==i.indexOf(n.props.map.locations[s].region)&&i.push(n.props.map.locations[s].region);for(var c=[],d=0;d<a.length;d++)-1==c.indexOf(a[d].region)&&c.push(a[d].region);var m,u=v.a.differenceBy(i,c),p=[].concat(Object(l.a)(u),[o.region]),h=v.a.filter(n.props.map.locations,(function(e){return-1==p.indexOf(e.region)}));"true"===t.attributes["aria-checked"].value?a=h:(m=a).push.apply(m,Object(l.a)(r));return n.props.onChange&&n.props.onChange(a),{selectedLocations:a}}))},_n.CheckboxSVGMap.prototype.componentDidMount=function(){this.setState({selectedLocations:this.props.map.locations})};var wn=t(67).validIdHelper;function xn(e){var n=e.staticContent.lookerContent,t=e.staticContent.type,r=(e.activeTabValue,e.handleTabChange,e.lookerUser),i=e.lookerHost,s=t||"code flyout",u=Object(a.useState)(0),p=Object(J.a)(u,2),h=(p[0],p[1],Object(a.useState)(0)),g=Object(J.a)(h,2),b=g[0],f=g[1],y=Object(a.useState)(void 0),k=Object(J.a)(y,2),_=k[0],w=k[1],x=Object(a.useState)({}),E=Object(J.a)(x,2),T=E[0],O=E[1],j=Object(a.useState)(""),I=Object(J.a)(j,2),N=(I[0],I[1]),F=Object(a.useState)({}),A=Object(J.a)(F,2),D=A[0],H=A[1],P=Object(a.useState)("Pacific,South,Mountain,Midwest,Northeast"),B=Object(J.a)(P,2),M=B[0],U=B[1],L=Object(a.useState)(window.innerHeight-112),$=Object(J.a)(L,2),R=$[0],V=$[1],G=Object(a.useState)(""),W=Object(J.a)(G,2),q=W[0],K=W[1],Y=Object(a.useState)("#2d4266"),X=Object(J.a)(Y,2),Z=X[0],ee=X[1],ne=Object(a.useState)(!0),te=Object(J.a)(ne,2),ae=te[0],oe=te[1],ie=Object(a.useState)("arial"),le=Object(J.a)(ie,2),ce=le[0],de=le[1],ge=Object(a.useState)(0),be=Object(J.a)(ge,2),fe=be[0],ye=be[1],Ce=Object(a.useContext)(re),ve=(Ce.togglePayWallModal,Ce.show,Ce.codeShow),_e=Ce.sdk,we=Ce.atomTheme,xe=Ce.corsApiCall,Ee="customfilter1"===wn("".concat(s).concat(n[0].id)),Te=Cn(),Se=ae?{palette:Object(d.a)({},we.palette)}:{palette:{type:"dark",background:{paper:"#343D4E",default:"#343D4E"}}},Oe=o.a.useMemo((function(){return Object(z.a)(Se)}),[ae]),je=function(e,t){K(t);var a=v.a.filter(D.layouts[0].dashboard_layout_components,(function(e){return n[0].dynamicFieldLookUp[t].indexOf(D.elements[e.dashboard_element_id].title)>-1})),o=Object(d.a)({},D.layouts[0],{dashboard_layout_components:a});T.setOptions({layouts:[o]})},Ie=function(e,t){var a=n[0].dynamicVisConfig.colors[t],o=Object(d.a)({},D.elements);Object.keys(o).map((function(e){o[e].vis_config.series_colors&&Object.keys(o[e].vis_config.series_colors).map((function(n,t){o[e].vis_config.series_colors[n]=a[t]||a[0]})),o[e].vis_config.custom_color&&(o[e].vis_config.custom_color=a[0]),o[e].vis_config.map_value_colors&&o[e].vis_config.map_value_colors.map((function(n,t){o[e].vis_config.map_value_colors[t]=a[t]||a[0]})),o[e].vis_config.series_cell_visualizations&&Object.keys(o[e].vis_config.series_cell_visualizations).map((function(a,r){o[e].vis_config.series_cell_visualizations[a].hasOwnProperty("palette")&&(o[e].vis_config.series_cell_visualizations[a].palette=Object(d.a)({},n[0].dynamicVisConfig.series_cell_visualizations[t]))}))})),ee(t),T.setOptions({elements:Object(d.a)({},o)})};Object(a.useEffect)((function(){var e=ae?"light":"dark";e+="_".concat(ce),xe(Ne,[Object(l.a)(n),e]),N('import $ from \'jquery\';\nimport _ from \'lodash\'\nimport React, { useState, useEffect, useContext } from \'react\';\nimport {\n  AppBar, Tabs, Tab, Typography, Box, Grid, CircularProgress, Card, TextField, FormControlLabel, Chip,\n  ExpansionPanel, ExpansionPanelSummary, ExpansionPanelDetails, Slider, FormControl, InputLabel, Select, MenuItem, Switch\n} from \'@material-ui/core\'\nimport { Autocomplete, ToggleButton, ToggleButtonGroup, Skeleton } from \'@material-ui/lab\'\nimport {\n  ExpandMore, FilterList, SentimentDissatisfied, SentimentSatisfied, SentimentVerySatisfied,\n} from \'@material-ui/icons\';\nimport { createMuiTheme, ThemeProvider } from \'@material-ui/core/styles\';\n\nimport { LookerEmbedSDK } from \'@looker/embed-sdk\'\nimport CodeFlyout from \'../CodeFlyout\';\nimport rawSampleCode from \'!!raw-loader!./Dashboard.js\'; // eslint-disable-line import/no-webpack-loader-syntax\nimport useStyles from \'./styles.js\';\nimport { TabPanel, a11yProps } from \'./helpers.js\';\nimport BottomBar from \'../../Material/BottomBar.js\'\nimport { ApiHighlight, EmbedHighlight, EmbedMethodHighlight } from \'../../Highlights/Highlight\';\nimport { NumberToColoredPercent } from \'../../Accessories/NumberToColoredPercent\';\nimport AppContext from \'../../../AppContext\';\n//new\nimport Usa from "@svg-maps/usa";\nimport { CheckboxSVGMap } from "./CheckboxSvgMapRegion";\n\nconst { validIdHelper } = require(\'../../../tools\');\n\nexport default function Dashboard(props) {\n  // console.log(\'Dashboard\')\n  // console.log(\'props\', props)\n\n  const { staticContent: { lookerContent }, staticContent: { type }, activeTabValue, handleTabChange, lookerUser, lookerHost } = props;\n  const demoComponentType = type || \'code flyout\';\n  const topBarBottomBarHeight = 112;\n\n  const [value, setValue] = useState(0);\n  const [iFrameExists, setIFrame] = useState(0);\n  const [apiContent, setApiContent] = useState(undefined);\n  const [dashboardObj, setDashboardObj] = useState({});\n  const [clientSideCode, setClientSideCode] = useState(\'\');\n  const [dashboardOptions, setDashboardOptions] = useState({});\n  const [regionValue, setRegionValue] = useState(\'Pacific,South,Mountain,Midwest,Northeast\');\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\n  const [tileToggleValue, setTileToggleValue] = useState(\'\');\n  const [visColorToggleValue, setVisColorToggleValue] = useState(\'#2d4266\');\n  const [lightThemeToggleValue, setLightThemeToggleValue] = useState(true);\n  const [fontThemeSelectValue, setFontThemeSelectValue] = useState("arial");\n  const [expansionPanelHeight, setExpansionPanelHeight] = useState(0);\n  const { togglePayWallModal, show, codeShow, sdk, atomTheme, corsApiCall } = useContext(AppContext)\n\n  const isThemeableDashboard = validIdHelper(`${demoComponentType}${lookerContent[0].id}`) === \'customfilter1\';\n  const darkThemeBackgroundColor = "#343D4E";\n\n  const classes = useStyles();\n\n  //condtional theming for dark mode :D\n  let paletteToUse = !lightThemeToggleValue ?\n    {\n      palette: {\n        type: \'dark\',\n        background: { paper: darkThemeBackgroundColor, default: darkThemeBackgroundColor },\n      }\n    }\n    :\n    { palette: { ...atomTheme.palette } }\n\n  const theme = React.useMemo(\n    () =>\n      createMuiTheme(\n        paletteToUse\n      ),\n    [lightThemeToggleValue],\n  );\n\n  //handle tab change\n  const handleChange = (event, newValue) => {\n    handleTabChange(0);\n    setValue(newValue);\n  };\n\n  const handleTileToggle = (event, newValue) => {\n    setTileToggleValue(newValue)\n    const filteredLayout = _.filter(dashboardOptions.layouts[0].dashboard_layout_components, (row) => {\n      return (lookerContent[0].dynamicFieldLookUp[newValue].indexOf(dashboardOptions.elements[row.dashboard_element_id].title) > -1)\n    })\n\n    const newDashboardLayout = {\n      ...dashboardOptions.layouts[0],\n      dashboard_layout_components: filteredLayout\n    }\n    dashboardObj.setOptions({ "layouts": [newDashboardLayout] })\n  };\n\n  const handleVisColorToggle = (event, newValue) => {\n    let newColorSeries = lookerContent[0].dynamicVisConfig.colors[newValue];\n    let newDashboardElements = { ...dashboardOptions.elements };\n    Object.keys(newDashboardElements).map(key => {\n      if (newDashboardElements[key].vis_config.series_colors) {\n        Object.keys(newDashboardElements[key].vis_config.series_colors).map((innerKey, index) => {\n          newDashboardElements[key].vis_config.series_colors[innerKey] = newColorSeries[index] || newColorSeries[0];\n        })\n      }\n\n      if (newDashboardElements[key].vis_config.custom_color) {\n        newDashboardElements[key].vis_config.custom_color = newColorSeries[0]\n      }\n\n      if (newDashboardElements[key].vis_config.map_value_colors) {\n        newDashboardElements[key].vis_config.map_value_colors.map((item, index) => {\n          newDashboardElements[key].vis_config.map_value_colors[index] = newColorSeries[index] || newColorSeries[0];\n        })\n      }\n\n      // loss some fidelity here\n      if (newDashboardElements[key].vis_config.series_cell_visualizations) {\n        Object.keys(newDashboardElements[key].vis_config.series_cell_visualizations).map((innerKey, index) => {\n          if (newDashboardElements[key].vis_config.series_cell_visualizations[innerKey].hasOwnProperty("palette")) {\n            newDashboardElements[key].vis_config.series_cell_visualizations[innerKey]["palette"] = { ...lookerContent[0].dynamicVisConfig.series_cell_visualizations[newValue] }\n          }\n        })\n      }\n\n\n    })\n    setVisColorToggleValue(newValue)\n    dashboardObj.setOptions({ "elements": { ...newDashboardElements } })\n  };\n\n  const handleThemeChange = (event, newValue) => {\n    let themeName = \'\';\n    if (typeof newValue === "boolean") {//handleModeToggle\n      setLightThemeToggleValue(newValue)\n      themeName = newValue ? `light_${fontThemeSelectValue}` : `dark_${fontThemeSelectValue}`\n    } else { //handleFontToggle\n      themeName = lightThemeToggleValue ? `light_${newValue}` : `dark_${newValue}`\n      setFontThemeSelectValue(newValue)\n    }\n    corsApiCall(performLookerApiCalls, [lookerContent, themeName])\n  }\n\n  useEffect(() => {\n    let themeName = lightThemeToggleValue ? \'light\' : \'dark\';\n    themeName += `_${fontThemeSelectValue}`;\n    corsApiCall(performLookerApiCalls, [[...lookerContent], themeName])\n    setClientSideCode(rawSampleCode)\n  }, [lookerContent, lookerUser]);\n\n\n  useEffect(() => {\n    if (Object.keys(dashboardOptions).length && Object.keys(dashboardObj).length && lookerContent[0].dynamicFieldLookUp) {\n      handleTileToggle(null, tileToggleValue ? tileToggleValue : Object.keys(lookerContent[0].dynamicFieldLookUp)[0])\n      handleVisColorToggle(null, visColorToggleValue ? visColorToggleValue : \'#2d4266\')\n    }\n  }, [dashboardOptions]);\n\n  useEffect(() => {\n    window.addEventListener("resize", () => setHeight((window.innerHeight - topBarBottomBarHeight)));\n    setExpansionPanelHeight($(\'.MuiExpansionPanel-root:visible\').innerHeight() || 0)\n  })\n\n  const performLookerApiCalls = function (lookerContent, dynamicTheme) {\n    // console.log(\'performLookerApiCalls\')   \n    // console.log({ lookerContent })   \n    // console.log({ dynamicTheme })\n\n    setIFrame(0)\n    $(`.embedContainer.${validIdHelper(demoComponentType)}:visible`).html(\'\')\n    lookerContent.map(async lookerContent => {\n      //dashboard creation\n      let dashboardId = lookerContent.id;\n      let themeToUse = dynamicTheme && isThemeableDashboard ?\n        dynamicTheme :\n        lookerContent.theme ?\n          lookerContent.theme :\n          \'atom_fashion\';\n      // console.log(\'themeToUse\', themeToUse)\n\n      LookerEmbedSDK.createDashboardWithId(dashboardId) //dashboardSlug\n        .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${dashboardId}`))\n        .withClassName(\'iframe\')\n        .withNext()\n        // .withNext(lookerContent.isNext || false) //how can I make this dynamic based on prop??\n        .withTheme(themeToUse)\n        .withParams({ \'schedule_modal\': \'true\' })\n        .on(\'page:property:change\', (event) => {\n          // console.log(\'page property is changing!!!!\')\n          changeHeight(event)\n        }) // dashboards-next\n        .on(\'dashboard:loaded\', (event) => {\n          setDashboardOptions(event.dashboard.options)\n        })\n        // .on(\'drillmenu:click\', (event) => {\n        //   drillMenuClick(event)\n        // })\n        .build()\n        .connect()\n        .then((dashboard) => {\n          setIFrame(1)\n          setDashboardObj(dashboard)\n          LookerEmbedSDK.init(`https://${lookerHost}.looker.com`);\n\n        })\n        .catch((error) => {\n          // console.error(\'Connection error\', error)\n        })\n      //additional api calls\n      //only want to perform when there\'s not apiContent\n      if (lookerContent.hasOwnProperty(\'filters\') && !apiContent) {\n        // setApiContent(undefined)\n        //get inline query from usecase file & set user attribute dynamically\n        //iterating over filters\n        let orderedArrayForApiContent = []\n        lookerContent.filters.map(async (item, index) => {\n          let jsonQuery = lookerContent.inlineQueries[index];\n          jsonQuery.filters = {\n            ...jsonQuery.filters,\n            [item.desiredFilterName]: lookerUser.user_attributes.brand\n          };\n\n          let lookerResponseData = await sdk.ok(sdk.run_inline_query({ result_format: lookerContent.result_format || \'json\', body: jsonQuery }));\n          let queryResultsForDropdown = [];\n          let desiredProperty = Object.keys(lookerResponseData[0])[0];\n\n          for (let i = 0; i < lookerResponseData.length; i++) {\n            queryResultsForDropdown.push({\n              \'label\': lookerResponseData[i][desiredProperty],\n              \'trend\': (lookerResponseData[i][\'trend\']) ? lookerResponseData[i][\'trend\'] : undefined\n            })\n          }\n\n          orderedArrayForApiContent[index] = queryResultsForDropdown\n          setApiContent([...orderedArrayForApiContent])\n        })\n      }\n\n    })\n  }\n\n  const customFilterAction = (dashboardId, filterName, newFilterValue) => {\n    if (Object.keys(dashboardObj).length) {\n      dashboardObj.updateFilters({ [filterName]: newFilterValue })\n      dashboardObj.run()\n    }\n  }\n\n  // const drillMenuClick = (event) => {\n  //   const basicLookerUser = lookerUser.user_attributes.permission_level === \'basic\' ? true : false;\n  //   if (basicLookerUser) {\n  //     togglePayWallModal()\n  //     return { cancel: (basicLookerUser) ? true : false }\n  //   }\n  // }\n\n  const changeHeight = (event) => {\n    // console.log(\'changeHeight\')\n    // console.log(\'event\', event)\n  }\n\n\n  return (\n    <div className={`${classes.root} demoComponent`}\n      style={{ height }}\n    >\n      <ThemeProvider theme={theme}>\n        <Card elevation={1} className={`${classes.padding30} ${classes.height100Percent}`}>\n          <Grid container>\n            <div\n              className={`${classes.root}`}\n            >\n              {lookerContent[0].hasOwnProperty("filters") &&\n                apiContent &&\n                apiContent.length === lookerContent[0].filters.length ?\n                <Grid item\n                  sm={12}\n                  key={validIdHelper(`${demoComponentType}-FilterBar-${lookerContent[0].id}`)}>\n                  <FilterBar {...props}\n                    classes={classes}\n                    apiContent={apiContent}\n                    customFilterAction={customFilterAction}\n                    regionValue={regionValue}\n                    setRegionValue={setRegionValue}\n                    tileToggleValue={tileToggleValue}\n                    handleTileToggle={handleTileToggle}\n                    visColorToggleValue={visColorToggleValue}\n                    handleVisColorToggle={handleVisColorToggle}\n                    lightThemeToggleValue={lightThemeToggleValue}\n                    fontThemeSelectValue={fontThemeSelectValue}\n                    handleThemeChange={handleThemeChange}\n                    isThemeableDashboard={isThemeableDashboard}\n                  />\n                </Grid> :\n                lookerContent[0].hasOwnProperty("filters") ?\n                  <Skeleton variant="rect" animation="wave" className={classes.skeleton} /> :\n                  \'\'}\n              {\n                iFrameExists\n                  ? \'\'\n                  :\n                  <Grid item sm={12} style={{ height: height - 30 - expansionPanelHeight }}>\n                    <Card className={`${classes.card} ${classes.flexCentered}`}\n                      elevation={0}\n                      mt={2}\n                      style={{ height: height - 30 - expansionPanelHeight }}>\n                      <CircularProgress className={classes.circularProgress} />\n                    </Card>\n                  </Grid>\n              }\n              <Box\n                className={iFrameExists ? ` ` : `${classes.hidden} `}\n                style={{ height: height - 30 - expansionPanelHeight }}>\n                <Grid container\n                  spacing={3}\n                  className={`${classes.noContainerScroll}`}>\n                  {codeShow ?\n                    <Grid item sm={6}\n                      className={`${classes.positionFixedTopRight}`}\n                    >\n                      <CodeFlyout {...props}\n                        classes={classes}\n                        lookerUser={lookerUser}\n                        height={height}\n                      />\n                    </Grid>\n                    : \'\'}\n                  <Grid item sm={12}>\n                    <Box className={`${classes.w100} ${classes.padding10}`} mt={lookerContent[0].filter || lookerContent[0].dynamicFieldLookUp ? 2 : 0}>\n                      <EmbedHighlight classes={classes}>\n                        <div\n                          className={`embedContainer ${validIdHelper(demoComponentType)}`}\n                          id={validIdHelper(`embedContainer-${demoComponentType}-${lookerContent[0].id}`)}\n                          key={validIdHelper(`embedContainer-${demoComponentType}-${lookerContent[0].id}`)}\n                        >\n                        </div>\n                      </EmbedHighlight>\n                    </Box>\n                  </Grid>\n                </Grid>\n              </Box>\n            </div>\n          </Grid>\n        </Card>\n      </ThemeProvider>\n    </ div>\n  )\n}\n\n\nfunction FilterBar(props) {\n  // console.log(\'FilterBar\')\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, classes,\n    apiContent, customFilterAction, regionValue, setRegionValue, tileToggleValue, handleTileToggle, //changeTheme,\n    visColorToggleValue, handleVisColorToggle, lightThemeToggleValue, fontThemeSelectValue, handleThemeChange, isThemeableDashboard\n  } = props;\n\n  const [expanded, setExpanded] = useState(true);\n  const [sliderValue, setSliderValue] = React.useState([]);\n  const [lifetimeRevenueTierValue, setLifetimeRevenueTierValue] = useState(\'0-24\');\n  // const [speedDialOpen, setSpeedDialOpen] = React.useState(false);\n\n  const handleExpansionPanel = (event, newValue) => {\n    setExpanded(expanded ? false : true);\n  };\n\n  const customUsa = {\n    ...Usa,\n    label: "Custom map label",\n    locations: Usa.locations.map(location => {\n      // Modify each location\n      switch (location.name) {\n        //9\n        case "Connecticut":\n        case "Maine":\n        case "Massachusetts":\n        case "New Hampshire":\n        case "Rhode Island":\n        case "Vermont":\n        case "New Jersey":\n        case "New York":\n        case "Pennsylvania":\n        case "Delaware":\n          return { ...location, region: "Northeast" }\n        //12\n        case "Illinois":\n        case "Indiana":\n        case "Michigan":\n        case "Ohio":\n        case "Wisconsin":\n        case "Iowa":\n        case "Kansas":\n        case "Minnesota":\n        case "Missouri":\n        case "Nebraska":\n        case "North Dakota":\n        case "South Dakota":\n          return { ...location, region: "Midwest" }\n        //16\n        case "Florida":\n        case "Georgia":\n        case "Maryland":\n        case "North Carolina":\n        case "South Carolina":\n        case "Virginia":\n        case "District of Columbia":\n        case "Washington, DC":\n        case "West Virginia":\n        case "Alabama":\n        case "Kentucky":\n        case "Mississippi":\n        case "Tennessee":\n        case "Arkansas":\n        case "Louisiana":\n        case "Oklahoma":\n        case "Texas":\n          return { ...location, region: "South" }\n        //8\n        case "Arizona":\n        case "Colorado":\n        case "Idaho":\n        case "Montana":\n        case "Nevada":\n        case "New Mexico":\n        case "Utah":\n        case "Wyoming":\n          return { ...location, region: "Mountain" }\n        //5\n        case "Alaska":\n        case "California":\n        case "Hawaii":\n        case "Oregon":\n        case "Washington":\n          return { ...location, region: "Pacific" }\n        // default:\n        //   return location\n      }\n    })\n  };\n\n  const handleSliderChange = (event, newValue) => {\n    setSliderValue(newValue);\n  };\n\n  const lifetimeRevenueTierMap = {\n    "0 to 99": "low",\n    "100 to 499": "medium",\n    "500 or Above": "high",\n  }\n  const lifetimeRevenueTierIconMap = {\n    "0 to 99": SentimentDissatisfied,\n    "100 to 499": SentimentSatisfied,\n    "500 or Above": SentimentVerySatisfied,\n  }\n\n  return (\n\n    <ExpansionPanel\n      expanded={expanded}\n      onChange={handleExpansionPanel}\n      // className={classes.w100}\n      className={`${classes.w100} MuiExpansionPanel-root`}\n      elevation={0}\n    >\n      <ExpansionPanelSummary\n        expandIcon={<ExpandMore />}\n        aria-controls="panel1a-content"\n        id="panel1a-header"\n      >\n        <FilterList /><Typography className={`${classes.heading} ${classes.ml12}`}>Filter:</Typography>\n\n      </ExpansionPanelSummary>\n      <ExpansionPanelDetails>\n        <Grid\n          container spacing={3}>\n          {\n            lookerContent[0].filters || lookerContent[0].dynamicFieldLookUp ?\n              <>\n                {apiContent.map((item, index) => {\n                  return (\n                    lookerContent[0].filterComponents[index] === \'autocomplete\' ?\n                      <Grid item sm={3}>\n\n                        <ApiHighlight classes={classes}\n                          key={validIdHelper(`dashEmbed-${type}${lookerContent.id}-${index}`)} >\n\n                          <Typography\n                          >Filter By Product:</Typography>\n                          <Autocomplete\n                            id={`combo-box-dashboard-${lookerContent.id}`}\n                            options={Array.isArray(apiContent[index]) ?\n                              apiContent[index] :\n                              []}\n                            renderOption={(option) => (\n                              <Grid container justify="space-between">\n                                <Grid item >\n                                  {option.label}\n                                </Grid>\n                                {option.trend && <Grid item>\n                                  <NumberToColoredPercent\n                                    val={option.trend}\n                                    positive_good={true}\n                                    abs_val={Math.abs(option.trend)}\n                                  />\n                                </Grid>}\n                              </Grid>\n                            )}\n                            getOptionLabel={(option) => option.label}\n                            onChange={(event, newValue) => {\n                              customFilterAction(lookerContent[0].id,\n                                lookerContent[0].filters[index].filterName,\n                                (newValue) ? newValue.label : \'\')\n                            }}\n                            renderInput={(params) => <TextField {...params}\n                              label={lookerContent[0].filters[index].filterName}\n                              variant="outlined"\n                            />}\n                            loadingText="Loading..."\n                          />\n                        </ApiHighlight>\n                      </Grid>\n                      : lookerContent[0].filterComponents[index] === \'mapfilter\' ?\n                        <>\n                          <Grid item sm={4} >\n                            <EmbedMethodHighlight classes={classes}\n                              key={validIdHelper(`dashEmbed-${type}${lookerContent.id}-${index}`)} >\n                              <Typography className={`${classes.heading} ${classes.ml12}  ${classes.verticalAlignTop}`}\n                              >Region(s): <b>{regionValue ? regionValue : "Outside US"}</b></Typography>\n\n                              <CheckboxSVGMap map={customUsa}\n                                onChange={(locations) => {\n\n                                  let allUniqueRegionsFromSelectedLocations = [];\n                                  for (let j = 0; j < locations.length; j++) {\n                                    if (allUniqueRegionsFromSelectedLocations.indexOf(locations[j].region) == -1) {\n                                      allUniqueRegionsFromSelectedLocations.push(locations[j].region)\n                                    }\n                                  }\n                                  let allUniqueRegionsFromSelectedLocationsCommaSep = allUniqueRegionsFromSelectedLocations.join(",")\n                                  setRegionValue(allUniqueRegionsFromSelectedLocationsCommaSep)\n                                  customFilterAction(lookerContent[0].id,\n                                    lookerContent[0].filters[index].filterName,\n                                    (regionValue) ? regionValue : \'\')\n                                }}\n                              />\n                            </EmbedMethodHighlight>\n                          </Grid>\n                        </>\n                        : lookerContent[0].filterComponents[index] === "rangeslider"\n                          ?\n\n                          <Grid container item sm={4} >\n                            <Grid item sm={12}>\n                              <EmbedMethodHighlight classes={classes}\n                                key={validIdHelper(`dashEmbed-${type}${lookerContent.id}-${index}`)} >\n                                <Typography className={`${classes.heading} ${classes.ml12}  ${classes.verticalAlignTop}`}\n                                >Age Range:</Typography>\n                                <Slider\n                                  value={sliderValue.length ? sliderValue : Array.isArray(apiContent[index]) ? [apiContent[index][0].label, apiContent[index][apiContent[index].length - 1].label] : []}\n                                  onChange={handleSliderChange}\n                                  onChange={(event, newValue) => {\n                                    setSliderValue(newValue);\n                                  }}\n                                  valueLabelDisplay="auto"\n                                  aria-labelledby="range-slider"\n                                  onChangeCommitted={(event, newValue) => {\n                                    customFilterAction(lookerContent[0].id,\n                                      lookerContent[0].filters[index].filterName,\n                                      (newValue) ? `[${newValue}]` : \'[]\')\n                                  }}\n                                  min={Array.isArray(apiContent[index]) ? apiContent[index][0].label : \'\'}\n                                  max={Array.isArray(apiContent[index]) ? apiContent[index][apiContent[index].length - 1].label : \'\'}\n                                  name="Age Range"\n                                  marks={Array.isArray(apiContent[index]) ? [{ value: apiContent[index][0].label, label: apiContent[index][0].label }, { value: apiContent[index][apiContent[index].length - 1].label, label: apiContent[index][apiContent[index].length - 1].label }] : \'\'}\n                                  disabled={Array.isArray(apiContent[index]) ? false : true}\n                                />\n                              </EmbedMethodHighlight>\n                            </Grid>\n                            <Grid item sm={12}>\n                              <EmbedMethodHighlight classes={classes}\n                                key={validIdHelper(`dashEmbed-${type}${lookerContent.id}-${index}`)} >\n                                <Typography className={`${classes.heading} ${classes.ml12}  ${classes.verticalAlignTop}`}\n                                >Lifetime Revenue Tier:</Typography>\n                                <ToggleButtonGroup\n                                  value={lifetimeRevenueTierValue}\n                                  exclusive //for now\n                                  onChange={(event, newValue) => {\n                                    setLifetimeRevenueTierValue(newValue)\n                                    customFilterAction(lookerContent[0].id,\n                                      lookerContent[0].filters[index + 1].filterName,\n                                      (newValue) ? newValue : \'\')\n                                  }}\n                                  aria-label="ageTier"\n                                  className={classes.w100}>\n                                  >\n                                {apiContent[index + 1].map((ageTier, index) => {\n                                    if (ageTier.label !== "Undefined") {\n                                      const Icon = lifetimeRevenueTierIconMap[ageTier.label];\n                                      return (\n                                        <ToggleButton\n                                          key={validIdHelper(`${type}-FilterBar-ToggleButton-${lookerContent[0].id}-${index}`)}\n                                          value={ageTier.label}\n                                          aria-label={ageTier.label}\n                                          className={classes.w33}>\n                                          <Icon className={classes.mr12} />\n                                          {_.capitalize(lifetimeRevenueTierMap[ageTier.label]) || ageTier.label}\n                                        </ToggleButton>\n                                      )\n                                    }\n                                  })}\n                                </ToggleButtonGroup>\n\n                              </EmbedMethodHighlight>\n                            </Grid>\n                          </Grid>\n                          :\n                          \'\')\n                })}\n                {lookerContent[0].dynamicFieldLookUp ?\n                  <>\n                    <Grid item sm={3}>\n                      <EmbedMethodHighlight classes={classes} >\n                        <Typography\n                        >Dynamic Tiles:</Typography>\n                        <ToggleButtonGroup\n                          value={tileToggleValue}\n                          exclusive\n                          onChange={handleTileToggle}\n                          aria-label="text alignment"\n                        >\n                          {Object.keys(lookerContent[0].dynamicFieldLookUp).map(key => {\n                            return (\n                              <ToggleButton\n                                key={validIdHelper(`dynamicDashTileToggle-${key}`)}\n                                value={key} aria-label="left aligned">\n                                {key}\n                              </ToggleButton>\n                            )\n                          })}\n                        </ToggleButtonGroup>\n                      </EmbedMethodHighlight>\n                    </Grid>\n                  </>\n                  : \'\'\n                }\n                {lookerContent[0].dynamicVisConfig ?\n                  <>\n                    <Grid item sm={2}>\n                      <EmbedMethodHighlight classes={classes} >\n                        <Typography\n                        >Dynamic Vis Color:</Typography>\n                        <ToggleButtonGroup\n                          value={visColorToggleValue}\n                          exclusive\n                          onChange={handleVisColorToggle}\n                          aria-label="text alignment"\n                        >\n                          {Object.keys(lookerContent[0].dynamicVisConfig.colors).map(key => {\n                            return (\n                              <ToggleButton\n                                key={validIdHelper(`dynamicDashVisConfigToggle-${key}`)}\n                                value={key} aria-label="left aligned">\n                                <span className={`${classes.dot}`} style={{\n                                  backgroundColor: (lookerContent[0].dynamicVisConfig.colors[key][lookerContent[0].dynamicVisConfig.colors[key].length - 1]\n                                    || key)\n                                }}></span>\n                              </ToggleButton>\n                            )\n                          })}\n                        </ToggleButtonGroup>\n\n                      </EmbedMethodHighlight>\n                    </Grid>\n                  </>\n                  : \'\'\n                }\n                {lookerContent[0].dynamicThemeMode ?\n                  <>\n                    <Grid item sm={1}>\n                      <EmbedHighlight classes={classes} >\n                        <Typography\n                        >{lightThemeToggleValue ? "Light mode" : "Dark mode"}</Typography>\n\n                        <Switch\n                          checked={!lightThemeToggleValue}\n                          onChange={() => handleThemeChange(null, !lightThemeToggleValue)}\n                          color="primary"\n                          name="light theme toggle"\n                          inputProps={{ \'aria-label\': \'primary checkbox\' }}\n                        />\n\n                      </EmbedHighlight>\n                    </Grid>\n                  </>\n                  : \'\'\n                }\n                {lookerContent[0].dynamicThemeFont ?\n                  <>\n                    <Grid item sm={2}>\n                      <EmbedHighlight classes={classes} >\n\n                        <FormControl className={classes.formControl}>\n                          <InputLabel id="demo-simple-select-label"\n                          >Change font</InputLabel>\n                          <Select\n                            labelId="demo-simple-select-label"\n                            id="demo-simple-select"\n                            value={fontThemeSelectValue}\n                            onChange={(event) => {\n                              handleThemeChange(null, event.target.value)\n                            }}\n                          >\n                            <MenuItem value="arial">Arial</MenuItem>\n                            <MenuItem value="roboto">Roboto</MenuItem>\n                            <MenuItem value="vollkorn">Vollkorn</MenuItem>\n                          </Select>\n                        </FormControl>\n\n                      </EmbedHighlight>\n                    </Grid>\n                  </>\n                  : \'\'\n                }\n              </>\n              : \'\'\n          }\n        </Grid>\n      </ExpansionPanelDetails>\n    </ExpansionPanel >\n  )\n}')}),[n,r]),Object(a.useEffect)((function(){Object.keys(D).length&&Object.keys(T).length&&n[0].dynamicFieldLookUp&&(je(0,q||Object.keys(n[0].dynamicFieldLookUp)[0]),Ie(0,Z||"#2d4266"))}),[D]),Object(a.useEffect)((function(){window.addEventListener("resize",(function(){return V(window.innerHeight-112)})),ye(me()(".MuiExpansionPanel-root:visible").innerHeight()||0)}));var Ne=function(e,n){f(0),me()(".embedContainer.".concat(wn(s),":visible")).html(""),e.map(function(){var e=Object(m.a)(c.a.mark((function e(t){var a,o,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.id,o=n&&Ee?n:t.theme?t.theme:"atom_fashion",se.LookerEmbedSDK.createDashboardWithId(a).appendTo(wn("#embedContainer-".concat(s,"-").concat(a))).withClassName("iframe").withNext().withTheme(o).withParams({schedule_modal:"true"}).on("page:property:change",(function(e){Ae(e)})).on("dashboard:loaded",(function(e){H(e.dashboard.options)})).build().connect().then((function(e){f(1),O(e),se.LookerEmbedSDK.init("https://".concat(i,".looker.com"))})).catch((function(e){})),t.hasOwnProperty("filters")&&!_&&(l=[],t.filters.map(function(){var e=Object(m.a)(c.a.mark((function e(n,a){var o,i,s,m,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=t.inlineQueries[a]).filters=Object(d.a)({},o.filters,Object(C.a)({},n.desiredFilterName,r.user_attributes.brand)),e.next=4,_e.ok(_e.run_inline_query({result_format:t.result_format||"json",body:o}));case 4:for(i=e.sent,s=[],m=Object.keys(i[0])[0],u=0;u<i.length;u++)s.push({label:i[u][m],trend:i[u].trend?i[u].trend:void 0});l[a]=s,w([].concat(l));case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())},Ae=function(e){};return o.a.createElement("div",{className:"".concat(Te.root," demoComponent"),style:{height:R}},o.a.createElement(Q.a,{theme:Oe},o.a.createElement(ue.a,{elevation:1,className:"".concat(Te.padding30," ").concat(Te.height100Percent)},o.a.createElement(pe.a,{container:!0},o.a.createElement("div",{className:"".concat(Te.root)},n[0].hasOwnProperty("filters")&&_&&_.length===n[0].filters.length?o.a.createElement(pe.a,{item:!0,sm:12,key:wn("".concat(s,"-FilterBar-").concat(n[0].id))},o.a.createElement(En,Object.assign({},e,{classes:Te,apiContent:_,customFilterAction:function(e,n,t){Object.keys(T).length&&(T.updateFilters(Object(C.a)({},n,t)),T.run())},regionValue:M,setRegionValue:U,tileToggleValue:q,handleTileToggle:je,visColorToggleValue:Z,handleVisColorToggle:Ie,lightThemeToggleValue:ae,fontThemeSelectValue:ce,handleThemeChange:function(e,t){var a="";"boolean"===typeof t?(oe(t),a=t?"light_".concat(ce):"dark_".concat(ce)):(a=ae?"light_".concat(t):"dark_".concat(t),de(t)),xe(Ne,[n,a])},isThemeableDashboard:Ee}))):n[0].hasOwnProperty("filters")?o.a.createElement(mn.a,{variant:"rect",animation:"wave",className:Te.skeleton}):"",b?"":o.a.createElement(pe.a,{item:!0,sm:12,style:{height:R-30-fe}},o.a.createElement(ue.a,{className:"".concat(Te.card," ").concat(Te.flexCentered),elevation:0,mt:2,style:{height:R-30-fe}},o.a.createElement(he.a,{className:Te.circularProgress}))),o.a.createElement(S.a,{className:b?" ":"".concat(Te.hidden," "),style:{height:R-30-fe}},o.a.createElement(pe.a,{container:!0,spacing:3,className:"".concat(Te.noContainerScroll)},ve?o.a.createElement(pe.a,{item:!0,sm:6,className:"".concat(Te.positionFixedTopRight)},o.a.createElement(ke,Object.assign({},e,{classes:Te,lookerUser:r,height:R}))):"",o.a.createElement(pe.a,{item:!0,sm:12},o.a.createElement(S.a,{className:"".concat(Te.w100," ").concat(Te.padding10),mt:n[0].filter||n[0].dynamicFieldLookUp?2:0},o.a.createElement(Fe,{classes:Te},o.a.createElement("div",{className:"embedContainer ".concat(wn(s)),id:wn("embedContainer-".concat(s,"-").concat(n[0].id)),key:wn("embedContainer-".concat(s,"-").concat(n[0].id))})))))))))))}function En(e){e.staticContent;var n=e.staticContent.lookerContent,t=e.staticContent.type,r=e.classes,i=e.apiContent,l=e.customFilterAction,s=e.regionValue,c=e.setRegionValue,m=e.tileToggleValue,u=e.handleTileToggle,p=e.visColorToggleValue,h=e.handleVisColorToggle,g=e.lightThemeToggleValue,b=e.fontThemeSelectValue,f=e.handleThemeChange,y=(e.isThemeableDashboard,Object(a.useState)(!0)),k=Object(J.a)(y,2),_=k[0],w=k[1],x=o.a.useState([]),E=Object(J.a)(x,2),T=E[0],S=E[1],O=Object(a.useState)("0-24"),j=Object(J.a)(O,2),I=j[0],N=j[1],F=Object(d.a)({},vn.a,{label:"Custom map label",locations:vn.a.locations.map((function(e){switch(e.name){case"Connecticut":case"Maine":case"Massachusetts":case"New Hampshire":case"Rhode Island":case"Vermont":case"New Jersey":case"New York":case"Pennsylvania":case"Delaware":return Object(d.a)({},e,{region:"Northeast"});case"Illinois":case"Indiana":case"Michigan":case"Ohio":case"Wisconsin":case"Iowa":case"Kansas":case"Minnesota":case"Missouri":case"Nebraska":case"North Dakota":case"South Dakota":return Object(d.a)({},e,{region:"Midwest"});case"Florida":case"Georgia":case"Maryland":case"North Carolina":case"South Carolina":case"Virginia":case"District of Columbia":case"Washington, DC":case"West Virginia":case"Alabama":case"Kentucky":case"Mississippi":case"Tennessee":case"Arkansas":case"Louisiana":case"Oklahoma":case"Texas":return Object(d.a)({},e,{region:"South"});case"Arizona":case"Colorado":case"Idaho":case"Montana":case"Nevada":case"New Mexico":case"Utah":case"Wyoming":return Object(d.a)({},e,{region:"Mountain"});case"Alaska":case"California":case"Hawaii":case"Oregon":case"Washington":return Object(d.a)({},e,{region:"Pacific"})}}))}),A=function(e,n){S(n)},D={"0 to 99":"low","100 to 499":"medium","500 or Above":"high"},H={"0 to 99":hn.a,"100 to 499":gn.a,"500 or Above":bn.a};return o.a.createElement(tn.a,{expanded:_,onChange:function(e,n){w(!_)},className:"".concat(r.w100," MuiExpansionPanel-root"),elevation:0},o.a.createElement(an.a,{expandIcon:o.a.createElement(fn.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},o.a.createElement(yn.a,null),o.a.createElement(Z.a,{className:"".concat(r.heading," ").concat(r.ml12)},"Filter:")),o.a.createElement(on.a,null,o.a.createElement(pe.a,{container:!0,spacing:3},n[0].filters||n[0].dynamicFieldLookUp?o.a.createElement(o.a.Fragment,null,i.map((function(e,a){var d;return"autocomplete"===n[0].filterComponents[a]?o.a.createElement(pe.a,{item:!0,sm:3},o.a.createElement(Ne,{classes:r,key:wn("dashEmbed-".concat(t).concat(n.id,"-").concat(a))},o.a.createElement(Z.a,null,"Filter By Product:"),o.a.createElement(oe.a,{id:"combo-box-dashboard-".concat(n.id),options:Array.isArray(i[a])?i[a]:[],renderOption:function(e){return o.a.createElement(pe.a,{container:!0,justify:"space-between"},o.a.createElement(pe.a,{item:!0},e.label),e.trend&&o.a.createElement(pe.a,{item:!0},o.a.createElement(kn,{val:e.trend,positive_good:!0,abs_val:Math.abs(e.trend)})))},getOptionLabel:function(e){return e.label},onChange:function(e,t){l(n[0].id,n[0].filters[a].filterName,t?t.label:"")},renderInput:function(e){return o.a.createElement(ae.a,Object.assign({},e,{label:n[0].filters[a].filterName,variant:"outlined"}))},loadingText:"Loading..."}))):"mapfilter"===n[0].filterComponents[a]?o.a.createElement(o.a.Fragment,null,o.a.createElement(pe.a,{item:!0,sm:4},o.a.createElement(Ae,{classes:r,key:wn("dashEmbed-".concat(t).concat(n.id,"-").concat(a))},o.a.createElement(Z.a,{className:"".concat(r.heading," ").concat(r.ml12,"  ").concat(r.verticalAlignTop)},"Region(s): ",o.a.createElement("b",null,s||"Outside US")),o.a.createElement(_n.CheckboxSVGMap,{map:F,onChange:function(e){for(var t=[],o=0;o<e.length;o++)-1==t.indexOf(e[o].region)&&t.push(e[o].region);var r=t.join(",");c(r),l(n[0].id,n[0].filters[a].filterName,s||"")}})))):"rangeslider"===n[0].filterComponents[a]?o.a.createElement(pe.a,{container:!0,item:!0,sm:4},o.a.createElement(pe.a,{item:!0,sm:12},o.a.createElement(Ae,{classes:r,key:wn("dashEmbed-".concat(t).concat(n.id,"-").concat(a))},o.a.createElement(Z.a,{className:"".concat(r.heading," ").concat(r.ml12,"  ").concat(r.verticalAlignTop)},"Age Range:"),o.a.createElement(rn.a,(d={value:T.length?T:Array.isArray(i[a])?[i[a][0].label,i[a][i[a].length-1].label]:[],onChange:A},Object(C.a)(d,"onChange",(function(e,n){S(n)})),Object(C.a)(d,"valueLabelDisplay","auto"),Object(C.a)(d,"aria-labelledby","range-slider"),Object(C.a)(d,"onChangeCommitted",(function(e,t){l(n[0].id,n[0].filters[a].filterName,t?"[".concat(t,"]"):"[]")})),Object(C.a)(d,"min",Array.isArray(i[a])?i[a][0].label:""),Object(C.a)(d,"max",Array.isArray(i[a])?i[a][i[a].length-1].label:""),Object(C.a)(d,"name","Age Range"),Object(C.a)(d,"marks",Array.isArray(i[a])?[{value:i[a][0].label,label:i[a][0].label},{value:i[a][i[a].length-1].label,label:i[a][i[a].length-1].label}]:""),Object(C.a)(d,"disabled",!Array.isArray(i[a])),d)))),o.a.createElement(pe.a,{item:!0,sm:12},o.a.createElement(Ae,{classes:r,key:wn("dashEmbed-".concat(t).concat(n.id,"-").concat(a))},o.a.createElement(Z.a,{className:"".concat(r.heading," ").concat(r.ml12,"  ").concat(r.verticalAlignTop)},"Lifetime Revenue Tier:"),o.a.createElement(un.a,{value:I,exclusive:!0,onChange:function(e,t){N(t),l(n[0].id,n[0].filters[a+1].filterName,t||"")},"aria-label":"ageTier",className:r.w100},">",i[a+1].map((function(e,a){if("Undefined"!==e.label){var i=H[e.label];return o.a.createElement(pn.a,{key:wn("".concat(t,"-FilterBar-ToggleButton-").concat(n[0].id,"-").concat(a)),value:e.label,"aria-label":e.label,className:r.w33},o.a.createElement(i,{className:r.mr12}),v.a.capitalize(D[e.label])||e.label)}})))))):""})),n[0].dynamicFieldLookUp?o.a.createElement(o.a.Fragment,null,o.a.createElement(pe.a,{item:!0,sm:3},o.a.createElement(Ae,{classes:r},o.a.createElement(Z.a,null,"Dynamic Tiles:"),o.a.createElement(un.a,{value:m,exclusive:!0,onChange:u,"aria-label":"text alignment"},Object.keys(n[0].dynamicFieldLookUp).map((function(e){return o.a.createElement(pn.a,{key:wn("dynamicDashTileToggle-".concat(e)),value:e,"aria-label":"left aligned"},e)})))))):"",n[0].dynamicVisConfig?o.a.createElement(o.a.Fragment,null,o.a.createElement(pe.a,{item:!0,sm:2},o.a.createElement(Ae,{classes:r},o.a.createElement(Z.a,null,"Dynamic Vis Color:"),o.a.createElement(un.a,{value:p,exclusive:!0,onChange:h,"aria-label":"text alignment"},Object.keys(n[0].dynamicVisConfig.colors).map((function(e){return o.a.createElement(pn.a,{key:wn("dynamicDashVisConfigToggle-".concat(e)),value:e,"aria-label":"left aligned"},o.a.createElement("span",{className:"".concat(r.dot),style:{backgroundColor:n[0].dynamicVisConfig.colors[e][n[0].dynamicVisConfig.colors[e].length-1]||e}}))})))))):"",n[0].dynamicThemeMode?o.a.createElement(o.a.Fragment,null,o.a.createElement(pe.a,{item:!0,sm:1},o.a.createElement(Fe,{classes:r},o.a.createElement(Z.a,null,g?"Light mode":"Dark mode"),o.a.createElement(ln.a,{checked:!g,onChange:function(){return f(null,!g)},color:"primary",name:"light theme toggle",inputProps:{"aria-label":"primary checkbox"}})))):"",n[0].dynamicThemeFont?o.a.createElement(o.a.Fragment,null,o.a.createElement(pe.a,{item:!0,sm:2},o.a.createElement(Fe,{classes:r},o.a.createElement(sn.a,{className:r.formControl},o.a.createElement(cn.a,{id:"demo-simple-select-label"},"Change font"),o.a.createElement(dn.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:b,onChange:function(e){f(null,e.target.value)}},o.a.createElement(ne.a,{value:"arial"},"Arial"),o.a.createElement(ne.a,{value:"roboto"},"Roboto"),o.a.createElement(ne.a,{value:"vollkorn"},"Vollkorn")))))):""):"")))}var Tn=t(1393),Sn=t(1359),On=t(1363),jn=t(1362),In=t(1358),Nn=t(1360),Fn=t(1361),An=t(572),Dn=t(67),Hn=Dn.validIdHelper,Pn=Dn.prettifyString,Bn=Object(X.a)((function(e){return{paper:{position:"absolute",width:800,maxHeight:450,overflow:"scroll",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},table:{maxHeight:310},card:{minWidth:275,minHeight:"10rem",boxShadow:"none"},flexCentered:{display:"flex",justifyContent:"center",alignItems:"center"}}}));function Mn(){return{top:"".concat(10,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(10,"%)")}}function Un(e){var n=Bn(),t=e.open,a=e.onClose,r=e.modalContent,i=o.a.useState(Mn),l=Object(J.a)(i,1)[0];return o.a.createElement(Tn.a,{open:t,onClose:a,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},o.a.createElement("div",{style:l,className:n.paper},o.a.createElement("h2",{id:"simple-modal-title"},r.title),r.body?o.a.createElement(In.a,{component:An.a,className:n.table},o.a.createElement(Sn.a,{stickyHeader:!0,className:n.table,size:"small","aria-label":"a dense table"},o.a.createElement(Nn.a,null,o.a.createElement(Fn.a,null,Object.keys(r.body[0]).map((function(e,n){return o.a.createElement(jn.a,{align:"right",key:Hn(e+"-TableHead-TableCell-"+n),id:Hn(e+"-TableHead-TableCell-"+n)},Pn(e.substring(e.lastIndexOf(".")+1,e.length)))})))),o.a.createElement(On.a,null,r.body.map((function(e,n){return o.a.createElement(Fn.a,{key:Hn("TableRow-"+n),id:Hn("TableRow-"+n)},Object.keys(e).map((function(e){return o.a.createElement(jn.a,{align:"right",key:Hn(e+"-TableBody-TableCell-"+n),id:Hn(e+"-TableBody-TableCell-"+n)},r.body[n][e]?r.body[n][e].rendered?r.body[n][e].rendered:r.body[n][e].value?r.body[n][e].value:"number"===typeof r.body[n][e]?Math.round(100*r.body[n][e])/100:r.body[n][e]:"")})))}))))):o.a.createElement(ue.a,{className:"".concat(n.card," ").concat(n.flexCentered)},o.a.createElement(he.a,{className:n.circularProgress}))))}var Ln=t(558),$n=Object(X.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,overflow:"scroll",borderRadius:"8px"},flexCentered:{display:"flex",justifyContent:"center",alignItems:"center"},hidden:{visibility:"hidden",zIndex:-1},tabs:{backgroundColor:"white",color:"#6c757d"},dNone:{display:"none"},dBlock:{display:"block"},tree:{height:240,flexGrow:1,maxWidth:400},icon:{marginRight:12,fontSize:"1rem",overflow:"visible"},mt12:{marginTop:12},w100:{width:"100%"},mlAuto:{marginLeft:"auto"},card:{minWidth:275,minHeight:400},height500:{height:500},height600:{height:600},height700:{height:700},height800:{height:800},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)},skeleton:{height:160,width:"100%"},padding30:{padding:30},positionTopRight:{position:"absolute",top:-30,right:-50,bottom:0,zIndex:100},positionRelative:{position:"relative"},height100Percent:{height:"100%"},ml12:{marginLeft:12},padding20:{padding:20},positionFixedTopRight:{position:"fixed",top:88,right:24,bottom:0,zIndex:100},codeFlyoutContainer:{backgroundColor:"rgb(40, 42, 54)",overflow:"scroll",borderRadius:"0 8px 8px 0"},padding10:{padding:10},overflowScroll:{overflow:"scroll"},noContainerScroll:{width:"100%",margin:0}}})),Rn=t(569),Vn=t(368),Gn=t(373),Wn=t(66),qn=t(1388),zn=t(67).validIdHelper;function Qn(e){var n=Object(a.useState)(0),t=Object(J.a)(n,2),r=(t[0],t[1],Object(a.useState)("")),i=Object(J.a)(r,2),s=i[0],u=i[1],p=Object(a.useState)(""),h=Object(J.a)(p,2),g=h[0],b=h[1],f=Object(a.useState)("All"),y=Object(J.a)(f,2),k=y[0],_=y[1],w=Object(a.useState)(""),x=Object(J.a)(w,2),E=x[0],T=x[1],O=Object(a.useState)(void 0),j=Object(J.a)(O,2),I=j[0],N=j[1],F=o.a.useState(!1),A=Object(J.a)(F,2),D=A[0],H=A[1],P=Object(a.useState)({}),B=Object(J.a)(P,2),M=B[0],U=B[1],L=Object(a.useState)(""),$=Object(J.a)(L,2),R=($[0],$[1]),V=Object(a.useState)(window.innerHeight-112),G=Object(J.a)(V,2),W=G[0],q=G[1],z=Object(a.useContext)(re),Q=z.togglePayWallModal,K=(z.show,z.codeShow),Y=z.sdk,X=z.corsApiCall,Z=$n(),ee=(e.staticContent,e.staticContent.lookerContent),ne=e.staticContent.type,ae=(e.activeTabValue,e.handleTabChange,e.lookerUser),oe=(e.lookerHost,function(){var e=Object(m.a)(c.a.mark((function e(n){var t,a,o,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.day,(o=JSON.parse(JSON.stringify(ee[0].inlineQuery))).filters=Object(d.a)({},o.filters,(t={},Object(C.a)(t,o.fields[0],a),Object(C.a)(t,o.fields[1],"All"===k?"":k),t)),o.total=!0,o.limit="25",H(!0),e.next=8,Y.ok(Y.run_inline_query({result_format:ee.result_format||"json",body:o}));case 8:r=e.sent,i={title:"Detail View for ".concat(a),body:r},U(i);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),ie=[];if(I&&(ie=(ie=v.a.filter(I,(function(e){return e[I.inlineQuery.fields[0]]>=s&&e[I.inlineQuery.fields[0]]<g&&("All"===k||e[I.inlineQuery.fields[1]]===k)}))).map((function(e){return{day:e[I.inlineQuery.fields[0]],category:e[I.inlineQuery.fields[1]],value:e[E]}})),"All"===k)){var le=Object(l.a)(new Set(ie.map((function(e){return e.day})))),se=[];le.map((function(e){var n=v.a.filter(ie,(function(n){return n.day===e})).reduce((function(e,n){return e+n.value}),0),t={day:e,value:n,category:"All"};se.push(t)})),ie=se}Object(a.useEffect)((function(){ee.length&&(X(ce,[ee]),T(ee[0].desiredFields[0]),R("import $ from 'jquery';\nimport _ from 'lodash'\nimport React, { useState, useEffect, useContext } from 'react';\nimport {\n  AppBar, Tabs, Tab, Typography, Box, Grid, CircularProgress, Card, TextField,\n  ExpansionPanel, ExpansionPanelSummary, ExpansionPanelDetails, Divider, InputLabel, MenuItem,\n  FormControl, Select, Modal\n} from '@material-ui/core'\nimport { Skeleton } from '@material-ui/lab';\nimport { ExpandMore, FilterList } from '@material-ui/icons';\nimport ModalTable from '../../Material/ModalTable';\nimport { ResponsiveCalendar } from '@nivo/calendar'\nimport CodeFlyout from '../CodeFlyout';\nimport rawSampleCode from '!!raw-loader!./CustomVis.js'; // eslint-disable-line import/no-webpack-loader-syntax\nimport useStyles from './styles.js';\nimport { ApiHighlight } from '../../Highlights/Highlight';\n//new date pickers\nimport { format, endOfDay, addDays } from 'date-fns';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { MuiPickersUtilsProvider, KeyboardTimePicker, KeyboardDatePicker } from '@material-ui/pickers';\nimport AppContext from '../../../AppContext';\nconst { validIdHelper } = require('../../../tools');\n\nexport default function CustomVis(props) {\n  // console.log('CustomVis')\n  const topBarBottomBarHeight = 112;\n  const [value, setValue] = useState(0);\n  const [fromDate, setFromDate] = useState('');\n  const [toDate, setToDate] = useState('');\n  const [category, setCategory] = useState('All')\n  const [desiredField, setDesiredField] = useState('')\n  const [apiContent, setApiContent] = useState(undefined);\n  const [open, setOpen] = React.useState(false);\n  const [modalContent, setModalContent] = useState({});\n  const [clientSideCode, setClientSideCode] = useState('');\n  // const [serverSideCode, setServerSideCode] = useState('');\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\n  const { togglePayWallModal, show, codeShow, sdk, corsApiCall } = useContext(AppContext)\n\n\n  //declare constants\n  const classes = useStyles();\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, activeTabValue, handleTabChange, lookerUser, lookerHost } = props;\n\n  //handle opening of modal for advanced and premium users\n  const handleModalOpen = async ({ day }) => {\n    let originalInlineQueryCopy = JSON.parse(JSON.stringify(lookerContent[0].inlineQuery));\n    originalInlineQueryCopy.filters = {\n      ...originalInlineQueryCopy.filters,\n      [originalInlineQueryCopy.fields[0]]: day,\n      [originalInlineQueryCopy.fields[1]]: category === \"All\" ? '' : category\n    }\n    originalInlineQueryCopy.total = true;\n    originalInlineQueryCopy.limit = \"25\";\n\n    setOpen(true);\n    let lookerResponseData = await sdk.ok(sdk.run_inline_query({ result_format: lookerContent.result_format || 'json', body: originalInlineQueryCopy }));\n    let modalObj = {\n      \"title\": `Detail View for ${day}`,\n      \"body\": lookerResponseData\n    }\n    setModalContent(modalObj);\n  };\n\n  //handle modal close\n  const handleModalClose = () => {\n    setModalContent({})\n    setOpen(false);\n  };\n\n  //handle tab change\n  const handleChange = (event, newValue) => {\n    handleTabChange(0);\n    setValue(newValue);\n  };\n\n  const handleFromDate = newValue => {\n    let validDate = Date.parse(newValue);\n    if (validDate > 0) {\n      let newValueAsDate = format(addDays(new Date(newValue), 1), 'yyyy-MM-dd');\n      setFromDate(newValueAsDate);\n    }\n  }\n  const handleToDate = newValue => {\n    let validDate = Date.parse(newValue);\n    if (validDate > 0) {\n      let newValueAsDate = format(addDays(new Date(newValue), 1), 'yyyy-MM-dd');\n      setToDate(newValueAsDate);\n    }\n  }\n\n  const handleCategory = newValue => {\n    setCategory(newValue)\n  }\n\n  const handleDesiredField = newValue => {\n    setDesiredField(newValue)\n  }\n\n  //format response from initial api call based on LookerContent array\n  //to match format required by Nivo Calendar component\n  let filterData = [];\n  if (apiContent) {\n    //filtering for fromDate, toDate and category\n    filterData = _.filter(apiContent, (row) => {\n      return (row[apiContent.inlineQuery.fields[0]] >= fromDate\n        && row[apiContent.inlineQuery.fields[0]] < toDate\n        && (category === 'All' ? true : row[apiContent.inlineQuery.fields[1]] === category)\n      )\n    })\n    //converting filterDAta to desired format for vis\n    filterData = filterData.map(item => {\n      return {\n        'day': item[apiContent.inlineQuery.fields[0]],\n        'category': item[apiContent.inlineQuery.fields[1]],\n        'value': item[desiredField]\n      }\n    })\n\n    //special exception for category all\n    //need to reduce array by day across categories\n    //destructuing in reduce of value would not work for dynamic var\n    if (category === 'All') {\n      //create array of all unique dates\n      const uniqueDates = [...new Set(filterData.map(item => item.day))];\n      let filteredAndReducedForAll = []\n      //iterate over unique date\n      uniqueDates.map(uniqueDate => {\n        //filter filterData for current unique date\n        let value = _.filter(filterData, row => {\n          return row.day === uniqueDate\n        }).reduce((acc, { value }) => acc + value, 0)\n        let thisObj = {\n          day: uniqueDate,\n          value: value,\n          category: 'All'\n        }\n        filteredAndReducedForAll.push(thisObj)\n\n      })\n      filterData = filteredAndReducedForAll;\n    }\n  }\n\n  useEffect(() => {\n    if (lookerContent.length) {\n      corsApiCall(performLookerApiCalls, [lookerContent])\n      setDesiredField(lookerContent[0].desiredFields[0])\n      setClientSideCode(rawSampleCode)\n    }\n  }, [lookerContent, lookerUser])\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", () => setHeight((window.innerHeight - topBarBottomBarHeight)));\n  })\n\n  const performLookerApiCalls = function (lookerContent) {\n    // console.log('performLookerApiCalls')\n    // console.log({ lookerContent })\n\n    setApiContent(undefined); //set to empty array to show progress bar and skeleton\n    lookerContent.map(async lookerContent => {\n      let { inlineQuery } = lookerContent;\n      inlineQuery.filters = {\n        [lookerContent.desiredFilterName]: lookerUser.user_attributes.brand\n      };\n      let lookerResponseData = await sdk.ok(sdk.run_inline_query({ result_format: lookerContent.result_format || 'json', body: inlineQuery }));\n\n      // console.log('lookerResponseData', lookerResponseData)\n      lookerResponseData = lookerResponseData.filter(item => {\n        return item[inlineQuery.fields[0]]\n      })\n      let uniqueCategories = ['All'];\n      for (let i = 0; i < lookerResponseData.length; i++) {\n        if (uniqueCategories.indexOf(lookerResponseData[i][inlineQuery.fields[1]]) === -1) {\n          uniqueCategories.push(lookerResponseData[i][inlineQuery.fields[1]])\n        }\n      }\n      lookerResponseData.inlineQuery = inlineQuery;\n      lookerResponseData.uniqueCategories = uniqueCategories;\n      setFromDate(lookerResponseData[lookerResponseData.length - 1][lookerResponseData.inlineQuery.fields[0]]);\n      setToDate(incrementDate(lookerResponseData[0][lookerResponseData.inlineQuery.fields[0]], 1));\n      setApiContent(lookerResponseData)\n    })\n  }\n\n  let nivoColorScale = ['#61cdbb', '#97e3d5', '#e8c1a0', '#f47560']\n  let googleColorScale = ['#4595EC', '#F3A759', '#E24E3A', '#65AB5A'];\n\n  return (\n    <div className={`${classes.root} demoComponent`}\n      style={{ height }}>\n      <Card elevation={1} className={`\n      ${classes.padding30} \n      ${classes.height100Percent}\n      ${classes.overflowScroll}`\n      }\n      >\n        <Grid container\n          key={validIdHelper(type)} >\n          <div className={`${classes.root} `}>\n\n            {!apiContent ?\n              <Skeleton variant=\"rect\" animation=\"wave\" className={classes.skeleton} />\n              :\n              <FilterBar {...props}\n                classes={classes}\n                apiContent={apiContent}\n                fromDate={fromDate}\n                toDate={toDate}\n                category={category}\n                desiredField={desiredField}\n                handleFromDate={handleFromDate}\n                handleToDate={handleToDate}\n                handleCategory={handleCategory}\n                handleDesiredField={handleDesiredField}\n              />\n            }\n\n\n            {!apiContent ?\n              <Grid item sm={12} style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\n                <Card className={`${classes.card} ${classes.flexCentered}`}\n                  elevation={0}\n                  mt={2}\n                  style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\n                  <CircularProgress className={classes.circularProgress} />\n                </Card>\n              </Grid>\n\n              : apiContent && apiContent.length ?\n                <Box>\n                  <Grid container\n                    spacing={3}\n                    className={`${classes.noContainerScroll}`}>\n                    {codeShow ?\n                      <Grid item sm={6}\n                        className={`${classes.positionFixedTopRight}`}\n                      >\n                        <CodeFlyout {...props}\n                          classes={classes}\n                          lookerUser={lookerUser}\n                          height={height}\n                        />\n                      </Grid> : ''}\n                    <Divider className={classes.divider} />\n                    <Grid item sm={12} >\n\n                      <Box className={`${classes.w100} ${classes.padding10}`} mt={2}>\n\n                        <ApiHighlight height={400} classes={classes}>\n                          <ResponsiveCalendar\n                            data={filterData}\n                            align=\"top\"\n                            from={incrementDate(fromDate, 1)}\n                            to={incrementDate(toDate, 1)}\n                            emptyColor=\"#eeeeee\"\n                            colors={desiredField === lookerContent[0].desiredFields[0] ? googleColorScale : nivoColorScale}\n                            yearSpacing={40}\n                            monthBorderColor=\"#ffffff\"\n                            dayBorderWidth={2}\n                            dayBorderColor=\"#ffffff\"\n                            margin={{ bottom: 40, left: 40 }}\n                            legends={[\n                              {\n                                anchor: 'bottom-right',\n                                direction: 'row',\n                                translateY: 36,\n                                itemCount: 4,\n                                itemWidth: 42,\n                                itemHeight: 36,\n                                itemsSpacing: 14,\n                                itemDirection: 'right-to-left'\n                              }\n                            ]}\n                            onClick={(day, event) => {\n                              if (!day.value) {\n                              } else if (lookerUser.user_attributes.permission_level === 'basic') {\n                                togglePayWallModal({\n                                  'show': true,\n                                  'permissionNeeded': 'see_drill_overlay'\n                                });\n                              } else {\n                                corsApiCall(handleModalOpen, [day])\n                                event.stopPropagation();\n                              }\n                            }}\n                          />\n                        </ApiHighlight>\n                      </Box>\n                    </Grid>\n                  </Grid>\n                </Box> :\n                ''\n            }\n          </div>\n        </Grid >\n        {\n          open ?\n            <ModalTable\n              {...props}\n              open={open}\n              onClose={handleModalClose}\n              classes={classes}\n              modalContent={modalContent}\n            />\n\n            : ''\n        }\n      </Card>\n    </div >\n  )\n}\n//Filter Bar code\nfunction FilterBar(props) {\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, classes,\n    apiContent, fromDate, toDate, category, desiredField, handleFromDate, handleToDate, handleCategory, handleDesiredField } = props;\n\n  const [expanded, setExpanded] = useState(true);\n\n  const handleExpansionPanel = (event, newValue) => {\n    setExpanded(expanded ? false : true);\n  };\n\n  // console.log('FilterBar')\n  // console.log('fromDate', fromDate)\n  // console.log('toDate', toDate)\n\n  return (\n    <ExpansionPanel expanded={expanded} onChange={handleExpansionPanel} className={classes.w100} elevation={0}>\n      <ExpansionPanelSummary\n        expandIcon={<ExpandMore />}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <FilterList /><Typography className={`${classes.heading} ${classes.ml12}`}>Filter:</Typography>\n\n      </ExpansionPanelSummary>\n      <ExpansionPanelDetails>\n        <Grid container spacing={3}>\n          {apiContent ?\n            <>\n              <Grid item sm={3}>\n\n                <ApiHighlight classes={classes}>\n                  <FormControl className={classes.formControl}>\n                    <InputLabel\n                      id={`${validIdHelper(type + '-FilterBar-DataPropery-SelectLabel')}`}\n                    >\n                      Metric</InputLabel>\n                    <Select\n                      labelId={`${validIdHelper(type + '-FilterBar-DataPropery-SelectLabel')}`}\n                      id={`${validIdHelper(type + '-FilterBar-DataPropery-Select')}`}\n                      value={desiredField}\n                      onChange={(event) => handleDesiredField(event.target.value)}\n                    >\n                      {lookerContent[0].desiredFields.map((item, index) => (\n\n                        <MenuItem\n                          id={validIdHelper(`${item}-${index}`)}\n                          key={validIdHelper(`${item}-${index}`)}\n                          value={item}\n                        >{item.substring(item.lastIndexOf(\".\") + 1, item.length).split(\"_\").map(item => item.charAt(0).toUpperCase() + item.substring(1)).join(\" \")}</MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </ApiHighlight>\n              </Grid>\n              <Grid item sm={3}>\n                <ApiHighlight classes={classes}>\n                  <FormControl className={classes.formControl}>\n                    <InputLabel\n                      id={`${validIdHelper(type + '-FilterBar-Category-SelectLabel')}`}\n                    >\n                      Category</InputLabel>\n                    <Select\n                      labelId={`${validIdHelper(type + '-FilterBar-Category-SelectLabel')}`}\n                      id={`${validIdHelper(type + '-FilterBar-Category-Select')}`}\n                      value={category}\n                      onChange={(event) => handleCategory(event.target.value)}\n                    >\n                      {apiContent.uniqueCategories.map((item, index) => (\n\n                        <MenuItem\n                          id={validIdHelper(`${item}-${index}`)}\n                          key={validIdHelper(`${item}-${index}`)}\n                          value={item}>{item}</MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </ApiHighlight>\n              </Grid>\n\n              <Grid item sm={3}>\n\n                <ApiHighlight classes={classes}>\n                  <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                    <KeyboardDatePicker\n                      disableToolbar\n                      variant=\"inline\"\n                      format=\"MM/dd/yyyy\"\n                      margin=\"normal\"\n                      id=\"fromDate\"\n                      label=\"From date\"\n                      value={fromDate}\n                      onChange={handleFromDate}\n                      KeyboardButtonProps={{\n                        'aria-label': 'change date',\n                      }}\n                      minDate={apiContent[apiContent.length - 1][apiContent.inlineQuery.fields[0]]}\n                      maxDate={apiContent[0][apiContent.inlineQuery.fields[0]]}\n                    />\n                  </MuiPickersUtilsProvider>\n                </ApiHighlight>\n              </Grid>\n              <Grid item sm={3}>\n                <ApiHighlight classes={classes}>\n                  <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                    <KeyboardDatePicker\n                      disableToolbar\n                      variant=\"inline\"\n                      format=\"MM/dd/yyyy\"\n                      margin=\"normal\"\n                      id=\"toDate\"\n                      label=\"To date\"\n                      value={toDate}\n                      onChange={handleToDate}\n                      KeyboardButtonProps={{\n                        'aria-label': 'change date',\n                      }}\n                      minDate={fromDate}\n                      maxDate={toDate}\n                    />\n                  </MuiPickersUtilsProvider>\n                </ApiHighlight>\n              </Grid>\n            </>\n            : ''}\n        </Grid>\n      </ExpansionPanelDetails>\n    </ExpansionPanel >\n  )\n}\n\nfunction incrementDate(dateInput, increment) {\n  var dateFormatTotime = new Date(dateInput);\n  var increasedDate = new Date(dateFormatTotime.getTime() + (increment * 86400000));\n  return increasedDate.toISOString().split('T')[0];\n}"))}),[ee,ae]),Object(a.useEffect)((function(){window.addEventListener("resize",(function(){return q(window.innerHeight-112)}))}));var ce=function(e){N(void 0),e.map(function(){var e=Object(m.a)(c.a.mark((function e(n){var t,a,o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=n.inlineQuery).filters=Object(C.a)({},n.desiredFilterName,ae.user_attributes.brand),e.next=4,Y.ok(Y.run_inline_query({result_format:n.result_format||"json",body:t}));case 4:for(a=(a=e.sent).filter((function(e){return e[t.fields[0]]})),o=["All"],r=0;r<a.length;r++)-1===o.indexOf(a[r][t.fields[1]])&&o.push(a[r][t.fields[1]]);a.inlineQuery=t,a.uniqueCategories=o,u(a[a.length-1][a.inlineQuery.fields[0]]),b(Yn(a[0][a.inlineQuery.fields[0]],1)),N(a);case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())};return o.a.createElement("div",{className:"".concat(Z.root," demoComponent"),style:{height:W}},o.a.createElement(ue.a,{elevation:1,className:"\n      ".concat(Z.padding30," \n      ").concat(Z.height100Percent,"\n      ").concat(Z.overflowScroll)},o.a.createElement(pe.a,{container:!0,key:zn(ne)},o.a.createElement("div",{className:"".concat(Z.root," ")},I?o.a.createElement(Kn,Object.assign({},e,{classes:Z,apiContent:I,fromDate:s,toDate:g,category:k,desiredField:E,handleFromDate:function(e){if(Date.parse(e)>0){var n=Object(Rn.a)(Object(Vn.a)(new Date(e),1),"yyyy-MM-dd");u(n)}},handleToDate:function(e){if(Date.parse(e)>0){var n=Object(Rn.a)(Object(Vn.a)(new Date(e),1),"yyyy-MM-dd");b(n)}},handleCategory:function(e){_(e)},handleDesiredField:function(e){T(e)}})):o.a.createElement(mn.a,{variant:"rect",animation:"wave",className:Z.skeleton}),I?I&&I.length?o.a.createElement(S.a,null,o.a.createElement(pe.a,{container:!0,spacing:3,className:"".concat(Z.noContainerScroll)},K?o.a.createElement(pe.a,{item:!0,sm:6,className:"".concat(Z.positionFixedTopRight)},o.a.createElement(ke,Object.assign({},e,{classes:Z,lookerUser:ae,height:W}))):"",o.a.createElement(te.a,{className:Z.divider}),o.a.createElement(pe.a,{item:!0,sm:12},o.a.createElement(S.a,{className:"".concat(Z.w100," ").concat(Z.padding10),mt:2},o.a.createElement(Ne,{height:400,classes:Z},o.a.createElement(Ln.a,{data:ie,align:"top",from:Yn(s,1),to:Yn(g,1),emptyColor:"#eeeeee",colors:E===ee[0].desiredFields[0]?["#4595EC","#F3A759","#E24E3A","#65AB5A"]:["#61cdbb","#97e3d5","#e8c1a0","#f47560"],yearSpacing:40,monthBorderColor:"#ffffff",dayBorderWidth:2,dayBorderColor:"#ffffff",margin:{bottom:40,left:40},legends:[{anchor:"bottom-right",direction:"row",translateY:36,itemCount:4,itemWidth:42,itemHeight:36,itemsSpacing:14,itemDirection:"right-to-left"}],onClick:function(e,n){e.value&&("basic"===ae.user_attributes.permission_level?Q({show:!0,permissionNeeded:"see_drill_overlay"}):(X(oe,[e]),n.stopPropagation()))}})))))):"":o.a.createElement(pe.a,{item:!0,sm:12,style:{height:W-30-(me()(".MuiExpansionPanel-root:visible").innerHeight()||0)}},o.a.createElement(ue.a,{className:"".concat(Z.card," ").concat(Z.flexCentered),elevation:0,mt:2,style:{height:W-30-(me()(".MuiExpansionPanel-root:visible").innerHeight()||0)}},o.a.createElement(he.a,{className:Z.circularProgress}))))),D?o.a.createElement(Un,Object.assign({},e,{open:D,onClose:function(){U({}),H(!1)},classes:Z,modalContent:M})):""))}function Kn(e){e.staticContent;var n=e.staticContent.lookerContent,t=e.staticContent.type,r=e.classes,i=e.apiContent,l=e.fromDate,s=e.toDate,c=e.category,d=e.desiredField,m=e.handleFromDate,u=e.handleToDate,p=e.handleCategory,h=e.handleDesiredField,g=Object(a.useState)(!0),b=Object(J.a)(g,2),f=b[0],y=b[1];return o.a.createElement(tn.a,{expanded:f,onChange:function(e,n){y(!f)},className:r.w100,elevation:0},o.a.createElement(an.a,{expandIcon:o.a.createElement(fn.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},o.a.createElement(yn.a,null),o.a.createElement(Z.a,{className:"".concat(r.heading," ").concat(r.ml12)},"Filter:")),o.a.createElement(on.a,null,o.a.createElement(pe.a,{container:!0,spacing:3},i?o.a.createElement(o.a.Fragment,null,o.a.createElement(pe.a,{item:!0,sm:3},o.a.createElement(Ne,{classes:r},o.a.createElement(sn.a,{className:r.formControl},o.a.createElement(cn.a,{id:"".concat(zn(t+"-FilterBar-DataPropery-SelectLabel"))},"Metric"),o.a.createElement(dn.a,{labelId:"".concat(zn(t+"-FilterBar-DataPropery-SelectLabel")),id:"".concat(zn(t+"-FilterBar-DataPropery-Select")),value:d,onChange:function(e){return h(e.target.value)}},n[0].desiredFields.map((function(e,n){return o.a.createElement(ne.a,{id:zn("".concat(e,"-").concat(n)),key:zn("".concat(e,"-").concat(n)),value:e},e.substring(e.lastIndexOf(".")+1,e.length).split("_").map((function(e){return e.charAt(0).toUpperCase()+e.substring(1)})).join(" "))})))))),o.a.createElement(pe.a,{item:!0,sm:3},o.a.createElement(Ne,{classes:r},o.a.createElement(sn.a,{className:r.formControl},o.a.createElement(cn.a,{id:"".concat(zn(t+"-FilterBar-Category-SelectLabel"))},"Category"),o.a.createElement(dn.a,{labelId:"".concat(zn(t+"-FilterBar-Category-SelectLabel")),id:"".concat(zn(t+"-FilterBar-Category-Select")),value:c,onChange:function(e){return p(e.target.value)}},i.uniqueCategories.map((function(e,n){return o.a.createElement(ne.a,{id:zn("".concat(e,"-").concat(n)),key:zn("".concat(e,"-").concat(n)),value:e},e)})))))),o.a.createElement(pe.a,{item:!0,sm:3},o.a.createElement(Ne,{classes:r},o.a.createElement(Wn.a,{utils:Gn.a},o.a.createElement(qn.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"fromDate",label:"From date",value:l,onChange:m,KeyboardButtonProps:{"aria-label":"change date"},minDate:i[i.length-1][i.inlineQuery.fields[0]],maxDate:i[0][i.inlineQuery.fields[0]]})))),o.a.createElement(pe.a,{item:!0,sm:3},o.a.createElement(Ne,{classes:r},o.a.createElement(Wn.a,{utils:Gn.a},o.a.createElement(qn.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"toDate",label:"To date",value:s,onChange:u,KeyboardButtonProps:{"aria-label":"change date"},minDate:l,maxDate:s}))))):"")))}function Yn(e,n){var t=new Date(e);return new Date(t.getTime()+864e5*n).toISOString().split("T")[0]}var Jn=t(1391),Xn=t(1367),Zn=t(1368),et=t(1369),nt=t(1370),tt=t(561),at=t.n(tt),ot=t(562),rt=t.n(ot),it=Object(X.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,overflow:"scroll",borderRadius:"8px"},card:{minWidth:275,minHeight:400},flexCentered:{display:"flex",justifyContent:"center",alignItems:"center"},hidden:{visibility:"hidden",position:"absolute",zIndex:-1},tabs:{backgroundColor:"white",color:"#6c757d"},dNone:{display:"none"},dBlock:{display:"block"},tree:{height:240,flexGrow:1,maxWidth:400},icon:{marginRight:12,fontSize:"1rem",overflow:"visible"},mt12:{marginTop:12},w100:{width:"100%"},mlAuto:{marginLeft:"auto"},skeleton:{minWidth:275,minHeight:600},ml24:{marginLeft:24},parentHoverVisibility:{"&:hover $childHoverVisibility":{visibility:"visible"}},childHoverVisibility:{visibility:"hidden"},faSm:{fontSize:".75em"},positionTopRight:{position:"absolute",top:-30,right:-50,bottom:0,zIndex:100},positionRelative:{position:"relative"},padding30:{padding:30},mr12:{marginRight:12},ml12:{marginLeft:12},height100Percent:{height:"100%"},padding20:{padding:20},positionFixedTopRight:{position:"fixed",top:88,right:24,bottom:0,zIndex:100},codeFlyoutContainer:{backgroundColor:"rgb(40, 42, 54)",overflow:"scroll",borderRadius:"0 8px 8px 0"},whiteSpaceNoWrap:{whiteSpace:"nowrap"},overflowHidden:{overflow:"hidden"},overflowScroll:{overflow:"scroll"},overflowYScroll:{overflowY:"scroll",overflowX:"hidden"},noContainerScroll:{width:"100%",margin:0}}}));function lt(e){var n=e.children,t=e.value,a=e.index,r=Object(u.a)(e,["children","value","index"]);return o.a.createElement(Z.a,Object.assign({component:"div",role:"tabpanel",hidden:t!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},r),o.a.createElement(S.a,{p:3},n))}t(323);var st=t(67).validIdHelper;function ct(e){var n=Object(a.useState)(0),t=Object(J.a)(n,2),r=t[0],i=t[1],s=Object(a.useState)([]),u=Object(J.a)(s,2),p=u[0],h=u[1],g=Object(a.useState)({}),b=Object(J.a)(g,2),f=(b[0],b[1]),y=Object(a.useState)(""),C=Object(J.a)(y,2),k=(C[0],C[1]),v=Object(a.useState)(""),_=Object(J.a)(v,2),w=(_[0],_[1],Object(a.useState)(window.innerHeight-112)),x=Object(J.a)(w,2),E=x[0],T=x[1],j=Object(a.useContext)(re),I=j.togglePayWallModal,N=(j.show,j.codeShow),F=j.sdk,A=j.corsApiCall,D=it(),H=Object(a.useState)(0),P=Object(J.a)(H,2),B=P[0],M=P[1],U=Object(a.useState)(null),L=Object(J.a)(U,2),$=L[0],R=L[1],V=(e.staticContent,e.staticContent.lookerContent),G=e.staticContent.type,W=e.activeTabValue,q=(e.handleTabChange,e.lookerUser),z=e.lookerHost,Q=G,K=Object(l.a)(V),Y=function(e,n){1==n&&"premium"!=q.user_attributes.permission_level?I({show:!0,permissionNeeded:"explore"}):M(n)};Object(a.useEffect)((function(){W>B?M(W):A(Z,[V,1]),k("import $ from 'jquery';\nimport _ from 'lodash'\nimport React, { useState, useEffect, useContext } from 'react';\nimport { AppBar, Tabs, Tab, Typography, Box, Grid, Icon, CircularProgress, Card, Button } from '@material-ui/core'\nimport { TreeView, TreeItem } from '@material-ui/lab';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport { LookerEmbedSDK } from '@looker/embed-sdk'\nimport CodeFlyout from '../CodeFlyout';\nimport rawSampleCode from '!!raw-loader!./ReportBuilder.js'; // eslint-disable-line import/no-webpack-loader-syntax\nimport useStyles from './styles.js';\nimport { TabPanel, a11yProps } from './helpers.js';\nimport '../../Home.css';\nimport { ApiHighlight, EmbedHighlight } from '../../Highlights/Highlight';\nimport AppContext from '../../../AppContext';\nimport { SwapVerticalCircleOutlined } from '@material-ui/icons';\nconst { validIdHelper } = require('../../../tools');\n\n//start of ReportBuilder Component\nexport default function ReportBuilder(props) {\n  const topBarBottomBarHeight = 112;\n  const [iFrameExists, setIFrame] = useState(0);\n  // const [exploreIFrameExists, setExploreIFrame] = useState(0);\n  const [apiContent, setApiContent] = useState([]);\n  const [exploreObj, setExploreObj] = useState({});\n  const [clientSideCode, setClientSideCode] = useState('');\n  const [serverSideCode, setServerSideCode] = useState('');\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\n  // const { togglePayWallModal, codeShow } = useContext(AppContext)\n  const { togglePayWallModal, show, codeShow, sdk, corsApiCall } = useContext(AppContext)\n\n  const classes = useStyles();\n  const [value, setValue] = useState(0);\n  const [qid, setQid] = useState(null);\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, activeTabValue, handleTabChange, lookerUser, lookerHost } = props;\n\n  const demoComponentType = type;\n  const tabContent = [...lookerContent]\n\n  const handleChange = (event, newValue) => {\n    if (newValue == 1 && lookerUser.user_attributes.permission_level != 'premium') {\n      // handleChange(0)\n      togglePayWallModal({\n        'show': true,\n        'permissionNeeded': 'explore'\n      });\n    } else {\n      setValue(newValue)\n    }\n  };\n\n  useEffect(() => {\n    if (activeTabValue > value) {\n      setValue(activeTabValue)\n    } else {\n      corsApiCall(performLookerApiCalls, [lookerContent, 1])\n    }\n    setClientSideCode(rawSampleCode)\n  }, [lookerContent, lookerUser]);\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", () => setHeight((window.innerHeight - topBarBottomBarHeight)));\n  })\n\n\n  // useEffect(() => {\n  //   console.log('exploreObj useEffect')\n  //   console.log('Object.keys(exploreObj).length', Object.keys(exploreObj).length)\n  // }, [exploreObj])\n\n\n  useEffect(() => {\n    // console.log('value useEffect')\n    corsApiCall(performLookerApiCalls, [lookerContent, 0]);\n  }, [value])\n\n\n  const action = async (contentType, contentId, secondaryAction, qid, exploreId, newReportEmbedContainer) => {\n\n    let iFrameArray = $(\".embedContainer:visible > iframe\")\n\n    let matchingIndex = 0;\n    for (let i = 0; i < iFrameArray.length; i++) {\n      if (iFrameArray[i].classList.contains(contentType) && iFrameArray[i].classList.contains(contentId)) {\n        iFrameArray[i].classList.remove('dNone')\n        matchingIndex = i;\n      } else {\n        iFrameArray[i].classList.add('dNone')\n      }\n    }\n\n    if (secondaryAction === 'edit' || secondaryAction === 'explore') {\n      //save qid to state and use in perform looker api calls\n      setQid(qid);\n      handleChange('edit', 1)\n    } else if (secondaryAction === 'delete') {\n      //remove iframe associated with content that was deleted\n      let indexOfDeletedContent;\n      for (let i = 0; i < iFrameArray.length; i++) {\n        if (iFrameArray[i].classList.contains(contentId)) {\n          indexOfDeletedContent = i;\n        }\n      }\n      let updatedIFrameArray = iFrameArray.slice()\n      updatedIFrameArray.splice(indexOfDeletedContent, 1)\n      for (let i = 0; i < updatedIFrameArray.length; i++) {\n        if (i === 0) {\n          updatedIFrameArray[i].classList.remove('dNone')\n          matchingIndex = i;\n        } else {\n          updatedIFrameArray[i].classList.add('dNone')\n        }\n      }\n      //append updated array\n      $(`#embedContainer-reportbuilder-14`).empty();\n      $(`#embedContainer-reportbuilder-14`).html(updatedIFrameArray);\n\n      let lookerResponse = await sdk.ok(sdk.delete_look(contentId));\n      corsApiCall(performLookerApiCalls, [lookerContent, 1])\n    }\n  }\n\n  const performLookerApiCalls = function (lookerContent, animateLoad) {\n    // console.log('performLookerApiCalls')\n    // console.log('lookerContent', lookerContent)\n    if (animateLoad) {\n      handleChange('refresh', 0)\n      setIFrame(0)\n      setApiContent([])\n    }\n\n    lookerContent.map(async lookerContent => {\n      if (value === 0 &&\n        lookerContent.type === 'folder') {\n\n        const sharedFolder = await sdk.ok(sdk.folder(lookerContent.id));\n        const embedUser = await sdk.ok(sdk.me())\n\n        for (let h = 0; h < sharedFolder.looks.length; h++) {\n          let look = await sdk.ok(sdk.look(sharedFolder.looks[h].id))\n          let clientId = look.query.client_id;\n          sharedFolder.looks[h].client_id = clientId;\n        }\n\n        let embeddedUserFolder = {}\n        if (lookerUser.user_attributes.permission_level === 'premium') {\n          let embedUserLooks = await sdk.ok(sdk.search_looks({ user_id: embedUser.id }))\n          if (embedUserLooks && embedUserLooks.length) {\n            let embedUserFolderId = embedUserLooks[0].folder_id || null;\n            embeddedUserFolder = await sdk.ok(sdk.folder(embedUserFolderId));\n            for (let i = 0; i < embeddedUserFolder.looks.length; i++) {\n              let look = await sdk.ok(sdk.look(embeddedUserFolder.looks[i].id));\n              let clientId = look.query.client_id;\n              embeddedUserFolder.looks[i].client_id = clientId;\n            }\n          }\n        }\n\n        let lookerResponseData = {\n          sharedFolder,\n          embeddedUserFolder\n        }\n\n        // console.log('lookerResponseData', lookerResponseData)\n\n        let looksToUse = [...lookerResponseData.sharedFolder.looks];\n        if (lookerUser.user_attributes.permission_level === 'premium' &&\n          Object.keys(lookerResponseData.embeddedUserFolder).length) {\n          looksToUse = [\n            ...looksToUse, ...lookerResponseData.embeddedUserFolder.looks\n          ]\n\n        }\n        let dashboardsToUse = [...lookerResponseData.sharedFolder.dashboards]\n        let objToUse = {\n          looks: looksToUse,\n          dashboards: dashboardsToUse\n        }\n        // console.log('objToUse', objToUse)\n        let iFrameArray = $(`.embedContainer.${validIdHelper(demoComponentType)} > iframe`);\n        if (objToUse.looks.length) {\n          objToUse.looks.map((item, index) => {\n\n            let lookId = item.id;\n            let lookIsRendered = false;\n            for (let i = 0; i < iFrameArray.length; i++) {\n              if (iFrameArray[i].classList.contains('look') && iFrameArray[i].classList.contains(lookId)) {\n                lookIsRendered = true;\n              }\n            }\n\n            if (!lookIsRendered) {\n              LookerEmbedSDK.createLookWithId(lookId)\n                .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\n                .withClassName('iframe')\n                .withClassName('look')\n                .withClassName(lookerResponseData.sharedFolder.looks.indexOf(item) > -1 ? \"shared\" : \"personal\")\n                .withClassName(index > 0 ? 'dNone' : 'oops')\n                .withClassName(lookId)\n                .build()\n                .connect()\n                .then((look) => {\n                  // setIFrame(1)\n                  LookerEmbedSDK.init(`https://${lookerHost}.looker.com`);\n                })\n                .catch((error) => {\n                  console.error('Connection error', error)\n                })\n            }\n\n            if (index === objToUse.looks.length - 1) {\n              setTimeout(() => setIFrame(1), 1000)\n            }\n          })\n        }\n\n        if (objToUse.dashboards.length) {\n          objToUse.dashboards.map((item, index) => {\n            let dashboardId = item.id\n            let dashboardIsRendered = false;\n            for (let i = 0; i < iFrameArray.length; i++) {\n              if (iFrameArray[i].classList.contains('dashboard') && iFrameArray[i].classList.contains(dashboardId)) {\n                dashboardIsRendered = true;\n              }\n            }\n            if (!dashboardIsRendered) {\n              LookerEmbedSDK.createDashboardWithId(dashboardId)\n                .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\n                .withClassName('iframe')\n                .withClassName('dashboard')\n                .withClassName(lookerResponseData.sharedFolder.dashboards.indexOf(item) > -1 ? \"shared\" : \"personal\")\n                .withClassName('dNone')\n                .withClassName(dashboardId)\n                .build()\n                .connect()\n                .then((dashboard) => {\n                  setTimeout(() => {\n                    // setIFrame(1)\n                  }, 1000)\n                  LookerEmbedSDK.init(`https://${lookerHost}.looker.com`);\n                })\n                .catch((error) => {\n                  console.error('Connection error', error)\n                })\n            }\n\n\n            if (index === objToUse.dashboards.length - 1) {\n              setTimeout(() => setIFrame(1), 1000)\n            }\n          })\n        }\n        setApiContent(objToUse)\n      } else if (lookerContent.type === 'explore' &&\n        lookerUser.user_attributes.permission_level === 'premium' &&\n        value === 1) {\n        // console.log('inside else ifff')\n        let exploreId = lookerContent.id;\n        // console.log('exploreId', exploreId)\n        $(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`)).html('');\n        //separate logic for embedding explore with qid vs. no qid\n        if (qid) {\n          // console.log('qid ifff')\n          LookerEmbedSDK.createExploreWithId(exploreId)\n            .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\n            .withClassName('exploreIframe')\n            .withParams({\n              qid: qid\n            })\n            .on('explore:state:changed', (event) => {\n            })\n            .build()\n            .connect()\n            .then((explore) => {\n              console.log('explore', explore)\n              // setTimeout(() => {\n              setIFrame(1)\n              setExploreObj(explore)\n              // }, 1000)\n              LookerEmbedSDK.init(`https://${lookerHost}.looker.com`);\n              setQid(null)\n            })\n            .catch((error) => {\n              console.error('Connection error', error)\n            })\n        } else {\n          // console.log('qid else')\n          LookerEmbedSDK.createExploreWithId(exploreId)\n            .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\n            .withClassName('exploreIframe')\n            .on('explore:state:changed', (event) => {\n            })\n            .build()\n            .connect()\n            .then((explore) => {\n              // console.log('explore', explore)\n              // setTimeout(() => {\n              setIFrame(1)\n              setExploreObj(explore)\n              // }, 1000)\n              LookerEmbedSDK.init(`https://${lookerHost}.looker.com`);\n              // setQid(null)\n            })\n            .catch((error) => {\n              console.error('Connection error', error)\n            })\n        }\n      }\n      // else console.log('ellse')\n    })\n  }\n\n  return (\n    <div className={`${classes.root} demoComponent`}\n      style={{ height }}>\n      <Card elevation={1} className={`\n      ${classes.padding30} \n      ${classes.height100Percent}\n      ${classes.overflowYScroll}`\n      }\n      >\n        <Grid container\n          key={validIdHelper(type)} >\n          <div className={classes.root}>\n            {iFrameExists ? '' :\n              <Grid item sm={12} style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\n                <Card className={`${classes.card} ${classes.flexCentered}`}\n                  elevation={0}\n                  mt={2}\n                  style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\n                  <CircularProgress className={classes.circularProgress} />\n                </Card>\n              </Grid>\n            }\n\n            {/* additional loading logic, need embedContainer to exist but want it hidden until iFrame has content...*/}\n            <Box className={iFrameExists ? `` : `${classes.hidden}`}>\n              <AppBar position=\"static\" elevation={0}>\n                <Tabs\n                  className={classes.tabs}\n                  value={value}\n                  onChange={handleChange}\n                  aria-label=\"simple tabs example\">\n                  {tabContent.map((item, index) => (\n                    <Tab\n                      key={`${validIdHelper(demoComponentType + '-tab-' + index)}`}\n                      label={index == 1 ?\n                        <div>\n\n                          {lookerUser.user_attributes.permission_level != 'premium' ?\n                            <Icon className={`fa fa-lock ${classes.faSm} ${classes.mr12}`} /> : <Icon className={`fa fa-plus ${classes.faSm} ${classes.mr12}`} />}\n                          {item.label}\n                        </div> :\n                        item.label}\n                      className={value === 1 && index === 1 ? `${classes.hidden}` : index == 1 ? `${classes.mlAuto}` : ``}\n                      style={index === 1 ? {\n                        backgroundColor: '#5896E6',\n                        borderRadius: '4px',\n                        color: '#fff',\n                        opacity: '1.0'\n                      } : {}}\n                      {...a11yProps(index)} />\n                  ))}\n                </Tabs>\n              </AppBar>\n              <Box className=\"tabPanelContainer\">\n                <Grid container\n                  spacing={3}\n                  className={`${classes.noContainerScroll}`}>\n                  {codeShow ?\n                    <Grid item sm={6}\n                      className={`${classes.positionFixedTopRight}`}\n                    >\n                      <CodeFlyout {...props}\n                        classes={classes}\n                        lookerUser={lookerUser}\n                        height={height}\n                      />\n                    </Grid> : ''}\n                  {tabContent.map((tabContentItem, tabContentItemIndex) => (\n                    <TabPanel\n                      key={`${validIdHelper(demoComponentType + '-tabPanel-' + tabContentItemIndex)}`}\n                      value={value}\n                      index={tabContentItemIndex}\n                      style={{ width: '100%' }} //weird\n                    >\n                      <Grid container>\n                        {\n                          tabContentItemIndex === 0\n                            ?\n                            <React.Fragment\n                              key={`${validIdHelper(demoComponentType + '-outerFragment-' + tabContentItemIndex)}`}>\n                              <Grid item sm={4} >\n                                <ApiHighlight height={500} classes={classes}>\n                                  <TreeSideBar {...{\n                                    togglePayWallModal,\n                                    classes,\n                                    demoComponentType,\n                                    tabContent,\n                                    tabContentItemIndex,\n                                    action,\n                                    apiContent,\n                                    ...props\n                                  }}\n                                  />\n                                </ApiHighlight>\n                              </Grid>\n                              <Grid item sm={8} >\n                                <EmbedHighlight classes={classes}>\n                                  <div\n                                    className={`embedContainer ${validIdHelper(demoComponentType)}`}\n                                    id={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                    key={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                  >\n                                  </div>\n                                </EmbedHighlight>\n                              </Grid>\n                            </React.Fragment>\n                            :\n                            <Grid item sm={12} >\n                              {/* couldn't get this to work */}\n                              {/* {Object.keys(exploreObj).length ?\n                                <EmbedHighlight classes={classes}>\n                                  <div\n                                    className=\"embedContainer\"\n                                    id={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                    key={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                  >\n                                  </div>\n                                </EmbedHighlight> :\n                                <Card className={`${classes.card} ${classes.flexCentered}`}\n                                  elevation={0}\n                                  mt={2}\n                                  style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\n                                  <CircularProgress className={classes.circularProgress} />\n                                </Card>} */}\n                              <EmbedHighlight classes={classes}>\n                                <div\n                                  className=\"embedContainer\"\n                                  id={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                  key={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                >\n                                </div>\n                              </EmbedHighlight>\n                            </Grid>\n                        }\n                      </Grid>\n                    </TabPanel>\n                  ))}</Grid>\n              </Box>\n            </Box >\n          </div>\n        </Grid >\n      </Card>\n    </div >\n  )\n}\n\n\nfunction TreeSideBar(props) {\n  const { staticContent, staticContent: { lookerContent }, classes, demoComponentType, tabContent, tabContentItemIndex, action, apiContent, lookerUser, togglePayWallModal } = props\n  const sharedFolderId = lookerContent[0].type === 'folder' ? lookerContent[0].id : '';\n  let treeCounter = 0;\n  const [selected, setSelected] = useState(2);\n  const expandedArr = Object.keys(apiContent).length ? [\"1\", \"\" + (2 + apiContent[Object.keys(apiContent)[0]].length)] : [];\n  const [expanded, setExpanded] = useState(expandedArr);\n\n  const handleToggle = (event, nodeIds) => {\n    setExpanded(nodeIds);\n  }\n\n  const handleSelect = (event, nodeIds) => {\n    setSelected(nodeIds);\n  };\n\n\n  useEffect(() => {\n    setExpanded(expandedArr);\n    if (selected !== 2) setSelected(2)\n    // let innerTreeItemArray = $(\".innerTreeItem\");\n    // console.log('innerTreeItemArray', innerTreeItemArray)\n    // for (let i = 0; i < innerTreeItemArray.length; i++) {\n    //   console.log('inside forrr', i)\n    //   if (innerTreeItemArray[i].classList.contains('Mui-selected')) {\n    //     console.log('inside iffff')\n    //     innerTreeItemArray[i].classList.remove('Mui-selected')\n    //   } else console.log('elllse')\n    // }\n  }, [apiContent]);\n\n\n  return (\n    <TreeView\n      className={classes.tree}\n      defaultCollapseIcon={<ExpandMoreIcon />}\n      defaultExpandIcon={<ChevronRightIcon />}\n      expanded={expanded}\n      onNodeToggle={handleToggle}\n      onNodeSelect={handleSelect}\n    // multiSelect={false}\n    >\n      {apiContent ? Object.keys(apiContent).map((key, outerIndex) => (\n        <React.Fragment\n          key={`${validIdHelper(demoComponentType + '-innerFragment-' + outerIndex)}`}>\n          <TreeItem\n            key={`${validIdHelper(demoComponentType + '-outerTreeItem-' + outerIndex)}`}\n            nodeId={\"\" + (treeCounter += 1)}\n            // treecounter={treeCounter}\n            label={_.capitalize(key)}\n            icon={<Icon className={`fa fa-folder ${classes.icon}`} />}\n            disabled={apiContent[key].length ? false : true}\n          >\n            {\n              apiContent[key].length ?\n                apiContent[key].map((item, index) => (\n                  <TreeItem\n                    key={`${validIdHelper(demoComponentType + '-innerTreeItem-' + treeCounter)}`}\n                    nodeId={\"\" + (treeCounter += 1)}\n                    treecounter={treeCounter}\n                    selected={selected === treeCounter}\n                    className={selected === treeCounter ? `Mui-selected innerTreeItem ${classes.whiteSpaceNoWrap}` : `innerTreeItem ${classes.whiteSpaceNoWrap}`}\n                    contentid={item.id}\n                    label={item.folder_id === sharedFolderId &&\n                      key === 'looks' ?\n                      <div\n                        id={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\n                        key={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\n                        className={`${classes.labelRoot} ${classes.parentHoverVisibility}`}\n                      >\n                        {/* {item.title.length > 15 ? item.title.substring(0, 15) + '...' : item.title} */}\n                        <Grid container>\n                          <Grid item sm={8} className={`${classes.overflowHidden}`}>\n                            {item.title}</Grid>\n                          <Grid item sm={4}>\n                            <Button\n                              id={`${validIdHelper(demoComponentType + '-innerTreeItem-Explore' + treeCounter)}`}\n                              key={`${validIdHelper(demoComponentType + '-innerTreeItem-Explore' + treeCounter)}`}\n                              size=\"small\"\n                              className={`${classes.ml12} ${classes.childHoverVisibility}`}\n                              onClick={(event) => {\n                                if (lookerUser.user_attributes.permission_level === 'premium') {\n                                  action(\n                                    key.substring(0, key.length - 1),\n                                    item.id,\n                                    'explore',\n                                    item.client_id,\n                                    tabContent[tabContentItemIndex + 1].id,\n                                    validIdHelper(`embedContainer-${demoComponentType}-${tabContent[tabContentItemIndex + 1].id}`)\n                                  );\n                                  event.stopPropagation();\n                                } else {\n                                  // togglePayWallModal();\n\n                                  togglePayWallModal({\n                                    'show': true,\n                                    'permissionNeeded': 'explore'\n                                  });\n                                }\n                              }\n                              }\n                              color=\"default\"\n                            >\n                              {lookerUser.user_attributes.permission_level === 'premium' ? 'Explore' : <div> <Icon className={`fa fa-lock ${classes.faSm} ${classes.mr12}`} />Explore</div>}\n                            </Button>\n                          </Grid>\n                        </Grid>\n\n\n                      </div>\n                      : key === 'looks' ?\n                        <div\n                          id={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\n                          key={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\n                          className={`${classes.labelRoot} ${classes.parentHoverVisibility}`}>\n                          <Grid container>\n                            <Grid item sm={6} className={`${classes.overflowHidden}`}>\n                              {/* {item.title.length > 15 ? item.title.substring(0, 15) + '...' : item.title} */}\n                              {item.title}\n                            </Grid>\n                            <Grid item sm={6}>\n                              <Button\n                                id={`${validIdHelper(demoComponentType + '-innerTreeItem-EditButton' + treeCounter)}`}\n                                key={`${validIdHelper(demoComponentType + '-innerTreeItem-EditButton' + treeCounter)}`}\n                                size=\"small\"\n                                className={`${classes.ml12} ${classes.childHoverVisibility}`}\n                                onClick={(event) => {\n                                  if (lookerUser.user_attributes.permission_level === 'premium') {\n                                    // setSelected(treeCounter);\n                                    action(\n                                      key.substring(0, key.length - 1),\n                                      item.id,\n                                      'edit',\n                                      item.client_id,\n                                      tabContent[tabContentItemIndex + 1].id,\n                                      validIdHelper(`embedContainer-${demoComponentType}-${tabContent[tabContentItemIndex + 1].id}`)\n                                    );\n                                    event.stopPropagation();\n                                  } else {\n                                    // togglePayWallModal();\n\n                                    togglePayWallModal({\n                                      'show': true,\n                                      'permissionNeeded': 'explore'\n                                    });\n                                  }\n                                }\n                                }\n                                color=\"primary\"\n                              >\n                                Edit\n                                                                                            </Button>\n                              <Button\n                                id={`${validIdHelper(demoComponentType + '-innerTreeItem-DeleteButton' + treeCounter)}`}\n                                key={`${validIdHelper(demoComponentType + '-innerTreeItem-DeleteButton' + treeCounter)}`}\n                                size=\"small\"\n                                className={`${classes.ml12} ${classes.childHoverVisibility}`}\n                                onClick={(event) => {\n                                  if (lookerUser.user_attributes.permission_level === 'premium') {\n                                    // setSelected(treeCounter);\n                                    action(\n                                      key.substring(0, key.length - 1),\n                                      item.id,\n                                      'delete',\n                                      item.client_id,\n                                      tabContent[tabContentItemIndex + 1].id,\n                                      validIdHelper(`embedContainer-${demoComponentType}-${tabContent[tabContentItemIndex + 1].id}`)\n                                    );\n                                    event.stopPropagation();\n                                  } else {\n                                    // togglePayWallModal();\n\n                                    togglePayWallModal({\n                                      'show': true,\n                                      'permissionNeeded': 'explore'\n                                    });\n                                  }\n                                }\n                                }\n                                color=\"secondary\"\n                              >\n                                Delete\n                                                                                            </Button>\n                            </Grid>\n                          </Grid>\n\n                        </div>\n                        : <Grid container><Grid item sm={12}>{item.title}</Grid></Grid>\n                    }\n                    onClick={() => {\n                      // setSelected(treeCounter)\n                      action(\n                        key.substring(0, key.length - 1), item.id)\n                    }} />\n\n                ))\n                :\n                ''\n            }\n          </TreeItem>\n\n        </React.Fragment>\n      )) : ''}\n    </TreeView>\n  )\n}")}),[V,q]),Object(a.useEffect)((function(){window.addEventListener("resize",(function(){return T(window.innerHeight-112)}))})),Object(a.useEffect)((function(){A(Z,[V,0])}),[B]);var X=function(){var e=Object(m.a)(c.a.mark((function e(n,t,a,o,r,i){var l,s,d,m,u,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(l=me()(".embedContainer:visible > iframe"),0,s=0;s<l.length;s++)l[s].classList.contains(n)&&l[s].classList.contains(t)?(l[s].classList.remove("dNone"),s):l[s].classList.add("dNone");if("edit"!==a&&"explore"!==a){e.next=8;break}R(o),Y(0,1),e.next=19;break;case 8:if("delete"!==a){e.next=19;break}for(m=0;m<l.length;m++)l[m].classList.contains(t)&&(d=m);for((u=l.slice()).splice(d,1),p=0;p<u.length;p++)0===p?(u[p].classList.remove("dNone"),p):u[p].classList.add("dNone");return me()("#embedContainer-reportbuilder-14").empty(),me()("#embedContainer-reportbuilder-14").html(u),e.next=17,F.ok(F.delete_look(t));case 17:e.sent,A(Z,[V,1]);case 19:case"end":return e.stop()}}),e)})));return function(n,t,a,o,r,i){return e.apply(this,arguments)}}(),Z=function(e,n){n&&(Y(0,0),i(0),h([])),e.map(function(){var e=Object(m.a)(c.a.mark((function e(n){var t,a,o,r,s,d,m,u,p,g,b,y,C,k,v,_,w;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==B||"folder"!==n.type){e.next=48;break}return e.next=3,F.ok(F.folder(n.id));case 3:return t=e.sent,e.next=6,F.ok(F.me());case 6:a=e.sent,o=0;case 8:if(!(o<t.looks.length)){e.next=17;break}return e.next=11,F.ok(F.look(t.looks[o].id));case 11:r=e.sent,s=r.query.client_id,t.looks[o].client_id=s;case 14:o++,e.next=8;break;case 17:if(d={},"premium"!==q.user_attributes.permission_level){e.next=37;break}return e.next=21,F.ok(F.search_looks({user_id:a.id}));case 21:if(!(m=e.sent)||!m.length){e.next=37;break}return u=m[0].folder_id||null,e.next=26,F.ok(F.folder(u));case 26:d=e.sent,p=0;case 28:if(!(p<d.looks.length)){e.next=37;break}return e.next=31,F.ok(F.look(d.looks[p].id));case 31:g=e.sent,b=g.query.client_id,d.looks[p].client_id=b;case 34:p++,e.next=28;break;case 37:y={sharedFolder:t,embeddedUserFolder:d},C=Object(l.a)(y.sharedFolder.looks),"premium"===q.user_attributes.permission_level&&Object.keys(y.embeddedUserFolder).length&&(C=[].concat(Object(l.a)(C),Object(l.a)(y.embeddedUserFolder.looks))),k=Object(l.a)(y.sharedFolder.dashboards),v={looks:C,dashboards:k},_=me()(".embedContainer.".concat(st(Q)," > iframe")),v.looks.length&&v.looks.map((function(e,t){for(var a=e.id,o=!1,r=0;r<_.length;r++)_[r].classList.contains("look")&&_[r].classList.contains(a)&&(o=!0);o||se.LookerEmbedSDK.createLookWithId(a).appendTo(st("#embedContainer-".concat(Q,"-").concat(n.id))).withClassName("iframe").withClassName("look").withClassName(y.sharedFolder.looks.indexOf(e)>-1?"shared":"personal").withClassName(t>0?"dNone":"oops").withClassName(a).build().connect().then((function(e){se.LookerEmbedSDK.init("https://".concat(z,".looker.com"))})).catch((function(e){console.error("Connection error",e)})),t===v.looks.length-1&&setTimeout((function(){return i(1)}),1e3)})),v.dashboards.length&&v.dashboards.map((function(e,t){for(var a=e.id,o=!1,r=0;r<_.length;r++)_[r].classList.contains("dashboard")&&_[r].classList.contains(a)&&(o=!0);o||se.LookerEmbedSDK.createDashboardWithId(a).appendTo(st("#embedContainer-".concat(Q,"-").concat(n.id))).withClassName("iframe").withClassName("dashboard").withClassName(y.sharedFolder.dashboards.indexOf(e)>-1?"shared":"personal").withClassName("dNone").withClassName(a).build().connect().then((function(e){setTimeout((function(){}),1e3),se.LookerEmbedSDK.init("https://".concat(z,".looker.com"))})).catch((function(e){console.error("Connection error",e)})),t===v.dashboards.length-1&&setTimeout((function(){return i(1)}),1e3)})),h(v),e.next=49;break;case 48:"explore"===n.type&&"premium"===q.user_attributes.permission_level&&1===B&&(w=n.id,me()(st("#embedContainer-".concat(Q,"-").concat(n.id))).html(""),$?se.LookerEmbedSDK.createExploreWithId(w).appendTo(st("#embedContainer-".concat(Q,"-").concat(n.id))).withClassName("exploreIframe").withParams({qid:$}).on("explore:state:changed",(function(e){})).build().connect().then((function(e){console.log("explore",e),i(1),f(e),se.LookerEmbedSDK.init("https://".concat(z,".looker.com")),R(null)})).catch((function(e){console.error("Connection error",e)})):se.LookerEmbedSDK.createExploreWithId(w).appendTo(st("#embedContainer-".concat(Q,"-").concat(n.id))).withClassName("exploreIframe").on("explore:state:changed",(function(e){})).build().connect().then((function(e){i(1),f(e),se.LookerEmbedSDK.init("https://".concat(z,".looker.com"))})).catch((function(e){console.error("Connection error",e)})));case 49:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())};return o.a.createElement("div",{className:"".concat(D.root," demoComponent"),style:{height:E}},o.a.createElement(ue.a,{elevation:1,className:"\n      ".concat(D.padding30," \n      ").concat(D.height100Percent,"\n      ").concat(D.overflowYScroll)},o.a.createElement(pe.a,{container:!0,key:st(G)},o.a.createElement("div",{className:D.root},r?"":o.a.createElement(pe.a,{item:!0,sm:12,style:{height:E-30-(me()(".MuiExpansionPanel-root:visible").innerHeight()||0)}},o.a.createElement(ue.a,{className:"".concat(D.card," ").concat(D.flexCentered),elevation:0,mt:2,style:{height:E-30-(me()(".MuiExpansionPanel-root:visible").innerHeight()||0)}},o.a.createElement(he.a,{className:D.circularProgress}))),o.a.createElement(S.a,{className:r?"":"".concat(D.hidden)},o.a.createElement(O.a,{position:"static",elevation:0},o.a.createElement(Jn.a,{className:D.tabs,value:B,onChange:Y,"aria-label":"simple tabs example"},K.map((function(e,n){return o.a.createElement(Xn.a,Object.assign({key:"".concat(st(Q+"-tab-"+n)),label:1==n?o.a.createElement("div",null,"premium"!=q.user_attributes.permission_level?o.a.createElement(Zn.a,{className:"fa fa-lock ".concat(D.faSm," ").concat(D.mr12)}):o.a.createElement(Zn.a,{className:"fa fa-plus ".concat(D.faSm," ").concat(D.mr12)}),e.label):e.label,className:1===B&&1===n?"".concat(D.hidden):1==n?"".concat(D.mlAuto):"",style:1===n?{backgroundColor:"#5896E6",borderRadius:"4px",color:"#fff",opacity:"1.0"}:{}},function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}(n)))})))),o.a.createElement(S.a,{className:"tabPanelContainer"},o.a.createElement(pe.a,{container:!0,spacing:3,className:"".concat(D.noContainerScroll)},N?o.a.createElement(pe.a,{item:!0,sm:6,className:"".concat(D.positionFixedTopRight)},o.a.createElement(ke,Object.assign({},e,{classes:D,lookerUser:q,height:E}))):"",K.map((function(n,t){return o.a.createElement(lt,{key:"".concat(st(Q+"-tabPanel-"+t)),value:B,index:t,style:{width:"100%"}},o.a.createElement(pe.a,{container:!0},0===t?o.a.createElement(o.a.Fragment,{key:"".concat(st(Q+"-outerFragment-"+t))},o.a.createElement(pe.a,{item:!0,sm:4},o.a.createElement(Ne,{height:500,classes:D},o.a.createElement(dt,Object(d.a)({togglePayWallModal:I,classes:D,demoComponentType:Q,tabContent:K,tabContentItemIndex:t,action:X,apiContent:p},e)))),o.a.createElement(pe.a,{item:!0,sm:8},o.a.createElement(Fe,{classes:D},o.a.createElement("div",{className:"embedContainer ".concat(st(Q)),id:st("embedContainer-".concat(Q,"-").concat(n.id)),key:st("embedContainer-".concat(Q,"-").concat(n.id))})))):o.a.createElement(pe.a,{item:!0,sm:12},o.a.createElement(Fe,{classes:D},o.a.createElement("div",{className:"embedContainer",id:st("embedContainer-".concat(Q,"-").concat(n.id)),key:st("embedContainer-".concat(Q,"-").concat(n.id))})))))})))))))))}function dt(e){e.staticContent;var n=e.staticContent.lookerContent,t=e.classes,r=e.demoComponentType,i=e.tabContent,l=e.tabContentItemIndex,s=e.action,c=e.apiContent,d=e.lookerUser,m=e.togglePayWallModal,u="folder"===n[0].type?n[0].id:"",p=0,h=Object(a.useState)(2),g=Object(J.a)(h,2),b=g[0],f=g[1],y=Object.keys(c).length?["1",""+(2+c[Object.keys(c)[0]].length)]:[],C=Object(a.useState)(y),k=Object(J.a)(C,2),_=k[0],w=k[1];return Object(a.useEffect)((function(){w(y),2!==b&&f(2)}),[c]),o.a.createElement(et.a,{className:t.tree,defaultCollapseIcon:o.a.createElement(at.a,null),defaultExpandIcon:o.a.createElement(rt.a,null),expanded:_,onNodeToggle:function(e,n){w(n)},onNodeSelect:function(e,n){f(n)}},c?Object.keys(c).map((function(e,n){return o.a.createElement(o.a.Fragment,{key:"".concat(st(r+"-innerFragment-"+n))},o.a.createElement(nt.a,{key:"".concat(st(r+"-outerTreeItem-"+n)),nodeId:""+(p+=1),label:v.a.capitalize(e),icon:o.a.createElement(Zn.a,{className:"fa fa-folder ".concat(t.icon)}),disabled:!c[e].length},c[e].length?c[e].map((function(n,a){return o.a.createElement(nt.a,{key:"".concat(st(r+"-innerTreeItem-"+p)),nodeId:""+(p+=1),treecounter:p,selected:b===p,className:b===p?"Mui-selected innerTreeItem ".concat(t.whiteSpaceNoWrap):"innerTreeItem ".concat(t.whiteSpaceNoWrap),contentid:n.id,label:n.folder_id===u&&"looks"===e?o.a.createElement("div",{id:"".concat(st(r+"-innerTreeItem-LabelContainer"+p)),key:"".concat(st(r+"-innerTreeItem-LabelContainer"+p)),className:"".concat(t.labelRoot," ").concat(t.parentHoverVisibility)},o.a.createElement(pe.a,{container:!0},o.a.createElement(pe.a,{item:!0,sm:8,className:"".concat(t.overflowHidden)},n.title),o.a.createElement(pe.a,{item:!0,sm:4},o.a.createElement(Ke.a,{id:"".concat(st(r+"-innerTreeItem-Explore"+p)),key:"".concat(st(r+"-innerTreeItem-Explore"+p)),size:"small",className:"".concat(t.ml12," ").concat(t.childHoverVisibility),onClick:function(t){"premium"===d.user_attributes.permission_level?(s(e.substring(0,e.length-1),n.id,"explore",n.client_id,i[l+1].id,st("embedContainer-".concat(r,"-").concat(i[l+1].id))),t.stopPropagation()):m({show:!0,permissionNeeded:"explore"})},color:"default"},"premium"===d.user_attributes.permission_level?"Explore":o.a.createElement("div",null," ",o.a.createElement(Zn.a,{className:"fa fa-lock ".concat(t.faSm," ").concat(t.mr12)}),"Explore"))))):"looks"===e?o.a.createElement("div",{id:"".concat(st(r+"-innerTreeItem-LabelContainer"+p)),key:"".concat(st(r+"-innerTreeItem-LabelContainer"+p)),className:"".concat(t.labelRoot," ").concat(t.parentHoverVisibility)},o.a.createElement(pe.a,{container:!0},o.a.createElement(pe.a,{item:!0,sm:6,className:"".concat(t.overflowHidden)},n.title),o.a.createElement(pe.a,{item:!0,sm:6},o.a.createElement(Ke.a,{id:"".concat(st(r+"-innerTreeItem-EditButton"+p)),key:"".concat(st(r+"-innerTreeItem-EditButton"+p)),size:"small",className:"".concat(t.ml12," ").concat(t.childHoverVisibility),onClick:function(t){"premium"===d.user_attributes.permission_level?(s(e.substring(0,e.length-1),n.id,"edit",n.client_id,i[l+1].id,st("embedContainer-".concat(r,"-").concat(i[l+1].id))),t.stopPropagation()):m({show:!0,permissionNeeded:"explore"})},color:"primary"},"Edit"),o.a.createElement(Ke.a,{id:"".concat(st(r+"-innerTreeItem-DeleteButton"+p)),key:"".concat(st(r+"-innerTreeItem-DeleteButton"+p)),size:"small",className:"".concat(t.ml12," ").concat(t.childHoverVisibility),onClick:function(t){"premium"===d.user_attributes.permission_level?(s(e.substring(0,e.length-1),n.id,"delete",n.client_id,i[l+1].id,st("embedContainer-".concat(r,"-").concat(i[l+1].id))),t.stopPropagation()):m({show:!0,permissionNeeded:"explore"})},color:"secondary"},"Delete")))):o.a.createElement(pe.a,{container:!0},o.a.createElement(pe.a,{item:!0,sm:12},n.title)),onClick:function(){s(e.substring(0,e.length-1),n.id)}})})):""))})):"")}var mt=t(1405),ut=t(1373),pt=t(1406),ht=t(1372),gt=t(275),bt=(K.a[400],K.a[100],gt.a[400],gt.a[100],Object(X.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,overflow:"scroll",borderRadius:"8px"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},flexCentered:{display:"flex",justifyContent:"center",alignItems:"center"},hidden:{visibility:"hidden",position:"absolute",zIndex:-1},tabs:{backgroundColor:"white",color:"#6c757d"},dNone:{display:"none"},dBlock:{display:"block"},tree:{height:240,flexGrow:1,maxWidth:400},icon:{marginRight:12,fontSize:"1rem",overflow:"visible"},ml12:{marginLeft:12},mt12:{marginTop:12},w100:{width:"100%"},mlAuto:{marginLeft:"auto"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},formControl:{margin:e.spacing(1),minWidth:120},skeleton:{minWidth:275,minHeight:600},card:{minWidth:275,minHeight:400},textCenter:{textAlign:"center"},bluePrimary:{backgroundColor:"rgba(69, 149, 236, 1)"},blueSecondary:{backgroundColor:"rgba(69, 149, 236, .5)"},orangePrimary:{backgroundColor:"rgba(243, 167, 89, 1)"},orangeSecondary:{backgroundColor:"rgba(243, 167, 89, .5)"},positionTopRight:{position:"absolute",top:-30,right:-50,bottom:0,zIndex:100},positionRelative:{position:"relative"},bottomBarSpacer:Object(d.a)(Object(d.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),maxHeight600:{maxHeight:600,overflow:"scroll"},padding30:{padding:30},m12:{margin:12},m6:{margin:6},height100Percent:{height:"100%",overflow:"scroll"},padding20:{padding:20},positionFixedTopRight:{position:"fixed",top:88,right:24,bottom:0,zIndex:100},codeFlyoutContainer:{backgroundColor:"rgb(40, 42, 54)",overflow:"scroll",borderRadius:"0 8px 8px 0"},padding10:{padding:10},overflowScroll:{overflow:"scroll"},overflowYScroll:{overflowY:"scroll",overflowX:"hidden"},noContainerScroll:{width:"100%",margin:0}}})));function ft(e,n,t){return e[t]&&n[t]&&n[t].value<e[t].value?-1:e[t]&&n[t]&&n[t].value>e[t].value?1:0}var yt=t(67),Ct=yt.validIdHelper,kt=yt.prettifyString;function vt(e){var n=Object(a.useState)(0),t=Object(J.a)(n,2),r=(t[0],t[1],Object(a.useState)({})),i=Object(J.a)(r,2),l=i[0],s=i[1],u=Object(a.useState)(""),p=Object(J.a)(u,2),h=(p[0],p[1]),g=Object(a.useState)(""),b=Object(J.a)(g,2),f=(b[0],b[1],Object(a.useState)(window.innerHeight-112)),y=Object(J.a)(f,2),C=y[0],k=y[1],v=Object(a.useState)(window.innerWidth-392),_=Object(J.a)(v,2),w=_[0],x=_[1],E=bt(),T=(e.staticContent,e.staticContent.lookerContent),O=e.staticContent.type,j=(e.activeTabValue,e.handleTabChange,e.lookerUser),I=Object(a.useContext)(re),N=(I.togglePayWallModal,I.show,I.codeShow),F=I.sdk,A=I.corsApiCall;Object(a.useEffect)((function(){h("import $ from 'jquery';\nimport _ from 'lodash';\nimport React, { useState, useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  AppBar, Tabs, Tab, Typography, Box, Grid, Icon, CircularProgress, Card, Button,\n  ExpansionPanel, ExpansionPanelSummary, ExpansionPanelDetails, InputLabel, MenuItem, FormControl,\n  Select, Table, TableBody, TableCell, TableContainer, TableHead, TablePagination, TableRow,\n  TableSortLabel, FormControlLabel, Switch, Chip, Divider\n} from '@material-ui/core'\nimport { ExpandMore, Search, Done } from '@material-ui/icons';\nimport CodeFlyout from '../CodeFlyout';\nimport rawSampleCode from '!!raw-loader!./QueryBuilder.js'; // eslint-disable-line import/no-webpack-loader-syntax\nimport useStyles from './styles.js';\nimport { ApiHighlight } from '../../Highlights/Highlight';\nimport { TabPanel, a11yProps, descendingComparator, getComparator, stableSort } from './helpers.js';\nimport AppContext from '../../../AppContext';\nconst { validIdHelper, prettifyString } = require('../../../tools');\n\nexport default function QueryBuilder(props) {\n  // console.log('QueryBuilder')\n\n  const topBarBottomBarHeight = 112;\n  const sideBarWidth = 240 + 152; //24 + 24 + 30 + 30 + 12 + 12 + 10 + 10\n  const [value, setValue] = useState(0);\n  const [apiContent, setApiContent] = useState({});\n  const [clientSideCode, setClientSideCode] = useState('');\n  const [serverSideCode, setServerSideCode] = useState('');\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\n  const [width, setWidth] = useState((window.innerWidth - sideBarWidth));\n  const classes = useStyles();\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, activeTabValue, handleTabChange, lookerUser } = props;\n  const { togglePayWallModal, show, codeShow, sdk, corsApiCall } = useContext(AppContext)\n\n  const handleChange = (event, newValue) => {\n    handleTabChange(0);\n    setValue(newValue);\n  };\n\n  useEffect(() => {\n    // call this is filterBar instead to make field chip dynamic\n    // lookerContent.map(lookerContent => {\n    //   setTimeout(() => performLookerApiCalls(lookerContent.queryBody, lookerContent.resultFormat), 100);\n    // })\n    setClientSideCode(rawSampleCode);\n    // setApiContent([])\n  }, [lookerContent, lookerUser])\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", () => {\n      setHeight((window.innerHeight - topBarBottomBarHeight))\n      setWidth((window.innerWidth - sideBarWidth))\n    });\n  })\n\n\n  const performLookerApiCalls = async (newQuery, resultFormat) => {\n    // console.log('performLookerApiCalls')\n    // console.log('newQuery', newQuery)\n    // console.log('resultFormat', resultFormat)\n    // console.log('lookerContent', lookerContent)\n    let apiContentCopy = { ...apiContent }\n    apiContentCopy.status = 'running';\n    setApiContent(apiContentCopy)\n\n    let timer = Date.now();\n\n    let lookerCreateQueryResponseData = await sdk.ok(sdk.create_query(newQuery))\n    let lookerCreateTaskResponseData = await sdk.ok(sdk.create_query_task({\n      body: {\n        query_id: lookerCreateQueryResponseData.id,\n        result_format: resultFormat || 'json_detail'//lookerContent[0].resultFormat || 'json'\n      }\n    }))\n\n    let taskInterval = setInterval(async () => {\n      let lookerCheckTaskResponseData = await sdk.ok(sdk.query_task_results(lookerCreateTaskResponseData.id, {\n        method: 'GET',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }));\n\n      if (lookerCheckTaskResponseData.status === 'complete') {\n        clearInterval(taskInterval);\n        setApiContent(lookerCheckTaskResponseData)\n        // setServerSideCode(lookerCreateTaskResponseData.code)\n      }\n\n      //time out after 30 seconds\n      if ((timer + (30 * 1000)) < Date.now()) {\n        clearInterval()\n        setApiContent([])\n      }\n    }, 1000)\n  }\n\n  return (\n    <div className={`${classes.root} demoComponent`}\n      style={{ height }}>\n      <Card elevation={1} className={`\n      ${classes.padding30} \n      ${classes.height100Percent}\n      ${classes.overflowYScroll}`\n      }\n      >\n        <Grid container\n          key={validIdHelper(type)} >\n          <div className={`${classes.root}`}>\n            <Grid item sm={12}>\n              <FilterBar {...props}\n                classes={classes}\n                action={performLookerApiCalls}\n                corsApiCall={corsApiCall}\n              />\n            </Grid>\n            {apiContent.status === 'running' ?\n              <Grid item sm={12} style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\n                <Card className={`${classes.card} ${classes.flexCentered}`}\n                  elevation={0}\n                  mt={2}\n                  style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\n                  <CircularProgress className={classes.circularProgress} />\n                </Card>\n              </Grid>\n              : apiContent.data && apiContent.data.length ?\n                <Box>\n                  <Grid container\n                    spacing={3}\n                    className={`${classes.noContainerScroll}`}>\n                    {codeShow ?\n                      <Grid item sm={6}\n                        className={`${classes.positionFixedTopRight}`}\n                      >\n                        <CodeFlyout {...props}\n                          classes={classes}\n                          lookerUser={lookerUser}\n                          height={height}\n                        />\n                      </Grid> : ''}\n                    <Divider className={classes.divider} />\n                    <Grid item sm={12}>\n                      <Box className={`${classes.w100}`} mt={2}>\n                        < EnhancedTable\n                          {...props}\n                          classes={classes}\n                          rows={apiContent.data}\n                          lookerContent={lookerContent}\n                          width={width}\n                        />\n                      </Box>\n                    </Grid>\n                  </Grid>\n                </Box>\n                :\n                <Grid item sm={12} >\n                  <Typography variant=\"h6\" component=\"h6\" className={`${classes.gridTitle} ${classes.textCenter}`}>\n                    No results found, try a new query<br />\n                  </Typography>\n                </Grid>\n            }\n          </div >\n        </Grid >\n      </Card>\n    </div >\n  )\n}\n/**\n * seems inconsistent that filterbar performs performLookerApiCalls here??\n */\n\nfunction FilterBar(props) {\n  // console.log('FilterBar');\n  const { staticContent, staticContent: { lookerContent }, classes, action, lookerUser, corsApiCall } = props;\n  let measureCounter = 0;\n  let dimensionCounter = 0;\n\n\n  const initializeFieldChipDataHelper = () => {\n    let initializedFields = lookerContent[0].queryBody.fields.map((item, index) => {\n      return {\n        key: 'fieldChipData' + index,\n        label: prettifyString(item.substring(item.lastIndexOf('.') + 1, item.length)),\n        datalabel: item,\n        selected: item === 'users.state' || item === 'users.country' || item === 'order_items.total_sale_price' ? true : false,\n        fieldType: lookerContent[0].fieldType[item]\n      }\n    })\n    return initializedFields;\n  }\n\n  const [expanded, setExpanded] = useState(true);\n  const [fieldsChipData, setFieldsChipData] = useState(lookerContent[0].queryBody ? initializeFieldChipDataHelper() : '');\n  const [queryModified, setQueryModified] = useState(true); //set to true initially\n  const [queryShouldRun, setQueryShouldRun] = useState(false); //for lookerUser useEffect\n  const [filtersData, setFilterData] = useState(lookerContent[0].queryBody ? Object.keys(lookerContent[0].queryBody.filters).map((key, index) => {\n    return {\n      key: 'filter' + index,\n      label: key,\n      value: lookerContent[0].queryBody.filters[key],\n      type: lookerContent[0].filterType[key]\n    }\n  }) : '')\n\n  const handleExpansionPanel = (event, newValue) => {\n    setExpanded(expanded ? false : true);\n  };\n\n  const handleFieldChipClick = (chip, index) => {\n    let updatedFieldsChipData = [...fieldsChipData]\n    updatedFieldsChipData[index].selected = updatedFieldsChipData[index].selected === false ? true : false\n    setFieldsChipData(updatedFieldsChipData)\n    setQueryModified(true)\n  }\n\n  const handleSelectChange = (index, newValue) => {\n    let updatedFiltersData = [...filtersData]\n    updatedFiltersData[index].value = newValue;\n    setFilterData(updatedFiltersData)\n    setQueryModified(true)\n  }\n\n  const handleQuerySubmit = (event) => {\n    if (queryModified || queryShouldRun) {\n      let newFields = fieldsChipData.filter(chip => chip.selected).map(item => item.datalabel);\n      let currentFilters = {}; //needs to be object\n      filtersData.map((item, index) => {\n        currentFilters[item.label] = item.value\n      })\n      let newQueryObj = { ...lookerContent[0].queryBody };\n      newQueryObj.fields = newFields;\n      newQueryObj.filters = currentFilters;\n\n      corsApiCall(action, [newQueryObj, lookerContent[0].resultFormat]);\n\n      setQueryModified(false)\n      setQueryShouldRun(false)\n    } //else console.log('elllse')\n  }\n\n\n\n  useEffect(() => {\n    // console.log('useEffect lookerUser')\n    const lookerUserTimeHorizonMap = {\n      'basic': 'last 182 days',\n      'advanced': 'last 365 days',\n      'premium': 'last 730 days' //before today\n    }\n    let updatedFiltersData = [...filtersData]\n    updatedFiltersData[3].value = lookerUserTimeHorizonMap[lookerUser.user_attributes.permission_level] || \"182 days\";\n    setFilterData(updatedFiltersData);\n    setFieldsChipData(initializeFieldChipDataHelper())\n\n    setQueryShouldRun(true);\n  }, [lookerUser]);\n\n  useEffect(() => {\n    // console.log('useEffect queryShouldRun')\n    if (queryShouldRun) {\n      handleQuerySubmit();\n      setQueryModified(false);\n      setQueryShouldRun(false);\n    }\n  }, [queryShouldRun])\n\n\n  const datePermissionMap = {\n    'basic': [\"1 week\", \"1 month\", \"3 months\", \"last 182 days\"]\n  }\n  datePermissionMap.advanced = [...datePermissionMap.basic, \"last 365 days\"]\n  datePermissionMap.premium = [...datePermissionMap.advanced, \"last 730 days\"]\n\n  return (\n    <ExpansionPanel expanded={expanded} onChange={handleExpansionPanel} elevation={0}>\n      <ExpansionPanelSummary\n        expandIcon={<ExpandMore />}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <Search /><Typography className={`${classes.heading} ${classes.ml12}`}>Build Query:</Typography>\n        {/* <Typography className={classes.heading}>Build Query:</Typography> */}\n      </ExpansionPanelSummary>\n      <ExpansionPanelDetails>\n        <Grid container spacing={3}>\n          <Grid item sm={12}>\n            <Typography variant=\"subtitle1\">\n              Select Metrics:\n      {fieldsChipData.length ?\n                fieldsChipData.map((item, index) => {\n                  return (\n                    item.fieldType === 'measure' ?\n                      <Chip\n                        key={item.label}\n                        // key={prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}\n                        measurecounter={measureCounter += 1}\n                        className={item.selected ? `${classes.orangePrimary} ${classes.m6}` : `${classes.m6}`}\n                        label={prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}\n                        datalabel={item.label}\n                        onClick={() => handleFieldChipClick(item, index)}\n                        icon={item.selected ? <Done className={classes.dBlock} /> : <Done className={classes.dNone} />}\n                      /> : ''\n                  )\n                }) : ''\n              }<br />\n            </Typography>\n          </Grid>\n          <Grid item sm={12}>\n            <Typography variant=\"subtitle1\">\n              Group By:\n                          {fieldsChipData.length ?\n                fieldsChipData.map((item, index) => {\n                  return (\n                    item.fieldType === 'dimension' ?\n                      <Chip\n                        key={item.label}\n                        dimensioncounter={dimensionCounter += 1}\n                        className={item.selected ? `${classes.bluePrimary} ${classes.m6}` : `${classes.m6}`}\n                        label={prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}\n                        datalabel={item.label}\n                        onClick={() => handleFieldChipClick(item, index)}\n                        icon={item.selected ? <Done className={classes.dBlock} /> : <Done className={classes.dNone} />}\n                      /> : ''\n                  )\n                }) : ''\n              }<br />\n            </Typography>\n          </Grid>\n\n          <Grid item sm={3}>\n            <Typography variant=\"subtitle1\">\n              Filter By:\n                      </Typography>\n            {filtersData.length ? filtersData.map((item, index) => {\n              return (\n                <FormControl className={item.value.length ? classes.formControl : classes.hidden} key={validIdHelper(`${item.label}FormControl`)}>\n                  {\n                    item.type === 'yesno' ?\n                      <>\n                        <InputLabel id={validIdHelper(`${item.label}FilterLabel`)}>{prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}:</InputLabel>\n                        <Select\n                          labelId={validIdHelper(`${item.label}FilterLabel`)}\n                          id={validIdHelper(`${item.label}FilterSelect`)}\n                          value={item.value}\n                          onChange={(event) => handleSelectChange(index, event.target.value)}\n                        >\n                          <MenuItem value=\"Yes\">Yes</MenuItem>\n                          <MenuItem value=\"No\">No</MenuItem>\n                          <MenuItem value=\"All\">All</MenuItem>\n                        </Select>\n                      </>\n                      : item.type === 'date' ?\n                        <>\n                          <InputLabel id={validIdHelper(`${item.label}FilterLabel`)}>{prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}:</InputLabel>\n\n                          <Select\n                            labelId={validIdHelper(`${item.label}FilterLabel`)}\n                            id={validIdHelper(`${item.label}FilterSelect`)}\n                            value={item.value || '6 months'}\n                            onChange={(event) => handleSelectChange(index, event.target.value)}\n                          >\n                            {lookerUser.user_attributes.permission_level ? datePermissionMap[lookerUser.user_attributes.permission_level].map(item => (\n                              <MenuItem key={validIdHelper(item)} value={item}>{_.capitalize(item)}</MenuItem>\n                            )) : ''}\n                          </Select>\n                        </>\n                        : ''\n                  }\n                </FormControl>\n              )\n            }) : ''}\n          </Grid>\n          <Grid item sm={9}>\n            <br />\n            <Button\n              color=\"primary\"\n              variant=\"contained\"\n              size=\"large\"\n              onClick={handleQuerySubmit}\n              disabled={queryModified ? false : true}\n            >Run Query</Button></Grid>\n        </Grid>\n      </ExpansionPanelDetails>\n    </ExpansionPanel>\n  )\n}\n\nfunction EnhancedTableHead(props) {\n  const { classes, onSelectAllClick, order, orderBy, numSelected, rowCount, onRequestSort, rows } = props;\n  const createSortHandler = (property) => (event) => {\n    onRequestSort(event, property);\n  };\n\n  return (\n    <TableHead>\n      <TableRow>\n        {Object.keys(rows[0]).map((key, index) => (\n          <TableCell\n            key={validIdHelper(key + '-TableHead-TableCell-' + index)}\n            id={validIdHelper(key + '-TableHead-TableCell-' + index)}\n            align={key.numeric ? 'right' : 'left'}\n            padding={key.disablePadding ? 'none' : 'default'}\n            sortDirection={orderBy === key ? order : false}\n          >\n            <TableSortLabel\n              active={orderBy === key}\n              direction={orderBy === key ? order : 'asc'}\n              onClick={createSortHandler(key)}\n            >\n              {prettifyString(key.substring(key.lastIndexOf('.') + 1, key.length))}\n              {orderBy === key ? (\n                <span className={classes.visuallyHidden}>\n                  {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\n                </span>\n              ) : null}\n            </TableSortLabel>\n          </TableCell>\n        ))}\n      </TableRow>\n    </TableHead>\n  );\n}\n\nEnhancedTableHead.propTypes = {\n  classes: PropTypes.object.isRequired,\n  // numSelected: PropTypes.number.isRequired,\n  onRequestSort: PropTypes.func.isRequired,\n  // onSelectAllClick: PropTypes.func.isRequired,\n  order: PropTypes.oneOf(['asc', 'desc']).isRequired,\n  orderBy: PropTypes.string.isRequired,\n  rowCount: PropTypes.number.isRequired,\n};\n\nfunction EnhancedTable(props) {\n  const { rows, classes, lookerContent, width } = props;\n  const [order, setOrder] = React.useState('asc');\n  const [orderBy, setOrderBy] = React.useState(Object.keys(rows[0])[0]);\n  const [page, setPage] = React.useState(0);\n  const [dense, setDense] = React.useState(true);\n  const [rowsPerPage, setRowsPerPage] = React.useState(25);\n\n  const handleRequestSort = (event, property) => {\n    const isAsc = orderBy === property && order === 'asc';\n    setOrder(isAsc ? 'desc' : 'asc');\n    setOrderBy(property);\n  };\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = (event) => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  const handleChangeDense = (event) => {\n    setDense(event.target.checked);\n  };\n\n  const emptyRows = rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage);\n  return (\n    <div className={`${classes.root} ${classes.padding10}`}>\n      <ApiHighlight classes={classes} >\n        <TableContainer style={{ maxWidth: width }}>\n          <Table\n            className={classes.table}\n            aria-labelledby=\"tableTitle\"\n            size={dense ? 'small' : 'medium'}\n            aria-label=\"enhanced table\"\n          >\n            <EnhancedTableHead\n              {...props}\n              classes={classes}\n              order={order}\n              orderBy={orderBy}\n              onRequestSort={handleRequestSort}\n              rowCount={rows.length}\n            />\n            <TableBody>\n              {stableSort(rows, getComparator(order, orderBy))\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                .map((row, index) => {\n                  return (\n                    <TableRow\n                      hover\n                      key={validIdHelper('TableRow-' + index)}\n                      id={validIdHelper('TableRow-' + index)}>\n                      {Object.keys(row).map((key, index) => (\n                        <TableCell\n                          key={validIdHelper(key + '-TableBody-TableCell-' + index)}\n                          id={validIdHelper(key + '-TableBody-TableCell-' + index)}\n                          className={lookerContent[0].fieldType[key] === 'dimension' ? classes.blueSecondary : classes.orangeSecondary}\n                          align=\"right\">\n                          {row[key].rendered ? row[key].rendered : row[key].value}\n                        </TableCell>\n                      ))}\n                    </TableRow>\n                  );\n                })}\n              {emptyRows > 0 && (\n                <TableRow style={{ height: (dense ? 33 : 53) * emptyRows }}>\n                  <TableCell colSpan={6} />\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </ApiHighlight>\n      <Grid container>\n        <Grid item sm={6}>\n          <FormControlLabel\n            control={<Switch checked={dense} onChange={handleChangeDense} />}\n            label=\"Compact\"\n          /></Grid>\n        <Grid item sm={6}>\n          <TablePagination\n            rowsPerPageOptions={[5, 10, 25, 50]}\n            component=\"div\"\n            count={rows.length}\n            rowsPerPage={rowsPerPage}\n            page={page}\n            onChangePage={handleChangePage}\n            onChangeRowsPerPage={handleChangeRowsPerPage}\n          /></Grid>\n      </Grid>\n      <div className={classes.bottomBarSpacer} />\n    </div>\n  );\n}")}),[T,j]),Object(a.useEffect)((function(){window.addEventListener("resize",(function(){k(window.innerHeight-112),x(window.innerWidth-392)}))}));var D=function(){var e=Object(m.a)(c.a.mark((function e(n,t){var a,o,r,i,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=Object(d.a)({},l)).status="running",s(a),o=Date.now(),e.next=6,F.ok(F.create_query(n));case 6:return r=e.sent,e.next=9,F.ok(F.create_query_task({body:{query_id:r.id,result_format:t||"json_detail"}}));case 9:i=e.sent,u=setInterval(Object(m.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.ok(F.query_task_results(i.id,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}));case 2:"complete"===(n=e.sent).status&&(clearInterval(u),s(n)),o+3e4<Date.now()&&(clearInterval(),s([]));case 5:case"end":return e.stop()}}),e)}))),1e3);case 11:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return o.a.createElement("div",{className:"".concat(E.root," demoComponent"),style:{height:C}},o.a.createElement(ue.a,{elevation:1,className:"\n      ".concat(E.padding30," \n      ").concat(E.height100Percent,"\n      ").concat(E.overflowYScroll)},o.a.createElement(pe.a,{container:!0,key:Ct(O)},o.a.createElement("div",{className:"".concat(E.root)},o.a.createElement(pe.a,{item:!0,sm:12},o.a.createElement(_t,Object.assign({},e,{classes:E,action:D,corsApiCall:A}))),"running"===l.status?o.a.createElement(pe.a,{item:!0,sm:12,style:{height:C-30-(me()(".MuiExpansionPanel-root:visible").innerHeight()||0)}},o.a.createElement(ue.a,{className:"".concat(E.card," ").concat(E.flexCentered),elevation:0,mt:2,style:{height:C-30-(me()(".MuiExpansionPanel-root:visible").innerHeight()||0)}},o.a.createElement(he.a,{className:E.circularProgress}))):l.data&&l.data.length?o.a.createElement(S.a,null,o.a.createElement(pe.a,{container:!0,spacing:3,className:"".concat(E.noContainerScroll)},N?o.a.createElement(pe.a,{item:!0,sm:6,className:"".concat(E.positionFixedTopRight)},o.a.createElement(ke,Object.assign({},e,{classes:E,lookerUser:j,height:C}))):"",o.a.createElement(te.a,{className:E.divider}),o.a.createElement(pe.a,{item:!0,sm:12},o.a.createElement(S.a,{className:"".concat(E.w100),mt:2},o.a.createElement(xt,Object.assign({},e,{classes:E,rows:l.data,lookerContent:T,width:w})))))):o.a.createElement(pe.a,{item:!0,sm:12},o.a.createElement(Z.a,{variant:"h6",component:"h6",className:"".concat(E.gridTitle," ").concat(E.textCenter)},"No results found, try a new query",o.a.createElement("br",null)))))))}function _t(e){e.staticContent;var n=e.staticContent.lookerContent,t=e.classes,r=e.action,i=e.lookerUser,s=e.corsApiCall,c=0,m=0,u=function(){return n[0].queryBody.fields.map((function(e,t){return{key:"fieldChipData"+t,label:kt(e.substring(e.lastIndexOf(".")+1,e.length)),datalabel:e,selected:"users.state"===e||"users.country"===e||"order_items.total_sale_price"===e,fieldType:n[0].fieldType[e]}}))},p=Object(a.useState)(!0),h=Object(J.a)(p,2),g=h[0],b=h[1],f=Object(a.useState)(n[0].queryBody?u():""),y=Object(J.a)(f,2),C=y[0],k=y[1],_=Object(a.useState)(!0),w=Object(J.a)(_,2),x=w[0],E=w[1],T=Object(a.useState)(!1),S=Object(J.a)(T,2),O=S[0],j=S[1],I=Object(a.useState)(n[0].queryBody?Object.keys(n[0].queryBody.filters).map((function(e,t){return{key:"filter"+t,label:e,value:n[0].queryBody.filters[e],type:n[0].filterType[e]}})):""),N=Object(J.a)(I,2),F=N[0],A=N[1],D=function(e,n){var t=Object(l.a)(C);t[n].selected=!1===t[n].selected,k(t),E(!0)},H=function(e,n){var t=Object(l.a)(F);t[e].value=n,A(t),E(!0)},P=function(e){if(x||O){var t=C.filter((function(e){return e.selected})).map((function(e){return e.datalabel})),a={};F.map((function(e,n){a[e.label]=e.value}));var o=Object(d.a)({},n[0].queryBody);o.fields=t,o.filters=a,s(r,[o,n[0].resultFormat]),E(!1),j(!1)}};Object(a.useEffect)((function(){var e=Object(l.a)(F);e[3].value={basic:"last 182 days",advanced:"last 365 days",premium:"last 730 days"}[i.user_attributes.permission_level]||"182 days",A(e),k(u()),j(!0)}),[i]),Object(a.useEffect)((function(){O&&(P(),E(!1),j(!1))}),[O]);var B={basic:["1 week","1 month","3 months","last 182 days"]};return B.advanced=[].concat(Object(l.a)(B.basic),["last 365 days"]),B.premium=[].concat(Object(l.a)(B.advanced),["last 730 days"]),o.a.createElement(tn.a,{expanded:g,onChange:function(e,n){b(!g)},elevation:0},o.a.createElement(an.a,{expandIcon:o.a.createElement(fn.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},o.a.createElement(V.a,null),o.a.createElement(Z.a,{className:"".concat(t.heading," ").concat(t.ml12)},"Build Query:")),o.a.createElement(on.a,null,o.a.createElement(pe.a,{container:!0,spacing:3},o.a.createElement(pe.a,{item:!0,sm:12},o.a.createElement(Z.a,{variant:"subtitle1"},"Select Metrics:",C.length?C.map((function(e,n){return"measure"===e.fieldType?o.a.createElement(je.a,{key:e.label,measurecounter:c+=1,className:e.selected?"".concat(t.orangePrimary," ").concat(t.m6):"".concat(t.m6),label:kt(e.label.substring(e.label.lastIndexOf(".")+1,e.label.length)),datalabel:e.label,onClick:function(){return D(0,n)},icon:e.selected?o.a.createElement(ht.a,{className:t.dBlock}):o.a.createElement(ht.a,{className:t.dNone})}):""})):"",o.a.createElement("br",null))),o.a.createElement(pe.a,{item:!0,sm:12},o.a.createElement(Z.a,{variant:"subtitle1"},"Group By:",C.length?C.map((function(e,n){return"dimension"===e.fieldType?o.a.createElement(je.a,{key:e.label,dimensioncounter:m+=1,className:e.selected?"".concat(t.bluePrimary," ").concat(t.m6):"".concat(t.m6),label:kt(e.label.substring(e.label.lastIndexOf(".")+1,e.label.length)),datalabel:e.label,onClick:function(){return D(0,n)},icon:e.selected?o.a.createElement(ht.a,{className:t.dBlock}):o.a.createElement(ht.a,{className:t.dNone})}):""})):"",o.a.createElement("br",null))),o.a.createElement(pe.a,{item:!0,sm:3},o.a.createElement(Z.a,{variant:"subtitle1"},"Filter By:"),F.length?F.map((function(e,n){return o.a.createElement(sn.a,{className:e.value.length?t.formControl:t.hidden,key:Ct("".concat(e.label,"FormControl"))},"yesno"===e.type?o.a.createElement(o.a.Fragment,null,o.a.createElement(cn.a,{id:Ct("".concat(e.label,"FilterLabel"))},kt(e.label.substring(e.label.lastIndexOf(".")+1,e.label.length)),":"),o.a.createElement(dn.a,{labelId:Ct("".concat(e.label,"FilterLabel")),id:Ct("".concat(e.label,"FilterSelect")),value:e.value,onChange:function(e){return H(n,e.target.value)}},o.a.createElement(ne.a,{value:"Yes"},"Yes"),o.a.createElement(ne.a,{value:"No"},"No"),o.a.createElement(ne.a,{value:"All"},"All"))):"date"===e.type?o.a.createElement(o.a.Fragment,null,o.a.createElement(cn.a,{id:Ct("".concat(e.label,"FilterLabel"))},kt(e.label.substring(e.label.lastIndexOf(".")+1,e.label.length)),":"),o.a.createElement(dn.a,{labelId:Ct("".concat(e.label,"FilterLabel")),id:Ct("".concat(e.label,"FilterSelect")),value:e.value||"6 months",onChange:function(e){return H(n,e.target.value)}},i.user_attributes.permission_level?B[i.user_attributes.permission_level].map((function(e){return o.a.createElement(ne.a,{key:Ct(e),value:e},v.a.capitalize(e))})):"")):"")})):""),o.a.createElement(pe.a,{item:!0,sm:9},o.a.createElement("br",null),o.a.createElement(Ke.a,{color:"primary",variant:"contained",size:"large",onClick:P,disabled:!x},"Run Query")))))}function wt(e){var n=e.classes,t=(e.onSelectAllClick,e.order),a=e.orderBy,r=(e.numSelected,e.rowCount,e.onRequestSort),i=e.rows;return o.a.createElement(Nn.a,null,o.a.createElement(Fn.a,null,Object.keys(i[0]).map((function(e,i){return o.a.createElement(jn.a,{key:Ct(e+"-TableHead-TableCell-"+i),id:Ct(e+"-TableHead-TableCell-"+i),align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:a===e&&t},o.a.createElement(mt.a,{active:a===e,direction:a===e?t:"asc",onClick:(l=e,function(e){r(e,l)})},kt(e.substring(e.lastIndexOf(".")+1,e.length)),a===e?o.a.createElement("span",{className:n.visuallyHidden},"desc"===t?"sorted descending":"sorted ascending"):null));var l}))))}function xt(e){var n=e.rows,t=e.classes,a=e.lookerContent,r=e.width,i=o.a.useState("asc"),l=Object(J.a)(i,2),s=l[0],c=l[1],d=o.a.useState(Object.keys(n[0])[0]),m=Object(J.a)(d,2),u=m[0],p=m[1],h=o.a.useState(0),g=Object(J.a)(h,2),b=g[0],f=g[1],y=o.a.useState(!0),C=Object(J.a)(y,2),k=C[0],v=C[1],_=o.a.useState(25),w=Object(J.a)(_,2),x=w[0],E=w[1],T=x-Math.min(x,n.length-b*x);return o.a.createElement("div",{className:"".concat(t.root," ").concat(t.padding10)},o.a.createElement(Ne,{classes:t},o.a.createElement(In.a,{style:{maxWidth:r}},o.a.createElement(Sn.a,{className:t.table,"aria-labelledby":"tableTitle",size:k?"small":"medium","aria-label":"enhanced table"},o.a.createElement(wt,Object.assign({},e,{classes:t,order:s,orderBy:u,onRequestSort:function(e,n){c(u===n&&"asc"===s?"desc":"asc"),p(n)},rowCount:n.length})),o.a.createElement(On.a,null,function(e,n){var t=e.map((function(e,n){return[e,n]}));return t.sort((function(e,t){var a=n(e[0],t[0]);return 0!==a?a:e[1]-t[1]})),t.map((function(e){return e[0]}))}(n,function(e,n){return"desc"===e?function(e,t){return ft(e,t,n)}:function(e,t){return-ft(e,t,n)}}(s,u)).slice(b*x,b*x+x).map((function(e,n){return o.a.createElement(Fn.a,{hover:!0,key:Ct("TableRow-"+n),id:Ct("TableRow-"+n)},Object.keys(e).map((function(n,r){return o.a.createElement(jn.a,{key:Ct(n+"-TableBody-TableCell-"+r),id:Ct(n+"-TableBody-TableCell-"+r),className:"dimension"===a[0].fieldType[n]?t.blueSecondary:t.orangeSecondary,align:"right"},e[n].rendered?e[n].rendered:e[n].value)})))})),T>0&&o.a.createElement(Fn.a,{style:{height:(k?33:53)*T}},o.a.createElement(jn.a,{colSpan:6})))))),o.a.createElement(pe.a,{container:!0},o.a.createElement(pe.a,{item:!0,sm:6},o.a.createElement(ut.a,{control:o.a.createElement(ln.a,{checked:k,onChange:function(e){v(e.target.checked)}}),label:"Compact"})),o.a.createElement(pe.a,{item:!0,sm:6},o.a.createElement(pt.a,{rowsPerPageOptions:[5,10,25,50],component:"div",count:n.length,rowsPerPage:x,page:b,onChangePage:function(e,n){f(n)},onChangeRowsPerPage:function(e){E(parseInt(e.target.value,10)),f(0)}}))),o.a.createElement("div",{className:t.bottomBarSpacer}))}var Et=t(1374),Tt=t(1377),St=t(1409),Ot=t(563),jt=t.n(Ot),It=t(92),Nt=t(67).validIdHelper,Ft=Object(X.a)((function(e){return{paper:{position:"absolute",width:1e3,height:604,overflow:"scroll",backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},card:{display:"flex",flexDirection:"column",justifyContent:"space-between",overflow:"scroll",cursor:"pointer","&:hover":{transform:"scale(1.05)",transition:"transform .2s"}},flexCentered:{display:"flex",justifyContent:"center",alignItems:"center"},padding15:{padding:15},divider:{marginTop:15,marginBottom:15,color:"#fff"},basic:{},advanced:{},premium:{},font75:{fontSize:".75em"},font875:{},padding30:{padding:30}}}));function At(){return{top:"".concat(10,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(10,"%)")}}function Dt(e){e.props;var n=e.switchLookerUser,t=Object(a.useContext)(re),r=t.payWallModal,i=t.togglePayWallModal,l=t.lookerUser,s=o.a.useState(At),c=Object(J.a)(s,1)[0],d=Ft(),m={basic:["6 months of order data history","Atom Merchant Dashboards","Download PDFs, CSVs"],advanced:["Full year of order data history","Drill to row level information","Download row level information","Schedule dashboards for delivery (to you or others)","Set alerts and key threshold notifications"],premium:["2 Full years of order data history","Analyze your own data and save custom reports","View premium level, productivity enhancing reports","Share your reports with colleagues in Atom","Text message alerts"]};return o.a.createElement(Tn.a,{className:"".concat(d.modal," "),open:r.show||!1,onClose:i},o.a.createElement(ge.a,{in:r.show||!1},o.a.createElement("div",{style:c,className:"".concat(d.paper," ").concat(d.padding30)},o.a.createElement(pe.a,{container:!0,spacing:3},Object.keys(It).map((function(e){return o.a.createElement(pe.a,{item:!0,sm:4,key:Nt("monetizationModal-gridItem-".concat(e))},o.a.createElement(ue.a,{className:"".concat(d.card," ").concat(d[e]),elevation:1,style:e===l.user_attributes.permission_level?{backgroundColor:"#5F6BD8",color:"#ffffff",height:519}:{height:519},onClick:function(){n(e,"permission"),i()}},o.a.createElement(Et.a,null,o.a.createElement(Z.a,{variant:"h6",display:"justify"},v.a.capitalize(e)),o.a.createElement(Z.a,{display:"justify"},o.a.createElement(St.a,{name:"read-only",value:"basic"===e?"3":"advanced"===e?"4":"5",readOnly:!0})),o.a.createElement(Z.a,{variant:"subtitle1",style:{fontStyle:"italic"}},"basic"===e?"Drive your business with clear KPIs":"advanced"===e?"Deeper insights, operations":"Drive your business with Atom"),o.a.createElement(te.a,{className:"".concat(d.divider," ")}),o.a.createElement(F.a,{className:d.root},m[e].map((function(n,t){return o.a.createElement(A.a,{dense:!0,className:d.font875,key:"monetizationModal-ListItem-".concat(e,"-").concat(t)},o.a.createElement(H.a,null,o.a.createElement(jt.a,{fontSize:"small"})),o.a.createElement(D.a,{primary:n}))})))),o.a.createElement(Tt.a,{disableSpacing:!1},o.a.createElement(Ke.a,{color:"primary",variant:"outlined",fullWidth:!0,onClick:function(){n(e,"permission"),i()},style:e===l.user_attributes.permission_level?{color:"#ffffff",borderColor:"#ffffff"}:{}},e===l.user_attributes.permission_level?"Active":Object.keys(m).indexOf(l.user_attributes.permission_level)<Object.keys(m).indexOf(e)?"Upgrade":"Switch"))))}))))))}var Ht=t(67).validIdHelper,Pt=Object(z.a)({}),Bt=Object(z.a)({palette:{primary:{main:K.a[900]},secondary:{main:K.a[400]}}}),Mt=Object(z.a)({palette:{primary:{main:Y.a[500]}}}),Ut=function(e){Object(g.a)(t,e);var n=Object(b.a)(t);function t(e){var a;return Object(p.a)(this,t),(a=n.call(this,e)).togglePayWallModal=function(e){a.setState({payWallModal:Object(d.a)({},e)})},a.toggleHighlightShow=function(){a.setState({highlightShow:!a.state.highlightShow})},a.toggleCodeShow=function(){a.setState({codeShow:!a.state.codeShow})},a.handleTabChange=function(e){a.setState({activeTabValue:e})},a.handleDrawerChange=function(e){a.setState({drawerOpen:e})},a.handleMenuItemSelect=function(e,n){a.handleTabChange(0),a.state.highlightShow&&a.toggleHighlightShow(),a.state.codeShow&&a.toggleCodeShow();var t="";n?ce[a.state.activeUsecase].demoComponents.map((function(n){"splash page"!==n.type&&n.lookerContent.map((function(a){a.id===e&&(t=Ht(n.type+a.id))}))})):t=e;var o=Object(l.a)(a.state.renderedDemoComponents);-1==o.indexOf(t)&&o.unshift(t),a.setState((function(e){return{selectedMenuItem:t,renderedDemoComponents:Object(l.a)(o)}}))},a.handleUserMenuSwitch=function(){var e=Object(m.a)(c.a.mark((function e(n,t){var o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(d.a)({},a.props.lookerUser),"brand"===t?o.user_attributes.brand=n:"permission"===t&&(o.permissions=It[n]||It.basic,o.user_attributes.permission_level=n,o.user_attributes.time_horizon=Xt[n]),e.next=4,fetch("/updatelookeruser",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)});case 4:e.sent,a.setState({renderedDemoComponents:[a.state.selectedMenuItem]},(function(){"brand"===t?a.props.switchUserAttributeBrand(n):"permission"===t&&a.props.switchLookerUser(n)}));case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),a.state={drawerOpen:window.innerWidth>768,drawerTabValue:0,activeTabValue:0,activeUsecase:"",appLayout:"",highlightShow:!1,payWallModal:{},selectedMenuItem:"",renderedDemoComponents:[],codeShow:!1},a}return Object(h.a)(t,[{key:"componentDidMount",value:function(e){var n=this,t=(this.props||"atom").usecaseFromUrl;this.setState({activeUsecase:t,appLayout:ce[t].layout||"left-sidebar"},(function(){se.LookerEmbedSDK.init("https://".concat(n.props.lookerHost,".looker.com"),"/auth")})),window.addEventListener("resize",(function(){n.setState({drawerOpen:window.innerWidth>768})}))}},{key:"componentDidUpdate",value:function(e){var n=e.lookerUser.user_attributes.permission_level,t=this.props.lookerUser.user_attributes.permission_level,a=e.lookerUser.user_attributes.brand,o=this.props.lookerUser.user_attributes.brand;n===t&&a===o||(se.LookerEmbedSDK.init("https://".concat(this.props.lookerHost,".looker.com"),"/auth"),this.setState({renderedDemoComponents:[this.state.selectedMenuItem]}))}},{key:"render",value:function(){var e={splashpage19:nn,customfilter5:xn,simpledashboard9:xn,customfilter1:xn,customvis:Qn,querybuilderexplorelite:vt,reportbuilder14:ct},n={atom:Bt,vidly:Mt},t=this.state,a=(t.drawerTabValue,t.drawerOpen),r=t.activeTabValue,i=t.activeUsecase,s=t.selectedMenuItem,c=t.renderedDemoComponents,d=this.handleTabChange,m=this.handleMenuItemSelect,u=this.handleDrawerChange,p=this.props,h=p.classes,g=p.lookerUser,b=p.applySession,f=p.lookerUserAttributeBrandOptions,y=p.lookerHost,k=p.userProfile,w=p.sdk,O=p.corsApiCall,j=i?v.a.orderBy(ce[i].demoComponents,["menuCategory"],["asc"]):[],I={},N=[],F=0;if(j.map((function(e,n){I.hasOwnProperty(e.menuCategory)?I[e.menuCategory]=[].concat(Object(l.a)(I[e.menuCategory]),[e]):(I[e.menuCategory]=[e],F+=1,N.push(""+(n+F)))})),i&&!s.length){var A=ce[i].demoComponents[0].lookerContent[0].id?Ht(ce[i].demoComponents[0].type+ce[i].demoComponents[0].lookerContent[0].id):Ht(ce[i].demoComponents[0].type);this.setState({selectedMenuItem:A,renderedDemoComponents:[A]},(function(){}))}return o.a.createElement("div",{className:h.root},o.a.createElement(re.Provider,{value:{show:this.state.highlightShow,toggleShow:this.toggleHighlightShow,payWallModal:this.state.payWallModal,togglePayWallModal:this.togglePayWallModal,lookerUser:g,userProfile:k,codeShow:this.state.codeShow,toggleCodeShow:this.toggleCodeShow,lookerHost:y,sdk:w,atomTheme:Bt,corsApiCall:O}},o.a.createElement(Q.a,{theme:i?n[i]:Pt},o.a.createElement(x.a,null),o.a.createElement($t,Object.assign({},this.props,{classes:h,activeUsecase:i,lookerUser:g,applySession:b,lookerUserAttributeBrandOptions:f,handleUserMenuSwitch:this.handleUserMenuSwitch,handleDrawerChange:this.handleDrawerChange,drawerOpen:a})),o.a.createElement(E.a,{className:h.drawer,variant:"persistent",anchor:"left",open:a,classes:{paper:h.drawerPaper}},o.a.createElement("div",{className:h.drawerHeader},o.a.createElement(T.a,{onClick:function(){return u(!1)}},o.a.createElement(P.a,null))),Object.keys(I).length?o.a.createElement(Rt,Object.assign({},this.props,{classes:h,activeUsecase:i,orderedDemoComponentsForMenuObj:I,selectedMenuItem:s,handleMenuItemSelect:m})):"",o.a.createElement(Dt,{switchLookerUser:this.handleUserMenuSwitch}),o.a.createElement(Xe,{classes:h,lookerUser:g})),o.a.createElement("main",{className:Object(_.a)(h.content,Object(C.a)({},h.contentShift,a))},o.a.createElement("div",{className:h.drawerHeader}),i?ce[i].demoComponents.map((function(n,t){var a=n.lookerContent[0].id?Ht(n.type+n.lookerContent[0].id):Ht(n.type),l=e[a];return o.a.createElement(o.a.Fragment,{key:Ht("outerFragment-".concat(n.type,"-").concat(t))},c.indexOf(a)>-1?o.a.createElement(S.a,{key:Ht("box-".concat(n.type,"-").concat(t)),className:a===s?"":"".concat(h.hide)},o.a.createElement(l,{key:Ht("demoComponent-".concat(n.type,"-").concat(t)),staticContent:n,handleMenuItemSelect:m,activeTabValue:r,handleTabChange:d,lookerUser:g,activeUsecase:i,lookerHost:y,userProfile:k})):"")})):""))))}}]),t}(a.Component),Lt=Object(w.a)((function(e){return{root:{display:"flex",backgroundColor:"rgb(229, 229, 229)"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),zIndex:1201,backgroundColor:"#343D4E"},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0,borderRight:"none",backgroundColor:"transparent"},drawerPaper:{width:240,borderRight:"none",backgroundColor:"transparent"},drawerHeader:Object(d.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},title:{flexGrow:1},tabs:{borderRight:"1px solid ".concat(e.palette.divider)},dNone:{display:"none"},dBlock:{display:"block"},relative:{position:"relative"},absolute:{position:"absolute"},right0:{right:0},top0:{top:0},right24:{right:24},top24:{top:24},ml12:{marginLeft:12},mr12:{marginRight:12},mt12:{marginTop:12},highlightLegend:{position:"fixed",bottom:e.spacing(2),left:e.spacing(2),zIndex:1200},tree:{height:240,flexGrow:1,maxWidth:400},parentHoverVisibility:{"&:hover $childHoverVisibility":{visibility:"visible"}},childHoverVisibility:{visibility:"hidden"},fontSize1em:{fontSize:"1em"},padding10:{padding:10},mt5:{marginTop:5},mb5:{marginBottom:5},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},list:{width:"100%",maxWidth:360,backgroundColor:"transparent"},nested:{paddingLeft:e.spacing(4)},mlAuto:{marginLeft:"auto"},mrAuto:{marginRight:"auto"},appBarBottom:{top:"auto",bottom:0},hidden:{visibility:"hidden"},roundedTab:{borderRadius:"0 100px 100px 0"},paddingBottom30:{paddingBottom:30},mtAuto:{marginTop:"auto"},mb10:{marginBottom:10}}}))(Ut);function $t(e){var n=e.classes,a=e.activeUsecase,r=e.lookerUser,i=e.applySession,l=e.lookerUserAttributeBrandOptions,s=e.handleUserMenuSwitch,c=e.drawerOpen,d=e.handleDrawerChange;return o.a.createElement(O.a,{position:"fixed",className:Object(_.a)(n.appBar)},o.a.createElement(j.a,null,o.a.createElement(T.a,{color:"inherit","aria-label":"open drawer",onClick:function(){return d(!c)},edge:"start"},c?o.a.createElement(P.a,null):o.a.createElement(B.a,null)),a?o.a.createElement(I.a,{alt:"Icon",src:t(1035)("./".concat(a,".svg")),variant:"square"}):"",o.a.createElement(N.a,{badgeContent:3,color:"error",className:"".concat(n.mlAuto," ").concat(n.mr12," ")},o.a.createElement(M.a,null)),o.a.createElement(le,{lookerUser:r,onLogoutSuccess:i,lookerUserAttributeBrandOptions:l,handleUserMenuSwitch:s})))}function Rt(e){var n=e.classes,t=e.activeUsecase,a=e.orderedDemoComponentsForMenuObj,r=e.selectedMenuItem,i=e.handleMenuItemSelect,l={splashpage19:q.a,customfilter5:U.a,simpledashboard9:L.a,customfilter1:$.a,customvis:R.a,querybuilderexplorelite:V.a,reportbuilder14:G.a};return o.a.createElement(F.a,{component:"nav","aria-labelledby":"nested-list-subheader",className:n.list},t?Object.keys(a).map((function(e,t){return o.a.createElement(o.a.Fragment,{key:"".concat(Ht(e+"-menuList-"+t))},o.a.createElement(A.a,{key:"".concat(Ht(e+"-outerListItem-"+t))},o.a.createElement(D.a,{primary:"home"===e?"":v.a.capitalize(e)})),o.a.createElement(F.a,{component:"div",disablePadding:!0,key:"".concat(Ht(e+"-innerList-"+t))},a[e].map((function(t,a){var s=t.lookerContent[0].id?Ht(t.type+t.lookerContent[0].id):Ht(t.type),c=l[s];return o.a.createElement(A.a,{button:!0,className:"".concat(n.nested," ").concat(n.roundedTab),key:"".concat(Ht(e+"-innerListItem-"+a)),onClick:function(){return i(Ht(t.lookerContent[0].id?t.type+t.lookerContent[0].id:t.type))},selected:Ht(t.lookerContent[0].id?t.type+t.lookerContent[0].id:t.type)===r},o.a.createElement(H.a,null,o.a.createElement(c,null)),o.a.createElement(D.a,{primary:v.a.capitalize(t.label)}))}))))})):"")}var Vt=t(565),Gt=t(67).validIdHelper,Wt=K.a[200],qt=Object(X.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper},flexCentered:{display:"flex",justifyContent:"center",alignItems:"center"},card:{minWidth:350,minHeight:500,left:"75%",top:"50%",transform:"translate(-75%, -50%)",position:"absolute",textAlign:"center",backgroundColor:Wt},h100:{height:"100%"},title:{fontSize:14},pos:{marginBottom:12},actions:{alignItems:"center",justifyContent:"center"},cardCopy:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",margin:"0",width:"80%"}}}));function zt(e){var n=e.googleClientId,a=e.onSuccess,r=(e.onFailure,e.usecaseFromUrl),i=qt(),l=Math.floor(4*Math.random())+1,s=t(1038)("./".concat(r,"_background").concat(l,".jpg")),c=t(1043)("./".concat(r,"_logo_black.svg"));return o.a.createElement("div",{className:"".concat(i.root," demoComponent ").concat(i.h100)},o.a.createElement(pe.a,{container:!0,key:Gt("sign in page"),className:"".concat(i.h100)},o.a.createElement(pe.a,{item:!0,sm:12,className:"sign-in-background-img",style:{backgroundImage:"url(".concat(s,")"),backgroundSize:"cover"}},o.a.createElement(ue.a,{className:i.card},o.a.createElement("div",{className:i.cardCopy},o.a.createElement("img",{src:c}),o.a.createElement(Et.a,null,o.a.createElement(Z.a,{variant:"h5",component:"h2"},"Welcome"),o.a.createElement(Z.a,{variant:"body2",component:"p"},"Please sign in to access ",o.a.createElement("br",null)," your merchant portal")),o.a.createElement(Tt.a,{className:"".concat(i.actions)},o.a.createElement(Vt.GoogleLogin,{clientId:n,buttonText:"Login",onSuccess:a,onFailure:a,cookiePolicy:"single_host_origin"})))))))}var Qt=t(369),Kt=t(566),Yt=t(148),Jt=function(e){Object(g.a)(t,e);var n=Object(b.a)(t);function t(e){var a;return Object(p.a)(this,t),(a=n.call(this,e)).accessToken=e.accessToken,a}return Object(h.a)(t,[{key:"fetchToken",value:function(){return this.accessToken}},{key:"getToken",value:function(){var e=Object(m.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.isAuthenticated()||this.activeToken.setToken(this.fetchToken()),e.abrupt("return",this.activeToken);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(function(e){Object(g.a)(t,e);var n=Object(b.a)(t);function t(e,a){var o;return Object(p.a)(this,t),(o=n.call(this,e,a||new Yt.BrowserTransport(e))).activeToken=new Yt.AuthToken,o}return Object(h.a)(t,[{key:"fetchToken",value:function(){return fetch("")}}]),Object(h.a)(t,[{key:"isAuthenticated",value:function(){var e=this.activeToken;return!(!e||!e.access_token)&&e.isActive()}},{key:"getToken",value:function(){var e=Object(m.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isAuthenticated()){e.next=9;break}return e.next=3,this.fetchToken();case 3:return n=e.sent,e.t0=this.activeToken,e.next=7,n.json();case 7:e.t1=e.sent,e.t0.setToken.call(e.t0,e.t1);case 9:return e.abrupt("return",this.activeToken);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"authenticate",value:function(){var e=Object(m.a)(c.a.mark((function e(n){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getToken();case 2:return(t=e.sent)&&t.access_token&&(n.mode="cors",delete n.credentials,n.headers=Object(d.a)(Object(d.a)({},n.headers),{},{Authorization:"Bearer ".concat(this.activeToken.access_token)})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()}]),t}(Yt.AuthSession)),Xt={basic:"last 182 days",advanced:"last 365 days",premium:"last 730 days"},Zt=function(e){Object(g.a)(t,e);var n=Object(b.a)(t);function t(e){var a;return Object(p.a)(this,t),(a=n.call(this,e)).responseGoogle=function(e){e.error?console.log("response.error",e.error):a.props.applySession(e.profileObj)},a}return Object(h.a)(t,[{key:"render",value:function(){var e=(this.props.location.state||{from:{pathname:"/analytics"}}).from,n=(this.props.location.pathname,this.props.userProfile),t="".concat("610722499102-hqo4cena1n453n11mqk88jj5arv4p3ft",".apps.googleusercontent.com");return Object.keys(n).length?o.a.createElement("div",{className:"App"},o.a.createElement(f.a,{to:e})):o.a.createElement(zt,{googleClientId:t,onSuccess:this.responseGoogle,onFailure:this.responseGoogle,usecaseFromUrl:ta()})}}]),t}(o.a.Component),ea=function(e){var n=e.component,t=e.lookerContent,a=e.userProfile,r=e.lookerUser,i=e.lookerHost,l=e.switchLookerUser,s=e.applySession,c=e.lookerUserAttributeBrandOptions,d=e.switchUserAttributeBrand,m=e.usecaseFromUrl,p=e.sdk,h=(e.checkToken,e.corsApiCall),g=Object(u.a)(e,["component","lookerContent","userProfile","lookerUser","lookerHost","switchLookerUser","applySession","lookerUserAttributeBrandOptions","switchUserAttributeBrand","usecaseFromUrl","sdk","checkToken","corsApiCall"]);return o.a.createElement(f.b,Object.assign({},g,{render:function(e){return Object.keys(a).length?o.a.createElement(n,Object.assign({},e,{lookerContent:t,userProfile:a,lookerUser:r,lookerHost:i,switchLookerUser:l,applySession:s,lookerUserAttributeBrandOptions:c,switchUserAttributeBrand:d,usecaseFromUrl:m,sdk:p,corsApiCall:h})):o.a.createElement(f.a,{to:{pathname:"/",state:{from:e.location}}})}}))},na=function(e){Object(g.a)(t,e);var n=Object(b.a)(t);function t(e){var a;return Object(p.a)(this,t),(a=n.call(this,e)).checkSession=Object(m.a)(c.a.mark((function e(){var n,t,o,r,i,l,s,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/readsession",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:t=e.sent,o=t.session.userProfile,r=t.session.lookerUser?t.session.lookerUser:a.state.lookerUser,i=t.session.lookerHost?t.session.lookerHost:a.state.lookerHost,l=t.session.lookerApiToken?t.session.lookerApiToken.api_user_token:"",s=t.session.lookerApiToken.api_token_last_refreshed+1e3*t.session.lookerApiToken.api_user_token.expires_in,o&&Object.keys(o).length&&(m=aa({lookerHost:i,accessToken:l}),a.setState((function(e){return{userProfile:o,lookerUser:Object(d.a)({},e.lookerUser,{external_user_id:o.email,first_name:o.givenName,last_name:o.familyName,permissions:It[r.user_attributes.permission_level]||It.basic,user_attributes:Object(d.a)({},r.user_attributes||{locale:"en_US",country:"USA",brand:"Calvin Klein",permission_level:"basic"})}),lookerHost:i,sdk:m,lookerTokenExpires:s}}),(function(){})));case 12:case"end":return e.stop()}}),e)}))),a.applySession=function(){var e=Object(m.a)(c.a.mark((function e(n){var t,o,r,i,l,s,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Object.keys(n).length){e.next=7;break}return e.next=3,fetch("/endsession",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:e.sent,a.setState({userProfile:{},lookerUser:Object(d.a)({},Qt)}),e.next=19;break;case 7:return e.next=9,fetch("/writesession",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userProfile:n,lookerUser:a.state.lookerUser})});case 9:return t=e.sent,e.next=12,t.json();case 12:o=e.sent,r=o.session.lookerUser?o.session.lookerUser:a.state.lookerUser,i=o.session.lookerHost?o.session.lookerHost:a.state.lookerHost,l=o.session.lookerApiToken?o.session.lookerApiToken.api_user_token:"",s=o.session.lookerApiToken.api_token_last_refreshed+1e3*o.session.lookerApiToken.api_user_token.expires_in,m=aa({lookerHost:i,accessToken:l}),a.setState((function(e){return{userProfile:n,lookerUser:Object(d.a)({},e.lookerUser,{external_user_id:n.email,first_name:n.givenName,last_name:n.familyName,permissions:It[r.user_attributes.permission_level]||It.basic,user_attributes:Object(d.a)({},r.user_attributes||{locale:"en_US",country:"USA",brand:"Calvin Klein",time_horizon:"last 6 months",permission_level:"basic"})}),lookerHost:i,sdk:m,lookerTokenExpires:s}}),(function(){}));case 19:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),a.switchLookerUser=function(e){var n=Object(d.a)({},a.state.lookerUser.user_attributes,{permission_level:e});n.time_horizon=Xt[e],a.setState((function(t){return{lookerUser:Object(d.a)({},t.lookerUser,{permissions:It[e],user_attributes:n})}}),Object(m.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/updatelookeruser",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a.state.lookerUser)});case 2:return n=e.sent,e.next=5,n.json();case 5:e.sent;case 6:case"end":return e.stop()}}),e)}))))},a.switchUserAttributeBrand=function(e){var n=Object(d.a)({},a.state.lookerUser.user_attributes);n.brand=e;var t=ta();a.setState((function(a){return{lookerUser:Object(d.a)({},a.lookerUser,{user_attributes:n,group_ids:[ce[t].groupIds[e.replace("'","")]]})}}),Object(m.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/updatelookeruser",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a.state.lookerUser)});case 2:return n=e.sent,e.next=5,n.json();case 5:e.sent;case 6:case"end":return e.stop()}}),e)}))))},a.corsApiCall=function(){var e=Object(m.a)(c.a.mark((function e(n){var t,o,r=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>1&&void 0!==r[1]?r[1]:[],e.next=3,a.checkToken();case 3:return o=n.apply(void 0,Object(l.a)(t)),e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),a.checkToken=Object(m.a)(c.a.mark((function e(){var n,t,o,r,i,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Date.now()>a.state.lookerTokenExpires)){e.next=12;break}return e.next=3,fetch("/refreshlookertoken",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:t=e.sent,o=t.session.lookerHost?t.session.lookerHost:a.state.lookerHost,r=t.session.lookerApiToken?t.session.lookerApiToken.api_user_token:"",i=t.session.lookerApiToken.api_token_last_refreshed+1e3*t.session.lookerApiToken.api_user_token.expires_in,l=aa({lookerHost:o,accessToken:r}),a.setState({sdk:l,lookerTokenExpires:i});case 12:case"end":return e.stop()}}),e)}))),a.state={userProfile:{},lookerUser:Object(d.a)({},Qt),lookerHost:"",activeUsecase:"",sdk:"",lookerTokenExpires:""},a}return Object(h.a)(t,[{key:"componentDidMount",value:function(){this.checkSession()}},{key:"render",value:function(){var e=this,n=this.state,t=n.userProfile,a=n.lookerContent,r=n.lookerUser,i=n.lookerHost,l=n.sdk,s=ta();return o.a.createElement(y.a,null,o.a.createElement("div",null,o.a.createElement(f.b,{path:"",render:function(n){return o.a.createElement(Zt,Object.assign({},n,{applySession:e.applySession,userProfile:t,lookerUser:r,switchLookerUser:e.switchLookerUser,lookerHost:i}))}}),o.a.createElement(ea,{path:"/analytics",component:Lt,lookerContent:a,userProfile:t,lookerUser:r,applySession:this.applySession,lookerHost:i,switchLookerUser:this.switchLookerUser,lookerUserAttributeBrandOptions:Kt,switchUserAttributeBrand:this.switchUserAttributeBrand,usecaseFromUrl:s,sdk:l,corsApiCall:this.corsApiCall})))}}]),t}(o.a.Component);function ta(){for(var e=Object.keys(ce),n=window.location.href,t=0;t<e.length;t++)if(n.indexOf(e[t])>-1)return e[t];return"atom"}function aa(e){var n=e.accessToken,t=e.lookerHost,a=new Jt(Object(d.a)({},Object(Yt.DefaultSettings)(),{base_url:"https://".concat(t,".looker.com:19999"),accessToken:n}));return new Yt.Looker40SDK(a)}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(na,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},323:function(e,n,t){},369:function(e){e.exports=JSON.parse('{"external_user_id":"","first_name":"","last_name":"","session_length":86400,"force_logout_login":true,"external_group_id":"","group_ids":[4],"permissions":["access_data","see_looks","see_user_dashboards","see_lookml_dashboards","download_with_limit"],"models":["atom_fashion"],"user_attributes":{"locale":"en_US","country":"USA","brand":"Calvin Klein","time_horizon":"last 182 days","permission_level":"basic"}}')},444:function(e,n,t){e.exports=t.p+"static/media/atom_splash_blog.57457a86.jpg"},445:function(e,n,t){e.exports=t.p+"static/media/atom_splash_inventory.6bbb655e.jpg"},446:function(e,n,t){e.exports=t.p+"static/media/atom_splash_trends.dbd4fdc6.jpg"},462:function(e,n,t){e.exports=t.p+"static/media/atom_logo_black.a213ea2a.svg"},566:function(e){e.exports=JSON.parse('[{"label":"Columbia"},{"label":"Calvin Klein"},{"label":"Carhartt"},{"label":"Levi\'s"},{"label":"Dockers"}]')},632:function(e,n,t){e.exports=t(1263)},637:function(e,n,t){},639:function(e,n,t){},67:function(e,n){e.exports={makeid:function(e){for(var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=t.length,o=0;o<e;o++)n+=t.charAt(Math.floor(Math.random()*a));return n},validIdHelper:function(e){return e.replace(/[^a-zA-Z0-9-.#]/g,"")},prettifyString:function(e){var n,t=e.split("_");for(n=0;n<t.length;n++)t[n]=t[n].charAt(0).toUpperCase()+t[n].slice(1);return t.join(" ")},getUrlVars:function(e){for(var n,t={},a=e.slice(e.indexOf("?")+1).split("&"),o=0;o<a.length;o++)t[(n=a[o].split("="))[0]]=n[1];return t},decodeHtml:function(e){var n=document.createElement("textarea");return n.innerHTML=e,n.value}}},84:function(e){e.exports=JSON.parse('{"atom":{"label":"Atom Fashion","vignette":{"name":"Atom","logo_url":"../images/atom_logo.png"},"layout":"right-appbar","demoComponents":[{"type":"splash page","label":"Home","description":"We\'re thrilled to have you on Atom Fashion - the premiere third party fashion marketplace for today\'s leading brands. Throughout this portal you will find a series of analytic content designed to help you maximize your performance.","icon":"fa-home","menuCategory":"home","lookerContent":[{"id":"19","gridWidth":6,"height":160,"type":"welcome","inlineQueries":[{"model":"atom_fashion","view":"order_items","fields":["order_items.total_sale_price","order_items.created_week","products.category"],"pivots":["order_items.created_week"],"fill_fields":["order_items.created_week"],"filters":{"order_items.created_date":"2 weeks ago for 2 weeks"},"filter_expression":null,"sorts":["order_items.total_sale_price desc 1","order_items.created_week 0"],"limit":"1","dynamic_fields":"[{\\"table_calculation\\":\\"change\\",\\"label\\":\\"%25 Change\\",\\"expression\\":\\"(pivot_index(${order_items.total_sale_price},2)-pivot_index(${order_items.total_sale_price},1))/pivot_index(${order_items.total_sale_price},1\\\\n  )\\",\\"value_format\\":null,\\"value_format_name\\":\\"percent_2\\",\\"_kind_hint\\":\\"supermeasure\\",\\"_type_hint\\":\\"number\\"}]"},{"model":"atom_fashion","view":"order_items","fields":["order_items.total_sale_price","order_items.created_week","products.category"],"pivots":["order_items.created_week"],"fill_fields":["order_items.created_week"],"filters":{"order_items.created_date":"2 weeks ago for 2 weeks"},"filter_expression":null,"sorts":["order_items.total_sale_price 1","order_items.created_week 0"],"limit":"1","dynamic_fields":"[{\\"table_calculation\\":\\"change\\",\\"label\\":\\"%25 Change\\",\\"expression\\":\\"(pivot_index(${order_items.total_sale_price},2)-pivot_index(${order_items.total_sale_price},1))/pivot_index(${order_items.total_sale_price},1\\\\n  )\\",\\"value_format\\":null,\\"value_format_name\\":\\"percent_2\\",\\"_kind_hint\\":\\"supermeasure\\",\\"_type_hint\\":\\"number\\"}]"}],"inlineQueriesMap":["best","worst"],"resultFormat":"json"},{"id":"17","gridWidth":6,"height":160,"type":"carousel"},{"id":"18","gridWidth":3,"type":"single value","height":120,"inlineQuery":{"model":"atom_fashion","view":"order_items","fields":["order_items.created_week","order_items.total_gross_margin"],"fill_fields":["order_items.created_week"],"filters":{"order_items.created_date":"12 weeks ago for 12 weeks"},"sorts":["order_items.created_week desc"],"limit":"500","dynamic_fields":"[{\\"table_calculation\\":\\"change\\",\\"label\\":\\"Week over Week %25 Change\\",\\"expression\\":\\"(${order_items.total_gross_margin}-offset(${order_items.total_gross_margin},1))/offset(${order_items.total_gross_margin},1)\\",\\"value_format\\":null,\\"value_format_name\\":\\"percent_2\\",\\"_kind_hint\\":\\"measure\\",\\"_type_hint\\":\\"number\\"}]"},"resultFormat":"json","label":"Revenue by Week","visColor":"#4595EC","chipFormat":"revenue"},{"id":"20","gridWidth":3,"type":"single value","height":120,"inlineQuery":{"model":"atom_fashion","view":"web_events","fields":["events.event_week","events.sessions_count"],"fill_fields":["events.event_week"],"filters":{"events.event_date":"12 weeks ago for 12 weeks"},"sorts":["events.event_week desc"],"limit":"500","dynamic_fields":"[{\\"table_calculation\\":\\"change\\",\\"label\\":\\"%25 Change\\",\\"expression\\":\\"(${events.sessions_count}-offset(${events.sessions_count},1))/offset(${events.sessions_count},1)\\",\\"value_format\\":null,\\"value_format_name\\":\\"percent_2\\",\\"_kind_hint\\":\\"measure\\",\\"_type_hint\\":\\"number\\"}]"},"resultFormat":"json","label":"Visits by Week","visColor":"#F3A759","chipFormat":"integer"},{"id":"21","gridWidth":3,"type":"single value","height":120,"inlineQuery":{"model":"atom_fashion","view":"web_events","fields":["events.event_week","events.bounce_rate"],"fill_fields":["events.event_week"],"filters":{"events.event_date":"12 weeks ago for 12 weeks"},"filter_expression":null,"sorts":["events.event_week desc"],"limit":"500","dynamic_fields":"[{\\"table_calculation\\":\\"change\\",\\"label\\":\\"%25 Change\\",\\"expression\\":\\"(${events.bounce_rate}-offset(${events.bounce_rate},1))/offset(${events.bounce_rate},1)\\",\\"value_format\\":null,\\"value_format_name\\":\\"percent_2\\",\\"_kind_hint\\":\\"measure\\",\\"_type_hint\\":\\"number\\"}]"},"resultFormat":"json","label":"Bounce Rate by Week","visColor":"#E24E3A","chipFormat":"percent"},{"id":"22","gridWidth":3,"type":"single value","height":120,"inlineQuery":{"model":"atom_fashion","view":"web_events","fields":["events.event_week","sessions.average_duration"],"pivots":null,"fill_fields":["events.event_week"],"filters":{"events.event_date":"12 weeks ago for 12 weeks"},"filter_expression":null,"sorts":["events.event_week desc"],"limit":"500","dynamic_fields":"[{\\"table_calculation\\":\\"change\\",\\"label\\":\\"%25 Change\\",\\"expression\\":\\"(${sessions.average_duration}-offset(${sessions.average_duration},1))/offset(${sessions.average_duration},1)\\",\\"value_format\\":null,\\"value_format_name\\":\\"percent_2\\",\\"_kind_hint\\":\\"measure\\",\\"_type_hint\\":\\"number\\"}]"},"resultFormat":"json","label":"Average Time on Site by Week","visColor":"#65AB5A","chipFormat":"integer"},{"gridWidth":8,"height":350,"type":"dashboard","id":"12","slug":"3ytMWYFKKbofCDFkpAG46z","title":"Most Recent Orders"},{"gridWidth":4,"height":350,"type":"popular analysis","vectors":[{"id":"9","type":"thumbnail","resourceType":"dashboard","lookerMethod":"vector_thumbnail","label":"Analytics","gridWidth":"4"},{"id":"5","type":"thumbnail","resourceType":"dashboard","lookerMethod":"vector_thumbnail","label":"Sales","gridWidth":"4"},{"id":"1","type":"thumbnail","resourceType":"dashboard","lookerMethod":"vector_thumbnail","label":"Inventory","gridWidth":"4"}],"label":"Popular analysis"}]},{"type":"simple dashboard","label":"Web Analytics","menuCategory":"marketing","description":"Overview of all your web traffic","icon":"fa-chart-line","lookerContent":[{"type":"dashboard","lookerMethod":"embedDashboard","id":"9","label":"Web Analytics","isNext":false,"theme":"atom_fashion_filters"}]},{"type":"custom filter","label":"Sales Overview","menuCategory":"sales","description":"Overview of all your sales!","icon":"fa-tachometer-alt","lookerContent":[{"type":"dashboard","lookerMethod":"embedDashboard","id":"5","label":"Sales Overview","isNext":true,"filters":[{"label":"Select Category","filterName":"Category","lookerMethod":"runInlineQuery"},{"label":"Select region","filterName":"State Region","lookerMethod":"runInlineQuery"},{"label":"Select Age Range","filterName":"Age","lookerMethod":"runInlineQuery"},{"label":"Lifetime Revenue Tier","filterName":"Lifetime Revenue Tier","lookerMethod":"runInlineQuery"}],"inlineQueries":[{"model":"atom_fashion","view":"order_items","fields":["this_period","last_period","products.category"],"filters":{"order_items.created_date":"60 days ago for 60 days","order_items.count":">5"},"sorts":["products.category"],"limit":500,"dynamic_fields":"[{\\"table_calculation\\":\\"trend\\",\\"label\\":\\"trend\\",\\"expression\\":\\"${this_period} / ${last_period} - 1\\",\\"value_format\\":null,\\"value_format_name\\":null,\\"_kind_hint\\":\\"measure\\",\\"_type_hint\\":\\"number\\"},{\\"measure\\":\\"this_period\\",\\"based_on\\":\\"order_items.total_sale_price\\",\\"type\\":\\"count_distinct\\",\\"label\\":\\"This Period\\",\\"value_format\\":null,\\"value_format_name\\":null,\\"_kind_hint\\":\\"measure\\",\\"_type_hint\\":\\"number\\",\\"filter_expression\\":\\"matches_filter(${order_items.created_date},`30 days ago for 30 days`)\\"},{\\"measure\\":\\"last_period\\",\\"based_on\\":\\"order_items.total_gross_margin\\",\\"label\\":\\"Last Period\\",\\"value_format\\":null,\\"value_format_name\\":null,\\"_kind_hint\\":\\"measure\\",\\"_type_hint\\":\\"number\\",\\"filter_expression\\":\\"matches_filter(${order_items.created_date},`60 days ago for 30 days`)\\"}]","theme":"atom_fashion"},{"model":"atom_fashion","view":"order_items","fields":["users.state_region"],"limit":"500"},{"model":"atom_fashion","view":"order_items","fields":["users.age"],"limit":"500"},{"model":"atom_fashion","view":"order_items","fields":["user_order_facts.lifetime_revenue_tier"],"limit":"500"}],"desiredFilterName":["products.brand","users.state_region","users.age","users.lifetime_revenue_tier"],"filterComponents":["autocomplete","mapfilter","rangeslider","togglebutton"]}]},{"type":"custom filter","label":"Inventory Overview","menuCategory":"operations","description":"Overview of your inventory","icon":"fa-tshirt","lookerContent":[{"type":"dashboard","lookerMethod":"embedDashboard","id":"1","isNext":false,"label":"Inventory Overview","filters":[{"label":"Select Product Name","filterName":"Product Name","lookerMethod":"runInlineQuery"}],"inlineQueries":[{"model":"atom_fashion","view":"order_items","fields":["products.item_name"],"query_timezone":"America/Los_Angeles"}],"desiredFilterNames":["products.brand"],"filterComponents":["autocomplete"],"dynamicFieldLookUp":{"Inventory":["Inventory On Hand","# of Items on Hand","Most Popular Out of Stock Items","Overstocked Items","Aging Inventory"],"Orders":["# Orders Processing","Total Amount Processing","# Orders In Transit","Order Shipment Status","Open Orders to be Shipped"]},"dynamicThemeMode":{"title":"gfy"},"dynamicThemeFont":{"title":"gfy"},"dynamicVisConfig":{"title":"gfy","colors":{"#2d4266":["#2d4266","#416098","#5780cd","#6391e8"],"#43606b":["#43606b","#4a7880","#66a99d","#a3d9a9"],"#414c67":["#414c67","#64689b","#9682cd","#b48ee4"]},"series_cell_visualizations":{"#2d4266":{"palette_id":"a3425339-dbbb-2584-0e23-38ed7d87ed50","collection_id":"b43731d5-dc87-4a8e-b807-635bef3948e7","custom_colors":["#6391e8","#2d4266"]},"#43606b":{"palette_id":"c5182d25-00a3-cd71-eed3-4056299dd78f","collection_id":"atom-fashion","custom_colors":["#a3d9a9","#43606b"]},"#414c67":{"palette_id":"7e059aa1-0d23-dab1-dbf9-a751ab7f54fb","collection_id":"b43731d5-dc87-4a8e-b807-635bef3948e7","custom_colors":["#b48ee4","#414c67"]}}},"theme":"light_arial"}]},{"type":"custom vis","label":"Sales Calendar","menuCategory":"sales","description":"Ayeeeeeee","icon":"fa-calendar","lookerContent":[{"type":"custom vis","lookerMethod":"runInlineQuery","label":"Sales Calendar","inlineQuery":{"model":"atom_fashion","view":"order_items","fields":["order_items.created_date","products.category","order_items.order_count","order_items.total_sale_price"],"query_timezone":"America/Los_Angeles","limit":"-1"},"desiredFilterName":"products.brand","desiredFields":["order_items.order_count","order_items.total_sale_price"],"resultFormat":"json"}]},{"type":"report builder","label":"Saved Reports","menuCategory":"operations","description":"Give users the ability to explore existing reports as well as create new ones all from within your application","icon":"fa-sticky-note","lookerContent":[{"type":"folder","id":"14","label":"Saved Reports"},{"type":"explore","id":"atom_fashion::order_items","label":"Create New Report"}]},{"type":"query builder","label":"Query Builder","menuCategory":"operations","description":"Enable business users to self serve on data and answer their own questions","icon":"fa-search","lookerContent":[{"type":"explorelite","id":"explorelite","label":"Build & Run Queries","queryBody":{"model":"atom_fashion","view":"order_items","fields":["order_items.created_month","order_items.created_date","order_items.created_week","users.city","users.state","users.country","products.category_type","products.category","products.brand","order_items.total_sale_price","order_items.total_tax_amount"],"filters":{"users.state":"","users.city":"","users.country":"","order_items.created_date":"6 months"},"limit":500},"resultFormat":"json_detail","fieldType":{"order_items.created_month":"dimension","order_items.created_date":"dimension","order_items.created_week":"dimension","users.city":"dimension","users.state":"dimension","users.country":"dimension","products.category_type":"dimension","products.category":"dimension","products.brand":"dimension","order_items.total_sale_price":"measure","order_items.total_tax_amount":"measure"},"filterType":{"users.state":"string","users.city":"string","users.country":"string","order_items.created_date":"date"}}]}],"groupIds":{"Calvin Klein":4,"Carhartt":5,"Columbia":6,"Levis":7,"Dockers":8}},"vidly":{"label":"Vidly Media","vignette":{"name":"Vidly","logo":""},"layout":"right-appbar","demoComponents":[]}}')},92:function(e){e.exports=JSON.parse('{"basic":["access_data","see_looks","see_user_dashboards","see_lookml_dashboards","download_with_limit"],"advanced":["access_data","see_looks","see_user_dashboards","see_lookml_dashboards","download_with_limit","schedule_look_emails","schedule_external_look_emails","create_alerts","see_drill_overlay"],"premium":["access_data","see_looks","see_user_dashboards","see_lookml_dashboards","download_with_limit","schedule_look_emails","schedule_external_look_emails","create_alerts","see_drill_overlay","save_content","embed_browse_spaces","schedule_look_emails","send_to_sftp","send_to_s3","send_outgoing_webhook","send_to_integration","download_without_limit","explore"]}')},998:function(e,n){},999:function(e,n){}},[[632,1,2]]]);
//# sourceMappingURL=main.58cb1f81.chunk.js.map